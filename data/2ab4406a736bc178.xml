<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Ian Henry</title><description>Ian Henry's blog.</description><link>https://ianthehenry.com/</link><atom:link href="https://ianthehenry.com/feed.xml" rel="self" type="application/rss+xml"/><item><title>Visualizing Delaunay Triangulation</title><description>&lt;p>Take a look at this:&lt;/p>
&lt;p class="canvas-container">&lt;canvas id="bad-triangulation" width="384" height="256">&lt;a class="image-container" href="https://ianthehenry.com/posts/delaunay/preview.e48ae4ff4031e60ea3a2ff790d6225cee4f48afb22940bb559d5d0276c3e4eb0.png">&lt;picture>
&lt;img
class="pixel-art"
src="https://ianthehenry.com/posts/delaunay/preview.e48ae4ff4031e60ea3a2ff790d6225cee4f48afb22940bb559d5d0276c3e4eb0.png"
width="768"
height="512"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAIAAAD38zoCAAAAa0lEQVR4nBTFwQ3CMAwFUP9vO2mlIg6wA/svxo1SxY6DOD0DQJqI/KW77xFn5oXWj5lj2&amp;#43;5UN&amp;#43;sZV1UCUFIfzxfVAX7Pd8Q5Z7jv6P1WNc26iJBWlaptjA9E4L63doBcVQKRtdaqXwAAAP//GaEpsQQ6Fh4AAAAASUVORK5CYII=);"
/>&lt;/a>
&lt;/canvas>&lt;/p>
&lt;p>This is a triangulation of a set of random points, such that all the points are connected to one another, all of the faces are triangles, and the edges include the convex hull of the points.&lt;/p>
&lt;p>I would like to claim that this is not a very &amp;ldquo;good&amp;rdquo; triangulation. This algorithm tends to produce lots of long, slivery triangles, and a really uneven distribution of edge counts across different vertices &amp;ndash; some vertices have &lt;em>way&lt;/em> more edges than they need to.&lt;/p>
&lt;p>Here&amp;rsquo;s a different triangulation. These are the exact same points, but I triangulated them smarter:&lt;/p>
&lt;p class="canvas-container">&lt;canvas id="good-triangulation" width="384" height="256" class="interactive">&lt;/canvas>&lt;/p>
&lt;p>Isn&amp;rsquo;t that better? (Click to compare!)&lt;/p>
&lt;p>Depending on your dice rolls you might still have a few slivers, usually around the outer perimeter, but I&amp;rsquo;m willing to bet that it&amp;rsquo;s a noticeable improvement over the first attempt.&lt;/p>
&lt;p>This triangulation is called the &lt;em>Delaunay triangulation&lt;/em>, and I would like to claim that it is a &lt;em>very good&lt;/em> triangulation. It is, in fact, the &lt;em>best possible&lt;/em> triangulation, for some definitions of &amp;ldquo;best.&amp;rdquo;&lt;/p>
&lt;h1 id="why-should-i-a-busy-person-with-important-responsibilities-care-about-triangles">Why should I, a busy person with important responsibilities, care about triangles?&lt;/h1>
&lt;p>Okay, right, good question. You&amp;rsquo;ve made it this far in life without triangulating anything; why should you start now?&lt;/p>
&lt;p>There are some obvious applications of triangulation algorithms in computer graphics, where everything is made out of triangles, but you knew that already and you are still &lt;em>unmoved&lt;/em>.&lt;/p>
&lt;p>Let&amp;rsquo;s try something else.&lt;/p>
&lt;p>One textbook example of a non-graphics application of the Delaunay triangulation is &lt;em>interpolating spatial data&lt;/em>.&lt;/p>
&lt;p>Pretend, for a moment, that you&amp;rsquo;re a surveyor, and you&amp;rsquo;ve just finished measuring the elevation of a bunch of discrete points in some area. You sling your weird tripod thingy over your shoulder, and get ready to leave for the first vacation you&amp;rsquo;ve been able to take with your son since Terence left &amp;ndash; when your boss appears at your door.&lt;/p>
&lt;p>&amp;ldquo;What&amp;rsquo;s the elevation three clicks south of the north ridge, or however surveyors talk?&amp;rdquo; she asks.&lt;/p>
&lt;p>You glance down at the oversized roll of mapping paper (?) on your desk, but you already know what you&amp;rsquo;ll find: you didn&amp;rsquo;t take a measurement three clicks south of the north ridge. But you &lt;em>did&lt;/em> measure a few points nearby. &lt;em>Perhaps&lt;/em>, you think, &lt;em>I can construct a triangulation of these points, and then map it to a three-dimensional mesh, and use that to interpolate the elevations between nearby points.&lt;/em>&lt;/p>
&lt;p>You call your son to tell him that you&amp;rsquo;ll be a little late &amp;ndash; it&amp;rsquo;s 1998 in this situation; texting isn&amp;rsquo;t a thing yet &amp;ndash; and get to work.&lt;/p>
&lt;p>But after the montage ends, you look upon your work, and find&amp;hellip; oh.&lt;/p>
&lt;p class="canvas-container">&lt;canvas id="bad-interpolation" width="384" height="256">&lt;/canvas>&lt;/p>
&lt;p>Well that&amp;rsquo;s not going to work.&lt;/p>
&lt;p>You pick up the phone to make another difficult call, but as your finger hovers over the rotary dial, you suddenly remember an incredibly long blog post that you read once &amp;ndash; or that you will read; it&amp;rsquo;s 1998 still; this blog post hasn&amp;rsquo;t been published yet; it&amp;rsquo;s too late to change it now; just go with it &amp;ndash; and you put the receiver back on the cradle.&lt;/p>
&lt;p>And then you construct the &lt;em>Delaunay&lt;/em> triangulation of the exact same points:&lt;/p>
&lt;p class="canvas-container">&lt;canvas id="good-interpolation" width="384" height="256">&lt;/canvas>&lt;/p>
&lt;p>(Click to add sheep, obviously.)&lt;/p>
&lt;p>You shoot your boss a quick fax and get ready to hit the road. But as you stand up to leave, you see her standing in your doorway yet again.&lt;/p>
&lt;p>&amp;ldquo;I just got off the corded phone with President Clinton,&amp;rdquo; she says. &amp;ldquo;Your triangles are so good that he&amp;rsquo;s appointing you Surveyor General. When you get back from vacation, &lt;em>I&amp;rsquo;ll&lt;/em> be reporting to &lt;em>you&lt;/em>.&amp;rdquo;&lt;/p>
&lt;p>So that&amp;rsquo;s the first reason to learn about Delaunay triangulation.&lt;/p>
&lt;p>Here&amp;rsquo;s another one: did this idea of interpolating &amp;ldquo;nearby&amp;rdquo; points remind you of anything else? Perhaps&amp;hellip; the &lt;a href="https://en.wikipedia.org/wiki/Voronoi_diagram">Voronoi diagram&lt;/a>? If so, you are smart and attractive: one easy way to construct the Voronoi diagram is to calculate the Delaunay triangulation, because the Delaunay triangulation is the &lt;em>dual&lt;/em> of the Voronoi diagram.&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup> Which is neat if you know what &amp;ldquo;dual&amp;rdquo; means. If you don&amp;rsquo;t know what dual means, keep reading! We&amp;rsquo;re going to talk about duals a lot later on.&lt;/p>
&lt;p>So those are like&amp;hellip; some &lt;em>good&lt;/em> reasons to learn about Delaunay triangulations.&lt;/p>
&lt;p>But I did not learn about Delaunay triangulations for a good reason.&lt;/p>
&lt;p>I learned about Delaunay triangulations for the dumbest reason you can possibly imagine.&lt;/p>
&lt;p>Here, it&amp;rsquo;s easier if I just show you.&lt;/p>
&lt;p class="button-container">&lt;input class="smashable" type="button" value="what if you pressed the button" />&lt;/p>
&lt;p>I heard the phrase &amp;ldquo;smash that subscribe button&amp;rdquo; once, and after a brief moment&amp;rsquo;s existential crisis as I realized that I am now old enough that I recoil from the parlance of youth, I thought it would be funny to make a subscribe button that you could smash.&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>&lt;/p>
&lt;p>In case you already smashed that one, here&amp;rsquo;s another:&lt;/p>
&lt;p class="button-container">&lt;input class="smashable" type="button" value="randomly generated quip" data-regrow=true data-randomize=true />&lt;/p>
&lt;p>It&amp;rsquo;s kinda fun, right?&lt;/p>
&lt;p>I&amp;rsquo;ve been meaning to add an email subscription button to my website for a while, and the thought of implementing this visual gag was enough of an incentive for me to actually get around to it.&lt;/p>
&lt;p>I thought that a decent way to randomly fracture a shape into polygons would be to compute the &lt;a href="https://en.wikipedia.org/wiki/Gabriel_graph">Gabriel graph&lt;/a> of a set of random points inside the button.&lt;sup id="fnref:3">&lt;a href="#fn:3" class="footnote-ref" role="doc-noteref">3&lt;/a>&lt;/sup> And the easiest way to compute the Gabriel graph is to compute the Delaunay triangulation and then remove a few edges from it. So that&amp;rsquo;s why I started looking into this in the first place.&lt;/p>
&lt;p class="button-container">&lt;input class="smashable" type="button" value="Let's see that in slow motion" data-regrow=true data-rate=0.2 />&lt;/p>
&lt;p>But it was pretty hard! Although it&amp;rsquo;s easy to find explanations of Delaunay triangulation algorithms in vague, mathematical terms, I couldn&amp;rsquo;t find very many resources describing how to actually &lt;em>implement&lt;/em> them. Like, I&amp;rsquo;m &lt;em>trying&lt;/em> to construct an infinitely large triangle, but my computer keeps catching on fire &amp;ndash; what do I do now, Professor Triangle?&lt;/p>
&lt;p>So this is going to be an explanation for the &amp;ldquo;working programmer.&amp;rdquo; I&amp;rsquo;m going to describe a deceptively simple algorithm for Delaunay triangulation, and then the actual &lt;em>edge&lt;/em>-cases that you have to think about when you try to implement it. And I&amp;rsquo;m going to do it without ever using the word &amp;ldquo;manifold.&amp;rdquo;&lt;/p>
&lt;p>Starting&amp;hellip; now.&lt;/p>
&lt;h1 id="what-is-a-delaunay-triangulation">What is a Delaunay triangulation?&lt;/h1>
&lt;p>The Delaunay triangulation is the triangulation that &amp;ldquo;maximizes the minimum angle in all of the triangles.&amp;rdquo;&lt;/p>
&lt;p>Here&amp;rsquo;s, it&amp;rsquo;s easier if we look at an example:&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/delaunay/fig1_hu39647200ef58c71feda4cd0ee9e9b4ef_120237_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/delaunay/fig1_hu39647200ef58c71feda4cd0ee9e9b4ef_120237_768x768_fit_q75_h3_box_3.webp 768w, https://ianthehenry.com/posts/delaunay/fig1_hu39647200ef58c71feda4cd0ee9e9b4ef_120237_1536x1536_fit_q75_h3_box_3.webp 1536w, https://ianthehenry.com/posts/delaunay/fig1_hu39647200ef58c71feda4cd0ee9e9b4ef_120237_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/delaunay/fig1_hu39647200ef58c71feda4cd0ee9e9b4ef_120237_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/delaunay/fig1_hu39647200ef58c71feda4cd0ee9e9b4ef_120237_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/delaunay/fig1_hu39647200ef58c71feda4cd0ee9e9b4ef_120237_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/delaunay/fig1_hu39647200ef58c71feda4cd0ee9e9b4ef_120237_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/delaunay/fig1_hu39647200ef58c71feda4cd0ee9e9b4ef_120237_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="233"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAIAAADq9gq6AAAANElEQVR4nBzAixGAMAwC0ATws/&amp;#43;22iDe9Qmb0F39zJz34fUlgYCLrOrXJullCEn&amp;#43;AAAA//9kCxIgBgPQ1gAAAABJRU5ErkJggg==);"
/>&lt;/picture>&lt;/a>
&lt;p>Obviously all the angles of a triangle add up to 180°, but the triangles on the left get there with two very acute angles and one obtuse angle, while the triangles on the right have only acute angles &amp;ndash; but they are not &lt;em>as&lt;/em> acute as the acute angles on the left.&lt;/p>
&lt;p>These are the only two triangulations of these four points, so the one on the right is the &lt;em>optimal&lt;/em> triangulation according to our criteria &amp;ndash; in other words, it is the &lt;em>Delaunay triangulation&lt;/em> of this point set.&lt;/p>
&lt;p>Here&amp;rsquo;s an equivalent, but more useful definition: the Delaunay triangulation is the triangulation such that, if you circumscribe a circle around every triangle, none of those circles will contain any other points.&lt;/p>
&lt;p class="canvas-container">&lt;canvas id="circle-proof" width="384" height="256" class="interactive">&lt;/canvas>&lt;/p>
&lt;p>(Click or tap to pause that, if the flashing is distracting.)&lt;/p>
&lt;p>I&amp;rsquo;m going to make a potentially surprising claim: this is the &lt;em>only&lt;/em> such triangulation of these points that satisfies that property. If you were to change any single edge &amp;ndash; rearrange any of these triangles in &lt;em>any&lt;/em> way &amp;ndash; you would have at least one point inside another triangle&amp;rsquo;s circle territory.&lt;sup id="fnref:4">&lt;a href="#fn:4" class="footnote-ref" role="doc-noteref">4&lt;/a>&lt;/sup>&lt;/p>
&lt;p>It&amp;rsquo;s worth noting that this is a &lt;em>global&lt;/em> property of the triangulation &amp;ndash; it&amp;rsquo;s a statement about every triangle and every point at the same time. Global properties are expensive to check and expensive to change, so we&amp;rsquo;d much rather focus on a &lt;em>local&lt;/em> property during our algorithm.&lt;/p>
&lt;p>So let&amp;rsquo;s consider a single edge on the triangulation. Specifically an interior edge, not an edge around the perimeter.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/delaunay/fig2_hudc9ece0c9ae65c64fec5e1fa0ddcd5cc_164727_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/delaunay/fig2_hudc9ece0c9ae65c64fec5e1fa0ddcd5cc_164727_768x768_fit_q75_h3_box_3.webp 768w, https://ianthehenry.com/posts/delaunay/fig2_hudc9ece0c9ae65c64fec5e1fa0ddcd5cc_164727_1536x1536_fit_q75_h3_box_3.webp 1536w, https://ianthehenry.com/posts/delaunay/fig2_hudc9ece0c9ae65c64fec5e1fa0ddcd5cc_164727_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/delaunay/fig2_hudc9ece0c9ae65c64fec5e1fa0ddcd5cc_164727_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/delaunay/fig2_hudc9ece0c9ae65c64fec5e1fa0ddcd5cc_164727_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/delaunay/fig2_hudc9ece0c9ae65c64fec5e1fa0ddcd5cc_164727_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/delaunay/fig2_hudc9ece0c9ae65c64fec5e1fa0ddcd5cc_164727_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/delaunay/fig2_hudc9ece0c9ae65c64fec5e1fa0ddcd5cc_164727_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="384"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r&amp;#43;mnAAAAS0lEQVR4nBTJyxHCMBADUH02mEn/5WothvMbAJLOOfdeAEkktaVtSSTRBbELACQlyfbuej4t3/c7M0n4PE/bP9gk2yaZmV8AAAD//5/9IVuFCfg9AAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;p>There are two triangles on either side of this edge. Pick one at random, and draw a circle around it.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/delaunay/fig3_hu9dc11d71013b93ca08e26f3f42246ce6_230970_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/delaunay/fig3_hu9dc11d71013b93ca08e26f3f42246ce6_230970_768x768_fit_q75_h3_box_3.webp 768w, https://ianthehenry.com/posts/delaunay/fig3_hu9dc11d71013b93ca08e26f3f42246ce6_230970_1536x1536_fit_q75_h3_box_3.webp 1536w, https://ianthehenry.com/posts/delaunay/fig3_hu9dc11d71013b93ca08e26f3f42246ce6_230970_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/delaunay/fig3_hu9dc11d71013b93ca08e26f3f42246ce6_230970_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/delaunay/fig3_hu9dc11d71013b93ca08e26f3f42246ce6_230970_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/delaunay/fig3_hu9dc11d71013b93ca08e26f3f42246ce6_230970_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/delaunay/fig3_hu9dc11d71013b93ca08e26f3f42246ce6_230970_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/delaunay/fig3_hu9dc11d71013b93ca08e26f3f42246ce6_230970_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="384"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r&amp;#43;mnAAAAVklEQVR4nBTLURLCIAwE0GR3a9XR6f0vCkVI4vD&amp;#43;n8wMwHW9MzKyev8BqCon&amp;#43;f2c91gZAfpxqLXp7tiIOYN6RNjreUpaa5Gk6PeYu7tbZetD0j8AAP//vv8oLnYLmZEAAAAASUVORK5CYII=);"
/>&lt;/picture>&lt;/a>
&lt;p>Now check if the tip of the other triangle adjacent to this edge lies inside or outside of this circle. If it lies outside the circle, then this &lt;em>edge&lt;/em> is &amp;ldquo;locally Delaunay.&amp;rdquo; If it lies inside the circle, then the edge is not &amp;ldquo;locally Delaunay.&amp;rdquo;&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/delaunay/fig4_hu9dc11d71013b93ca08e26f3f42246ce6_238759_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/delaunay/fig4_hu9dc11d71013b93ca08e26f3f42246ce6_238759_768x768_fit_q75_h3_box_3.webp 768w, https://ianthehenry.com/posts/delaunay/fig4_hu9dc11d71013b93ca08e26f3f42246ce6_238759_1536x1536_fit_q75_h3_box_3.webp 1536w, https://ianthehenry.com/posts/delaunay/fig4_hu9dc11d71013b93ca08e26f3f42246ce6_238759_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/delaunay/fig4_hu9dc11d71013b93ca08e26f3f42246ce6_238759_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/delaunay/fig4_hu9dc11d71013b93ca08e26f3f42246ce6_238759_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/delaunay/fig4_hu9dc11d71013b93ca08e26f3f42246ce6_238759_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/delaunay/fig4_hu9dc11d71013b93ca08e26f3f42246ce6_238759_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/delaunay/fig4_hu9dc11d71013b93ca08e26f3f42246ce6_238759_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="384"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r&amp;#43;mnAAAAVklEQVR4nBTAAQ6DMAgFUOB/42bWeP&amp;#43;LtrYUWHwUETO77ysjI2uMZWZVpQDa73zmzgiDHgd7d1W1F8w9Wrsi5Ps5Se69AYDQZ/ryUFWp7GOS/AcAAP//wekoOlrvt54AAAAASUVORK5CYII=);"
/>&lt;/picture>&lt;/a>
&lt;p>In this case, the point is very much inside the circle, so we know that this is a &lt;em>bad&lt;/em> edge. But if we then &lt;em>flip&lt;/em> the edge so that it connects the other two points of our quadrangle, then this flipped edge is guaranteed to be locally Delaunay:&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/delaunay/fig5_hucb02c66aee6f1a234ef86502f7cbc8bd_206555_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/delaunay/fig5_hucb02c66aee6f1a234ef86502f7cbc8bd_206555_768x768_fit_q75_h3_box_3.webp 768w, https://ianthehenry.com/posts/delaunay/fig5_hucb02c66aee6f1a234ef86502f7cbc8bd_206555_1536x1536_fit_q75_h3_box_3.webp 1536w, https://ianthehenry.com/posts/delaunay/fig5_hucb02c66aee6f1a234ef86502f7cbc8bd_206555_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/delaunay/fig5_hucb02c66aee6f1a234ef86502f7cbc8bd_206555_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/delaunay/fig5_hucb02c66aee6f1a234ef86502f7cbc8bd_206555_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/delaunay/fig5_hucb02c66aee6f1a234ef86502f7cbc8bd_206555_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/delaunay/fig5_hucb02c66aee6f1a234ef86502f7cbc8bd_206555_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/delaunay/fig5_hucb02c66aee6f1a234ef86502f7cbc8bd_206555_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="384"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r&amp;#43;mnAAAAVElEQVR4nBTKWwpCMQwE0MlkUqsouP99ClrykPt/HADJ1/uJsdte3SOJpLk7SQAmYBBL388xM5J09&amp;#43;6&amp;#43;P3bnxSVlpkXEzFSVpNjKU&amp;#43;d3JP0DAAD//y8kHZqGZL2eAAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;p>Notice that there might be &lt;em>other&lt;/em> points that lie inside this circle that we &lt;em>didn&amp;rsquo;t&lt;/em> check.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/delaunay/fig6_hucb02c66aee6f1a234ef86502f7cbc8bd_225291_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/delaunay/fig6_hucb02c66aee6f1a234ef86502f7cbc8bd_225291_768x768_fit_q75_h3_box_3.webp 768w, https://ianthehenry.com/posts/delaunay/fig6_hucb02c66aee6f1a234ef86502f7cbc8bd_225291_1536x1536_fit_q75_h3_box_3.webp 1536w, https://ianthehenry.com/posts/delaunay/fig6_hucb02c66aee6f1a234ef86502f7cbc8bd_225291_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/delaunay/fig6_hucb02c66aee6f1a234ef86502f7cbc8bd_225291_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/delaunay/fig6_hucb02c66aee6f1a234ef86502f7cbc8bd_225291_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/delaunay/fig6_hucb02c66aee6f1a234ef86502f7cbc8bd_225291_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/delaunay/fig6_hucb02c66aee6f1a234ef86502f7cbc8bd_225291_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/delaunay/fig6_hucb02c66aee6f1a234ef86502f7cbc8bd_225291_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="384"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r&amp;#43;mnAAAAVElEQVR4nATAUQqCMQwD4CRNW&amp;#43;GfoA/i/Q8piIzOLwBIuj8WDvtWM8e2JEaEJAA0cJDl7&amp;#43;dHUpIiYmaudVnubtt7b2SmbZKZ&amp;#43;Xo/qwuA7X8AAAD//zcDDzfH6i9TAAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;p>Because we only checked &lt;em>local&lt;/em> Delaunayness, which is only concerned with this one particular point on the other side of the edge.&lt;/p>
&lt;p>But here&amp;rsquo;s the trick: as long as &lt;em>every edge&lt;/em> of the triangulation is locally Delaunay, the &lt;em>entire triangulation&lt;/em> is a Delaunay triangulation. If this were a computational geometry class we&amp;rsquo;d spend the next ten minutes proving that statement, but for now I&amp;rsquo;ll just ask you to trust me on it.&lt;/p>
&lt;p>Okay. So now that we know these things, we can start to imagine an algorithm. We want to make a triangulation such that all edges are &amp;ldquo;locally Delaunay.&amp;rdquo; If we started with &lt;em>any&lt;/em> triangulation, we could just loop over all the edges, flipping any edges that are not locally Delaunay, and repeat until we don&amp;rsquo;t find any edges that need to be flipped.&lt;/p>
&lt;p>Would that work? Or is there a chance that we&amp;rsquo;d get into an infinite loop, repeatedly flipping and un-flipping edges due to some weird complicated cycle? It&amp;rsquo;s not obvious to me that this is the case, but apparently it &lt;em>does&lt;/em> work &amp;ndash; but only in two dimensions! &amp;ndash; and will eventually terminate after O(n&lt;sup>2&lt;/sup>) flips.&lt;/p>
&lt;p>But we can do better.&lt;/p>
&lt;h1 id="guibas--stolfis-incremental-triangulation-algorithm">Guibas &amp;amp; Stolfi&amp;rsquo;s incremental triangulation algorithm&lt;/h1>
&lt;p>There are several &amp;ldquo;better&amp;rdquo; algorithms, but the one I&amp;rsquo;m going to describe comes from Guibas &amp;amp; Stolfi&amp;rsquo;s seminal 1985 page-turner &lt;a href="https://dl.acm.org/doi/10.1145/282918.282923">&amp;ldquo;Primitives for the Manipulation of General Subdivisions and the Computation of Voronoi Diagrams.&amp;quot;&lt;/a>&lt;/p>
&lt;p>It&amp;rsquo;s an incremental algorithm, which means that you can start triangulating something even if you don&amp;rsquo;t know all of the points up-front, or you can use it to add new points to an existing Delaunay triangulation without having to re-triangulate it from scratch.&lt;/p>
&lt;p>It&amp;rsquo;s the most popular algorithm that I came across, probably because it&amp;rsquo;s conceptually very easy to understand it.&lt;sup id="fnref:5">&lt;a href="#fn:5" class="footnote-ref" role="doc-noteref">5&lt;/a>&lt;/sup> But for all the explanations of it that exist on The Internet, I could not find a &lt;em>single&lt;/em> resource that actually explains it in sufficient detail that you could go write the code for it! I had to cobble an understanding together from the original paper, lecture notes, actual lectures on YouTube &amp;ndash; and ultimately by sitting down and working out some details myself.&lt;/p>
&lt;p>So I&amp;rsquo;m going to try to correct that here.&lt;/p>
&lt;p>But before I describe the algorithm, let me show it to you. You already know about &amp;ldquo;locally Delaunay&amp;rdquo; edges, which is the only real trick here &amp;ndash; see if that&amp;rsquo;s sufficient to work out what the algorithm is doing.&lt;/p>
&lt;p>Click to start/stop the animation, or drag the scrubber to move frame-by-frame.&lt;/p>
&lt;p class="canvas-container">&lt;canvas id="example-with-bounding-triangle" width="384" height="256" class="interactive">&lt;/canvas>&lt;/p>
&lt;p class="slideshow-controls">&lt;button data-action="pause">❙❙&lt;/button>&lt;button data-action="play">▶&lt;/button>&lt;button data-action="fast">▶▶&lt;/button>&lt;input type="range" class="scrubber" value="0" min="0" max="0" />&lt;/p>
&lt;p>Okay, so at a high level, the algorithm is deceptively simple:&lt;/p>
&lt;p>Start with a single &amp;ldquo;infinitely large&amp;rdquo; triangle &amp;ndash; although note that, in tonight&amp;rsquo;s performance, infinitely large triangle will be portrayed by appropriately-sized finite triangle, in order to make the visualization easier to understand.&lt;/p>
&lt;p>Next, loop through your points, and add them into the triangulation one-by-one. Notice that our single giant triangle is, trivially, a valid Delaunay triangulation, which is a precondition that will hold at the beginning of every iteration.&lt;/p>
&lt;p>Every time you add a point, split the triangle that contains it into three new triangles, and then check the locally Delaunay condition. You know that you &lt;em>started&lt;/em> with a valid Delaunay triangulation, so you only have to look at the edges immediately surrounding the point that you added &amp;ndash; the rest of the edges are already good. Flip any edges that are not locally Delaunay, and then check the edges adjacent to those flipped edges, because the act of flipping might have made them invalid. Then once you&amp;rsquo;re done checking and potentially flipping all of the &amp;ldquo;dirty&amp;rdquo; edges, you&amp;rsquo;re done! You have a valid Delaunay triangulation once again, and you&amp;rsquo;re ready for the next point.&lt;/p>
&lt;p>Once you run out of points, just remove the infinitely large outer triangle &amp;ndash; and the edges connected to it &amp;ndash; and you have your final triangulation.&lt;/p>
&lt;p>Easy, right?&lt;/p>
&lt;h1 id="no-youve-used-the-phrase-deceptively-simple-twice-already">no; you&amp;rsquo;ve used the phrase &amp;ldquo;deceptively simple&amp;rdquo; twice already&lt;/h1>
&lt;p>Right. So that explanation might be sufficient if you&amp;rsquo;re a mathematician, but if you actually tried to write the code for this, you&amp;rsquo;ll quickly run into questions like the following:&lt;/p>
&lt;ol>
&lt;li>I can&amp;rsquo;t actually construct an infinitely large bounding triangle &amp;ndash; is it okay if I just construct a triangle large enough that it contains all of my points?&lt;/li>
&lt;li>How am I supposed to find the triangle that contains my new point?&lt;/li>
&lt;li>What if the new point lies on the edge of an existing triangle?&lt;/li>
&lt;li>How am I supposed to do this &amp;ldquo;circle test&amp;rdquo; in the first place?&lt;/li>
&lt;li>What edges do I actually need to check, once I&amp;rsquo;ve added my new edges?&lt;/li>
&lt;li>Wait, how do I &amp;ldquo;flip&amp;rdquo; edges?&lt;/li>
&lt;li>Wait, how do I even &lt;em>model&lt;/em> edges? How do you even represent triangulations on a computer? I thought I could just model this as a graph, with vertices and edges and pointers, but it seems like I need to keep track of faces as well, and somehow this is a fundamentally different sort of thing than I&amp;rsquo;ve ever encountered before?&lt;/li>
&lt;/ol>
&lt;p>Well, those were the questions I had, anyway.&lt;/p>
&lt;p>And now I have the answers.&lt;/p>
&lt;p>Let&amp;rsquo;s start with (3) because (3) is easy: if a point falls on an existing edge, you want to delete the edge, then create &lt;em>four&lt;/em> new triangles instead of the normal three. The odds of this happening in a randomly generated point set is astronomically low, so here&amp;rsquo;s a hand-picked example that demonstrates what this looks like:&lt;sup id="fnref:6">&lt;a href="#fn:6" class="footnote-ref" role="doc-noteref">6&lt;/a>&lt;/sup>&lt;/p>
&lt;p class="canvas-container">&lt;canvas id="quincunx" width="384" height="256" class="interactive">&lt;/canvas>&lt;/p>
&lt;p class="slideshow-controls">&lt;button data-action="pause">❙❙&lt;/button>&lt;button data-action="play">▶&lt;/button>&lt;button data-action="fast">▶▶&lt;/button>&lt;input type="range" class="scrubber" value="0" min="0" max="0" />&lt;/p>
&lt;p>This prompts a new question &amp;ndash; &amp;ldquo;how do I delete an edge?&amp;rdquo; &amp;ndash; but we&amp;rsquo;ll answer that at the same time we figure out how to flip edges.&lt;/p>
&lt;aside>
&lt;p>Update! A subtle bug!&lt;/p>
&lt;p>When I first published this post, I was only checking one of the edges of the triangle containing the point in question, which sounds dumb but is somewhat natural due to how the &amp;ldquo;find enclosing triangle&amp;rdquo; step works: you don&amp;rsquo;t actually find a &lt;em>triangle&lt;/em>, you find a &lt;em>representative edge&lt;/em> of the triangle, and I was only checking for an intersection with that &amp;ldquo;representative edge.&amp;rdquo; But the point might fall onto any one of the other edges. So&amp;hellip; don&amp;rsquo;t do that! Check all the edges! It&amp;rsquo;s really hard to write test cases for this sort of thing!&lt;/p>
&lt;/aside>
&lt;p>The rest of the questions have&amp;hellip; slightly more involved answers.&lt;/p>
&lt;p>So let&amp;rsquo;s start with a fun one.&lt;/p>
&lt;h1 id="how-to-check-if-a-point-is-inside-a-circle">How to check if a point is inside a circle&lt;/h1>
&lt;p>It&amp;rsquo;s very easy to check if a point is in a circle if you know the circle&amp;rsquo;s radius and center &amp;ndash; you compare the distance from the point to the center of the circle against the circle&amp;rsquo;s radius.&lt;sup id="fnref:7">&lt;a href="#fn:7" class="footnote-ref" role="doc-noteref">7&lt;/a>&lt;/sup> But we don&amp;rsquo;t know the circle&amp;rsquo;s center or radius; we only know these three points on its circumference.&lt;/p>
&lt;p>Now, we could solve for the circle&amp;rsquo;s center and radius. There are &lt;a href="https://math.stackexchange.com/questions/213658">many techniques for doing this&lt;/a>, but it&amp;rsquo;s relatively expensive &amp;ndash; we don&amp;rsquo;t want to be taking square roots or doing any floating-point division here, because we&amp;rsquo;re going to be doing this point-in-circle test a lot.&lt;/p>
&lt;p>Instead, Guibas &amp;amp; Stolfi describe a really interesting technique that, when I first encountered it, made &lt;em>absolutely no sense to me&lt;/em>.&lt;/p>
&lt;p>Their technique is to calculate the determinant of this 4x4 matrix:&lt;/p>
&lt;div class="matrix">
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>A&lt;sub>x&lt;/sub>&lt;/td>
&lt;td>A&lt;sub>y&lt;/sub>&lt;/td>
&lt;td>A&lt;sub>x&lt;/sub>&lt;sup>2&lt;/sup> + A&lt;sub>y&lt;/sub>&lt;sup>2&lt;/sup>&lt;/td>
&lt;td>1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>B&lt;sub>x&lt;/sub>&lt;/td>
&lt;td>B&lt;sub>y&lt;/sub>&lt;/td>
&lt;td>B&lt;sub>x&lt;/sub>&lt;sup>2&lt;/sup> + B&lt;sub>y&lt;/sub>&lt;sup>2&lt;/sup>&lt;/td>
&lt;td>1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>C&lt;sub>x&lt;/sub>&lt;/td>
&lt;td>C&lt;sub>y&lt;/sub>&lt;/td>
&lt;td>C&lt;sub>x&lt;/sub>&lt;sup>2&lt;/sup> + C&lt;sub>y&lt;/sub>&lt;sup>2&lt;/sup>&lt;/td>
&lt;td>1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>P&lt;sub>x&lt;/sub>&lt;/td>
&lt;td>P&lt;sub>y&lt;/sub>&lt;/td>
&lt;td>P&lt;sub>x&lt;/sub>&lt;sup>2&lt;/sup> + P&lt;sub>y&lt;/sub>&lt;sup>2&lt;/sup>&lt;/td>
&lt;td>1&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;/div>
&lt;p>(Where (A, B, C) are the points that define the circle, and P is the point to test.)&lt;/p>
&lt;p>If the determinant is positive, the point is inside the circle. If it&amp;rsquo;s negative, the point is outside of the circle. If the determinant is zero, the point also lies on the circle.&lt;/p>
&lt;p>Okay &lt;em>what&lt;/em>.&lt;/p>
&lt;p>So I don&amp;rsquo;t expect this to make sense to you. It didn&amp;rsquo;t make sense to me when I first heard it. But I&amp;rsquo;m going to try to explain it, in a little more detail than Guibas &amp;amp; Stolfi explain it.&lt;/p>
&lt;p>First off: we have a bunch of 2D points. We&amp;rsquo;re going to transform them into 3D points, by saying:&lt;/p>
&lt;p class="math">z = x&lt;sup>2&lt;/sup> + y&lt;sup>2&lt;/sup>&lt;/p>
&lt;p>This gives us a bunch of points in 3D. Specifically, it projects these points upwards onto this weird parabaloid shape:&lt;/p>
&lt;p class="canvas-container">&lt;canvas class="parabaloid" width="384" height="256">&lt;/canvas>&lt;/p>
&lt;p>(Click and drag the points to move them around.)&lt;/p>
&lt;p>Okay. So that&amp;rsquo;s&amp;hellip; something.&lt;/p>
&lt;p>We know that three points in 3D space uniquely determine a plane (unless the points are co-linear). Planes seem simpler than circles. So you can maybe see how this is a step in the right direction. Let&amp;rsquo;s draw the plane:&lt;/p>
&lt;p class="canvas-container">&lt;canvas class="parabaloid" data-plane="true" width="384" height="256">&lt;/canvas>&lt;/p>
&lt;p>Now, there&amp;rsquo;s something very interesting about this plane: if we look at the points where it intersects our parabaloid, we can see that it forms some kind of ellipse shape.&lt;/p>
&lt;p>But if we look at it straight down from the top, we can see that the ellipse projects a perfect circle onto the XY plane.&lt;/p>
&lt;p class="canvas-controls">&lt;button data-action="topDown">Top-down view&lt;/button> &lt;button data-action="dimetric">Dimetric view&lt;/button>&lt;/p>
&lt;p class="canvas-container">&lt;canvas class="parabaloid" data-plane="true" data-circle-sky="true" width="384" height="256">&lt;/canvas>&lt;/p>
&lt;p>Specifically, the circle that passes through all of our original points. So if we project the intersection of this plane with the parabaloid back down onto the XY plane, we get the circle that we actually care about:&lt;/p>
&lt;p class="canvas-container">&lt;canvas class="parabaloid" data-plane="true" data-circle-sky="true" data-circle-ground="true" width="384" height="256">&lt;/canvas>&lt;/p>
&lt;p>Okaaaaay. So we&amp;rsquo;ve established a correspondence between this weird parabaloid shape and the circle in question. But let&amp;rsquo;s not forget why we&amp;rsquo;re doing this: we want to check if a point is inside this circle.&lt;/p>
&lt;p>So let&amp;rsquo;s add another point.&lt;/p>
&lt;p class="canvas-container">&lt;canvas class="parabaloid" data-plane="true" data-circle-sky="true" data-circle-ground="true" data-other-point="true" width="384" height="256">&lt;/canvas>&lt;/p>
&lt;p>Drag it around a little bit, and hopefully you can see where we&amp;rsquo;re going with this.&lt;/p>
&lt;p>When we project that point upwards to the parabaloid, the point where it hits is either going to lie &amp;ldquo;under&amp;rdquo; or &amp;ldquo;over&amp;rdquo; our plane. And you can see that it&amp;rsquo;s going to hit &amp;ldquo;under&amp;rdquo; the plane &lt;em>exactly&lt;/em> when the point is in the circle.&lt;/p>
&lt;p>Okay! So this is interesting. This already suggests a very simple circle test algorithm: instead of finding the equation for the &lt;em>circle&lt;/em>, find the equation for &lt;em>this plane&lt;/em>. Then project our point upwards to both the plane and the parabaloid. If the projection up to the parabaloid is lower than the projection to the plane, then it&amp;rsquo;s inside the circle.&lt;/p>
&lt;p>It&amp;rsquo;s easy to find the equation for a plane. Given three points (A, B, C), all we have to do is find any vector orthogonal to the plane, which we can do by taking the cross product of any two vectors on the plane:&lt;/p>
&lt;p class="math">N = (B - A) ⨯ (C - A)&lt;/p>
&lt;p>And that, combined with any one of our original points, gives us an equation for the plane:&lt;/p>
&lt;p class="math">N&lt;sub>x&lt;/sub>(x - A&lt;sub>x&lt;/sub>) + N&lt;sub>y&lt;/sub>(y - A&lt;sub>y&lt;/sub>) + N&lt;sub>z&lt;/sub>(z - A&lt;sub>z&lt;/sub>) = 0&lt;/p>
&lt;p>Which we can use to solve for z, giving us a function of x and y:&lt;/p>
&lt;p class="math">plane(x, y) = -(N&lt;sub>x&lt;/sub>(x - A&lt;sub>x&lt;/sub>) + N&lt;sub>y&lt;/sub>(y - A&lt;sub>y&lt;/sub>)) / N&lt;sub>z&lt;/sub> + A&lt;sub>z&lt;/sub>&lt;/p>
&lt;p>Okay, neat. Now if you recall our parabaloid equation:&lt;/p>
&lt;p class="math">parabaloid(x, y) = x&lt;sup>2&lt;/sup> + y&lt;sup>2&lt;/sup>&lt;/p>
&lt;p>Then all we have to do is compare the value of these two functions, and we have our circle test:&lt;/p>
&lt;p class="math">contains(x, y) = parabaloid(x, y) &amp;lt; plane(x, y)&lt;/p>
&lt;p>Okay. That makes sense, right?&lt;/p>
&lt;p>But that&amp;rsquo;s &lt;em>not&lt;/em> what Guibas &amp;amp; Stolfi did.&lt;/p>
&lt;p>Notice how there are no weird complicated matrices involved in that calculation. Yes, I did take a cross product, but that&amp;rsquo;s a pretty small amount of linear algebra to stomach compared to the determinant of a 4x4 matrix.&lt;/p>
&lt;p>So.&lt;/p>
&lt;p>Let&amp;rsquo;s return to Guibas &amp;amp; Stolfi&amp;rsquo;s solution. Remember that they propose calculating the determinant of this matrix:&lt;/p>
&lt;div class="matrix">
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>A&lt;sub>x&lt;/sub>&lt;/td>
&lt;td>A&lt;sub>y&lt;/sub>&lt;/td>
&lt;td>A&lt;sub>x&lt;/sub>&lt;sup>2&lt;/sup> + A&lt;sub>y&lt;/sub>&lt;sup>2&lt;/sup>&lt;/td>
&lt;td>1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>B&lt;sub>x&lt;/sub>&lt;/td>
&lt;td>B&lt;sub>y&lt;/sub>&lt;/td>
&lt;td>B&lt;sub>x&lt;/sub>&lt;sup>2&lt;/sup> + B&lt;sub>y&lt;/sub>&lt;sup>2&lt;/sup>&lt;/td>
&lt;td>1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>C&lt;sub>x&lt;/sub>&lt;/td>
&lt;td>C&lt;sub>y&lt;/sub>&lt;/td>
&lt;td>C&lt;sub>x&lt;/sub>&lt;sup>2&lt;/sup> + C&lt;sub>y&lt;/sub>&lt;sup>2&lt;/sup>&lt;/td>
&lt;td>1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>P&lt;sub>x&lt;/sub>&lt;/td>
&lt;td>P&lt;sub>y&lt;/sub>&lt;/td>
&lt;td>P&lt;sub>x&lt;/sub>&lt;sup>2&lt;/sup> + P&lt;sub>y&lt;/sub>&lt;sup>2&lt;/sup>&lt;/td>
&lt;td>1&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;/div>
&lt;p>Hmm.&lt;/p>
&lt;p>I can understand 3x3 matrices. I&amp;rsquo;ve made my peace with them. I can think of them as transformations of 3D points to other 3D points. I&amp;rsquo;ve even almost, sort of, reluctantly made peace with determinants: I can understand the determinant of a 3x3 matrix as the rate by which it scales &lt;em>volumes&lt;/em> when you transform shapes with it.&lt;/p>
&lt;p>4x4 matrices&amp;hellip; I have no intuition for them. I would expect the determinant of a 4x4 matrix to be some kind of scaler of hypervolumes. But since it&amp;rsquo;s only &lt;em>barely&lt;/em> four-dimensional &amp;ndash; all values on the &amp;ldquo;W axis&amp;rdquo; are 1 &amp;ndash; we can intuit that we&amp;rsquo;re probably just dealing with plain volumes again.&lt;/p>
&lt;p>And in fact that&amp;rsquo;s correct: this determinant is actually the (oriented!) volume of the &lt;a href="https://en.wikipedia.org/wiki/Parallelepiped">parallelepiped&lt;/a> that has these four points as corners.&lt;/p>
&lt;p class="canvas-container">&lt;canvas class="parabaloid" data-circle-ground="true" data-other-point="true" data-parallelepiped="true" width="384" height="256">&lt;/canvas>&lt;/p>
&lt;p>Whoa, that&amp;rsquo;s&amp;hellip; a lot. That&amp;rsquo;s kind of hard for me to parse. But in the same way that a parallelogram consists of (2! = 2) identical triangles, a parallelepiped consists of (3! = 6) identical tetrahedra. Let&amp;rsquo;s focus on just one of them:&lt;/p>
&lt;p class="canvas-container">&lt;canvas class="parabaloid" data-circle-ground="true" data-other-point="true" data-tetrahedron="true" width="384" height="256">&lt;/canvas>&lt;/p>
&lt;p>So I have two things to say about this.&lt;/p>
&lt;p>First off: notice that sometimes the tetrahedron is &amp;ldquo;inside out:&amp;rdquo; it has a negative volume, which I represent by changing the color of the wireframe. The crux of the point-in-circle test is checking the sign of that volume, and you can see if you move the free point around that it does invert when the free point passes into or out of the circle.&lt;/p>
&lt;p>But! If you move the &lt;em>other&lt;/em> points around, you can change whether positive or negative means &amp;ldquo;point in circle&amp;rdquo; or &amp;ldquo;point outside of circle.&amp;rdquo; Try it: swap the location of any two points on the circle, and watch as the sign flips, even though the circle remains the same.&lt;/p>
&lt;p>This is because the orientation of the tetrahedron depends not only on the position of the free point relative to the three circle points, but &lt;em>also&lt;/em> the orientation of the three circle points relative to one another. So this test &lt;em>only works&lt;/em> if you make sure that you list the points (A, B, C) in a clockwise order. If you list them in counterclockwise order, the circle will be &amp;ldquo;inside out,&amp;rdquo; and the test will give you the wrong answer.&lt;/p>
&lt;p>Which is pretty annoying.&lt;/p>
&lt;p>So&amp;hellip; I don&amp;rsquo;t like this test as much as the plane test &lt;em>in general&lt;/em>. It seems more expensive&lt;sup id="fnref:8">&lt;a href="#fn:8" class="footnote-ref" role="doc-noteref">8&lt;/a>&lt;/sup> to calculate the determinant than to calculate the equation of the plane, and it seems really annoying that you have to be careful that you provide the points in the right order or you&amp;rsquo;ll get the wrong result.&lt;/p>
&lt;p>This isn&amp;rsquo;t actually a problem for us, because we&amp;rsquo;ll be use a fancy data structure for storing edges that ensures we can only provide points in the correct order.&lt;/p>
&lt;p>Anyway.&lt;/p>
&lt;p>Second thing:&lt;/p>
&lt;p>A more obvious way to calculate the volume of a parallelepiped is to pick one point as the origin, and then to write the other three points relative to this origin. Then we have three points in three dimensions, which we can express as a square matrix:&lt;/p>
&lt;div class="matrix">
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>A&lt;sub>x&lt;/sub> - P&lt;sub>x&lt;/sub>&lt;/td>
&lt;td>A&lt;sub>y&lt;/sub> - P&lt;sub>y&lt;/sub>&lt;/td>
&lt;td>(A&lt;sub>x&lt;/sub>&lt;sup>2&lt;/sup> + A&lt;sub>y&lt;/sub>&lt;sup>2&lt;/sup>) - (P&lt;sub>x&lt;/sub>&lt;sup>2&lt;/sup> + P&lt;sub>y&lt;/sub>&lt;sup>2&lt;/sup>)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>B&lt;sub>x&lt;/sub> - P&lt;sub>x&lt;/sub>&lt;/td>
&lt;td>B&lt;sub>y&lt;/sub> - P&lt;sub>y&lt;/sub>&lt;/td>
&lt;td>(B&lt;sub>x&lt;/sub>&lt;sup>2&lt;/sup> + B&lt;sub>y&lt;/sub>&lt;sup>2&lt;/sup>) - (P&lt;sub>x&lt;/sub>&lt;sup>2&lt;/sup> + P&lt;sub>y&lt;/sub>&lt;sup>2&lt;/sup>)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>C&lt;sub>x&lt;/sub> - P&lt;sub>x&lt;/sub>&lt;/td>
&lt;td>C&lt;sub>y&lt;/sub> - P&lt;sub>y&lt;/sub>&lt;/td>
&lt;td>(C&lt;sub>x&lt;/sub>&lt;sup>2&lt;/sup> + C&lt;sub>y&lt;/sub>&lt;sup>2&lt;/sup>) - (P&lt;sub>x&lt;/sub>&lt;sup>2&lt;/sup> + P&lt;sub>y&lt;/sub>&lt;sup>2&lt;/sup>)&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;/div>
&lt;p>And the determinant of this matrix gives us the volume of the same parallelepiped as before, but in the simple straightforward way that we remember from that one linear algebra class we almost passed.&lt;/p>
&lt;p>Now, the determinant of this matrix is exactly equal to the determinant of the 4x4 matrix that you get by padding each point with a 1. They&amp;rsquo;re just two ways of saying the same thing. You could verify that algebraically, but I feel like there&amp;rsquo;s probably some intuitive explanation of this fact, and understanding why this is would lead to a better understanding of determinants in general and maybe teach me how to use higher dimensional matrices to more easily perform calculations in lower dimensions. Like in some way the fourth point we added sort of acts as a new origin? At least in this particular case?&lt;/p>
&lt;p>But look: I have to stop somewhere, or I&amp;rsquo;m never going to finish this blog post. And this is the place I decided to stop exploring Guibas &amp;amp; Stolfi&amp;rsquo;s point-in-circle test.&lt;/p>
&lt;p>For now.&lt;/p>
&lt;h1 id="back-to-the-triangulation">Back to the triangulation&lt;/h1>
&lt;p>Where were we?&lt;/p>
&lt;ol>
&lt;li>I can&amp;rsquo;t actually construct an infinitely large bounding triangle &amp;ndash; is it okay if I just construct a triangle large enough to contain all of my points?&lt;/li>
&lt;li>How am I supposed to find the triangle that contains my new point?&lt;/li>
&lt;li>&lt;del>What if the new point lies on the edge of an existing triangle?&lt;/del>&lt;/li>
&lt;li>&lt;del>How am I supposed to do this circle test in the first place?&lt;/del>&lt;/li>
&lt;li>What edges do I actually need to check, once I&amp;rsquo;ve added my new edges?&lt;/li>
&lt;li>Wait, how do I &amp;ldquo;flip&amp;rdquo; edges?&lt;/li>
&lt;li>Wait, how do I even &lt;em>model&lt;/em> edges? How do you even represent triangulations on a computer? I thought I could just model this as a graph, with vertices and edges and pointers, but it seems like I need to keep track of faces as well, and somehow this is a fundamentally different sort of thing than I&amp;rsquo;ve ever encountered before?&lt;/li>
&lt;/ol>
&lt;p>Okay. Let&amp;rsquo;s talk about (7) next, because you&amp;rsquo;re losing steam and it&amp;rsquo;s very interesting. The other questions are pretty specific to this one algorithm that you don&amp;rsquo;t actually care about &amp;ndash; although I appreciate how polite you are being &amp;ndash; but this one is broadly applicable to lots of graph-related, mesh-related, and computational geometry-related problems.&lt;/p>
&lt;h1 id="the-quad-edge-data-structure">The quad-edge data structure&lt;/h1>
&lt;p>Okay, so you know how to represent a graph, right? You have some &lt;code>Node&lt;/code> or &lt;code>Vertex&lt;/code> objects, and you have some &lt;code>Edge&lt;/code> objects, and vertices have pointers to their edges and edges have pointers to their vertices. Or you store an adjacency matrix; that&amp;rsquo;s a thing I&amp;rsquo;ve heard of.&lt;/p>
&lt;p>This works great when you&amp;rsquo;re dealing with graphs in the abstract &amp;ndash; if all you&amp;rsquo;re doing is Dijkstra&amp;rsquo;s algorithm or finding biconnected components or whatever, this simple representation works fine.&lt;/p>
&lt;p>But in this case we&amp;rsquo;re also concerned with &lt;em>faces&lt;/em> &amp;ndash; when we flip an edge, we need to know the specific faces we&amp;rsquo;re flipping it on, so we don&amp;rsquo;t do something illegal:&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/delaunay/fig7_hu1956f63c751c3fbd837aeea7394512b2_127528_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/delaunay/fig7_hu1956f63c751c3fbd837aeea7394512b2_127528_768x768_fit_q75_h3_box_3.webp 768w, https://ianthehenry.com/posts/delaunay/fig7_hu1956f63c751c3fbd837aeea7394512b2_127528_1536x1536_fit_q75_h3_box_3.webp 1536w, https://ianthehenry.com/posts/delaunay/fig7_hu1956f63c751c3fbd837aeea7394512b2_127528_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/delaunay/fig7_hu1956f63c751c3fbd837aeea7394512b2_127528_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/delaunay/fig7_hu1956f63c751c3fbd837aeea7394512b2_127528_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/delaunay/fig7_hu1956f63c751c3fbd837aeea7394512b2_127528_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/delaunay/fig7_hu1956f63c751c3fbd837aeea7394512b2_127528_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/delaunay/fig7_hu1956f63c751c3fbd837aeea7394512b2_127528_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="384"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r&amp;#43;mnAAAARklEQVR4nGzLMQ6EMAwF0Z&amp;#43;xt4jk&amp;#43;x91QYBtFNFQ8KppBr0AEWFmklzSnNON47x6KSAzGWN053/bq2pN&amp;#43;gL83J&amp;#43;&amp;#43;AwAA//9NkxU5JkpB6wAAAABJRU5ErkJggg==);"
/>&lt;/picture>&lt;/a>
&lt;p>The obvious-to-me way to do this is to add another object to the mix: model &lt;code>Face&lt;/code>s explicitly, and have edges keep track of the faces they&amp;rsquo;re a part of, and every time you change anything about the graph you have to make sure to keep the faces and edges and vertices all in sync. I actually tried this, during my first forays into triangulation. It was awful. Just a case study on how denormalization will ruin your day. We&amp;rsquo;re not going to do that.&lt;/p>
&lt;p>Fortunately, Guibas &amp;amp; Stolfi describe a &lt;em>very clever&lt;/em> alternate representation called the &amp;ldquo;quad-edge&amp;rdquo; data structure.&lt;/p>
&lt;p>To understand the quad-edge structure, you first have to understand the idea of the &lt;a href="https://en.wikipedia.org/wiki/Dual_graph">dual&lt;/a> of a graph. Very loosely, if you take a drawing of a graph&lt;sup id="fnref:9">&lt;a href="#fn:9" class="footnote-ref" role="doc-noteref">9&lt;/a>&lt;/sup> and put a vertex in the middle of every face, and then connect all of the adjacent &amp;ldquo;face-vertices&amp;rdquo; with edges, you&amp;rsquo;ll have the dual graph. It&amp;rsquo;s easier to understand with a picture:&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/delaunay/duals_hu2c428b58352ac6a41586acbeaea16ef5_180889_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/delaunay/duals_hu2c428b58352ac6a41586acbeaea16ef5_180889_768x768_fit_q75_h3_box_3.webp 768w, https://ianthehenry.com/posts/delaunay/duals_hu2c428b58352ac6a41586acbeaea16ef5_180889_1536x1536_fit_q75_h3_box_3.webp 1536w, https://ianthehenry.com/posts/delaunay/duals_hu2c428b58352ac6a41586acbeaea16ef5_180889_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/delaunay/duals_hu2c428b58352ac6a41586acbeaea16ef5_180889_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/delaunay/duals_hu2c428b58352ac6a41586acbeaea16ef5_180889_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/delaunay/duals_hu2c428b58352ac6a41586acbeaea16ef5_180889_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/delaunay/duals_hu2c428b58352ac6a41586acbeaea16ef5_180889_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/delaunay/duals_hu2c428b58352ac6a41586acbeaea16ef5_180889_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="384"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r&amp;#43;mnAAAAQ0lEQVR4nHSMUQ6AMAjFhCdMZZjd/6gzA8O3sf1uefsBAIaPFaub29XnM93uiGCUEIjuqtKY&amp;#43;GhnZlZFRN/VGwAA//&amp;#43;UpwzmmwifPwAAAABJRU5ErkJggg==);"
/>&lt;/picture>&lt;/a>
&lt;p>That&amp;rsquo;s actually a simplification &amp;ndash; I&amp;rsquo;m missing one face from all of those graphs: the outer face, the inside-out face bounded by the outside of the graphs. Here are the &lt;em>actual&lt;/em> duals:&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/delaunay/full-duals_hu2f11216529d2062c89f8f5bbd7bc723a_298626_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/delaunay/full-duals_hu2f11216529d2062c89f8f5bbd7bc723a_298626_768x768_fit_q75_h3_box_3.webp 768w, https://ianthehenry.com/posts/delaunay/full-duals_hu2f11216529d2062c89f8f5bbd7bc723a_298626_1536x1536_fit_q75_h3_box_3.webp 1536w, https://ianthehenry.com/posts/delaunay/full-duals_hu2f11216529d2062c89f8f5bbd7bc723a_298626_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/delaunay/full-duals_hu2f11216529d2062c89f8f5bbd7bc723a_298626_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/delaunay/full-duals_hu2f11216529d2062c89f8f5bbd7bc723a_298626_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/delaunay/full-duals_hu2f11216529d2062c89f8f5bbd7bc723a_298626_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/delaunay/full-duals_hu2f11216529d2062c89f8f5bbd7bc723a_298626_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/delaunay/full-duals_hu2f11216529d2062c89f8f5bbd7bc723a_298626_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="384"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r&amp;#43;mnAAAAS0lEQVR4nDzMUQqAMAwE0d1sIyKp9v5nbVJR0Df/YwBkzSgALsdHux&amp;#43;jD1ERPaJj8YwrZzYaClmonCk0grUSJJ5eRnNt/&amp;#43;oOAAD//4yhDuTTWinMAAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;p>But since that is a &lt;em>mess&lt;/em> to look at, I will instead adapt the following shorthand, and trust that you can imagine the outer face:&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/delaunay/short-duals_hu2f11216529d2062c89f8f5bbd7bc723a_212628_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/delaunay/short-duals_hu2f11216529d2062c89f8f5bbd7bc723a_212628_768x768_fit_q75_h3_box_3.webp 768w, https://ianthehenry.com/posts/delaunay/short-duals_hu2f11216529d2062c89f8f5bbd7bc723a_212628_1536x1536_fit_q75_h3_box_3.webp 1536w, https://ianthehenry.com/posts/delaunay/short-duals_hu2f11216529d2062c89f8f5bbd7bc723a_212628_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/delaunay/short-duals_hu2f11216529d2062c89f8f5bbd7bc723a_212628_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/delaunay/short-duals_hu2f11216529d2062c89f8f5bbd7bc723a_212628_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/delaunay/short-duals_hu2f11216529d2062c89f8f5bbd7bc723a_212628_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/delaunay/short-duals_hu2f11216529d2062c89f8f5bbd7bc723a_212628_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/delaunay/short-duals_hu2f11216529d2062c89f8f5bbd7bc723a_212628_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="384"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r&amp;#43;mnAAAASklEQVR4nHSMwQrFMAgEn67GvGAl/f8/DVVKoPTWPeycZvj3MQhkxpmV4dOHr2sdI6qSAQGjqamqtc7E3f6PRUT7N&amp;#43;lN3QEAAP//SFUKAajo834AAAAASUVORK5CYII=);"
/>&lt;/picture>&lt;/a>
&lt;p>Okay, so duals. Neat. Who cares?&lt;/p>
&lt;p>Well, the high level idea of the &amp;ldquo;quad-edge&amp;rdquo; structure is that you break every undirected edge &lt;code>A &amp;lt;-&amp;gt; B&lt;/code> of your mesh into four separate &lt;em>directed&lt;/em> edges: one that represents &lt;code>A -&amp;gt; B&lt;/code>, one that represents &lt;code>B -&amp;gt; A&lt;/code>, and two others that represent the directed &lt;em>dual&lt;/em> edges of the faces on either side of the edge. So for each undirected edge on our graph, we would have four directed edges like so:&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/delaunay/quad-edge_hudc65ac562d632b0fedef557017d3acae_129840_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/delaunay/quad-edge_hudc65ac562d632b0fedef557017d3acae_129840_768x768_fit_q75_h3_box_3.webp 768w, https://ianthehenry.com/posts/delaunay/quad-edge_hudc65ac562d632b0fedef557017d3acae_129840_1536x1536_fit_q75_h3_box_3.webp 1536w, https://ianthehenry.com/posts/delaunay/quad-edge_hudc65ac562d632b0fedef557017d3acae_129840_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/delaunay/quad-edge_hudc65ac562d632b0fedef557017d3acae_129840_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/delaunay/quad-edge_hudc65ac562d632b0fedef557017d3acae_129840_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/delaunay/quad-edge_hudc65ac562d632b0fedef557017d3acae_129840_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/delaunay/quad-edge_hudc65ac562d632b0fedef557017d3acae_129840_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/delaunay/quad-edge_hudc65ac562d632b0fedef557017d3acae_129840_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="384"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r&amp;#43;mnAAAATUlEQVR4nBzMQQ4DIAwDQZskReL/r02DXdHDHmcDwDlbgu1zNrGuBCAykwTAqvoU&amp;#43;6uIkPSqTJuLcWUbsQLEW81cPOTu5p/PzC8AAP//HeYiP&amp;#43;NHPvUAAAAASUVORK5CYII=);"
/>&lt;/picture>&lt;/a>
&lt;p>So the quad-edge structure represents the structure of a graph &lt;em>and its dual&lt;/em> at the same time: a quad-edge is just a list of these four directed edges.&lt;/p>
&lt;p>I was very confused about this when I was reading Guibas &amp;amp; Stolfi.&lt;sup id="fnref:10">&lt;a href="#fn:10" class="footnote-ref" role="doc-noteref">10&lt;/a>&lt;/sup> They never give a type definition for quad-edges, and they describe operations on quad-edges that don&amp;rsquo;t &lt;em>actually&lt;/em> apply to quad-edges &amp;ndash; they apply to the directed edges that comprise quad-edges. Guibas &amp;amp; Stolfi call these &amp;ldquo;quad-edge refs,&amp;rdquo; but because that is confusing and clumsy I will call them &amp;ldquo;quarter-edges&amp;rdquo; from here on out.&lt;/p>
&lt;p>The paper is hard to follow sometimes because it uses the term &amp;ldquo;edge&amp;rdquo; a lot, which could mean one of &lt;em>three different things:&lt;/em>&lt;/p>
&lt;ul>
&lt;li>A logical edge on a graph &amp;ndash; that is, the normal sense of the word.&lt;/li>
&lt;li>A &amp;ldquo;quad-edge,&amp;rdquo; which &lt;em>represents&lt;/em> a single logical edge, and consists of four individual parts.&lt;/li>
&lt;li>A &amp;ldquo;quarter-edge&amp;rdquo; (my term) or &amp;ldquo;quad-edge ref&amp;rdquo; (their term), which is one of the individual parts of a quad-edge.&lt;/li>
&lt;/ul>
&lt;p>Now here&amp;rsquo;s the trick: whenever they say &amp;ldquo;edge&amp;rdquo; or &amp;ldquo;quad-edge,&amp;rdquo; they &lt;em>actually&lt;/em> mean &amp;ldquo;quarter-edge.&amp;rdquo; For example:&lt;/p>
&lt;blockquote>
&lt;p>The second operator is denoted by &lt;code>Splice[a, b]&lt;/code> and takes as parameters two edges &lt;code>a&lt;/code> and &lt;code>b&lt;/code>, returning no value.&lt;/p>
&lt;/blockquote>
&lt;p>Splice is actually an operation on &lt;em>quarter-edges&lt;/em>. If you try to make sense of it as an operation on &lt;em>quad-edges&lt;/em>, you will have a bad time and be very confused.&lt;/p>
&lt;p>Anyway.&lt;/p>
&lt;p>Digression over.&lt;/p>
&lt;p>Guibas &amp;amp; Stolfi don&amp;rsquo;t prescribe a concrete representation, but here&amp;rsquo;s a straightforward way&lt;sup id="fnref:11">&lt;a href="#fn:11" class="footnote-ref" role="doc-noteref">11&lt;/a>&lt;/sup> to represent the quad-edge as they describe it:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="k">typedef&lt;/span> &lt;span class="k">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="n">quarter_edge&lt;/span> &lt;span class="n">refs&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="p">}&lt;/span> &lt;span class="n">quad_edge&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">typedef&lt;/span> &lt;span class="k">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="n">quad_edge&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">my_quad_edge&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="n">my_index&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">quad_edge&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">next_quad_edge&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="n">next_index&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span> &lt;span class="n">quarter_edge&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">quarter_edge&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nf">rot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">quarter_edge&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">edge&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="n">edge&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">my_quad_edge&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">refs&lt;/span>&lt;span class="p">[(&lt;/span>&lt;span class="n">edge&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">my_index&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="n">quarter_edge&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nf">sym&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">quarter_edge&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">edge&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="n">edge&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">my_quad_edge&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">refs&lt;/span>&lt;span class="p">[(&lt;/span>&lt;span class="n">edge&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">my_index&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="n">quarter_edge&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nf">tor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">quarter_edge&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">edge&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="n">edge&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">my_quad_edge&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">refs&lt;/span>&lt;span class="p">[(&lt;/span>&lt;span class="n">edge&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">my_index&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="n">quarter_edge&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nf">next&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">quarter_edge&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">edge&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="n">edge&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">next_quad_edge&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">refs&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">edge&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">next_index&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>rot&lt;/code> (&amp;ldquo;rotate&amp;rdquo;), &lt;code>sym&lt;/code> (&amp;ldquo;symmetric edge&amp;rdquo;), and &lt;code>tor&lt;/code> (&amp;ldquo;rotate the other way&amp;rdquo;) are functions that bring you to the other three quarter-edges on the same &lt;code>QuadEdge&lt;/code>. &lt;code>next&lt;/code> is a pointer that allows you to navigate around to adjacent &lt;code>QuadEdge&lt;/code>s in the structure. (We&amp;rsquo;ll come back to this in a minute.)&lt;/p>
&lt;p>So you can see that a quad-edge isn&amp;rsquo;t really a thing; it&amp;rsquo;s just a bundle of four other things. And in fact I think it&amp;rsquo;s &lt;em>much simpler&lt;/em> if we just pretend that quad-edges don&amp;rsquo;t exist, and define everything in terms of quarter edges:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="k">typedef&lt;/span> &lt;span class="k">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">quarter_edge&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">next&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">quarter_edge&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">rot&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span> &lt;span class="n">quarter_edge&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">quarter_edge&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nf">rot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">quarter_edge&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">edge&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="n">edge&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">rot&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="n">quarter_edge&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nf">sym&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">quarter_edge&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">edge&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="n">edge&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">rot&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">rot&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="n">quarter_edge&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nf">tor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">quarter_edge&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">edge&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="n">edge&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">rot&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">rot&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">rot&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Whenever we create these, we can just create four of them at a time, and set their &lt;code>rot&lt;/code> pointers in a cycle such that &lt;code>edge == edge-&amp;gt;rot-&amp;gt;rot-&amp;gt;rot-&amp;gt;rot&lt;/code>. This representation is slightly less efficient, but it&amp;rsquo;s &lt;em>much&lt;/em> simpler, especially when we start manipulating it.&lt;/p>
&lt;p>Okay, with that out of the way: what is &lt;code>next&lt;/code>?&lt;/p>
&lt;p>&lt;code>next&lt;/code> points to a quarter-edge that:&lt;/p>
&lt;ol>
&lt;li>Has the same starting point (be it a vertex or a face) as this quarter-edge.&lt;/li>
&lt;li>Lies immediately counter-clockwise of this quarter-edge.&lt;/li>
&lt;/ol>
&lt;p>This is all a little abstract, so let&amp;rsquo;s make it concrete. This is a little demo that lets you play with the quad-edge structure: the &amp;ldquo;current&amp;rdquo; edge is highlighted in yellow, and you can traverse the structure by pressing WASD (if you have a keyboard).&lt;/p>
&lt;ul>
&lt;li>&lt;code>W&lt;/code> &lt;code>sym&lt;/code>&lt;/li>
&lt;li>&lt;code>A&lt;/code> &lt;code>tor&lt;/code>&lt;/li>
&lt;li>&lt;code>S&lt;/code> &lt;code>next&lt;/code>&lt;/li>
&lt;li>&lt;code>D&lt;/code> &lt;code>rot&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>Notice that the &lt;code>WAD&lt;/code> keys will only move you between each of the four quarter-edges of the current quad-edge, while &lt;code>S&lt;/code> will allow you to move to other edges.&lt;/p>
&lt;p class="canvas-controls">&lt;button data-action="next">.next&lt;/button> &lt;button data-action="rot">.rot&lt;/button> &lt;button data-action="sym">.sym&lt;/button> &lt;button data-action="tor">.tor&lt;/button>&lt;/p>
&lt;p class="canvas-container">&lt;canvas id="quad-exploration" width="384" height="256" tabindex="1">&lt;/canvas>&lt;/p>
&lt;p>(Notice that, because the outer face is &amp;ldquo;inside out,&amp;rdquo; pressing &lt;code>S&lt;/code> while on the outer face will actually move &lt;em>clockwise&lt;/em> around the perimeter.)&lt;/p>
&lt;p>You can compose these operations predictably to navigate around. For example, to go to the &amp;ldquo;previous&amp;rdquo; edge that shares the same point &amp;ndash; to navigate clockwise, in other words &amp;ndash; press &lt;code>DSD&lt;/code>. To navigate around the triangle to the left of the current edge, press &lt;code>ASD&lt;/code> repeatedly. To navigate around the triangle to the right of the edge, press &lt;code>WS&lt;/code>.&lt;/p>
&lt;p>We&amp;rsquo;ll be doing some of these a lot, so we&amp;rsquo;ll give them names:&lt;/p>
&lt;pre>&lt;code>prev = rot.next.rot
lnext = tor.next.rot
&lt;/code>&lt;/pre>
&lt;p>The last thing that I didn&amp;rsquo;t explain is the &lt;code>data&lt;/code> pointer.&lt;/p>
&lt;p>The &lt;code>data&lt;/code> pointer stores arbitrary information about the vertex &lt;em>or face&lt;/em> at the beginning of each directed quarter-edge. For our purposes, we&amp;rsquo;ll use &lt;code>data&lt;/code> to store the actual location in space of each vertex, and we won&amp;rsquo;t store anything on faces. So note that, since there are multiple directed edges out of each vertex, all quarter-edges that you reach by traversing the &lt;code>next&lt;/code> pointers &amp;ndash; by pressing &lt;code>S&lt;/code>, in the demo &amp;ndash; will have identical &lt;code>data&lt;/code> pointers.&lt;/p>
&lt;p>One thing that&amp;rsquo;s a little weird about this representation is that each &amp;ldquo;directed edge&amp;rdquo; doesn&amp;rsquo;t actually store anything about its destination. Its &lt;code>data&lt;/code> pointer only contains its origin, and the destination of the edge is implicit from its sibling quarter-edges. Specifically, each quarter-edge represents a directed edge from &lt;code>edge.data&lt;/code> to &lt;code>edge.sym.data&lt;/code>.&lt;/p>
&lt;p>We&amp;rsquo;ll refer to &lt;code>edge.sym.data&lt;/code> a lot, so I&amp;rsquo;m going to give it a shorthand as well:&lt;/p>
&lt;pre>&lt;code>dest = sym.data
&lt;/code>&lt;/pre>
&lt;p>So: that&amp;rsquo;s it! That&amp;rsquo;s the structure.&lt;/p>
&lt;p>How do we&amp;hellip; use it?&lt;/p>
&lt;p>Well first we need to be able to create quarter-edges &amp;ndash; which we always do in groups of four:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="kd">function&lt;/span> &lt;span class="nx">makeQuadEdge&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">start&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">end&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">startEnd&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">QuarterEdge&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">leftRight&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">QuarterEdge&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">endStart&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">QuarterEdge&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">rightLeft&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">QuarterEdge&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="nx">startEnd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">start&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">endStart&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">end&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">startEnd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">rot&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">leftRight&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">leftRight&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">rot&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">endStart&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">endStart&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">rot&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">rightLeft&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">rightLeft&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">rot&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">startEnd&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">// normal edges are on different vertices,
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// and initially they are the only edges out
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// of each vertex
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">startEnd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">next&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">startEnd&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">endStart&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">next&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">endStart&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">// but dual edges share the same face,
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// so they point to one another
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">leftRight&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">next&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">rightLeft&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">rightLeft&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">next&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">leftRight&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">startEnd&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>That represents a single edge that cuts through a single face &amp;ndash; the face on the left and right of it are the same, and it exists on its own, connected to nothing. Guibas &amp;amp; Stolfi have a nice illustration of what this means topologically:&lt;/p>
&lt;figure>
&lt;a class="image-container" href="https://ianthehenry.com/posts/delaunay/make-edge_hu98aad74021586d460597b88bf4cc6098_38299_1502x1502_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/delaunay/make-edge_hu98aad74021586d460597b88bf4cc6098_38299_751x751_fit_q75_h3_box_3.webp 751w, https://ianthehenry.com/posts/delaunay/make-edge_hu98aad74021586d460597b88bf4cc6098_38299_1502x1502_fit_q75_h3_box_3.webp 1502w, https://ianthehenry.com/posts/delaunay/make-edge_hu98aad74021586d460597b88bf4cc6098_38299_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/delaunay/make-edge_hu98aad74021586d460597b88bf4cc6098_38299_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 751px">&lt;img
class="image-with-light-background"
srcset="https://ianthehenry.com/posts/delaunay/make-edge_hu98aad74021586d460597b88bf4cc6098_38299_751x751_fit_box_3.png 751w, https://ianthehenry.com/posts/delaunay/make-edge_hu98aad74021586d460597b88bf4cc6098_38299_1502x1502_fit_box_3.png 1502w, https://ianthehenry.com/posts/delaunay/make-edge_hu98aad74021586d460597b88bf4cc6098_38299_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/delaunay/make-edge_hu98aad74021586d460597b88bf4cc6098_38299_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 751px"
width="751"
height="249"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAIAAAAhqtkfAAAAP0lEQVR4nEzLMQoAMQgEwFsI2ZDK/79SRCtluTbTz&amp;#43;ruiLj3nnO&amp;#43;x3J3M6sqADMjCQBJZKYkknvvd/wBAAD//wTuF&amp;#43;wsRLPoAAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;figcaption>
© 1985 ACM 0730-0301/85/0400-0074 &amp;mdash; ACM Transactions on Graphics, Vol. 4, No. 2, April 1985&lt;br/>
Reprinted by permission of the Association for Computing Machinery
&lt;/figcaption>
&lt;/figure>
&lt;p>Simple.&lt;/p>
&lt;p>The next operation lets us connect edges together, or tear them apart. It&amp;rsquo;s called &lt;code>splice&lt;/code>, and it&amp;rsquo;s probably just as simple. Let&amp;rsquo;s see how Guibas &amp;amp; Stolfi explain it:&lt;/p>
&lt;figure>
&lt;a class="image-container" href="https://ianthehenry.com/posts/delaunay/splice_hud5797dc177ab7bdd451c0078f297cf83_112422_1430x1430_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/delaunay/splice_hud5797dc177ab7bdd451c0078f297cf83_112422_715x715_fit_q75_h3_box_3.webp 715w, https://ianthehenry.com/posts/delaunay/splice_hud5797dc177ab7bdd451c0078f297cf83_112422_1430x1430_fit_q75_h3_box_3.webp 1430w, https://ianthehenry.com/posts/delaunay/splice_hud5797dc177ab7bdd451c0078f297cf83_112422_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/delaunay/splice_hud5797dc177ab7bdd451c0078f297cf83_112422_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 715px">&lt;img
class="image-with-light-background"
srcset="https://ianthehenry.com/posts/delaunay/splice_hud5797dc177ab7bdd451c0078f297cf83_112422_715x715_fit_box_3.png 715w, https://ianthehenry.com/posts/delaunay/splice_hud5797dc177ab7bdd451c0078f297cf83_112422_1430x1430_fit_box_3.png 1430w, https://ianthehenry.com/posts/delaunay/splice_hud5797dc177ab7bdd451c0078f297cf83_112422_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/delaunay/splice_hud5797dc177ab7bdd451c0078f297cf83_112422_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 715px"
width="715"
height="350"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAAAAACWpiEsAAAAM0lEQVR4nGL5xcz0k/WaECvTm3vvr3yX&amp;#43;MLIIvifU4j13idWhj&amp;#43;//v7//&amp;#43;LTf0AAAAD//yv2E1VZwkYDAAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;figcaption>
© 1985 ACM 0730-0301/85/0400-0074 &amp;mdash; ACM Transactions on Graphics, Vol. 4, No. 2, April 1985&lt;br/>
Reprinted by permission of the Association for Computing Machinery&lt;br/>
&lt;/figcaption>
&lt;/figure>
&lt;p>Aaaah! Oh dear. Topology is happening to us, and it doesn&amp;rsquo;t feel good.&lt;/p>
&lt;p>But the implementation is so simple:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="kd">function&lt;/span> &lt;span class="nx">splice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">swapNexts&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">next&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">rot&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">next&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">rot&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">swapNexts&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kd">function&lt;/span> &lt;span class="nx">swapNexts&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">anext&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">next&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">next&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">next&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">next&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">anext&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>We&amp;rsquo;re just swapping a couple of pointers &amp;ndash; it &lt;em>seems&lt;/em> like it should be simple to understand. But it&amp;rsquo;s very difficult to intuit the effect that this actually has on our mesh.&lt;/p>
&lt;p>Let&amp;rsquo;s use it in a sentence. &lt;code>splice&lt;/code> is a low-level primitive operation, and we&amp;rsquo;ll never actually call it directly in our algorithm. Instead, we&amp;rsquo;ll use it to build higher-level operations, and seeing how these operations use &lt;code>splice&lt;/code> under the hood is probably the best way to gain intuition for how it works.&lt;/p>
&lt;p>So the first thing we&amp;rsquo;ll need to do is construct a bounding triangle:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="kd">function&lt;/span> &lt;span class="nx">makeTriangle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">ab&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">makeQuadEdge&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">bc&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">makeQuadEdge&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">ca&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">makeQuadEdge&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">splice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ab&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">sym&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">bc&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">splice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">bc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">sym&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ca&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">splice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ca&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">sym&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ab&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">ab&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Then we&amp;rsquo;ll need to know how to add new edges:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="kd">function&lt;/span> &lt;span class="nx">connect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">newEdge&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">makeQuadEdge&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">dest&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">splice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">newEdge&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">lnext&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">splice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">newEdge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">sym&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">newEdge&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>And how to remove edges:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="kd">function&lt;/span> &lt;span class="nx">sever&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">edge&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">splice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">edge&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">edge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prev&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">splice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">edge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">sym&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">edge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">sym&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prev&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>And lastly we&amp;rsquo;ll need to &amp;ldquo;flip&amp;rdquo; the diagonal edge of a quadrangle.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="kd">function&lt;/span> &lt;span class="nx">flip&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">edge&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">edge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prev&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">edge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">sym&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prev&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">splice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">edge&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">splice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">edge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">sym&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">splice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">edge&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">lnext&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">splice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">edge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">sym&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">lnext&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">edge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">dest&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">edge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">dest&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">dest&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>And that&amp;rsquo;s it! Those are the only operations we need.&lt;/p>
&lt;p>I think the easiest way to understand &lt;code>splice&lt;/code> is to work through these high-level operations and convince yourself that this series of pointer updates gives you the &lt;code>QuarterEdge&lt;/code> structure that you want. But also: you can just trust me. You aren&amp;rsquo;t actually trying to implement this.&lt;/p>
&lt;h1 id="are-we-done-yet">are we done yet&lt;/h1>
&lt;p>Almost!&lt;/p>
&lt;ol>
&lt;li>I can&amp;rsquo;t actually construct an infinitely large bounding triangle &amp;ndash; is it okay if I just construct a triangle large enough to contain all of my points?&lt;/li>
&lt;li>How am I supposed to find the triangle that contains my new point?&lt;/li>
&lt;li>&lt;del>What if the new point lies on the edge of an existing triangle?&lt;/del>&lt;/li>
&lt;li>&lt;del>How am I supposed to do this circle test in the first place?&lt;/del>&lt;/li>
&lt;li>What edges do I actually need to check, once I&amp;rsquo;ve added my new edges?&lt;/li>
&lt;li>&lt;del>Wait, how do I &amp;ldquo;flip&amp;rdquo; edges?&lt;/del>&lt;/li>
&lt;li>&lt;del>Wait, how do I even &lt;em>model&lt;/em> edges? How do you even represent triangulations on a computer? I thought I could just model this as a graph, with vertices and edges and pointers, but it seems like I need to keep track of faces as well, and somehow this is a fundamentally different sort of thing than I&amp;rsquo;ve ever encountered before?&lt;/del>&lt;/li>
&lt;/ol>
&lt;p>Now that you understand the quad-edge/quarter-edge structure, we can talk about (2). It&amp;rsquo;s clever! It&amp;rsquo;s not what you&amp;rsquo;re expecting!&lt;/p>
&lt;h1 id="triangle-where">triangle where&lt;/h1>
&lt;p>So in order to add a new point to your mesh, you first need to locate the triangle that contains that point.&lt;/p>
&lt;p>There&amp;rsquo;s an easy, inefficient way to do this: loop through every triangle, check if your point is inside this triangle, and return as soon as you find one. We&amp;rsquo;re not going to do that, but it&amp;rsquo;s useful to talk about &lt;em>how&lt;/em> to do it. Specifically: how do you determine if a point lies inside a triangle?&lt;/p>
&lt;p>The trick we&amp;rsquo;re going to use is another linear algebra thing. If you could follow the point-in-circle test, this is going to be easy.&lt;/p>
&lt;p>Given a triangle &lt;code>ABC&lt;/code>, and another point &lt;code>P&lt;/code> that you want to test, construct three new triangles: &lt;code>ABP&lt;/code>, &lt;code>BCP&lt;/code>, and &lt;code>CAP&lt;/code>. Then calculate the sign of the oriented area of each of these new triangles. You can find the oriented area of a triangle &lt;code>ABC&lt;/code> by taking the determinant of this matrix:&lt;/p>
&lt;div class="matrix">
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>A&lt;sub>x&lt;/sub>&lt;/td>
&lt;td>A&lt;sub>y&lt;/sub>&lt;/td>
&lt;td>1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>B&lt;sub>x&lt;/sub>&lt;/td>
&lt;td>B&lt;sub>y&lt;/sub>&lt;/td>
&lt;td>1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>C&lt;sub>x&lt;/sub>&lt;/td>
&lt;td>C&lt;sub>y&lt;/sub>&lt;/td>
&lt;td>1&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;/div>
&lt;p>(That actually gives you the area of the parallelogram consisting of two copies of the triangle, but since we only care about the sign, we won&amp;rsquo;t bother to divide it by two.)&lt;/p>
&lt;p>The sign of the oriented area tells you whether your triangle&amp;rsquo;s vertices are listed in clockwise (negative) or counter-clockwise (positive) order. If all three of &lt;code>ABP&lt;/code>, &lt;code>BCP&lt;/code>, and &lt;code>CAP&lt;/code> are counter-clockwise, then the point is inside the triangle.&lt;sup id="fnref:12">&lt;a href="#fn:12" class="footnote-ref" role="doc-noteref">12&lt;/a>&lt;/sup>&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/delaunay/winding-test_hud3a68137b279523b9858e27bdd6d6f7c_105986_1384x1384_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/delaunay/winding-test_hud3a68137b279523b9858e27bdd6d6f7c_105986_692x692_fit_q75_h3_box_3.webp 692w, https://ianthehenry.com/posts/delaunay/winding-test_hud3a68137b279523b9858e27bdd6d6f7c_105986_1384x1384_fit_q75_h3_box_3.webp 1384w, https://ianthehenry.com/posts/delaunay/winding-test_hud3a68137b279523b9858e27bdd6d6f7c_105986_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/delaunay/winding-test_hud3a68137b279523b9858e27bdd6d6f7c_105986_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 692px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/delaunay/winding-test_hud3a68137b279523b9858e27bdd6d6f7c_105986_692x692_fit_box_3.png 692w, https://ianthehenry.com/posts/delaunay/winding-test_hud3a68137b279523b9858e27bdd6d6f7c_105986_1384x1384_fit_box_3.png 1384w, https://ianthehenry.com/posts/delaunay/winding-test_hud3a68137b279523b9858e27bdd6d6f7c_105986_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/delaunay/winding-test_hud3a68137b279523b9858e27bdd6d6f7c_105986_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 692px"
width="692"
height="293"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAIAAAAhqtkfAAAAPklEQVR4nDTMQQ6AMAgF0YGUEhrvf1cW9puofevJOK/M5KgqYADrWoZ191fMOVBaREgyt31v938g6QkAAP//EksNfG0iwmoAAAAASUVORK5CYII=);"
/>&lt;/picture>&lt;/a>
&lt;p>Another, simpler interpretation: given a directed edge &lt;code>AB&lt;/code> of a triangle, this test tells you if point &lt;code>P&lt;/code> lies &amp;ldquo;to the left&amp;rdquo; of the line crossing &lt;code>AB&lt;/code> (counter-clockwise) or &amp;ldquo;to the right&amp;rdquo; of it (clockwise).&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/delaunay/left-right_hu984b6b8b18c534e976a5febb4ffb102f_71310_1002x1002_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/delaunay/left-right_hu984b6b8b18c534e976a5febb4ffb102f_71310_501x501_fit_q75_h3_box_3.webp 501w, https://ianthehenry.com/posts/delaunay/left-right_hu984b6b8b18c534e976a5febb4ffb102f_71310_1002x1002_fit_q75_h3_box_3.webp 1002w, https://ianthehenry.com/posts/delaunay/left-right_hu984b6b8b18c534e976a5febb4ffb102f_71310_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/delaunay/left-right_hu984b6b8b18c534e976a5febb4ffb102f_71310_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 501px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/delaunay/left-right_hu984b6b8b18c534e976a5febb4ffb102f_71310_501x501_fit_box_3.png 501w, https://ianthehenry.com/posts/delaunay/left-right_hu984b6b8b18c534e976a5febb4ffb102f_71310_1002x1002_fit_box_3.png 1002w, https://ianthehenry.com/posts/delaunay/left-right_hu984b6b8b18c534e976a5febb4ffb102f_71310_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/delaunay/left-right_hu984b6b8b18c534e976a5febb4ffb102f_71310_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 501px"
width="501"
height="312"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAIAAAD38zoCAAAAVklEQVR4nDyMQQ6FIAwFee2DD1/d6/1v6IYoAQ2h0k3TTGfUfRN&amp;#43;BKS1Nk4ZKy0prvHY//PPDDjcuVDxFCdkrbUDVSXZMWQLPPNlFoBZ8N4abwAAAP//osoOoryER1wAAAAASUVORK5CYII=);"
/>&lt;/picture>&lt;/a>
&lt;p>If the point is &amp;ldquo;to the left of&amp;rdquo; every (directed, counter-clockwise) edge, then the point is inside the triangle.&lt;/p>
&lt;aside>
&lt;p>I probably mixed up positive/negative and clockwise/counter-clockwise and left/right every single time during that explanation, for which I apologize.&lt;/p>
&lt;/aside>
&lt;h1 id="but-triangle-where">but triangle where&lt;/h1>
&lt;p>So: now we know how to check if a point is inside a triangle. But! We actually get more than one bit of information when we do that test &amp;ndash; we get &lt;em>three&lt;/em> bits of information. Instead of &lt;code>AND&lt;/code>ing them down to a single boolean value, we can use all of the information at our disposal to do something smarter.&lt;/p>
&lt;p>So Guibas &amp;amp; Stolfi describe a technique that they credit to Green &amp;amp; Sibson:&lt;sup id="fnref:13">&lt;a href="#fn:13" class="footnote-ref" role="doc-noteref">13&lt;/a>&lt;/sup> traverse the mesh one triangle at a time, always moving &amp;ldquo;towards&amp;rdquo; the target point, using the information we learned during the triangle test to decide what &amp;ldquo;towards&amp;rdquo; means.&lt;/p>
&lt;p>If we find that the point is not &amp;ldquo;to the left of&amp;rdquo; one particular edge, then we know that it&amp;rsquo;s to the right of that edge. And since we know the whole mesh, we know exactly which triangle lies to the right of that edge, and we can check that triangle next.&lt;/p>
&lt;p>The triangle immediately to the right of that edge may not contain our point either, but it&amp;rsquo;s going to be &lt;em>closer&lt;/em> to the triangle that does, and if we repeat this enough we will &lt;em>eventually&lt;/em> find a home for our point.&lt;/p>
&lt;p>Here, let&amp;rsquo;s take a look at this in action. I omitted the locating step from my first visualization of the triangulation algorithm, but we can add it back in to see the full story:&lt;/p>
&lt;p class="canvas-container">&lt;canvas id="triangulation-with-location" width="384" height="256" tabindex="1" class="interactive">&lt;/canvas>&lt;/p>
&lt;p class="slideshow-controls">&lt;button data-action="pause">❙❙&lt;/button>&lt;button data-action="play">▶&lt;/button>&lt;button data-action="fast">▶▶&lt;/button>&lt;input type="range" class="scrubber" value="0" min="0" max="0" />&lt;/p>
&lt;aside>
&lt;p>In this visualization, notice that I&amp;rsquo;m starting the search from wherever the previous point was inserted. This doesn&amp;rsquo;t help &lt;em>that&lt;/em> much because these points are randomly generated, but it makes it more likely that we start our search from a triangle close to the &amp;ldquo;middle&amp;rdquo; of the mesh. In other situations, though, this can be a fantastic optimization &amp;ndash; imagine finding the triangle under the mouse cursor as it moves around, for example.&lt;/p>
&lt;/aside>
&lt;p>This algorithm is nice because we &lt;em>probably&lt;/em> won&amp;rsquo;t need to traverse the entire graph, but in the worst case we&amp;rsquo;ll still have to check every single triangle. Guibas &amp;amp; Stolfi claim that for a set of &amp;ldquo;reasonably uniform&amp;rdquo; random points, this search will only take O(√n) tests on average, and you can reduce that to roughly constant time if your newly inserted points are &amp;ldquo;close&amp;rdquo; to the previously inserted point. So it&amp;rsquo;s a bit data-dependent, but worst-case linear.&lt;sup id="fnref:14">&lt;a href="#fn:14" class="footnote-ref" role="doc-noteref">14&lt;/a>&lt;/sup>&lt;/p>
&lt;h1 id="is-that-it">is that it&lt;/h1>
&lt;p>We&amp;rsquo;re so close!&lt;/p>
&lt;ol>
&lt;li>I can&amp;rsquo;t actually construct an infinitely large bounding triangle &amp;ndash; is it okay if I just construct a triangle large enough to contain all of my points?&lt;/li>
&lt;li>&lt;del>How am I supposed to find the triangle that contains my new point?&lt;/del>&lt;/li>
&lt;li>&lt;del>What if the new point lies on the edge of an existing triangle?&lt;/del>&lt;/li>
&lt;li>&lt;del>How am I supposed to do this circle test in the first place?&lt;/del>&lt;/li>
&lt;li>What edges do I actually need to check, once I&amp;rsquo;ve added my new edges?&lt;/li>
&lt;li>&lt;del>Wait, how do I &amp;ldquo;flip&amp;rdquo; edges?&lt;/del>&lt;/li>
&lt;li>&lt;del>Wait, how do I even &lt;em>model&lt;/em> edges? How do you even represent triangulations on a computer? I thought I could just model this as a graph, with vertices and edges and pointers, but it seems like I need to keep track of faces as well, and somehow this is a fundamentally different sort of thing than I&amp;rsquo;ve ever encountered before?&lt;/del>&lt;/li>
&lt;/ol>
&lt;p>The last two questions are very specific to this particular algorithm, and the answers won&amp;rsquo;t really make you a smarter person. So if you aren&amp;rsquo;t &lt;em>actually&lt;/em> trying to implement this algorithm, you can safely &lt;a href="#are-we-there-yet">skip to the end&lt;/a>.&lt;/p>
&lt;p>Whenever you add a new point, and connect it to the points of its enclosing triangle or quadrangle, you&amp;rsquo;ll have a point at the middle of a spoke. Like this:&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/delaunay/spokes_hufa198a314e148a89be0a4e16c6e1e9db_107561_848x848_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/delaunay/spokes_hufa198a314e148a89be0a4e16c6e1e9db_107561_424x424_fit_q75_h3_box_3.webp 424w, https://ianthehenry.com/posts/delaunay/spokes_hufa198a314e148a89be0a4e16c6e1e9db_107561_848x848_fit_q75_h3_box_3.webp 848w, https://ianthehenry.com/posts/delaunay/spokes_hufa198a314e148a89be0a4e16c6e1e9db_107561_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/delaunay/spokes_hufa198a314e148a89be0a4e16c6e1e9db_107561_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 424px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/delaunay/spokes_hufa198a314e148a89be0a4e16c6e1e9db_107561_424x424_fit_box_3.png 424w, https://ianthehenry.com/posts/delaunay/spokes_hufa198a314e148a89be0a4e16c6e1e9db_107561_848x848_fit_box_3.png 848w, https://ianthehenry.com/posts/delaunay/spokes_hufa198a314e148a89be0a4e16c6e1e9db_107561_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/delaunay/spokes_hufa198a314e148a89be0a4e16c6e1e9db_107561_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 424px"
width="424"
height="297"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAIAAABxZ0isAAAAc0lEQVR4nDyO2wrDIBAFj3tWXUMK&amp;#43;f/PDBjiZU1pC53HmZdRfIkxllIAP8/6MzSznDOA67pIkNHdP0FEUorKdRwlZ87pr32/7xbMjKQSrTdVriXPA5Kcc4oIVdcKY/i2WQhSaw0AUkr/hd77GAPAOwAA//&amp;#43;GIymYdkIEjgAAAABJRU5ErkJggg==);"
/>&lt;/picture>&lt;/a>
&lt;p>All of those newly created edges are &lt;em>already fine&lt;/em>. We don&amp;rsquo;t have to check them. But we do have to check the edges adjacent to them &amp;ndash; the edges that form a ring around the newly inserted point.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/delaunay/ring_hudd67548716ad4f8181d256be6dfe8a4f_112678_848x848_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/delaunay/ring_hudd67548716ad4f8181d256be6dfe8a4f_112678_424x424_fit_q75_h3_box_3.webp 424w, https://ianthehenry.com/posts/delaunay/ring_hudd67548716ad4f8181d256be6dfe8a4f_112678_848x848_fit_q75_h3_box_3.webp 848w, https://ianthehenry.com/posts/delaunay/ring_hudd67548716ad4f8181d256be6dfe8a4f_112678_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/delaunay/ring_hudd67548716ad4f8181d256be6dfe8a4f_112678_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 424px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/delaunay/ring_hudd67548716ad4f8181d256be6dfe8a4f_112678_424x424_fit_box_3.png 424w, https://ianthehenry.com/posts/delaunay/ring_hudd67548716ad4f8181d256be6dfe8a4f_112678_848x848_fit_box_3.png 848w, https://ianthehenry.com/posts/delaunay/ring_hudd67548716ad4f8181d256be6dfe8a4f_112678_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/delaunay/ring_hudd67548716ad4f8181d256be6dfe8a4f_112678_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 424px"
width="424"
height="297"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAIAAABxZ0isAAAAe0lEQVR4nDyO2w6CQAwF29OepVziJWL0/z9RJMCyWY2aOI/zMBmTLySv46FpfFnyz0hEDEN/OraAuvt46QAVEdRaSVu3OvRdG3xM5X47q6pGhJkl6vRcAfQd162amZVSADg9EcCLbEQwz/Mnl1L6L&amp;#43;Sc930XkXcAAAD//&amp;#43;2UIHPr275GAAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;p>Whenever you flip an edge, you make this ring bigger, effectively adding two new segments to the ring.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/delaunay/ring-flipped_hu2e063f25857b0bc063eec050de13d9e5_115321_848x848_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/delaunay/ring-flipped_hu2e063f25857b0bc063eec050de13d9e5_115321_424x424_fit_q75_h3_box_3.webp 424w, https://ianthehenry.com/posts/delaunay/ring-flipped_hu2e063f25857b0bc063eec050de13d9e5_115321_848x848_fit_q75_h3_box_3.webp 848w, https://ianthehenry.com/posts/delaunay/ring-flipped_hu2e063f25857b0bc063eec050de13d9e5_115321_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/delaunay/ring-flipped_hu2e063f25857b0bc063eec050de13d9e5_115321_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 424px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/delaunay/ring-flipped_hu2e063f25857b0bc063eec050de13d9e5_115321_424x424_fit_box_3.png 424w, https://ianthehenry.com/posts/delaunay/ring-flipped_hu2e063f25857b0bc063eec050de13d9e5_115321_848x848_fit_box_3.png 848w, https://ianthehenry.com/posts/delaunay/ring-flipped_hu2e063f25857b0bc063eec050de13d9e5_115321_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/delaunay/ring-flipped_hu2e063f25857b0bc063eec050de13d9e5_115321_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 424px"
width="424"
height="297"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAIAAABxZ0isAAAAeUlEQVR4nDyO2w7CIBAFdw97gF5sNdb//0cjVnQDRk2cx3mYTJAvJC/bkpLt&amp;#43;/NnJOc8z9NxHQA1s&amp;#43;08AioiaK2R4VHbPI2Hdbje/LQtqhpI9i45hXKv/mocgqgaGNwdgNEiAXQyNZdSyicXY/wv1FrdXUTeAQAA///GLCRiIlrmfAAAAABJRU5ErkJggg==);"
/>&lt;/picture>&lt;/a>
&lt;p>You then have to check those new edges. But notice that they&amp;rsquo;re still a part of the same ring! And in fact as you flip these edges, they will add new segments to the ring as well.&lt;/p>
&lt;p>So you don&amp;rsquo;t need to store a list of &amp;ldquo;dirty edges&amp;rdquo; or recurse to clean up all of these edges. You can just store a specific edge on the ring, check it, and then either move &amp;ldquo;forward&amp;rdquo; (if the edge passed) or &amp;ldquo;backwards&amp;rdquo; (if you had to flip it).&lt;/p>
&lt;p>So the number of edges that you have to check depends on the number of triangles that have the newly inserted point as one of their corners. In the worst case this means means doing O(n) work, but &lt;em>on average&lt;/em> across every point insertion this will net out to constant time, apparently, although I can&amp;rsquo;t find a proof of that.&lt;sup id="fnref:15">&lt;a href="#fn:15" class="footnote-ref" role="doc-noteref">15&lt;/a>&lt;/sup> But we&amp;rsquo;re already doing worst-case O(n) work to find the triangle, so the total runtime of the algorithm remains O(n&lt;sup>2&lt;/sup>).&lt;/p>
&lt;p>Easy! Okay. Which brings us to the last question: what do we do about the &amp;ldquo;infinite bounding triangle?&amp;rdquo;&lt;/p>
&lt;p>There is no triangle you can construct that will be &amp;ldquo;big enough&amp;rdquo; to pass for infinite when we do the point-in-circle test &amp;ndash; as three points get closer to being colinear, the radius of the circle they define will approach infinity &amp;ndash; so we just won&amp;rsquo;t do the point-in-circle test. Whenever a point on our boundary triangle is involved, we&amp;rsquo;ll instead check a series of conditions:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>If the edge in question is a boundary edge, do not flip it. This one is easy so I&amp;rsquo;m not going to draw it for you.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>If the edge contains a boundary vertex, flip it, &lt;em>unless doing so would create an inside-out triangle&lt;/em>.&lt;/p>
&lt;/li>
&lt;/ol>
&lt;a class="image-container" href="https://ianthehenry.com/posts/delaunay/edge-case-2_hu5c9ca0611e60e4307091b662fc270cdd_306048_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/delaunay/edge-case-2_hu5c9ca0611e60e4307091b662fc270cdd_306048_768x768_fit_q75_h3_box_3.webp 768w, https://ianthehenry.com/posts/delaunay/edge-case-2_hu5c9ca0611e60e4307091b662fc270cdd_306048_1536x1536_fit_q75_h3_box_3.webp 1536w, https://ianthehenry.com/posts/delaunay/edge-case-2_hu5c9ca0611e60e4307091b662fc270cdd_306048_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/delaunay/edge-case-2_hu5c9ca0611e60e4307091b662fc270cdd_306048_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/delaunay/edge-case-2_hu5c9ca0611e60e4307091b662fc270cdd_306048_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/delaunay/edge-case-2_hu5c9ca0611e60e4307091b662fc270cdd_306048_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/delaunay/edge-case-2_hu5c9ca0611e60e4307091b662fc270cdd_306048_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/delaunay/edge-case-2_hu5c9ca0611e60e4307091b662fc270cdd_306048_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="461"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAIAAAD38zoCAAAAW0lEQVR4nBTLyRFEIQwDUcsL/kP&amp;#43;0bJIU1y764WZjTG&amp;#43;b9xLAFUFgGTOOSUBbwOAv3rOib03gMwkJemeW/mQR0RVhUNSRPy6Ra610N2S3B2AmZF0dzP7BwAA//8g3yqfX5a1VAAAAABJRU5ErkJggg==);"
/>&lt;/picture>&lt;/a>
&lt;ol start="3">
&lt;li>If an edge separates our newly inserted point from a boundary vertex, do not flip it.&lt;/li>
&lt;/ol>
&lt;a class="image-container" href="https://ianthehenry.com/posts/delaunay/edge-case-3_huca4a1b7fc304ce20231275d7c77e6d41_59182_788x788_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/delaunay/edge-case-3_huca4a1b7fc304ce20231275d7c77e6d41_59182_394x394_fit_q75_h3_box_3.webp 394w, https://ianthehenry.com/posts/delaunay/edge-case-3_huca4a1b7fc304ce20231275d7c77e6d41_59182_788x788_fit_q75_h3_box_3.webp 788w, https://ianthehenry.com/posts/delaunay/edge-case-3_huca4a1b7fc304ce20231275d7c77e6d41_59182_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/delaunay/edge-case-3_huca4a1b7fc304ce20231275d7c77e6d41_59182_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 394px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/delaunay/edge-case-3_huca4a1b7fc304ce20231275d7c77e6d41_59182_394x394_fit_box_3.png 394w, https://ianthehenry.com/posts/delaunay/edge-case-3_huca4a1b7fc304ce20231275d7c77e6d41_59182_788x788_fit_box_3.png 788w, https://ianthehenry.com/posts/delaunay/edge-case-3_huca4a1b7fc304ce20231275d7c77e6d41_59182_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/delaunay/edge-case-3_huca4a1b7fc304ce20231275d7c77e6d41_59182_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 394px"
width="394"
height="289"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAIAAABxZ0isAAAAS0lEQVR4nHzJUQrFIBBD0YzJgAH3v9f3mEpBivar9&amp;#43;vCaXgVEfsP2B5jbHsgM6UQZ2YekEQS4O9/VVXvHQAl2Z6r1ugVProDAAD///EaDell5FzbAAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;p>That&amp;rsquo;s it! Those conditions will give you answers consistent with the answers you would get if your boundary vertices really were infinitely far from the rest of your points. Now all you need to do is to construct a triangle large enough to contain all of your points so that your &amp;ldquo;point in triangle&amp;rdquo; test works correctly, and you&amp;rsquo;re done. (If you don&amp;rsquo;t know all your points ahead of time, you can make any triangle and resize it as you learn points.)&lt;/p>
&lt;h1 id="are-we-there-yet">are we there yet&lt;/h1>
&lt;p>Yes! We did it. That&amp;rsquo;s the algorithm. And the data structure. Two for the price of one.&lt;/p>
&lt;p>Now that you understand how it works, in far more detail than you ever wanted to, let&amp;rsquo;s watch the visualization again. I&amp;rsquo;m excluding the boundary triangle this time so we can zoom in a bit and just bask in the triangular glow.&lt;/p>
&lt;p class="canvas-container">&lt;canvas id="final-demonstration" width="384" height="256" tabindex="1" class="interactive">&lt;/canvas>&lt;/p>
&lt;p class="slideshow-controls">&lt;button data-action="pause">❙❙&lt;/button>&lt;button data-action="play">▶&lt;/button>&lt;button data-action="fast">▶▶&lt;/button>&lt;input type="range" class="scrubber" value="0" min="0" max="0" />&lt;/p>
&lt;p>Well, that&amp;rsquo;s it. From here it&amp;rsquo;s a short, linear-time jaunt to computing the Voronoi diagram, the Gabriel graph, and probably some other interesting stuff. But that&amp;rsquo;ll have to wait for the next post.&lt;/p>
&lt;p>&lt;em>Speaking of next posts,&lt;/em> if you enjoyed this one, don&amp;rsquo;t forget to&amp;hellip;&lt;/p>
&lt;p>No. I can&amp;rsquo;t actually say it.&lt;/p>
&lt;section class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1" role="doc-endnote">
&lt;p>You might be wondering why you would want to construct a Voronoi diagram in the first place, to which I can only respond: why &lt;em>wouldn&amp;rsquo;t&lt;/em> you? They&amp;rsquo;re so cool!&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2" role="doc-endnote">
&lt;p>I googled this phrase before I wrote this post to make sure that this actually is real slang. It seems that &amp;ldquo;smash that like button&amp;rdquo; is a more common phrase, but I don&amp;rsquo;t have a like button. Should I have a like button? Is that a thing that people would smash? What is&amp;hellip; what are we doing here?&lt;/p>
&lt;p>Here, if you really want to smash a like button, you can smash this one:&lt;/p>
&lt;p class="button-container">&lt;input class="smashable" type="button" value="Like" />&lt;/p>
&lt;p>Did that feel good? Did you enjoy that?&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:3" role="doc-endnote">
&lt;p>Actually, what you&amp;rsquo;re seeing here is not &lt;em>exactly&lt;/em> the Gabriel graph &amp;ndash; it&amp;rsquo;s the union of the Gabriel graph and the convex hull, so that the outline of the button is always solid.&amp;#160;&lt;a href="#fnref:3" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:4" role="doc-endnote">
&lt;p>The Delaunay triangulation is not always unique: imagine four points arranged in a square. There are two ways to cut the diagonal, and either choice gives you a valid Delaunay triangulation. But it is only not unique in the case of co-circular points like that, and this randomly generated example doesn&amp;rsquo;t have any.&amp;#160;&lt;a href="#fnref:4" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:5" role="doc-endnote">
&lt;p>In the same paper, Guibas &amp;amp; Stolfi describe another algorithm &amp;ndash; a divide-and-conquer algorithm, kinda like merge-sort &amp;ndash; that &lt;em>seems&lt;/em> more complex, but is actually a lot simpler to code. Originally I wanted to describe &lt;em>both&lt;/em> of these algorithms in this blog post, but, well, come on. This is so long already.&amp;#160;&lt;a href="#fnref:5" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:6" role="doc-endnote">
&lt;p>Fun fact: this pattern of points is called a &lt;a href="https://en.wikipedia.org/wiki/Quincunx">quincunx&lt;/a>. Say it. Quincunx. &lt;em>say it out loud&lt;/em>&amp;#160;&lt;a href="#fnref:6" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:7" role="doc-endnote">
&lt;p>Since finding the distance between two points requires taking a square root, you actually compare the &lt;em>square&lt;/em> of the distance against the square of the radius. But you knew that.&amp;#160;&lt;a href="#fnref:7" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:8" role="doc-endnote">
&lt;p>Citation needed. The test as I presented it requires a division operation, while the determinant calculation only requires multiplication and addition. We can remove the division by subtracting A&lt;sub>z&lt;/sub> multiplying both sides of the inequality by N&lt;sub>z&lt;/sub>, but then we need to invert the logic when N&lt;sub>z&lt;/sub> is negative (which we can do without branching). But I mean&amp;hellip; I neither profiled it nor tallied the individual operations, so I won&amp;rsquo;t try to argue that the plane test is actually faster. Also, like, numerical precision is a thing that computation geometry people worry about? Is the determinant solution more robust in the face of floating-point errors? I don&amp;rsquo;t know.&amp;#160;&lt;a href="#fnref:8" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:9" role="doc-endnote">
&lt;p>More precisely, the dual is only defined for a particular &lt;em>planar embedding&lt;/em> of a graph. There are lots of ways to draw a picture of a graph, and depending on how you draw it, you might end up with a different dual.&amp;#160;&lt;a href="#fnref:9" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:10" role="doc-endnote">
&lt;p>The paper actually describes &lt;em>two&lt;/em> versions of the data structure, first a general version, and then a simplified version that only works for orientable manifolds. What does that mean? I have no idea. I&amp;rsquo;ve never studied topology. Manifolds are a topology thing, right? Also sorry I know I said I wouldn&amp;rsquo;t say manifold and now I&amp;rsquo;ve said it a bunch.&amp;#160;&lt;a href="#fnref:10" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:11" role="doc-endnote">
&lt;p>For a less straightforward representation, I was able to &lt;a href="https://www.ic.unicamp.br/~stolfi/EXPORT/software/c/2000-05-04/libquad/quad.h">find some code on Stolfi&amp;rsquo;s university homepage&lt;/a> that uses a more space-efficient representation. Paraphrasing slightly:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="k">typedef&lt;/span> &lt;span class="kt">char&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">quad_edge_ref&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">typedef&lt;/span> &lt;span class="k">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="n">quad_edge_ref&lt;/span> &lt;span class="n">next&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="p">}&lt;/span> &lt;span class="n">quad_edge&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>The idea here is that a &lt;code>quad_edge_ref&lt;/code> is really a pointer to the &lt;em>interior&lt;/em> of a &lt;code>quad_edge&lt;/code> &amp;ndash; anywhere from 0 to 3 bytes from the struct&amp;rsquo;s base address &amp;ndash; and you use bitmasking operations on the pointer to identify &lt;code>my_index&lt;/code> and to compute the actual base address:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="c1">// 32 bits ought to be enough for anybody
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">quad_edge_ref&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nf">rot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">quad_edge_ref&lt;/span> &lt;span class="n">edge&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">edge&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="mh">0xfffffffcu&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="p">((&lt;/span>&lt;span class="n">edge&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="mi">3u&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="n">quad_edge_ref&lt;/span> &lt;span class="nf">next&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">quad_edge_ref&lt;/span> &lt;span class="n">edge&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="p">((&lt;/span>&lt;span class="n">quad_edge&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">edge&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="mh">0xfffffffcu&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">next&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">edge&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="mi">3u&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>So it only works if you know how your struct is aligned, and the size of your pointers, and&amp;hellip; look maybe this sort of thing could fly in 1985 but I will speak no more of it here.&amp;#160;&lt;a href="#fnref:11" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:12" role="doc-endnote">
&lt;p>Assuming the points of your triangle are defined in counter-clockwise order in the first place. If you think of triangles as being clockwise to begin with, then everything is backwards. Gosh winding order is confusing.&amp;#160;&lt;a href="#fnref:12" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:13" role="doc-endnote">
&lt;p>&amp;ldquo;Computing Dirichlet tesselation in the plane,&amp;rdquo; 1977.&amp;#160;&lt;a href="#fnref:13" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:14" role="doc-endnote">
&lt;p>There is an even more clever but much more complicated triangle traversal algorithm that works in logarithmic time by building up something called the &amp;ldquo;Delaunay tree.&amp;rdquo; It was first described by Boissonnat &amp;amp; Teillaud in their 1989 paper &amp;ldquo;On the randomized construction of the Delaunay tree.&amp;rdquo; It&amp;rsquo;s conceptually very simple, but I&amp;rsquo;m not going to explain it because just &lt;em>look&lt;/em> at how long this blog post is already. There is a decent overview of it starting on &lt;a href="https://people.csail.mit.edu/indyk/6.838-old/handouts/lec9.pdf">page 46 of this PDF&lt;/a>.&amp;#160;&lt;a href="#fnref:14" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:15" role="doc-endnote">
&lt;p>I assume because you can calculate the average number of edges incident to each vertex and that is going to be some small finite number that doesn&amp;rsquo;t depend on the number of vertices. Like some kind of Euler&amp;rsquo;s formula for Delaunay triangulations. But I don&amp;rsquo;t know. I&amp;rsquo;m sure the proof is out there, somewhere, but I am too tired to look any further.&amp;#160;&lt;a href="#fnref:15" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/section></description><pubDate>Mon, 11 Jul 2022 00:00:00 +0000</pubDate><link>https://ianthehenry.com/posts/delaunay/</link><guid isPermaLink="true">https://ianthehenry.com/posts/delaunay/</guid></item><item><title>zsh-autoquoter makes shell quoting slightly less annoying</title><description>&lt;p>Earlier this year I wrote &lt;a href="https://github.com/ianthehenry/zsh-autoquoter">zsh-autoquoter&lt;/a>, a little zsh extension that automatically quotes arguments to commands of my choice.&lt;/p>
&lt;p style="min-height: 368px;">
(asciinema demo)
&lt;/p>
&lt;p>I&amp;rsquo;ve been using it for a few months now, and I&amp;rsquo;ve gotta say: it&amp;rsquo;s pretty nice! I wish I&amp;rsquo;d written this a long time ago. Here are a few use cases I&amp;rsquo;ve found for it so far:&lt;/p>
&lt;h1 id="1-commit-messages">1. commit messages&lt;/h1>
&lt;p>&lt;code>git&lt;/code> has a neat feature where you can specify a commit message directly on the command line, with the &lt;code>-m&lt;/code> flag:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">$ git commit -m &lt;span class="s1">&amp;#39;fix typo&amp;#39;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>It&amp;rsquo;s really useful for repositories like this blog, where almost every commit is a short little memo like that. But sometimes I want to write something a little more complicated:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">$ git commit -m &lt;span class="s2">&amp;#34;\&amp;#34;fire\&amp;#34; wasn&amp;#39;t clear; rename to \&amp;#34;fire_the_missiles\&amp;#34;&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Now, I like to commit &amp;ldquo;early and often,&amp;rdquo; using a patch queue workflow, and then rebase entire branches in order to get them ready for &amp;ldquo;publication&amp;rdquo; to the outside world. So I do this a lot. And it&amp;rsquo;s not &lt;em>that&lt;/em> annoying to open up a vim buffer to write this, but it&amp;rsquo;s &lt;em>slightly&lt;/em> more friction than just typing it directly.&lt;/p>
&lt;h1 id="2-ssh-commands">2. &lt;code>ssh&lt;/code> commands&lt;/h1>
&lt;p>Sometimes I want to run complicated shell commands on remote servers, with globs and pipelines and quoted arguments and all sorts of things, without actually starting up an interactive session on that server.&lt;/p>
&lt;p>&lt;code>ssh&lt;/code> makes this&amp;hellip; possible. But I find it really difficult to wrangle all the nested quoting that this entails.&lt;/p>
&lt;p>Here&amp;rsquo;s a simple example of what I mean:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">$ ssh user@host &lt;span class="s2">&amp;#34;awk &amp;#39;{print &lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="s2">}&amp;#39; file.txt&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>See the problem? &lt;code>$1&lt;/code> is going to be expanded as a shell variable, and fortunately syntax highlighting makes the mistake obvious. (You do have &lt;a href="https://github.com/zsh-users/zsh-syntax-highlighting">syntax highlighting&lt;/a> in your shell, right?)&lt;/p>
&lt;p>To pass a literal &lt;code>$1&lt;/code> to &lt;code>awk&lt;/code>, you &lt;em>actually&lt;/em> have to write:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">ssh user@host &lt;span class="s1">&amp;#39;awk &amp;#34;{print $1}&amp;#34; file.txt&amp;#39;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Except, of course, that&amp;rsquo;s still wrong. You&amp;rsquo;ve just moved the problem to the remote server. You &lt;em>actually actually&lt;/em> have to write something like:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">$ ssh user@host &lt;span class="s2">&amp;#34;awk &amp;#39;{print \$1}&amp;#39; file.txt&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>(Or is it &lt;code>\\$1&lt;/code>?)&lt;/p>
&lt;p>But with zsh-autoquoter, you don&amp;rsquo;t have to do any of that. You just type the obvious thing; the same thing you would type if you were running a local command:&lt;/p>
&lt;pre>&lt;code>$ ssh user@host awk '{print $1}' file.txt
&lt;/code>&lt;/pre>
&lt;p>And it will do the thing you want.&lt;/p>
&lt;h1 id="3-todo-lists">3. &lt;code>todo&lt;/code> lists&lt;/h1>
&lt;p>Once upon a time I wrote a little command-line todo list app to help keep track of my stack at work.&lt;/p>
&lt;pre>&lt;code>todo 'write a blog post about zsh-autoquoter'
&lt;/code>&lt;/pre>
&lt;p>I liked the app; I liked the interface; I liked how simple it was. But it suffered from a simple ergonomic problem: English strings are really annoying to type on the command line.&lt;/p>
&lt;pre>&lt;code>todo 'rework dackery'\''s speech about the &amp;quot;hex machine&amp;quot;'
&lt;/code>&lt;/pre>
&lt;p>But now I can add a zsh-autoquoter rule for it, and give it another try.&lt;/p>
&lt;h1 id="4-sd---new">4. &lt;code>sd --new&lt;/code>&lt;/h1>
&lt;p>A neat feature of &lt;a href="https://ianthehenry.com/posts/a-cozy-nest-for-your-scripts/">&lt;code>sd&lt;/code>&lt;/a> is the ability to quickly stash useful oneliners:&lt;/p>
&lt;pre>&lt;code>sd video poster --new 'ffmpeg -i &amp;quot;$1&amp;quot; -vframes 1 &amp;quot;${basename $1}-poster.png&amp;quot; -y'
&lt;/code>&lt;/pre>
&lt;p>That &lt;em>particular&lt;/em> example happened to fit into single quotes. But I would really like to be able to stash arbitrary commands without worrying about how to escape them. Like this one, for example:&lt;/p>
&lt;pre>&lt;code>nix-env -qaA &amp;quot;nixpkgs.$1&amp;quot; --json | jq -r '.[] | .name + &amp;quot; &amp;quot; + .meta.description, &amp;quot;&amp;quot;, (.meta.longDescription | rtrimstr(&amp;quot;\n&amp;quot;))'
&lt;/code>&lt;/pre>
&lt;p>How am I supposed to quote &lt;em>that&lt;/em> monstrosity? Well, with zsh-autoquoter, of course.&lt;/p>
&lt;h1 id="5-notes-to-self">5. &lt;code>note&lt;/code>s to self&lt;/h1>
&lt;p>For many years I have been taking notes in a simple text file, using a Mac GUI application called &lt;a href="https://www.alfredapp.com">Alfred&lt;/a>. I press a shortcut, Alfred pops up, and I type my note:&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/zsh-autoquoter/alfred_hu9109df11ae5e20ae44a255e1d26d4b3e_52685_1246x1246_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/zsh-autoquoter/alfred_hu9109df11ae5e20ae44a255e1d26d4b3e_52685_623x623_fit_q75_h1_box_3.webp 623w, https://ianthehenry.com/posts/zsh-autoquoter/alfred_hu9109df11ae5e20ae44a255e1d26d4b3e_52685_1246x1246_fit_q75_h1_box_3.webp 1246w, https://ianthehenry.com/posts/zsh-autoquoter/alfred_hu9109df11ae5e20ae44a255e1d26d4b3e_52685_375x375_fit_q75_h1_box_3.webp 375w, https://ianthehenry.com/posts/zsh-autoquoter/alfred_hu9109df11ae5e20ae44a255e1d26d4b3e_52685_750x750_fit_q75_h1_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 623px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/zsh-autoquoter/alfred_hu9109df11ae5e20ae44a255e1d26d4b3e_52685_623x623_fit_box_3.png 623w, https://ianthehenry.com/posts/zsh-autoquoter/alfred_hu9109df11ae5e20ae44a255e1d26d4b3e_52685_1246x1246_fit_box_3.png 1246w, https://ianthehenry.com/posts/zsh-autoquoter/alfred_hu9109df11ae5e20ae44a255e1d26d4b3e_52685_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/zsh-autoquoter/alfred_hu9109df11ae5e20ae44a255e1d26d4b3e_52685_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 623px"
width="623"
height="187"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAYAAABllJ3tAAAATElEQVR4nGI5f/bCpC8fv1n/&amp;#43;/uP4f///wyCggIMzMwsDCDAxMx4lIWDhevzlZMP33z/8pPhx/fvDAwMjAxs7GxgBXzC3J8BAQAA///VWxiK9PaARwAAAABJRU5ErkJggg==);"
/>&lt;/picture>&lt;/a>
&lt;p>Using Alfred for this is a little silly, and I would &lt;em>like&lt;/em> to replace this &amp;ldquo;workflow&amp;rdquo; with this tiny shell script:&lt;/p>
&lt;pre>&lt;code>$ cat ~/bin/note
&lt;/code>&lt;/pre>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="cp">#!/usr/bin/env bash
&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="nb">set&lt;/span> -euo pipefail
&lt;span class="nb">printf&lt;/span> &lt;span class="s1">&amp;#39;%s %s\n&amp;#39;&lt;/span> &lt;span class="k">$(&lt;/span>date &lt;span class="s1">&amp;#39;+%Y-%m-%d&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &amp;gt;&amp;gt; ~/Dropbox/notes.txt
&lt;/code>&lt;/pre>&lt;/div>&lt;p>But these notes can be long, free-from things. It would have been a nightmare to write something like this, for example:&lt;/p>
&lt;pre tabindex="0">&lt;code>2022-01-08 TIL about SSH &amp;quot;key types&amp;quot; and &amp;quot;signature types&amp;quot; being different. if
i want to use this key i have to configure sshd to accept ssh-rsa-sha2-256, not
just ssh-rsa. the error message says that ssh-rsa isn't supported, but it
actually means this particular signature type
&lt;/code>&lt;/pre>&lt;p>But not anymore!&lt;/p>
&lt;h1 id="those-are-all-of-the-examples">those are all of the examples&lt;/h1>
&lt;p>Tempted? &lt;a href="https://github.com/ianthehenry/zsh-autoquoter">Give it a spin!&lt;/a> The extension should work with any zsh plugin manager, and the readme explains how to configure it and enable the (optional) &lt;a href="https://github.com/zsh-users/zsh-syntax-highlighting">zsh-syntax-highlighting&lt;/a> integration.&lt;/p>
&lt;p>Apparently you&amp;rsquo;re supposed to end posts like this with a prominent call to action, so &lt;a href="https://en.wikipedia.org/wiki/Luna_moth">go check out this crazy moth I found on Wikipedia&lt;/a>.&lt;/p></description><pubDate>Sun, 08 May 2022 00:00:00 +0000</pubDate><link>https://ianthehenry.com/posts/zsh-autoquoter/</link><guid isPermaLink="true">https://ianthehenry.com/posts/zsh-autoquoter/</guid></item><item><title>A cozy nest for your scripts</title><description>&lt;p>&lt;a href="https://github.com/ianthehenry/sd">&lt;code>sd&lt;/code>&lt;/a> is a tool for running scripts in your &lt;code>s&lt;/code>cript &lt;code>d&lt;/code>irectory.&lt;/p>
&lt;pre tabindex="0">&lt;code>$ tree ~/sd
/Users/ian/sd
├── blog
│ ├── edit
│ ├── preview
│ └── publish
├── book
│ ├── open
│ ├── words
│ └── typeset
├── nix
│ ├── diff
│ ├── info
│ ├── install
│ ├── shell
│ └── sync
└── video
└── fix
&lt;/code>&lt;/pre>&lt;p>Directories become command groups; executables become subcommands. Instead of a flat &lt;code>~/bin&lt;/code>, you have a cozy nest for your scripts. And you can type:&lt;/p>
&lt;pre tabindex="0">&lt;code>$ sd blog publish --deploy
&lt;/code>&lt;/pre>&lt;p>To run:&lt;/p>
&lt;pre tabindex="0">&lt;code>$ ~/sd/blog/publish --deploy
&lt;/code>&lt;/pre>&lt;p>Which, okay, sure. That&amp;rsquo;s not that exciting.&lt;/p>
&lt;p>The exciting thing is that &lt;code>sd&lt;/code> supports &lt;em>fancy autocompletion&lt;/em>. Take a look:&lt;/p>
&lt;pre tabindex="0">&lt;code>$ sd nix &amp;lt;TAB&amp;gt;
diff -- prints what will happen if you run sync
info -- &amp;lt;package&amp;gt; prints package description
install -- &amp;lt;package&amp;gt; use --latest to install from nixpkgs-unstable
shell -- add gcroots for shell.nix
sync -- make user environment match ~/dotfiles/user.nix
&lt;/code>&lt;/pre>&lt;p>&lt;code>sd&lt;/code> pulls those descriptions from comments in the scripts themselves:&lt;/p>
&lt;pre tabindex="0">&lt;code>$ sd nix info --cat
&lt;/code>&lt;/pre>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="cp">#!/usr/bin/env bash
&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="c1"># &amp;lt;package&amp;gt; prints package description&lt;/span>
&lt;span class="nb">set&lt;/span> -euo pipefail
nix-env -qaA &lt;span class="s2">&amp;#34;nixpkgs.&lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> --json &lt;span class="se">\
&lt;/span>&lt;span class="se">&lt;/span>&lt;span class="p">|&lt;/span> jq -r &lt;span class="s1">&amp;#39;.[] | .name + &amp;#34; &amp;#34; + .meta.description,
&lt;/span>&lt;span class="s1"> &amp;#34;&amp;#34;,
&lt;/span>&lt;span class="s1"> (.meta.longDescription | rtrimstr(&amp;#34;\n&amp;#34;))&amp;#39;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>So they&amp;rsquo;re very easy to write.&lt;/p>
&lt;p>&lt;code>sd&lt;/code> also makes it easy to create &lt;em>new&lt;/em> scripts:&lt;/p>
&lt;pre tabindex="0">&lt;code>$ sd blog laud --new 'echo &amp;quot;good blog ian&amp;quot;'
$ sd blog laud
good blog ian
&lt;/code>&lt;/pre>&lt;p>So you can easily stash oneliners, and you don&amp;rsquo;t have to remember to &lt;code>chmod +x&lt;/code>. (You can also call &lt;code>--new&lt;/code> without providing an initial script, to go straight into your text editor.)&lt;/p>
&lt;aside>
&lt;p>And if you use &lt;a href="https://github.com/ianthehenry/zsh-autoquoter">zsh-autoquoter&lt;/a>, you can add a rule that lets you just write:&lt;/p>
&lt;pre>&lt;code>sd plugin laud --new echo &amp;quot;good plugin ian&amp;quot;
^^^^^^^^^^^^^^^^^^^^^^
&lt;/code>&lt;/pre>
&lt;p>Which can be helpful for stashing complex commands. Here&amp;rsquo;s the rule I use:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-zsh" data-lang="zsh">&lt;span class="nv">ZAQ_PREFIXES&lt;/span>&lt;span class="o">+=(&lt;/span>&lt;span class="s1">&amp;#39;sd [^ ]* --new&amp;#39;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;/aside>
&lt;p>You can also modify the template for new scripts, on a per-directory basis. Although new scripts default to a fairly reasonable &lt;code>bash&lt;/code>:&lt;/p>
&lt;pre>&lt;code>$ sd blog laud --edit
&lt;/code>&lt;/pre>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash"> &lt;span class="m">1&lt;/span> &lt;span class="c1">#!/usr/bin/env bash&lt;/span>
&lt;span class="m">2&lt;/span>
&lt;span class="m">3&lt;/span> &lt;span class="nb">set&lt;/span> -euo pipefail
&lt;span class="m">4&lt;/span>
&lt;span class="m">5&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s1">&amp;#39;good blog ian&amp;#39;&lt;/span>
~
~
&lt;span class="s2">&amp;#34;~/sd/blog/laud&amp;#34;&lt;/span> 5L, 61B
&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="who-cares">who cares&lt;/h1>
&lt;p>Take a peek at your &lt;code>~/bin&lt;/code>. How many scripts there have names like &lt;code>process&lt;/code> or &lt;code>run&lt;/code> or &lt;code>deploy&lt;/code>? How many of them have you forgotten ever writing?&lt;/p>
&lt;p>If the answer is &amp;ldquo;none of them,&amp;rdquo; &lt;code>sd&lt;/code> might not be for you. It sounds like you&amp;rsquo;ve got this figured out already. Good work.&lt;/p>
&lt;p>But &lt;code>sd&lt;/code> is for script hoarders, who want to rage against the chaos of their &lt;code>~/bin&lt;/code>. And &lt;code>sd&lt;/code> is for people who spend a lot of time combing through &lt;code>ctrl-r&lt;/code>, looking for that oneliner that they never thought to make into a script, because it was too much of a hassle and who knows if they&amp;rsquo;ll ever run it again.&lt;/p>
&lt;p>Give it a name! Give it a meaningful command path. Hoard more. The cozy nest is never crowded.&lt;/p>
&lt;h1 id="sd-a-history">&lt;code>sd&lt;/code>: a history&lt;/h1>
&lt;p>A year ago I published &lt;a href="https://ianthehenry.com/posts/sd-my-script-directory/">my first post about &lt;code>sd&lt;/code>&lt;/a>.&lt;/p>
&lt;p>At the time, &lt;code>sd&lt;/code> was a bundle of assorted shell scripts that I cobbled together one afternoon in 2018. I only &amp;ldquo;publicized&amp;rdquo; it all because I wanted to refer to it from &lt;a href="https://ianthehenry.com/posts/how-to-learn-nix/switching-from-homebrew-to-nix/">another blog post&lt;/a> I was writing &amp;ndash; I didn&amp;rsquo;t even really launch it in any usable form; I just described the idea and linked to &lt;a href="https://github.com/ianthehenry/dotfiles">my dotfiles&lt;/a>. I didn&amp;rsquo;t even bother giving it its own repo!&lt;/p>
&lt;p>But even in that barely-baked form, the project got a small amount of traction. People reached out to me about it &amp;ndash; people who actually wanted to &lt;em>use&lt;/em> &lt;code>sd&lt;/code>. Which gave me a very good excuse to buckle down and rewrite it, and I&amp;rsquo;m happy to announce that &lt;code>sd&lt;/code> recently reached &amp;ldquo;1.0&amp;rdquo; status. It is officially &lt;em>a thing that exists that you can use&lt;/em>, instead of &amp;ldquo;an idea I had that you can implement.&amp;rdquo;&lt;/p>
&lt;p>And the thing that exists is &lt;em>much better&lt;/em> than the thing I described a year ago. In a few ways:&lt;/p>
&lt;p>First off, autocomplete is &lt;em>much faster&lt;/em> than the original version. It used to run &lt;code>find&lt;/code>, but now it uses some fancy shell globbing instead. There used to be the tinest delay after pressing tab, but now autocomplete feels instantenous. Which is how autocomplete &lt;em>should&lt;/em> feel.&lt;/p>
&lt;p>Second off, &lt;code>sd&lt;/code> now works as a &lt;em>shell function&lt;/em> in addition to working as a standalone executable &amp;ndash; mostly because it&amp;rsquo;s very easy to install it and set up completion and everything with a shell plugin manager. &lt;code>sd&lt;/code> is not officially packaged anywhere that I&amp;rsquo;m aware of, so this is a pretty convenient way to install it, if you already use a zsh plugin manager.&lt;/p>
&lt;p>But the biggest change is an ergonomic one.&lt;/p>
&lt;p>The original &lt;code>sd&lt;/code> didn&amp;rsquo;t support any flags: the &lt;em>only&lt;/em> thing it could do was run scripts in the &lt;code>~/sd&lt;/code> directory. It came with some &amp;ldquo;built-in&amp;rdquo; commands, like &lt;code>sd edit&lt;/code>, but those were just scripts like any other: &lt;code>~/sd/edit&lt;/code>. This was &lt;em>elegant&lt;/em>, I suppose, but I really just did it this way because it was easy to implement and I was lazy.&lt;/p>
&lt;p>There were a lot of downsides to that approach. It made installation nontrivial, because you had to bootstrap your &lt;code>~/sd&lt;/code> directory with these &amp;ldquo;built-in&amp;rdquo; commands. There was no code sharing between these scripts &amp;ndash; except by &lt;em>assuming&lt;/em> that certain scripts existed in &lt;code>~/sd&lt;/code>, and failing horribly if they didn&amp;rsquo;t. There was no autocomplete for the built-in commands, so if you ran &lt;code>sd edit some command&lt;/code> you had to type &lt;code>some command&lt;/code> yourself. And when you were autocompleting a command at the top-level, you had to tab past all of these &amp;ldquo;built-in&amp;rdquo; scripts before you got to the command group that you wanted.&lt;/p>
&lt;p>The right answer was clearly to support &lt;code>sd some command --edit&lt;/code>, but I hesitated adding argument parsing for a while, because I didn&amp;rsquo;t like the idea of hijacking arguments. What if you wrote a script that expected a &lt;code>--help&lt;/code>?&lt;/p>
&lt;p>I got over this, eventually. Mostly because &lt;em>I have never written a script that used &lt;code>--help&lt;/code>&lt;/em> in my &lt;code>~/sd&lt;/code>. Writing a script that parsed its arguments would imply that I was writing something other than a quick bash script, which would imply that &lt;code>sd&lt;/code> might not be the best place for it.&lt;/p>
&lt;p>But I added an escape hatch &lt;em>just in case:&lt;/em> you can run &lt;code>sd some command --help --really&lt;/code>, and &lt;code>sd&lt;/code> will execute &lt;code>~/sd/some/command --help&lt;/code>. (And yes, you can also run &lt;code>sd some command --help --really --really&lt;/code> if your script expects a &lt;code>--really&lt;/code> flag. Have you ever written a script that expects a &lt;code>--really&lt;/code> flag? I want to hear about that. That sounds like a fun script.)&lt;/p>
&lt;h1 id="the-future-of-sd">the future of &lt;code>sd&lt;/code>&lt;/h1>
&lt;p>I dunno, it&amp;rsquo;s just a cute little program? It doesn&amp;rsquo;t have much of a future. Check it out. &lt;a href="https://github.com/ianthehenry/sd">Nourish my fragile ego by lavishing stars upon the repo.&lt;/a>&lt;/p></description><pubDate>Fri, 11 Mar 2022 00:00:00 +0000</pubDate><link>https://ianthehenry.com/posts/a-cozy-nest-for-your-scripts/</link><guid isPermaLink="true">https://ianthehenry.com/posts/a-cozy-nest-for-your-scripts/</guid></item><item><title>Kyria Build, Part 13: Bill of materials (and commercial alternatives)</title><description>&lt;p>Finally, here&amp;rsquo;s a list of all the parts and tools and things that I used to build my keyboard, along with the approximate prices that I paid for them.&lt;/p>
&lt;p>If you&amp;rsquo;re interested in building something similar, this will give you a &lt;em>rough&lt;/em> idea of how much it might set you back.&lt;/p>
&lt;div class="scroll-container">
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Include&lt;/th>
&lt;th>Price&lt;/th>
&lt;th>Item&lt;/th>
&lt;th>Link&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" checked="checked" />&lt;/label>
&lt;/td>
&lt;td>€24.75&lt;/td>
&lt;td>PCB kit&lt;/td>
&lt;td>&lt;a href="https://splitkb.com/collections/keyboard-kits/products/kyria-pcb-kit">https://splitkb.com/collections/keyboard-kits/products/kyria-pcb-kit&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" checked="checked" />&lt;/label>
&lt;/td>
&lt;td>€24.75&lt;/td>
&lt;td>Acrylic plate case&lt;/td>
&lt;td>&lt;a href="https://splitkb.com/collections/cases-and-plates/products/kyria-acrylic-plate-case">https://splitkb.com/collections/cases-and-plates/products/kyria-acrylic-plate-case&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>€28.88&lt;/td>
&lt;td>Tenting pucks&lt;/td>
&lt;td>&lt;a href="https://splitkb.com/products/tenting-puck">https://splitkb.com/products/tenting-puck&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$29.72&lt;/td>
&lt;td>Stainless steel top plates&lt;/td>
&lt;td>&lt;a href="https://sendcutsend.com">https://sendcutsend.com&lt;/a> &lt;a href="kyria-top.dxf">DXF&lt;/a> (&lt;a href="kyria-top-with-puck.dxf">DXF with puck&lt;/a>)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$39.02&lt;/td>
&lt;td>Tapped aluminum bottom plates&lt;/td>
&lt;td>&lt;a href="https://sendcutsend.com">https://sendcutsend.com&lt;/a> &lt;a href="kyria-bottom.dxf">DXF&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$55.94&lt;/td>
&lt;td>The aluminum bottom plates I actually bought&lt;/td>
&lt;td>&lt;a href="https://sendcutsend.com">https://sendcutsend.com&lt;/a> &lt;a href="kyria-bottom-dumb.dxf">DXF&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" checked="checked" />&lt;/label>
&lt;/td>
&lt;td>$50.00&lt;/td>
&lt;td>2x nice!nano&lt;/td>
&lt;td>&lt;a href="https://mkultra.click/nice-nano-v2/">https://mkultra.click/nice-nano-v2/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$35.98&lt;/td>
&lt;td>2x Elite-C&lt;/td>
&lt;td>&lt;a href="https://mkultra.click/elite-c-v4/">https://mkultra.click/elite-c-v4/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>€13.20&lt;/td>
&lt;td>2x Pro-micro&lt;/td>
&lt;td>&lt;a href="https://splitkb.com/products/pro-micro-atmega32u4-5v-16mhz">https://splitkb.com/products/pro-micro-atmega32u4-5v-16mhz&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" checked="checked" />&lt;/label>
&lt;/td>
&lt;td>$27.50&lt;/td>
&lt;td>50x switches&lt;/td>
&lt;td>&lt;a href="https://mkultra.click/choc-switches/">https://mkultra.click/choc-switches/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" checked="checked" />&lt;/label>
&lt;/td>
&lt;td>$18.50&lt;/td>
&lt;td>50x MBK Keycaps&lt;/td>
&lt;td>&lt;a href="https://mkultra.click/mbk-choc-keycaps/">https://mkultra.click/mbk-choc-keycaps/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" checked="checked" />&lt;/label>
&lt;/td>
&lt;td>$11.00&lt;/td>
&lt;td>2x Mill-Max HiPro sockets&lt;/td>
&lt;td>&lt;a href="https://mkultra.click/mill-max-micro-controller-sockets-and-pins/">https://mkultra.click/mill-max-micro-controller-sockets-and-pins/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$9.00&lt;/td>
&lt;td>2x Mill-Max header pins&lt;/td>
&lt;td>&lt;a href="https://mkultra.click/mill-max-micro-controller-sockets-and-pins/">https://mkultra.click/mill-max-micro-controller-sockets-and-pins/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" checked="checked" />&lt;/label>
&lt;/td>
&lt;td>$8.00&lt;/td>
&lt;td>2x 301230 Battery&lt;/td>
&lt;td>&lt;a href="https://mkultra.click/301230-lipo-battery-with-jst-connector/">https://mkultra.click/301230-lipo-battery-with-jst-connector/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$7.99&lt;/td>
&lt;td>Female JST connectors&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B07NWD5NTN">https://www.amazon.com/dp/B07NWD5NTN&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$7.99&lt;/td>
&lt;td>Rubber feetsies&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B08L636363">https://www.amazon.com/dp/B08L636363&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$14.98&lt;/td>
&lt;td>M2 screws&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B08NC2RZK2">https://www.amazon.com/dp/B08NC2RZK2&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$9.99&lt;/td>
&lt;td>Assorted height standoffs&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B014KJX65W">https://www.amazon.com/dp/B014KJX65W&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$6.99&lt;/td>
&lt;td>O-rings&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B073QX1BBR">https://www.amazon.com/dp/B073QX1BBR&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$14.99&lt;/td>
&lt;td>15mm round magnets&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B07MV2MKD5">https://www.amazon.com/dp/B07MV2MKD5&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Total&lt;/td>
&lt;td>&lt;span class="parts-total">$0.00&lt;/span>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;/div>
&lt;p>The default selection only includes the parts that are necessary to build a &amp;ldquo;vanilla&amp;rdquo; wireless Kyria. That means using diode legs for the header pins, soldering the batteries directly without a JST connector, and only using the stock acrylic case. (Bear in mind that if you get a metal case, you also need to source all of the associated hardware that comes with the splitkb case.)&lt;/p>
&lt;aside>
&lt;p>With the Kyria rev2 you&amp;rsquo;ll actually want a different kind of JST connector that can be soldered directly to the PCB. But I&amp;rsquo;m not sure exactly what that looks like. I&amp;rsquo;ll update the table once I know more.&lt;/p>
&lt;/aside>
&lt;p>You can save quite a bit with a wired build &amp;ndash; although you&amp;rsquo;d have to add in a TRS/TRRS cable (the Kyria rev2 supports either) and a USB cable, which I didn&amp;rsquo;t include here. There&amp;rsquo;s just way too much variety.&lt;/p>
&lt;p>You could make it slightly cheaper if you chose not to socket your microcontroller, but that&amp;rsquo;s sort of a crazy choice, given that the battery would have nowhere to fit if you do that. You could also forego the case entirely and just solder switches directly onto the PCB, which would bring the price tag down under $150. But then you&amp;rsquo;d probably want to buy some kind of foam bottom padding or rubber feet or something separately.&lt;/p>
&lt;p>Building a keyboard also took a lot of &lt;em>tools&lt;/em>. These are things that are not necessarily directly keyboard-related, but that I used over the course of building it. I tried to make a list of &lt;em>every single tool&lt;/em> that I used on this project, more as a fun exercise than an actually useful guide. I had most of things already; the only tools I bought specifically for this project were the soldering-related things and the multimeter.&lt;/p>
&lt;p>The prices here are &lt;em>extremely&lt;/em> rough: I tried to reflect what I originally paid for things, but I didn&amp;rsquo;t buy all of these things on Amazon, and even when I did sometimes the price has changed wildly since. Also the quantities are almost nonsensical: I bought a pack of a dozen rolls of shop towels years ago, but only used a tiny fraction of one roll on this project. But this list includes the full dozen, because whatever.&lt;/p>
&lt;div class="scroll-container">
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Include&lt;/th>
&lt;th>Price&lt;/th>
&lt;th>Tool&lt;/th>
&lt;th>Notes&lt;/th>
&lt;th>Link&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" checked="checked" />&lt;/label>
&lt;/td>
&lt;td>$39.99&lt;/td>
&lt;td>Soldering iron&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B087832Y16">https://www.amazon.com/dp/B087832Y16&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" checked="checked" />&lt;/label>
&lt;/td>
&lt;td>$11.99&lt;/td>
&lt;td>Solder&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B0759P8GBZ">https://www.amazon.com/dp/B0759P8GBZ&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" checked="checked" />&lt;/label>
&lt;/td>
&lt;td>$23.99&lt;/td>
&lt;td>Multimeter&lt;/td>
&lt;td>testing switches and solder joints&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B01NAVAT9S">https://www.amazon.com/dp/B01NAVAT9S&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" checked="checked" />&lt;/label>
&lt;/td>
&lt;td>$7.40&lt;/td>
&lt;td>Flush cutters&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B00FZPDG1K">https://www.amazon.com/dp/B00FZPDG1K&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$22.39&lt;/td>
&lt;td>Switch lubricant&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B00MWLDALQ">https://www.amazon.com/dp/B00MWLDALQ&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$5.94&lt;/td>
&lt;td>Black spraypaint&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B0016HM4DM">https://www.amazon.com/dp/B0016HM4DM&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$3.17&lt;/td>
&lt;td>Sandpaper&lt;/td>
&lt;td>smoothing aluminum, finishing wood&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B00004Z47W">https://www.amazon.com/dp/B00004Z47W&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$28.99&lt;/td>
&lt;td>Files&lt;/td>
&lt;td>deburring, shaping wood covers&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B07TS17G4W">https://www.amazon.com/dp/B07TS17G4W&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$99.00&lt;/td>
&lt;td>Power drill&lt;/td>
&lt;td>countersinking screws&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B07QC9DRW6">https://www.amazon.com/dp/B07QC9DRW6&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$9.97&lt;/td>
&lt;td>Drill bits&lt;/td>
&lt;td>countersinking screws&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B07DH55YRX">https://www.amazon.com/dp/B07DH55YRX&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$14.47&lt;/td>
&lt;td>Assorted tweezers&lt;/td>
&lt;td>dissassembling switches, bending pins&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B07D6JXD7J">https://www.amazon.com/dp/B07D6JXD7J&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$25.83&lt;/td>
&lt;td>Ventilator&lt;/td>
&lt;td>spray painting&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B000FTEDMM">https://www.amazon.com/dp/B000FTEDMM&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$12.24&lt;/td>
&lt;td>Eye goggles&lt;/td>
&lt;td>spray painting&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B01A12J3GI">https://www.amazon.com/dp/B01A12J3GI&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$39.54&lt;/td>
&lt;td>Nitrile gloves&lt;/td>
&lt;td>spray painting&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B07DRQK1N5">https://www.amazon.com/dp/B07DRQK1N5&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$4.99&lt;/td>
&lt;td>Tiny brush&lt;/td>
&lt;td>lubricating switches&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B00V4EG6D6">https://www.amazon.com/dp/B00V4EG6D6&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$11.99&lt;/td>
&lt;td>Bar magnets&lt;/td>
&lt;td>holding springs&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B07WCBDPMJ">https://www.amazon.com/dp/B07WCBDPMJ&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$4.59&lt;/td>
&lt;td>Solder sucker&lt;/td>
&lt;td>included with the soldering iron I linked&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B09CYKNYRF">https://www.amazon.com/dp/B09CYKNYRF&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$4.99&lt;/td>
&lt;td>Keycap puller&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B075CZCTXM">https://www.amazon.com/dp/B075CZCTXM&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$6.99&lt;/td>
&lt;td>Wire stripper&lt;/td>
&lt;td>prepping battery terminals &amp;ndash; unnecessary with rev2&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B06X9875Z7">https://www.amazon.com/dp/B06X9875Z7&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$10.99&lt;/td>
&lt;td>Helping hands&lt;/td>
&lt;td>completely unnecessary with rev2&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B000P42O3C">https://www.amazon.com/dp/B000P42O3C&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$14.99&lt;/td>
&lt;td>Solder practice kit&lt;/td>
&lt;td>completely unnecessary&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B07CK3RCKS">https://www.amazon.com/dp/B07CK3RCKS&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$18.98&lt;/td>
&lt;td>Shop towels&lt;/td>
&lt;td>finishing wood&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B0035BTQ06">https://www.amazon.com/dp/B0035BTQ06&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$13.99&lt;/td>
&lt;td>Furniture wax&lt;/td>
&lt;td>finishing wood&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B07SXBCB17">https://www.amazon.com/dp/B07SXBCB17&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$18.50&lt;/td>
&lt;td>Ryoba&lt;/td>
&lt;td>cutting wood covers&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B000CEF5HM">https://www.amazon.com/dp/B000CEF5HM&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$14.75&lt;/td>
&lt;td>Marking gauge&lt;/td>
&lt;td>scoring wood to cut in half&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B00J00DJ0E">https://www.amazon.com/dp/B00J00DJ0E&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$19.99&lt;/td>
&lt;td>Marking knife&lt;/td>
&lt;td>tracing cover pattern&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B01FCW6BAS">https://www.amazon.com/dp/B01FCW6BAS&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$14.99&lt;/td>
&lt;td>Awl&lt;/td>
&lt;td>locating screwholes on wood cover&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B00IXVQMPU">https://www.amazon.com/dp/B00IXVQMPU&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$28.95&lt;/td>
&lt;td>Mallet&lt;/td>
&lt;td>fitting magnets into holes (any hammer would work, with something soft on it)&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B000CER0PC">https://www.amazon.com/dp/B000CER0PC&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$1.93&lt;/td>
&lt;td>Electric tape&lt;/td>
&lt;td>lining wood cover; magnet backing&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B001ULCB1O">https://www.amazon.com/dp/B001ULCB1O&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;label>&lt;input type="checkbox" />&lt;/label>
&lt;/td>
&lt;td>$4.84&lt;/td>
&lt;td>Contact adhesive&lt;/td>
&lt;td>keycap modding&lt;/td>
&lt;td>&lt;a href="https://www.amazon.com/dp/B06WGSRM4Z">https://www.amazon.com/dp/B06WGSRM4Z&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Total&lt;/td>
&lt;td>&lt;span class="tools-total">$0.00&lt;/span>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;/div>
&lt;p>I only selected the tools you &lt;em>need&lt;/em> to have to assemble a basic keyboard, and of course you can find cheaper versions of all of them anyway.&lt;/p>
&lt;p>Grand total: &lt;span class="parts-total">$0&lt;/span> parts + &lt;span class="tools-total">$0&lt;/span> tools = &lt;span class="grand-total">$0&lt;/span>&lt;/p>
&lt;p>Obviously you can find different versions of everything here, and you can get by without &lt;em>most&lt;/em> of them. Also I didn&amp;rsquo;t include, like, dish soap, even though I used dish soap to clean the metal before painting. And like, I used a desk and a chair and stuff. So it&amp;rsquo;s not &lt;em>completely&lt;/em> exhaustive.&lt;/p>
&lt;h1 id="commercial-alternatives">Commercial alternatives&lt;/h1>
&lt;p>So the version of the keyboard that I built &amp;ndash; with my custom painted plates and battery-powered nice!nanos &amp;ndash; would cost about $300 in parts. And then you have to add in another $85 or so in tools on top of that if you don&amp;rsquo;t already have electronics-making stuff. We&amp;rsquo;ll round it out to a cool $400, starting from scratch.&lt;/p>
&lt;p>That&amp;rsquo;s a &lt;em>lot!&lt;/em>&lt;/p>
&lt;p>But unfortunately, at the time that I am writing this, there isn&amp;rsquo;t really a cheaper alternative if you want a wireless split ergonomic keyboard. You just can&amp;rsquo;t buy them off the shelf.&lt;/p>
&lt;p>For comparison: the &lt;a href="https://ergodox-ez.com/">Ergodox EZ&lt;/a> &amp;ndash; which is not wireless &amp;ndash; costs $270 in the vanilla configuration (without LEDs), plus another $25 for the &amp;ldquo;tilt/tent kit&amp;rdquo; if you don&amp;rsquo;t want to set it down flat. So $295 for something kind of comparable.&lt;/p>
&lt;p>The &lt;a href="https://www.zsa.io/moonlander/">Moonlander&lt;/a> &amp;ndash; another wired split keyboard from ZSA &amp;ndash; is $365.&lt;/p>
&lt;p>The &lt;a href="https://www.indiegogo.com/projects/the-keyboardio-model-100--4/x/27943757">Keyboard.io Model 100&lt;/a> &amp;ndash; which is only available in pre-order right now &amp;ndash; costs $309, and includes a single tripod thread. It is also wired.&lt;/p>
&lt;p>The &lt;a href="https://kinesis-ergo.com/shop/advantage2/">Kinesis Advantage2&lt;/a> is $349, and is neither wireless nor split. Although it&amp;rsquo;s &lt;em>sort of&lt;/em> split.&lt;/p>
&lt;p>So building your own bespoke wireless keyboard costs &lt;em>roughly&lt;/em> the same as buying a high-end commercial wired ergonomic keyboard. You aren&amp;rsquo;t saving money by buliding it yourself, and you&amp;rsquo;ll be giving up most of a weekend assembling it. Not to mention all the time you spend designing and thinking about plates and switches and keycaps and tinkering with your keymap.&lt;/p>
&lt;p>But I don&amp;rsquo;t know of any other way to get a wireless split keyboard today.&lt;/p>
&lt;p>But that&amp;rsquo;s changing! There are a couple of wireless split keyboards &lt;em>on the horizon&lt;/em> that you might be able to buy some time in the next year.&lt;/p>
&lt;p>First up: the &lt;a href="https://kinesis-ergo.com/keyboards/advantage360/">Kinesis Advantage360 Pro&lt;/a>. No idea what the price point will be when it comes out in &amp;ldquo;Summer 2022,&amp;rdquo; but there was a low-volume pre-order for $440. This looks like a big improvement over the Advantage2: adjustable tenting, fixed or variable split, and Bluetooth. Plus ZMK &amp;ndash; reconfiguring the Advantage2 was always a little bit annoying.&lt;/p>
&lt;p>Next up: the &lt;a href="https://www.moergo.com/">Glove80&lt;/a>. This is currently &lt;a href="https://www.kickstarter.com/projects/moergo/glove80-the-incredibly-comfortable-ergonomic-keyboard">live on Kickstarter&lt;/a> for $293-$313, with a final MSRP of $400 after the project launches. (The initial batch of 1000 units is estimated to ship in September 2022.)&lt;/p>
&lt;p>The Glove80 has an interesting mounting scheme: it&amp;rsquo;s supported on flat surfaces by a few stilt-like legs with rubber bumpers. But the rubber bumpers are actually the heads of screws, so you can turn them to adjust the exact height and angle that the keyboard sits at. You can also remove them entirely, leaving behind M4 tapped holes, which you could theoretically use as a base for clamping &amp;ndash; the kickstarter campaign has some images of an acrylic plate secured to these mounting points that functions as an adapter for standard 1/4-20 camera gear. It also has a dual-height thumb row similar to what I hacked up, except that it doesn&amp;rsquo;t need fat keycaps to do it.&lt;/p>
&lt;p>And that&amp;rsquo;s it.&lt;/p>
&lt;p>Those two keyboards are the &lt;em>only&lt;/em> split wireless keyboards that I&amp;rsquo;m aware of, and neither of them actually exist yet. If you know of any others, please &lt;a href="mailto:ianthehenry@gmail.com?subject=i know a surprising amount about keyboards and i'm here to help">get in touch&lt;/a>.&lt;/p></description><pubDate>Sat, 08 Jan 2022 00:00:00 +0000</pubDate><link>https://ianthehenry.com/posts/kyria-build/bill-of-materials/</link><guid isPermaLink="true">https://ianthehenry.com/posts/kyria-build/bill-of-materials/</guid></item><item><title>Kyria Build, Part 12: Flashing the firmware</title><description>&lt;p>So &lt;a href="https://qmk.fm/">QMK&lt;/a> is like the gold standard for custom keyboard firmware. I&amp;rsquo;ve used it on many keyboards before, and even used it to write &lt;a href="https://ianthehenry.com/posts/peggi/">a weird custom arpeggio keyboard&lt;/a>. It works great and I like it and I have no complaints.&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;/p>
&lt;p>But QMK doesn&amp;rsquo;t support the nice!nano (or possibly &lt;em>can&amp;rsquo;t&lt;/em> support it, for some kind of weird licensing reason? I don&amp;rsquo;t know). So if you want Bluetooth, you have to use &lt;a href="https://zmk.dev/">ZMK&lt;/a> instead.&lt;/p>
&lt;p>ZMK is no QMK.&lt;/p>
&lt;p>When you&amp;rsquo;re writing QMK, you&amp;rsquo;re writing a little C program that you compile like any other code. You can write functions to send keystrokes manually, but typically you use some built-in macros to declare a simple layout. A simple QMK keymap might look like this:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="k">const&lt;/span> &lt;span class="kt">uint16_t&lt;/span> &lt;span class="n">PROGMEM&lt;/span> &lt;span class="n">keymaps&lt;/span>&lt;span class="p">[][&lt;/span>&lt;span class="n">MATRIX_ROWS&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">MATRIX_COLS&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="p">[&lt;/span>&lt;span class="n">_QWERTY&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">LAYOUT_ortho_4x12&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">KC_TAB&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_Q&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_W&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_E&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_R&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_T&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_Y&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_U&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_I&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_O&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_P&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_MINS&lt;/span>&lt;span class="p">,&lt;/span> \
&lt;span class="n">KC_ESC&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_A&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_S&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_D&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_F&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_G&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_H&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_J&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_K&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_L&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_SCLN&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">KC_QUOT&lt;/span>&lt;span class="p">,&lt;/span> \
&lt;span class="n">LOWER&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_Z&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_X&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_C&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_V&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_B&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_N&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_M&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_COMM&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">KC_DOT&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_SLSH&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">RAISE&lt;/span> &lt;span class="p">,&lt;/span> \
&lt;span class="n">KC_LCTL&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">KC_LCTL&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">_______&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">KC_LALT&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">KC_LGUI&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">KC_LSFT&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">KC_SPC&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">KC_BSPC&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">KC_ENT&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">_______&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">_______&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">_______&lt;/span> \
&lt;span class="p">),&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>When you&amp;rsquo;re writing ZMK, you&amp;rsquo;re&amp;hellip; declaring some kind of &lt;em>something&lt;/em>. It&amp;rsquo;s not really clear&amp;hellip; what it is, or what format it&amp;rsquo;s in, or why.&lt;/p>
&lt;pre tabindex="0">&lt;code>/ {
keymap {
compatible = &amp;quot;zmk,keymap&amp;quot;;
default_layer {
bindings = &amp;lt;
&amp;amp;kp TAB &amp;amp;kp Q &amp;amp;kp W &amp;amp;kp E &amp;amp;kp R &amp;amp;kp T &amp;amp;kp Y &amp;amp;kp U &amp;amp;kp I &amp;amp;kp O &amp;amp;kp P &amp;amp;kp MINUS
&amp;amp;kp ESC &amp;amp;kp A &amp;amp;kp S &amp;amp;kp D &amp;amp;kp F &amp;amp;kp G &amp;amp;kp H &amp;amp;kp J &amp;amp;kp K &amp;amp;kp L &amp;amp;kp SEMI &amp;amp;kp SQT
&amp;amp;mo NNUM &amp;amp;kp Z &amp;amp;kp X &amp;amp;kp C &amp;amp;kp V &amp;amp;kp B &amp;amp;kp LALT &amp;amp;kp LGUI &amp;amp;kp RET &amp;amp;kp SPACE &amp;amp;kp N &amp;amp;kp M &amp;amp;kp COMMA &amp;amp;kp DOT &amp;amp;kp FSLH &amp;amp;mo PUNC
&amp;amp;kp LCTRL &amp;amp;kp LALT &amp;amp;kp LGUI &amp;amp;kp LSHFT &amp;amp;kp LCTRL &amp;amp;kp RET &amp;amp;kp SPACE &amp;amp;kp BSPC &amp;amp;none &amp;amp;none
&amp;gt;;
};
};
};
&lt;/code>&lt;/pre>&lt;p>No idea. Truly no idea. I wrote this, but I don&amp;rsquo;t really know what I wrote.&lt;/p>
&lt;p>I looked it up and apparently it&amp;rsquo;s a normal familiar thing if you&amp;rsquo;re used to writing drivers, maybe. &amp;ldquo;Device tree source&amp;rdquo; format. No idea.&lt;/p>
&lt;p>Anyway, the declarativeness is sort of nice, if you&amp;rsquo;re just defining a keyboard, but annoying if you&amp;rsquo;re trying to do something more complicated. I&amp;rsquo;m not sure if it has to be declarative for like&amp;hellip; energy efficiency? Or if this is an explicit design choice. Or something else.&lt;/p>
&lt;p>I know very little about ZMK.&lt;/p>
&lt;p>The only thing I &lt;em>really&lt;/em> know about ZMK is that it has the worst error messages I have ever seen.&lt;/p>
&lt;p>Let&amp;rsquo;s take a look at the error you get if you typo a key &amp;ndash; possibly the easiest mistake to make, when you&amp;rsquo;re writing your first keymap.&lt;/p>
&lt;p>This is a real thing that I did: I typed &lt;code>C_VOL_DOWN&lt;/code> instead of &lt;code>C_VOL_DN&lt;/code>. And this is the real error message that ZMK gave me:&lt;/p>
&lt;pre tabindex="0">&lt;code>$ west build -d build/right -b nice_nano -- -DSHIELD=kyria_right
-- Application: /Users/ian/src/zmk/app
-- Zephyr version: 2.5.0 (/Users/ian/src/zmk/zephyr)
-- Found west (found suitable version &amp;quot;0.12.0&amp;quot;, minimum required is &amp;quot;0.7.1&amp;quot;)
-- git describe failed: fatal: No tags can describe '68c11efba6e1eb2d689b3039553868b1b1c57f94'.
Try --always, or create some tags.;
BUILD_VERSION is left undefined
-- Board: nice_nano, Shield(s): kyria_right
-- Cache files will be written to: /Users/ian/Library/Caches/zephyr
-- Found dtc: /nix/store/jh3yvyxhrspb9mwxwzwp0h799ds2jmn5-dtc-1.6.1/bin/dtc (found suitable version &amp;quot;1.6.1&amp;quot;, minimum required is &amp;quot;1.4.6&amp;quot;)
-- Found toolchain: gnuarmemb (/nix/store/l4lsff9wm46j29b69ji2r9rr4wpxdby9-gcc-arm-embedded-10.3.1)
-- Found BOARD.dts: /Users/ian/src/zmk/app/boards/arm/nice_nano/nice_nano.dts
-- Found devicetree overlay: /Users/ian/src/zmk/app/boards/shields/kyria/kyria_right.overlay
-- Found devicetree overlay: /Users/ian/src/zmk/app/boards/shields/kyria/boards/nice_nano.overlay
-- Found devicetree overlay: /Users/ian/src/zmk/app/boards/shields/kyria/kyria.keymap
Error: nice_nano.dts.pre.tmp:834.205-206 syntax error
FATAL ERROR: Unable to parse input tree
CMake Error at /Users/ian/src/zmk/zephyr/cmake/dts.cmake:205 (message):
command failed with return code: 1
Call Stack (most recent call first):
/Users/ian/src/zmk/zephyr/cmake/app/boilerplate.cmake:535 (include)
/Users/ian/src/zmk/zephyr/share/zephyr-package/cmake/ZephyrConfig.cmake:24 (include)
/Users/ian/src/zmk/zephyr/share/zephyr-package/cmake/ZephyrConfig.cmake:40 (include_boilerplate)
CMakeLists.txt:17 (find_package)
-- Configuring incomplete, errors occurred!
See also &amp;quot;/Users/ian/src/zmk/app/build/right/CMakeFiles/CMakeOutput.log&amp;quot;.
See also &amp;quot;/Users/ian/src/zmk/app/build/right/CMakeFiles/CMakeError.log&amp;quot;.
FATAL ERROR: command exited with status 1: /nix/store/3lbch64fradcsks9vmxdxlhjhz2lf58s-cmake-3.21.2/bin/cmake -DWEST_PYTHON=/nix/store/5rpfiqanhg1gi1a8k4qq69mxbhz3nxnq-python3-3.8.12/bin/python3.8 -B/Users/ian/src/zmk/app/build/right -S/Users/ian/src/zmk/app -GNinja -DSHIELD=kyria_right
&lt;/code>&lt;/pre>&lt;p>Note that there is absolutely nothing there about &lt;code>C_VOL_DOWN&lt;/code>. Or really anything at all about what went wrong. There is a line number, if you look carefully:&lt;/p>
&lt;pre>&lt;code>Error: nice_nano.dts.pre.tmp:834.205-206 syntax error
&lt;/code>&lt;/pre>
&lt;p>But that&amp;rsquo;s not a file that I &lt;em>wrote&lt;/em>. The line number doesn&amp;rsquo;t correspond at all to any source, but by running &lt;code>find . -name nice_nano.dts.pre.tmp&lt;/code> I was able to locate some random temporary build file, and look in at, and see what I guess is a macro expansion of the actual line. It looked like this:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">none&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">kp&lt;/span> &lt;span class="p">((((&lt;/span>&lt;span class="mh">0x07&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="mi">16&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mh">0x44&lt;/span>&lt;span class="p">)))&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">kp&lt;/span> &lt;span class="p">((((&lt;/span>&lt;span class="mh">0x07&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="mi">16&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mh">0x45&lt;/span>&lt;span class="p">)))&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">kp&lt;/span> &lt;span class="p">((((&lt;/span>&lt;span class="mh">0x07&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="mi">16&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mh">0x68&lt;/span>&lt;span class="p">)))&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">kp&lt;/span> &lt;span class="p">((((&lt;/span>&lt;span class="mh">0x07&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="mi">16&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mh">0x69&lt;/span>&lt;span class="p">)))&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">kp&lt;/span> &lt;span class="p">((((&lt;/span>&lt;span class="mh">0x07&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="mi">16&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mh">0x6A&lt;/span>&lt;span class="p">)))&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">kp&lt;/span> &lt;span class="p">((((&lt;/span>&lt;span class="mh">0x0C&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="mi">16&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mh">0xE2&lt;/span>&lt;span class="p">)))&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">kp&lt;/span> &lt;span class="n">C_VOL_DOWN&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">kp&lt;/span> &lt;span class="p">(((((&lt;/span>&lt;span class="mh">0x0C&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="mi">16&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mh">0xE9&lt;/span>&lt;span class="p">))))&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">kp&lt;/span> &lt;span class="p">(((((&lt;/span>&lt;span class="mh">0x0C&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="mi">16&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mh">0x70&lt;/span>&lt;span class="p">))))&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">kp&lt;/span> &lt;span class="p">(((((&lt;/span>&lt;span class="mh">0x0C&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="mi">16&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mh">0x6F&lt;/span>&lt;span class="p">))))&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">none&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>If you scroll far enough to the right there you will eventually notice that &lt;code>C_VOL_DOWN&lt;/code> has not been replaced by a hex code, which was the only indication I had of my mistake.&lt;/p>
&lt;p>So&amp;hellip; not the &lt;em>best&lt;/em> error messages.&lt;/p>
&lt;p>But by not making any mistakes, I was able to flash it, and everything worked fine.&lt;/p>
&lt;aside>
&lt;p>Actually I &lt;em>wasn&amp;rsquo;t&lt;/em> able to flash it right away, because even after doing the reset dance to put the nice!nano into &amp;ldquo;copy firmware onto me&amp;rdquo; mode, my computer wasn&amp;rsquo;t recognizing it as a storage device. I spent half an hour furiously googling &amp;ldquo;bootloader not recognized nice nano please help&amp;rdquo; before I realized that I had plugged in a USB-C &lt;em>charging&lt;/em> cable without any data lines. Getting a different cable fixed it immediately. What a fun standard.&lt;/p>
&lt;/aside>
&lt;p>Something very cool about using ZMK is that you can manually switch between different Bluetooth profiles.&lt;/p>
&lt;p>My keyboard is simultaneously &amp;ldquo;paired&amp;rdquo; with my laptop, my phone, and my iPad. But I can press a button to decide which one receives keystrokes. And press another button to switch between USB output and Bluetooth output, in the case that I have it plugged in to charge.&lt;/p>
&lt;p>This works a lot better than the current state of the art, which appears to be some kind of distributed automata situation where all of my Bluetooth-connected devices independently conspire to be as frustrating to use as possible. At this point I have learned to expect my phone to steal my headphone output any time it has a notification sound to play while I&amp;rsquo;m trying to listen to music, so it&amp;rsquo;s very nice to feel like I have some kind of control over my life when I&amp;rsquo;m using my keyboard.&lt;/p>
&lt;p>Some other things: you can still use the keyboard as a regular USB keyboard, by connecting the queen half to your computer &amp;ndash; but the drone half still has to speak Bluetooth to the queen. You can&amp;rsquo;t currently connect the halves with a TRRS cable, but in theory you could convince ZMK to allow this, if you really wanted to.&lt;/p>
&lt;p>One place where the declarative-only nature of the config bothered me is that I can&amp;rsquo;t set ZMK to automatically switch key layouts when I select a different Bluetooth device. I would like to use a different default layer when I&amp;rsquo;m using my computer than when I&amp;rsquo;m using my iDevices, but right now I have to manually toggle outputs and then manually toggle keymaps. It&amp;rsquo;s annoying, but definitely not as annoying as the error messages.&lt;/p>
&lt;h1 id="keymaps">Keymaps&lt;/h1>
&lt;p>Okay, look. Keymaps are personal, and part of the fun of using a weird keyboard is coming up with your own keymap. My keymap won&amp;rsquo;t work for you. No one else&amp;rsquo;s keymap will work for you. But it&amp;rsquo;s nice to have a starting point that you can branch off from.&lt;/p>
&lt;p>My own keymap is largely influenced by merging my first ever &amp;ldquo;portable&amp;rdquo; keyboard &amp;ndash; the Planck EZ &amp;ndash; with the first ever ergonomic keyboard I used &amp;ndash; the Kinesis Advantage2. I got used to a particular thumb layout on the Advantage2, and I tried to keep as much of that as possible with Planck&amp;rsquo;s compactness. I got used to having two different layer buttons, and I still keep the Planck&amp;rsquo;s punctuation row mostly unchanged &amp;ndash; but I&amp;rsquo;ve made quite a few changes to the rest of it.&lt;/p>
&lt;p>Normal typing layer:&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/flashing/qwerty-keymap_hua8464e25af301ff8578e2ec525c3f01c_410302_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/flashing/qwerty-keymap_hua8464e25af301ff8578e2ec525c3f01c_410302_768x768_fit_q75_h3_box_3.webp 768w, https://ianthehenry.com/posts/kyria-build/flashing/qwerty-keymap_hua8464e25af301ff8578e2ec525c3f01c_410302_1536x1536_fit_q75_h3_box_3.webp 1536w, https://ianthehenry.com/posts/kyria-build/flashing/qwerty-keymap_hua8464e25af301ff8578e2ec525c3f01c_410302_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/flashing/qwerty-keymap_hua8464e25af301ff8578e2ec525c3f01c_410302_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class="image-with-light-background"
srcset="https://ianthehenry.com/posts/kyria-build/flashing/qwerty-keymap_hua8464e25af301ff8578e2ec525c3f01c_410302_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/kyria-build/flashing/qwerty-keymap_hua8464e25af301ff8578e2ec525c3f01c_410302_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/kyria-build/flashing/qwerty-keymap_hua8464e25af301ff8578e2ec525c3f01c_410302_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/flashing/qwerty-keymap_hua8464e25af301ff8578e2ec525c3f01c_410302_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="315"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAIAAAAhqtkfAAAASklEQVR4nBzAOwoAIQwEUDM4Vtbe/3qCWAgDfiBZ2JfXWpIAtNZSSr13d6&amp;#43;15jGG/SSZ2d4bwJzTIuK9d8659wIgWUoh&amp;#43;QUAAP//c40jQcUK&amp;#43;BIAAAAASUVORK5CYII=);"
/>&lt;/picture>&lt;/a>
&lt;p>I have rebound caps lock to escape for as long as I can remember, so that&amp;rsquo;s natural to me. I don&amp;rsquo;t hit tab very much, except for &lt;code>cmd + tab&lt;/code>, but that&amp;rsquo;s such a common shortcut for me that I keep it on the base layer.&lt;/p>
&lt;p>Note that every modifier key is on the left thumb: this matches how I type on my Macbook keyboard, with the exception that I will sometimes press control with the knuckle of my curled pinky finger.&lt;/p>
&lt;p>The &amp;ldquo;main&amp;rdquo; modifiers on my Kyria appear in the same order that they do on my Macbook keyboard, to the left of my thumb&amp;rsquo;s resting position (shift). But I also have some redundant modifier keys to the &amp;ldquo;right&amp;rdquo; of shift. This makes it easy to press weird modifier combos &amp;ndash; &lt;code>cmd + ctrl&lt;/code> requires multiple fingers on a regular keyboard, but on this keymap every modifier key is right next to each other.&lt;/p>
&lt;p>The redundant modifier situation is a new thing I&amp;rsquo;m trying with the Kyria, and so far I really like it. I&amp;rsquo;ve never had so many thumb keys that I could actually reach before, and I&amp;rsquo;ve basically stopped using the leftmost &lt;code>ctrl&lt;/code> and &lt;code>alt&lt;/code> keys in lieu of the closer alternatives. I might just get rid of those, but what else would I put there? It&amp;rsquo;s kind of wasted space.&lt;/p>
&lt;p>I still have a lot of empty space on the right thumb. Still not sure what to do about those keys.&lt;/p>
&lt;p>Holding what would normally be left shift gives me my &amp;ldquo;numbers and navigation&amp;rdquo; layer:&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/flashing/n-and-n-keymap_hua8464e25af301ff8578e2ec525c3f01c_401238_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/flashing/n-and-n-keymap_hua8464e25af301ff8578e2ec525c3f01c_401238_768x768_fit_q75_h3_box_3.webp 768w, https://ianthehenry.com/posts/kyria-build/flashing/n-and-n-keymap_hua8464e25af301ff8578e2ec525c3f01c_401238_1536x1536_fit_q75_h3_box_3.webp 1536w, https://ianthehenry.com/posts/kyria-build/flashing/n-and-n-keymap_hua8464e25af301ff8578e2ec525c3f01c_401238_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/flashing/n-and-n-keymap_hua8464e25af301ff8578e2ec525c3f01c_401238_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class="image-with-light-background"
srcset="https://ianthehenry.com/posts/kyria-build/flashing/n-and-n-keymap_hua8464e25af301ff8578e2ec525c3f01c_401238_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/kyria-build/flashing/n-and-n-keymap_hua8464e25af301ff8578e2ec525c3f01c_401238_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/kyria-build/flashing/n-and-n-keymap_hua8464e25af301ff8578e2ec525c3f01c_401238_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/flashing/n-and-n-keymap_hua8464e25af301ff8578e2ec525c3f01c_401238_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="315"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAIAAAAhqtkfAAAATElEQVR4nBzAMQpEIQwE0Im4YmHv/S9nYWEhIpIhzMJ/&amp;#43;Zyz904p9d4BzDkjorWWxxi1Vkn3XgDvPTNba5kkku5OEkAp5ff5BwAA///wviY7HlVItgAAAABJRU5ErkJggg==);"
/>&lt;/picture>&lt;/a>
&lt;p>When I first switched to a number pad on my Planck, I put &lt;code>0&lt;/code> in the &amp;ldquo;correct&amp;rdquo; spot &amp;ndash; under the &lt;code>1&lt;/code> key. But that meant overwriting my backspace key, and I just hated it. It really helps me to keep space and backspace and return in the same place across all keymaps, so the pinky position is the best spot I could find for &lt;code>0&lt;/code>.&lt;/p>
&lt;p>I still don&amp;rsquo;t like that the &lt;code>.&lt;/code> key has to move over for this layout, but I think it&amp;rsquo;s better than moving the entire numpad over by one. (Although I&amp;rsquo;m thinking about it). But I still sometimes find myself leaving the number layer to put in a decimal point, and feeling silly about it.&lt;/p>
&lt;p>I keep some redundant punctuation to make it easier to type dates and times.&lt;/p>
&lt;p>Holding &amp;ldquo;right shift&amp;rdquo; gives me my &amp;ldquo;punctuation&amp;rdquo; layer:&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/flashing/punctuation-keymap_hua8464e25af301ff8578e2ec525c3f01c_389180_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/flashing/punctuation-keymap_hua8464e25af301ff8578e2ec525c3f01c_389180_768x768_fit_q75_h3_box_3.webp 768w, https://ianthehenry.com/posts/kyria-build/flashing/punctuation-keymap_hua8464e25af301ff8578e2ec525c3f01c_389180_1536x1536_fit_q75_h3_box_3.webp 1536w, https://ianthehenry.com/posts/kyria-build/flashing/punctuation-keymap_hua8464e25af301ff8578e2ec525c3f01c_389180_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/flashing/punctuation-keymap_hua8464e25af301ff8578e2ec525c3f01c_389180_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class="image-with-light-background"
srcset="https://ianthehenry.com/posts/kyria-build/flashing/punctuation-keymap_hua8464e25af301ff8578e2ec525c3f01c_389180_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/kyria-build/flashing/punctuation-keymap_hua8464e25af301ff8578e2ec525c3f01c_389180_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/kyria-build/flashing/punctuation-keymap_hua8464e25af301ff8578e2ec525c3f01c_389180_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/flashing/punctuation-keymap_hua8464e25af301ff8578e2ec525c3f01c_389180_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="315"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAIAAAAhqtkfAAAASUlEQVR4nBzAMQpEIRAD0CSMVtbe/3hiYaNYuANZ&amp;#43;C/23uccSb13AGMM2621WGtJAnDvBZCZJOectP37vPdI1lojopTyDwAA//907CNETXnOtQAAAABJRU5ErkJggg==);"
/>&lt;/picture>&lt;/a>
&lt;p>Pretty similar to the Planck, except that I moved the brackets to the home keys. And I find putting backslash in the same place as forward slash works well with my brain.&lt;/p>
&lt;p>And lastly holding both of these gives my &amp;ldquo;meta&amp;rdquo; layer:&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/flashing/meta-keymap_hua8464e25af301ff8578e2ec525c3f01c_421767_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/flashing/meta-keymap_hua8464e25af301ff8578e2ec525c3f01c_421767_768x768_fit_q75_h3_box_3.webp 768w, https://ianthehenry.com/posts/kyria-build/flashing/meta-keymap_hua8464e25af301ff8578e2ec525c3f01c_421767_1536x1536_fit_q75_h3_box_3.webp 1536w, https://ianthehenry.com/posts/kyria-build/flashing/meta-keymap_hua8464e25af301ff8578e2ec525c3f01c_421767_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/flashing/meta-keymap_hua8464e25af301ff8578e2ec525c3f01c_421767_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class="image-with-light-background"
srcset="https://ianthehenry.com/posts/kyria-build/flashing/meta-keymap_hua8464e25af301ff8578e2ec525c3f01c_421767_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/kyria-build/flashing/meta-keymap_hua8464e25af301ff8578e2ec525c3f01c_421767_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/kyria-build/flashing/meta-keymap_hua8464e25af301ff8578e2ec525c3f01c_421767_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/flashing/meta-keymap_hua8464e25af301ff8578e2ec525c3f01c_421767_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="315"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAIAAAAhqtkfAAAASklEQVR4nBzAMQoEIRQD0HxNbOy9/&amp;#43;20sFMhsIgL87j3XmullFprAMYY995aK3vvkgCccyLCNsk5Z7z3fh/bOedSCklJ/wAAAP//cL0jMoeB168AAAAASUVORK5CYII=);"
/>&lt;/picture>&lt;/a>
&lt;p>Which is the only place that I rebind a thumb key on a layer &amp;ndash; but only the redundant modifiers. Hopefully I never have to press &lt;code>cmd + ctrl + F7&lt;/code>&amp;hellip;&lt;/p>
&lt;p>I don&amp;rsquo;t use any one-shot layers, mod-taps, or anything fancy like that.&lt;/p>
&lt;p>I&amp;rsquo;m afraid of one-shot layers, because I don&amp;rsquo;t like my keyboard having state that I have to keep track of &amp;ndash; I don&amp;rsquo;t want to accidentally press a key and get into an unexpected state; I always want to &lt;em>know&lt;/em> what is going to happen as the result of a keypress.&lt;/p>
&lt;p>And mod-taps seem inferior to my thumb-heavy modifier layout.&lt;/p>
&lt;p>Space-cadet shift, and other dual-function keys&amp;hellip; I&amp;rsquo;m a little bit afraid of them, I guess. I might experiment further into the firmware world one day. But I&amp;rsquo;m pretty happy with where I am right now.&lt;/p>
&lt;section class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1" role="doc-endnote">
&lt;p>This is a lie. I have a complaint.&lt;/p>
&lt;p>I hate that the official QMK repository for some reason contains every single human being&amp;rsquo;s key layout and weird keyboard that you&amp;rsquo;ve never heard of. Why is this? Why do we have to merge every single keyboard into this one repository? Can&amp;rsquo;t we just maintain forks, or write a library or something? Shouldn&amp;rsquo;t there be some sort of relevancy standard here?&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/section></description><pubDate>Fri, 07 Jan 2022 00:00:00 +0000</pubDate><link>https://ianthehenry.com/posts/kyria-build/flashing/</link><guid isPermaLink="true">https://ianthehenry.com/posts/kyria-build/flashing/</guid></item><item><title>Kyria Build, Part 11: Custom walnut covers</title><description>&lt;p>Although most of the first-party Kyria case is opaque matte black, the little cover for the microcontroller is a piece of transparent gray acrylic.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/acrylic-cover_hu78b5c6ac1407cd9222ed8e7c5b38b3b8_2120901_1512x1512_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/acrylic-cover_hu78b5c6ac1407cd9222ed8e7c5b38b3b8_2120901_756x756_fit_q75_h2_box_3.webp 756w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/acrylic-cover_hu78b5c6ac1407cd9222ed8e7c5b38b3b8_2120901_1512x1512_fit_q75_h2_box_3.webp 1512w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/acrylic-cover_hu78b5c6ac1407cd9222ed8e7c5b38b3b8_2120901_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/acrylic-cover_hu78b5c6ac1407cd9222ed8e7c5b38b3b8_2120901_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 756px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/acrylic-cover_hu78b5c6ac1407cd9222ed8e7c5b38b3b8_2120901_756x756_fit_box_3.png 756w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/acrylic-cover_hu78b5c6ac1407cd9222ed8e7c5b38b3b8_2120901_1512x1512_fit_box_3.png 1512w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/acrylic-cover_hu78b5c6ac1407cd9222ed8e7c5b38b3b8_2120901_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/acrylic-cover_hu78b5c6ac1407cd9222ed8e7c5b38b3b8_2120901_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 756px"
width="756"
height="604"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAIAAABxZ0isAAAApklEQVR4nACWAGn/BOHQz/f8/IjU58rx&amp;#43;/n9/hIMC/j5&amp;#43;gL//gSBtMIhA/8L8fTt5PACAwTzAAL8/f0PFRUEzfkDu9TR6eHhAP8B/gAAAwQFAwcIDBgWBPXn4/Tk4gP8&amp;#43;/z8/gEDAv8A/xMvLwgQEQJ7NjD8/f3/AAABAgL&amp;#43;/f4ACQsHHyL6/v4BGFJg7wsTBgsPBQwO&amp;#43;gECCAcFDwkI&amp;#43;vf3AQAA///Z6kYB5mGBngAAAABJRU5ErkJggg==);"
/>&lt;/picture>&lt;/a>
&lt;p>It&amp;rsquo;s see-through so that you can put an OLED screen on top of your microcontroller, for some reason, although since this is a battery-powered keyboard that makes even less sense than usual.&lt;/p>
&lt;p>I tried installing it anyway &amp;ndash; to show off my solder joints? &amp;ndash; but I really hated it.&lt;/p>
&lt;p>I thought it &lt;em>looked&lt;/em> fine. But it&amp;rsquo;s set so high up that, with the low-profile Choc keys, my finger would brush against it when I typed the inner keys. Any time I reached for the T key I would feel the sharp corner of the acrylic, which was really unpleasant.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/sharp-cover_hua96ef66837f6d5a42bc7f556f6f6b941_1813795_1512x1512_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/sharp-cover_hua96ef66837f6d5a42bc7f556f6f6b941_1813795_756x756_fit_q75_h2_box_3.webp 756w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/sharp-cover_hua96ef66837f6d5a42bc7f556f6f6b941_1813795_1512x1512_fit_q75_h2_box_3.webp 1512w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/sharp-cover_hua96ef66837f6d5a42bc7f556f6f6b941_1813795_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/sharp-cover_hua96ef66837f6d5a42bc7f556f6f6b941_1813795_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 756px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/sharp-cover_hua96ef66837f6d5a42bc7f556f6f6b941_1813795_756x756_fit_box_3.png 756w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/sharp-cover_hua96ef66837f6d5a42bc7f556f6f6b941_1813795_1512x1512_fit_box_3.png 1512w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/sharp-cover_hua96ef66837f6d5a42bc7f556f6f6b941_1813795_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/sharp-cover_hua96ef66837f6d5a42bc7f556f6f6b941_1813795_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 756px"
width="756"
height="537"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAIAAABxZ0isAAAApklEQVR4nACWAGn/BHhaOQAA/QEKEdrpBgMJE0dDMywqIPf09QFORTwSFRYLDA34&amp;#43;fjy8fYMDA8QEAz/8/EENjku6eju09bTJCEW2d/rAgLnDgkB4uXnASoqIwYEBBEPA&amp;#43;jo8Pn&amp;#43;CgcFBPf39A0LCAEbHBsHBgQA/foEAwL6&amp;#43;vsA//4yHxNpRiwE7u3sAP79AQAA/QACBAMCCQUEVRsLAd7nAQAA//&amp;#43;vzzgF&amp;#43;axyBgAAAABJRU5ErkJggg==);"
/>&lt;/picture>&lt;/a>
&lt;p>So I ordered some shorter standoffs for it, so that it wouldn&amp;rsquo;t stick up above the keys.&lt;/p>
&lt;p>But I was still concerned about the sharp edge, even if I wasn&amp;rsquo;t coming directly up against it. And I didn&amp;rsquo;t think I could radius the translucent acrylic without destroying the finish and making it look terrible, so I decided to make some new covers.&lt;/p>
&lt;p>I had a scrap of 1/4&amp;quot; walnut lying around, so I traced the outline of the acrylic shield and cut it out with a hand saw and a file.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/shaped_huacb975142c6dd4e167601c5ecb4cc3bb_2044608_1466x1466_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/shaped_huacb975142c6dd4e167601c5ecb4cc3bb_2044608_733x733_fit_q75_h2_box_3.webp 733w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/shaped_huacb975142c6dd4e167601c5ecb4cc3bb_2044608_1466x1466_fit_q75_h2_box_3.webp 1466w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/shaped_huacb975142c6dd4e167601c5ecb4cc3bb_2044608_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/shaped_huacb975142c6dd4e167601c5ecb4cc3bb_2044608_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 733px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/shaped_huacb975142c6dd4e167601c5ecb4cc3bb_2044608_733x733_fit_box_3.png 733w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/shaped_huacb975142c6dd4e167601c5ecb4cc3bb_2044608_1466x1466_fit_box_3.png 1466w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/shaped_huacb975142c6dd4e167601c5ecb4cc3bb_2044608_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/shaped_huacb975142c6dd4e167601c5ecb4cc3bb_2044608_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 733px"
width="733"
height="413"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAIAAAD38zoCAAAAjUlEQVR4nAB9AIL/BKd/VAcGBAoKCAQD/vz79vPx9AUMEyZFaQQPDAf//wAEAwH6AAvu9wEBCxIjOUwOERMECAcG8vgA&amp;#43;P4P9vj7/f8H9fL47u/xBQrrBAIDAsXN0&amp;#43;31/SUjIQYFAjAlGAr24fTxDAMuHw5FOSwnHxMA//02LBwODAr&amp;#43;/v3Y5PMBAAD//7wXMsMUUwtOAAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;p>Then I sawed the piece in half, giving me two identical shields.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/sawmarks_hu2259d282646d4ac9469b080eb57f5a9b_3289659_1512x1512_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/sawmarks_hu2259d282646d4ac9469b080eb57f5a9b_3289659_756x756_fit_q75_h2_box_3.webp 756w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/sawmarks_hu2259d282646d4ac9469b080eb57f5a9b_3289659_1512x1512_fit_q75_h2_box_3.webp 1512w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/sawmarks_hu2259d282646d4ac9469b080eb57f5a9b_3289659_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/sawmarks_hu2259d282646d4ac9469b080eb57f5a9b_3289659_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 756px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/sawmarks_hu2259d282646d4ac9469b080eb57f5a9b_3289659_756x756_fit_box_3.png 756w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/sawmarks_hu2259d282646d4ac9469b080eb57f5a9b_3289659_1512x1512_fit_box_3.png 1512w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/sawmarks_hu2259d282646d4ac9469b080eb57f5a9b_3289659_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/sawmarks_hu2259d282646d4ac9469b080eb57f5a9b_3289659_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 756px"
width="756"
height="603"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAIAAABxZ0isAAAApklEQVR4nACWAGn/BMOXXerw&amp;#43;PP9CSEbDxEMEAgK/7a&amp;#43;093k9AT8/BDf9fwDCRDdz&amp;#43;sHCwEcFAwoHyfI1sUEDgIc&amp;#43;P3lAfb2&amp;#43;//&amp;#43;CQUF5e/6/gT68vf8BO/r7/Tv7/wB//79/f7/EQEBAgACCB8fIgL3&amp;#43;voF/wASBAVMKy4eBwn69vT/BgwlKCYDNh4ZMCQjFgf/BwgDEA4GHwcMChYT6ff5AQAA//8RJkM56CWaSwAAAABJRU5ErkJggg==);"
/>&lt;/picture>&lt;/a>
&lt;p>If this wood had had any interesting grain I would have finished this side &amp;ndash; planed off those saw marks &amp;ndash; and I&amp;rsquo;d have a &lt;a href="https://en.wikipedia.org/wiki/Bookmatching">bookmatched&lt;/a> pair. But since this was a very boring piece of scrap wood, I didn&amp;rsquo;t bother, and instead just used the &amp;ldquo;outside&amp;rdquo; edges. Which were already pretty smooth.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/halves_huf9ffaf22ed7b7ef633502a32e0db519b_2502228_1512x1512_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/halves_huf9ffaf22ed7b7ef633502a32e0db519b_2502228_756x756_fit_q75_h2_box_3.webp 756w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/halves_huf9ffaf22ed7b7ef633502a32e0db519b_2502228_1512x1512_fit_q75_h2_box_3.webp 1512w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/halves_huf9ffaf22ed7b7ef633502a32e0db519b_2502228_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/halves_huf9ffaf22ed7b7ef633502a32e0db519b_2502228_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 756px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/halves_huf9ffaf22ed7b7ef633502a32e0db519b_2502228_756x756_fit_box_3.png 756w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/halves_huf9ffaf22ed7b7ef633502a32e0db519b_2502228_1512x1512_fit_box_3.png 1512w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/halves_huf9ffaf22ed7b7ef633502a32e0db519b_2502228_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/halves_huf9ffaf22ed7b7ef633502a32e0db519b_2502228_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 756px"
width="756"
height="513"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAIAAAD38zoCAAAAjUlEQVR4nAB9AIL/BLWHUQsMCuv3/&amp;#43;7w9e3z&amp;#43;zEoGRgSDNHY5wTn7fQF9P/G1uoHBQLq8vvW3vBVRzAMDxIC6O3z/QACCwsK/gEFCQkIBwYGAAQK/wIGAubq7/4AAxEPCzIrGyIcEgMEAwQHDRUZHgT8/PsaFQk2LxoAAwU0Agfa4vQNDg0FAwEBAAD//7ESLWwz1hbQAAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;p>That was all the shaping I did. I sanded the corners smooth, and then went on to finish it.&lt;/p>
&lt;p>I had a leftover can of shellac from some project I did a long time ago, and I thought that would look nice on the keyboard. Shellac is very easy to apply, and I thought that a slightly glossy finish would make a nice contrast to the matte keys.&lt;/p>
&lt;p>But it did not.&lt;/p>
&lt;p>Because shellac, apparently, &lt;em>goes bad&lt;/em>.&lt;/p>
&lt;p>Shellac normally dries in a few seconds: it&amp;rsquo;s a resin dissolved in alcohol, and as the alcohol evaporates, it leaves the solid resin deposited on the surface. But my shellac&amp;hellip; wasn&amp;rsquo;t drying. It was just&amp;hellip; gummy. Gummy and horrible. Even though the alcohol was evaporating in a few seconds, it was leaving behind something that was decidedly &lt;em>not&lt;/em> shellac.&lt;/p>
&lt;p>It turns out that, once shellac dissolved in alcohol is exposed to air, it starts to spoil. The can I was using had been open for over a year, and in that time it transformed itself into something disgusting and gooey. That I then smeared all over my freshly shaped walnut covers.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/gummy-shellac_hu4645538234636f9b59db8cd711c2e0ae_2798699_1472x1472_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/gummy-shellac_hu4645538234636f9b59db8cd711c2e0ae_2798699_736x736_fit_q75_h2_box_3.webp 736w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/gummy-shellac_hu4645538234636f9b59db8cd711c2e0ae_2798699_1472x1472_fit_q75_h2_box_3.webp 1472w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/gummy-shellac_hu4645538234636f9b59db8cd711c2e0ae_2798699_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/gummy-shellac_hu4645538234636f9b59db8cd711c2e0ae_2798699_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 736px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/gummy-shellac_hu4645538234636f9b59db8cd711c2e0ae_2798699_736x736_fit_box_3.png 736w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/gummy-shellac_hu4645538234636f9b59db8cd711c2e0ae_2798699_1472x1472_fit_box_3.png 1472w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/gummy-shellac_hu4645538234636f9b59db8cd711c2e0ae_2798699_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/gummy-shellac_hu4645538234636f9b59db8cd711c2e0ae_2798699_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 736px"
width="736"
height="609"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAIAAAC6O5sJAAAAv0lEQVR4nACvAFD/BGVAFC4kGfYybAf&amp;#43;9Armw/PezgIBAhANCQQGAwAH/fPxwIzm9QMbFxYHAgUGBgL//wICDwkN3/MTPFFl5fQIz9joGQ8lAAADCwkGAkgvODE2OxATFBsXEers7b/V3hANDAcGBAQQCQfi5eDF7OwLBAEwIR0B/ff1&amp;#43;PkVEhEC/gMAIhEO1c7MHwkCPSYgFxYS7fT9DAsKBPP6&amp;#43;gb9/x0LCiUaFxAVBq7OxOHr&amp;#43;P0JEQEAAP//0aE/HKr6ZQwAAAAASUVORK5CYII=);"
/>&lt;/picture>&lt;/a>
&lt;p>Ugh. It&amp;rsquo;s normal to have to sand shellac smooth, but I couldn&amp;rsquo;t do that here, because it wasn&amp;rsquo;t actually &lt;em>solid&lt;/em> &amp;ndash; it would just sort of smear around and gum up my sandpaper.&lt;/p>
&lt;p>Fortunately, it was still easy to remove: I dissolved it with some denatured alcohol, and scrubbed it off with a shop cloth. It took a little while, and I wish that I had realized something was wrong with my shellac a bit sooner, but in the end I didn&amp;rsquo;t have to start over. So no real harm done.&lt;/p>
&lt;p>In lieu of shellac, I just rubbed some furniture wax on them. It doesn&amp;rsquo;t do much to accentuate the grain, but there&amp;rsquo;s not much grain here to accentuate anyway, so whatever.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/finished_hu31ddfcd103f5413a0b1f7b72a77a1695_2160738_1278x1278_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/finished_hu31ddfcd103f5413a0b1f7b72a77a1695_2160738_639x639_fit_q75_h2_box_3.webp 639w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/finished_hu31ddfcd103f5413a0b1f7b72a77a1695_2160738_1278x1278_fit_q75_h2_box_3.webp 1278w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/finished_hu31ddfcd103f5413a0b1f7b72a77a1695_2160738_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/finished_hu31ddfcd103f5413a0b1f7b72a77a1695_2160738_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 639px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/finished_hu31ddfcd103f5413a0b1f7b72a77a1695_2160738_639x639_fit_box_3.png 639w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/finished_hu31ddfcd103f5413a0b1f7b72a77a1695_2160738_1278x1278_fit_box_3.png 1278w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/finished_hu31ddfcd103f5413a0b1f7b72a77a1695_2160738_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/finished_hu31ddfcd103f5413a0b1f7b72a77a1695_2160738_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 639px"
width="639"
height="612"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAyUlEQVR4nBTJvU7DMBAA4LNjp4RE/AhUChmohKBILAwsPEKfjQfheRgZihhQC5EMRCWxfWffoc6fWT49I0bbu5NSu&amp;#43;1QTC&amp;#43;iLSklo3p3u3k9EPqrmuHtfX/1AtPz7upeN1tX42i1RCQBkYSNWx/RaCh6DexDQFMIs1aMRD/97w58DDFxrisWTjmDylbEaM6jD12Cr9kMk2k/V6XkMAxFe333QbxePMDxadVebg7PwreDqi7kcWnmC7ATULqe7EWl1fymy&amp;#43;o/AAD//688bdvNQ2y0AAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;p>I still plan on making new covers one day: I don&amp;rsquo;t like the visible screws, and I&amp;rsquo;d like a prettier piece of wood with grain that I can bookmatch. I&amp;rsquo;ll revisit the shellac finish if I ever get around to that.&lt;/p>
&lt;p>But it&amp;rsquo;s good enough for now.&lt;/p>
&lt;p>And now, with the final piece of the keyboard complete, all that&amp;rsquo;s left to do is flash this thing.&lt;/p></description><pubDate>Fri, 07 Jan 2022 00:00:00 +0000</pubDate><link>https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/</link><guid isPermaLink="true">https://ianthehenry.com/posts/kyria-build/custom-walnut-covers/</guid></item><item><title>Kyria Build, Part 10: Keycaps</title><description>&lt;p>There are &lt;em>very few&lt;/em> keycaps compatible with Choc switches. In addition to having different PCB footprints, they also have different stems. This means you basically have to get something called an &amp;ldquo;MBK&amp;rdquo; keycap, and they are perpetually out of stock everywhere.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/keycaps/stems_hu610bda2a08684a39836e29a8289c7d2f_2136452_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/stems_hu610bda2a08684a39836e29a8289c7d2f_2136452_768x768_fit_q75_h2_box_3.webp 768w, https://ianthehenry.com/posts/kyria-build/keycaps/stems_hu610bda2a08684a39836e29a8289c7d2f_2136452_1536x1536_fit_q75_h2_box_3.webp 1536w, https://ianthehenry.com/posts/kyria-build/keycaps/stems_hu610bda2a08684a39836e29a8289c7d2f_2136452_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/keycaps/stems_hu610bda2a08684a39836e29a8289c7d2f_2136452_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/stems_hu610bda2a08684a39836e29a8289c7d2f_2136452_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/kyria-build/keycaps/stems_hu610bda2a08684a39836e29a8289c7d2f_2136452_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/kyria-build/keycaps/stems_hu610bda2a08684a39836e29a8289c7d2f_2136452_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/keycaps/stems_hu610bda2a08684a39836e29a8289c7d2f_2136452_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="503"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAIAAAD38zoCAAAAh0lEQVR4nATAzQ3CIBQA4PL6fBRqC5hoTLx4cIvO4ExeHcmLo7iAjb8R5QmIH253e0fSczSmjynmL6cKajdD&amp;#43;oTT4Zjy77GcQ6fr81hKRcMA4&amp;#43;XW6qYh6HXLgWmCQgjggJ3t70oxUVWLqzIvpUMuq6ZFDwI367f36OxCKjvtnpwkyX8AAAD///ZaL2ErjyYvAAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;p>I managed to find some at the same place I got my switches and nice!nanos: &lt;a href="https://mkultra.click">MKUltra&lt;/a>. They&amp;rsquo;re the only place I&amp;rsquo;ve seen that stocks &lt;em>colored&lt;/em> MBK keycaps, although I stuck with black.&lt;/p>
&lt;p>You might think that I can&amp;rsquo;t possibly stretch this most trivial of all keyboard components into an entire blog post, but I actually have a few things to say about keycaps.&lt;/p>
&lt;p>First off: O-rings.&lt;/p>
&lt;p>Once upon a time I used to play an online video game with voice chat, and I put O-rings on my keyboard in an attempt to reduce the frantic, panicked sound of my desperate key mashing. O-rings really do make a keyboard much quieter, and in my opinion the soft padded rubber feels better than the hard clack of plastic on plastic. I&amp;rsquo;ve put them on every keyboard I&amp;rsquo;ve owned since.&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;/p>
&lt;p>I&amp;rsquo;ve never used Choc switches before, which have a different stem design than normal Cherry-compatible switches, but it turns out that regular O-rings fit Choc stems just fine:&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/keycaps/o-rings_hu29b0d6be2f2a9f08b94a51c6dcb3c764_1866790_1512x1512_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/o-rings_hu29b0d6be2f2a9f08b94a51c6dcb3c764_1866790_756x756_fit_q75_h2_box_3.webp 756w, https://ianthehenry.com/posts/kyria-build/keycaps/o-rings_hu29b0d6be2f2a9f08b94a51c6dcb3c764_1866790_1512x1512_fit_q75_h2_box_3.webp 1512w, https://ianthehenry.com/posts/kyria-build/keycaps/o-rings_hu29b0d6be2f2a9f08b94a51c6dcb3c764_1866790_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/keycaps/o-rings_hu29b0d6be2f2a9f08b94a51c6dcb3c764_1866790_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 756px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/o-rings_hu29b0d6be2f2a9f08b94a51c6dcb3c764_1866790_756x756_fit_box_3.png 756w, https://ianthehenry.com/posts/kyria-build/keycaps/o-rings_hu29b0d6be2f2a9f08b94a51c6dcb3c764_1866790_1512x1512_fit_box_3.png 1512w, https://ianthehenry.com/posts/kyria-build/keycaps/o-rings_hu29b0d6be2f2a9f08b94a51c6dcb3c764_1866790_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/keycaps/o-rings_hu29b0d6be2f2a9f08b94a51c6dcb3c764_1866790_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 756px"
width="756"
height="361"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r&amp;#43;mnAAAAcklEQVR4nATATQ4BMRQH8L4PxYxIhoQNmVhMLO2dwRFcXoIFFgjS9l9989Ptbt8djjRfkJXZuAKSH3BE1Gnd/F53X08881&amp;#43;cWCEwI2poN8Nmmb8fuZ6xXgWRyquS41HbkWWX4u1yej8fpSCnQIY&amp;#43;AAD//2NELLdz7lQBAAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;p>But they won&amp;rsquo;t allow the stems to seat fully in the switch, so they actually raise the entire height of each keycap by 1.1mm:&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/keycaps/o-ring-height_hu431a2367ff040e71caf3ed0f76f1f995_3629040_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/o-ring-height_hu431a2367ff040e71caf3ed0f76f1f995_3629040_768x768_fit_q75_h2_box_3.webp 768w, https://ianthehenry.com/posts/kyria-build/keycaps/o-ring-height_hu431a2367ff040e71caf3ed0f76f1f995_3629040_1536x1536_fit_q75_h2_box_3.webp 1536w, https://ianthehenry.com/posts/kyria-build/keycaps/o-ring-height_hu431a2367ff040e71caf3ed0f76f1f995_3629040_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/keycaps/o-ring-height_hu431a2367ff040e71caf3ed0f76f1f995_3629040_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/o-ring-height_hu431a2367ff040e71caf3ed0f76f1f995_3629040_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/kyria-build/keycaps/o-ring-height_hu431a2367ff040e71caf3ed0f76f1f995_3629040_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/kyria-build/keycaps/o-ring-height_hu431a2367ff040e71caf3ed0f76f1f995_3629040_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/keycaps/o-ring-height_hu431a2367ff040e71caf3ed0f76f1f995_3629040_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="604"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAIAAABxZ0isAAAApUlEQVR4nATAsY6CMBgA4P78PyktcCV3A5cbLnHkKXwO49sY43s5mOjgxmREHUgQjAMxKhTa&amp;#43;tFiuTqdCxRj&amp;#43;59h&amp;#43;jPNJn&amp;#43;9rfIDOUYySpJvhR73H0O&amp;#43;L7ZNk76etN7sem2EjyNzIlQqUXV5vDik&amp;#43;n7TWjNrB2OMtQAQRbLXA12rcjTWMeYAABE87GTQxTGJ2VzIEMmXImi7t&amp;#43;I85vSrvj4BAAD///I2QUJyxhqiAAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;p>Because of this, they don&amp;rsquo;t reduce the travel distance very much: without O-rings, I measured 2.9mm travel, and with O-rings 2.7mm. But also like&amp;hellip; they might be exactly the same. I can&amp;rsquo;t think of a reason why they should reduce the travel at all, since they&amp;rsquo;re sitting on the stem. There was nothing rigorous about my measurement methodology and the keys are pretty wobbly so who knows.&lt;/p>
&lt;p>Subjectively, the keys feel &lt;em>pretty&lt;/em> similar to my laptop keyboard. Objectively, the travel distance of my laptop&amp;rsquo;s keys is only 1.5mm, so the Chocs are still almost twice as far. But the absolute values are pretty small here.&lt;/p>
&lt;p>I went ahead and installed O-rings anyway, taking the 1.1mm elevation hit &amp;ndash; it&amp;rsquo;s hard to call this a low-profile keyboard anyway, with the giant aluminum bottom plate I have. But after a few days of using it, something occurred to me: what if instead of putting the O-rings on the &lt;em>keycap&lt;/em>, you put the O-ring on the &lt;em>switch&lt;/em> instead? That way it would still cushion the keystroke, but wouldn&amp;rsquo;t interfere with the stem seating at all.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/keycaps/switch-o-ring_huca61c3b7f7ca5d27f64abe51e3f46daf_1479818_1452x1452_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/switch-o-ring_huca61c3b7f7ca5d27f64abe51e3f46daf_1479818_726x726_fit_q75_h2_box_3.webp 726w, https://ianthehenry.com/posts/kyria-build/keycaps/switch-o-ring_huca61c3b7f7ca5d27f64abe51e3f46daf_1479818_1452x1452_fit_q75_h2_box_3.webp 1452w, https://ianthehenry.com/posts/kyria-build/keycaps/switch-o-ring_huca61c3b7f7ca5d27f64abe51e3f46daf_1479818_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/keycaps/switch-o-ring_huca61c3b7f7ca5d27f64abe51e3f46daf_1479818_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 726px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/switch-o-ring_huca61c3b7f7ca5d27f64abe51e3f46daf_1479818_726x726_fit_box_3.png 726w, https://ianthehenry.com/posts/kyria-build/keycaps/switch-o-ring_huca61c3b7f7ca5d27f64abe51e3f46daf_1479818_1452x1452_fit_box_3.png 1452w, https://ianthehenry.com/posts/kyria-build/keycaps/switch-o-ring_huca61c3b7f7ca5d27f64abe51e3f46daf_1479818_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/keycaps/switch-o-ring_huca61c3b7f7ca5d27f64abe51e3f46daf_1479818_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 726px"
width="726"
height="389"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r&amp;#43;mnAAAAdElEQVR4nABkAJv/BEmNjAT7/Pjr7DEREAoNDtT89v0CAQkHCAL6&amp;#43;/v&amp;#43;AwMKBgnt0tjv0NQG/v70&amp;#43;fkGAwQE9fn5/QX&amp;#43;9fb1S0JE9vz61ujg9QkI9vz7BBgLDAcFBfMdBrf37/L7&amp;#43;hMYGAz9/BYKCgEAAP//Quk0HQBEAWYAAAAASUVORK5CYII=);"
/>&lt;/picture>&lt;/a>
&lt;p>So&amp;hellip; this &lt;em>sort of&lt;/em> works. But O-rings are obviously not designed to be used this way, and it is visibly under tension in a way that makes me worry it might break at some point in the future.&lt;/p>
&lt;p>It&amp;rsquo;s also very difficult to install the O-rings like this. Because pressing a keycap down causes the switch mechanism to depress &amp;ndash; and thus causes the O-ring to fly off &amp;ndash; you actually have to install the O-ring &lt;em>after&lt;/em> the keycap is fully seated in the switch.&lt;/p>
&lt;p>I found the best method was hooking the O-ring around the keycap, then pressing the keycap into the switch, then &amp;ldquo;rolling&amp;rdquo; the O-ring over to the other side.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/keycaps/o-ring-installation_hu501899ba36aaa9ecdfa6cea07fef1d19_2149979_1512x1512_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/o-ring-installation_hu501899ba36aaa9ecdfa6cea07fef1d19_2149979_756x756_fit_q75_h2_box_3.webp 756w, https://ianthehenry.com/posts/kyria-build/keycaps/o-ring-installation_hu501899ba36aaa9ecdfa6cea07fef1d19_2149979_1512x1512_fit_q75_h2_box_3.webp 1512w, https://ianthehenry.com/posts/kyria-build/keycaps/o-ring-installation_hu501899ba36aaa9ecdfa6cea07fef1d19_2149979_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/keycaps/o-ring-installation_hu501899ba36aaa9ecdfa6cea07fef1d19_2149979_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 756px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/o-ring-installation_hu501899ba36aaa9ecdfa6cea07fef1d19_2149979_756x756_fit_box_3.png 756w, https://ianthehenry.com/posts/kyria-build/keycaps/o-ring-installation_hu501899ba36aaa9ecdfa6cea07fef1d19_2149979_1512x1512_fit_box_3.png 1512w, https://ianthehenry.com/posts/kyria-build/keycaps/o-ring-installation_hu501899ba36aaa9ecdfa6cea07fef1d19_2149979_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/keycaps/o-ring-installation_hu501899ba36aaa9ecdfa6cea07fef1d19_2149979_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 756px"
width="756"
height="532"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAIAAABxZ0isAAAAo0lEQVR4nATAv4rCMBgA8HzJl5Dr3VGoxfpncZCCuwi&amp;#43;loubL&amp;#43;igVHRSLA6WWpSmsQjGJP5wsVxl2fZ6q&amp;#43;PugCMr8iwYJp2fHqr63mqVRAH1T/hQABCtEX8MHWFBGE9nc28NF2KzRgCU3OJ/GMEl3&amp;#43;0PEtF5453VBl7WMqU1AXc&amp;#43;HZtGlWXBiOXid5KmrD8aWw9SSkKBUPr2xBFXPapvAAAA//8KBEJ4pFPOYAAAAABJRU5ErkJggg==);"
/>&lt;/picture>&lt;/a>
&lt;p>This requires stretching the O-ring out &lt;em>pretty far&lt;/em>. I looped them on the back of some needle-nose pliers to do it, and I snapped quite a few in the course of trying to install them before I gave up on this.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/keycaps/o-ring-graveyard_hu92e7054f8021d6286e8933310b483a83_2161233_1512x1512_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/o-ring-graveyard_hu92e7054f8021d6286e8933310b483a83_2161233_756x756_fit_q75_h2_box_3.webp 756w, https://ianthehenry.com/posts/kyria-build/keycaps/o-ring-graveyard_hu92e7054f8021d6286e8933310b483a83_2161233_1512x1512_fit_q75_h2_box_3.webp 1512w, https://ianthehenry.com/posts/kyria-build/keycaps/o-ring-graveyard_hu92e7054f8021d6286e8933310b483a83_2161233_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/keycaps/o-ring-graveyard_hu92e7054f8021d6286e8933310b483a83_2161233_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 756px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/o-ring-graveyard_hu92e7054f8021d6286e8933310b483a83_2161233_756x756_fit_box_3.png 756w, https://ianthehenry.com/posts/kyria-build/keycaps/o-ring-graveyard_hu92e7054f8021d6286e8933310b483a83_2161233_1512x1512_fit_box_3.png 1512w, https://ianthehenry.com/posts/kyria-build/keycaps/o-ring-graveyard_hu92e7054f8021d6286e8933310b483a83_2161233_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/keycaps/o-ring-graveyard_hu92e7054f8021d6286e8933310b483a83_2161233_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 756px"
width="756"
height="509"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAIAAAD38zoCAAAAh0lEQVR4nATAS8rCMBAA4HQyeUD5f22LC6m40q138U7ewZt5goIGocVoU/OYxA/Pl6uPsVYSgM/B79pmnF3KhDmGkpLU6tBtHh&amp;#43;LuUzWSoGwLC54rxhrsLqP08s5BaA5QC3w1G8Z0c2Y43rV//0Dy6KqkBcanub99VrpgWjftTklJvAXAAD//3EvO48a0Y/CAAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;p>It&amp;rsquo;s just too fiddly: you need to remove the keycap, loop on the O-ring, and then re-seat the keycap &lt;em>completely&lt;/em> before you roll the O-ring over to the other side of the switch, or else the O-ring will wind up sandwiched between the stem and the plate.&lt;/p>
&lt;p>It also has the downside that you have to repeat this ceremony any time you &lt;em>remove&lt;/em> a keycap. Which you probably don&amp;rsquo;t do often, but still.&lt;/p>
&lt;p>I decided it wasn&amp;rsquo;t worth it unless I can come up with a better installation method. I&amp;rsquo;ll take the 1.1mm hit for now.&lt;/p>
&lt;p>Here&amp;rsquo;s a video comparing the difference in sound and travel between keycaps with O-rings and without:&lt;/p>
&lt;div class="video-container">
&lt;video controls
width="960"
height="540"
preload=metadata
poster="/posts/kyria-build/keycaps/o-ring-comparison-poster.a8f0e57f91db0d95288452f602e0d78a86050b3fbf1ff74abef124438cf5ad23.png"
style="
background-size: cover;
background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAASCAIAAAC1qksFAAAF3klEQVR4nDyUy48cVxnF7711613dXdXV1d0zPTPx2N32YCZkPDLISuIoPAwWEAQIhGDFgrBhgZAQEv8AayR2ERt2SIFlgrAiEwSyEQRhWbFjM4&amp;#43;ema5&amp;#43;TXf1q6puve4DjRd8u29z9NNPOgfffuNNQojrVGVFcdxampGz7rGmKD/&amp;#43;6S9qnlfkOWP5R//6Z3f49NVbN0bz5d&amp;#43;enCY7164/HxVl8/neZcepf8GBt5G3GPU1Xatvtd/5za9zKi51dq512hAiyXUcSikDMBPSPAxJuMySZBUuN7c7i2A2Oh/IspLMpgVJ7t97kEznvFY9a287h&amp;#43;M4yxa3drbJuZcG/VX83FCXBQ/98/7p8a1X3/jK197qnpzu3diHr7/2GqWsfaUDFBNBHs5GEgTVqvult77z29/9vmZJ02Dm1NdX52delVYbzWOhn9z9cqNAAMDAVpAsbWllkefBsO&amp;#43;G6bdyODg7lq3L2HS&amp;#43;uJueBxmutW8KRrlUCJoriH79zpvXd/eiKJnOwmjif/P1u5OB/8GHH9S3PyMZZVUtzw4&amp;#43;NrM0YqJ2dFqzLGYaCwSo4AkA9LyXz3tSVESzoGmXRiyfrDLcPe3SaKZKQFWwoZmlw8nB8GH39Gw6ncgSQEv/c9umi/b/3Ytbde/b&amp;#43;&amp;#43;oPP9300RHnQDRmqhjBgvtB2p9m/oLtblaHC7qIMgpmV1vyYJ7FJMUNz4l4TOKQkGX7iuxkR2mmT4fnVrnS8mp3XjF1U9u9skP&amp;#43;cozoeN25xNVS89I6lmSROUCW8yTOPvrvYS898yfHfXL3ulY1lbJdzpJA1u3PX2/BX73z7j/ef1dT5GA&amp;#43;39zYXK2Wtu3UPc&amp;#43;tVjs1bmtpREsIAZZOPhkjS1cVLOo1NJ4jWRJXPmUjCcI8I/3Rf3rJGNZfqhstT6KGxZECJQxkDb79k59r0RJDUe20JSCqrktyXik7HIDTk0PZNCp6CUE0ima4AFjCGOOzkd&amp;#43;o1rgQjLN5ELS3L1HKSEKSNN9cazAACtdR3NLMLAkA8C&amp;#43;/992lRI&amp;#43;6vYxTq1KiHM2WCUDSahGEq&amp;#43;XNazsIIojQ6fEzUGkUrMAcxIuVtrYBJcQYZwU964&amp;#43;uXW1blhWGkT8892qutYz5fNlxLN8ypNt3vjpYRAuSFpMP7z046A7CUrmS5gWnSXOr/d69vz568nyj1VIVmXKgaeqjx08sSy8KwQVchPEnR93peLjWbLquaxpGpVz2BwMsy6qqpWmR&amp;#43;SM8CgmSkFUqL8muLj/rXN7ovLQuK5gxHpG01bDP/CFJC8W0XQsWBbVL&amp;#43;t7ePkbwQhHj0TJ4&amp;#43;ODxo4/rDx8/A0AUeUZWcwQRVjUIRfnSJvzDH98rKI2TZBIEi&amp;#43;nw6VF/ldEkIXmeqYqcrOYShHLFSwgBQFiGZmIUUigEB0DIMtYQz&amp;#43;NVo9V5ef&amp;#43;zvIgIyf9&amp;#43;//3mxuV63cMScBs1&amp;#43;I0fvD2ejMPVwquWb75yI00yjs3&amp;#43;YBQupi/v7uZpCCBKhdb3fcFpvVqeToZQMeKYIAS3NluWhp91T0bDsUCIcwbBxQkAOKUIAdOysG2XXdMANLFrbmttXdHNP/35vj8ckCQ&amp;#43;7p00G3Wv5j1&amp;#43;&amp;#43;lQAxBg9wJJlmmHc55xDCHqjwdbmRhhlUNYZoy&amp;#43;kFYJxEq5Ktq3p&amp;#43;lpzDX7/Rz8b&amp;#43;qfz&amp;#43;TQrcttx9bI9WUYFFxiilMTsorKcMQoFgFBkWQoEeOHnAhQCYBhGWiSUcfQCHAAAERBCgP&amp;#43;/7Ru3rKorqQbLcxLHq2BKFjOEAMAywjKUEEKSgEgAASG8yBYCQCAhxIWQMDZ1PfBcqll2pTJNEwEuJiehhQDQsayKZWDVqvQOD3ieY0VGioZUVW&amp;#43;uZUXOKc0BEIoiW5UUQo6xrCg55wBBgJCl6zkAJU2JnYqyc1XV9ZKmNiUYJImJkC1jSqmOwJql42Dc0&amp;#43;1KwQWllAhOTZPW17TNLVJxhG0DVXPtSkhiCICpKSZnTACM4JZpjOKwrEq7rr1umjkES1rUVLlgbJFlUHBTwmmRq5L0vwAAAP//QmU7t&amp;#43;QbgK0AAAAASUVORK5CYII=);
">
&lt;source src="https://ianthehenry.com/posts/kyria-build/keycaps/o-ring-comparison-1920x1080.e3c12e98576a75e06191f4260cfb04f3a869f1e477236edfde891236f6dd47fd.mp4" type="video/mp4">
&lt;/video>
&lt;/div>
&lt;p>Okay.&lt;/p>
&lt;p>Next up: what are we gonna do about these thumb keys?&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/keycaps/thumb-cluster_hu36356430dedd3c66469db1369c46f53e_3038886_1512x1512_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/thumb-cluster_hu36356430dedd3c66469db1369c46f53e_3038886_756x756_fit_q75_h2_box_3.webp 756w, https://ianthehenry.com/posts/kyria-build/keycaps/thumb-cluster_hu36356430dedd3c66469db1369c46f53e_3038886_1512x1512_fit_q75_h2_box_3.webp 1512w, https://ianthehenry.com/posts/kyria-build/keycaps/thumb-cluster_hu36356430dedd3c66469db1369c46f53e_3038886_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/keycaps/thumb-cluster_hu36356430dedd3c66469db1369c46f53e_3038886_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 756px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/thumb-cluster_hu36356430dedd3c66469db1369c46f53e_3038886_756x756_fit_box_3.png 756w, https://ianthehenry.com/posts/kyria-build/keycaps/thumb-cluster_hu36356430dedd3c66469db1369c46f53e_3038886_1512x1512_fit_box_3.png 1512w, https://ianthehenry.com/posts/kyria-build/keycaps/thumb-cluster_hu36356430dedd3c66469db1369c46f53e_3038886_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/keycaps/thumb-cluster_hu36356430dedd3c66469db1369c46f53e_3038886_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 756px"
width="756"
height="570"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAIAAABxZ0isAAAAoklEQVR4nATAwWrCMBgA4D/Jn5SOrFlHx1ivG6yHbUyvvqOP4EOJKIJS1KOgtklao0nqh5PpLPhAlot/vZEf2fr4HAF&amp;#43;qk&amp;#43;8DoAMhcAdeRfnJ46BYMIg0khxINQb1/W9ELzVjcrkfLWliDzsD2nvOmuMadVr0UR/&amp;#43;6oQAC75W1vXBU9P1rjqm5WlkJKaziacxN8/nb&amp;#43;w8QiUAn93Vj8CAAD///Y1QRE24ww6AAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;p>It&amp;rsquo;s easy to press the &amp;ldquo;lower&amp;rdquo; keys, but pressing the &amp;ldquo;upper&amp;rdquo; keys without &lt;em>also&lt;/em> pressing the lower keys requires me to raise my whole hand and angle my thumb down.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/keycaps/thumb-contortion_hu8d26925b9ba64d03b44e202c112d80f8_2419268_1512x1512_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/thumb-contortion_hu8d26925b9ba64d03b44e202c112d80f8_2419268_756x756_fit_q75_h2_box_3.webp 756w, https://ianthehenry.com/posts/kyria-build/keycaps/thumb-contortion_hu8d26925b9ba64d03b44e202c112d80f8_2419268_1512x1512_fit_q75_h2_box_3.webp 1512w, https://ianthehenry.com/posts/kyria-build/keycaps/thumb-contortion_hu8d26925b9ba64d03b44e202c112d80f8_2419268_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/keycaps/thumb-contortion_hu8d26925b9ba64d03b44e202c112d80f8_2419268_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 756px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/thumb-contortion_hu8d26925b9ba64d03b44e202c112d80f8_2419268_756x756_fit_box_3.png 756w, https://ianthehenry.com/posts/kyria-build/keycaps/thumb-contortion_hu8d26925b9ba64d03b44e202c112d80f8_2419268_1512x1512_fit_box_3.png 1512w, https://ianthehenry.com/posts/kyria-build/keycaps/thumb-contortion_hu8d26925b9ba64d03b44e202c112d80f8_2419268_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/keycaps/thumb-contortion_hu8d26925b9ba64d03b44e202c112d80f8_2419268_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 756px"
width="756"
height="636"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAIAAAC6O5sJAAAAv0lEQVR4nACvAFD/BEKBigjn5/Xc2ToYEDc8ORMPDfn6&amp;#43;vn7&amp;#43;wQM2tre2tpJOTVUQTnz9vbl7Ov1&amp;#43;fTu8fIEE/v1FCIEPScozNHT7PX1wtLW2uDh/Q0OBN3q7fP3&amp;#43;9niqObo5fH19foA/f4RFBIaGgLg&amp;#43;PkTGB/u&amp;#43;foFDxQACQn8IiYLJiX&amp;#43;BQcCDSIp2&amp;#43;Dk9fj6AAMG/RUVARQWAAoM9/39Av8SEvAFAe78&amp;#43;&amp;#43;fp4/wTFgQNDfwCAgAFAwEAAP//xJxaThe9zZUAAAAASUVORK5CYII=);"
/>&lt;/picture>&lt;/a>
&lt;p>That&amp;rsquo;s not great.&lt;/p>
&lt;p>But I had an idea that I thought might improve it: put taller keycaps on the &amp;ldquo;upper&amp;rdquo; thumb keys. Then I could press those keys without also pressing the lower keys. Right?&lt;/p>
&lt;p>Now, you can&amp;rsquo;t &lt;em>buy&lt;/em> taller keycaps for chocs, but you can make them pretty easily. I don&amp;rsquo;t have a 3D printer or anything, so I took a spare 1u key, clipped the stems off, and then glued it on top of another key.&lt;/p>
&lt;p>&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/keycaps/flush-cut_hua8712d1c9f5f3dd112a2b2f55906d5d1_2062344_1512x1512_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/flush-cut_hua8712d1c9f5f3dd112a2b2f55906d5d1_2062344_756x756_fit_q75_h2_box_3.webp 756w, https://ianthehenry.com/posts/kyria-build/keycaps/flush-cut_hua8712d1c9f5f3dd112a2b2f55906d5d1_2062344_1512x1512_fit_q75_h2_box_3.webp 1512w, https://ianthehenry.com/posts/kyria-build/keycaps/flush-cut_hua8712d1c9f5f3dd112a2b2f55906d5d1_2062344_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/keycaps/flush-cut_hua8712d1c9f5f3dd112a2b2f55906d5d1_2062344_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 756px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/flush-cut_hua8712d1c9f5f3dd112a2b2f55906d5d1_2062344_756x756_fit_box_3.png 756w, https://ianthehenry.com/posts/kyria-build/keycaps/flush-cut_hua8712d1c9f5f3dd112a2b2f55906d5d1_2062344_1512x1512_fit_box_3.png 1512w, https://ianthehenry.com/posts/kyria-build/keycaps/flush-cut_hua8712d1c9f5f3dd112a2b2f55906d5d1_2062344_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/keycaps/flush-cut_hua8712d1c9f5f3dd112a2b2f55906d5d1_2062344_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 756px"
width="756"
height="590"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAIAAABxZ0isAAAAn0lEQVR4nATAS46CMBgA4BT64m/TmUKAZBYzi7mBxhgX3sGbGM9pXOsZIEgEKS1Q6odP54ujtB6MTrM5ihhjXwCtGeJCqDJhwvu2qvq6SVLd2/EbIArW7f5&amp;#43;N7lurjd0f4zdyzgXwor&amp;#43;D8eFcbp4ZWZKENpvRZZRHOO4zA3hnkM3TUqAIpSvvhss5sUPw0RK8GHVUj7fvbXOzdMnAAD//9yiQgJSscgQAAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/keycaps/double-decker_hu1eacab7678745746efec95c8963510b6_1433425_1512x1512_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/double-decker_hu1eacab7678745746efec95c8963510b6_1433425_756x756_fit_q75_h2_box_3.webp 756w, https://ianthehenry.com/posts/kyria-build/keycaps/double-decker_hu1eacab7678745746efec95c8963510b6_1433425_1512x1512_fit_q75_h2_box_3.webp 1512w, https://ianthehenry.com/posts/kyria-build/keycaps/double-decker_hu1eacab7678745746efec95c8963510b6_1433425_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/keycaps/double-decker_hu1eacab7678745746efec95c8963510b6_1433425_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 756px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/double-decker_hu1eacab7678745746efec95c8963510b6_1433425_756x756_fit_box_3.png 756w, https://ianthehenry.com/posts/kyria-build/keycaps/double-decker_hu1eacab7678745746efec95c8963510b6_1433425_1512x1512_fit_box_3.png 1512w, https://ianthehenry.com/posts/kyria-build/keycaps/double-decker_hu1eacab7678745746efec95c8963510b6_1433425_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/keycaps/double-decker_hu1eacab7678745746efec95c8963510b6_1433425_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 756px"
width="756"
height="367"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r&amp;#43;mnAAAAdElEQVR4nABkAJv/BE6PjwoLCvr///n7&amp;#43;wQBAQUEAwD/AAcDAwQIAgHmwsQE9PX2GxkHBQUO6uz3BwcPMS4E9/f308zRDgMEDhQS9AUF3ubnCRcUKfr5BPz//w9FPvv4&amp;#43;Q4cGwACAg9CPgP//g0JCAEAAP//lQ8mnPQJdkUAAAAASUVORK5CYII=);"
/>&lt;/picture>&lt;/a>
&lt;/p>
&lt;p>It&amp;rsquo;s not perfect &amp;ndash; the seam is pretty conspicuous &amp;ndash; but it blends in pretty well with the rest of the keyboard. And it&amp;rsquo;s &lt;em>exactly&lt;/em> the right height such that I can press it without pressing the lower key as well:&lt;/p>
&lt;div class="video-container">
&lt;video controls
width="539"
height="582"
preload=metadata
poster="/posts/kyria-build/keycaps/double-decker-demo-poster.b77d68219917b26a38b27c4e3c167f5db91264395804d206877cd524a700b7e5.png"
style="
background-size: cover;
background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAjCAIAAAB6jJ8NAAAKkUlEQVR4nCSWy49k113Hz&amp;#43;uec2/deld1VVc/xxnP9Hhm7NgeeSAYD4mCSUDIiiJCVogsEGsEyj&amp;#43;AxI4dArFhCSxAggWKHIJ42BkS22PHxnimp8f9ru6urq6qW/d973n90B3O6u7O1e98v5/Pjz38x78cXyUa1NffuIYwKoGklkaFPT&amp;#43;fnZ3Pv8zFor3Fu32LiaGECuFwjgB&amp;#43;I1&amp;#43;oLz6bno&amp;#43;VxVkSAbKUUgtgkZGlKoo8y9IwjkJj2V/tFjPc5H7t48NWrkwcxNHkLI5C0mzz0Q7tNzGjhLKa5wFGCBME6FdMxo/3zyeTKEmU1kVRpFkCCBCyxmilbV7mqdL0xu1b3/k&amp;#43;e7p3pKwBTE8/pdbhjW5Xtlvt67eQwxv1usNoppRgDDAWjFGEb8v0hbPD8XSaxEmW53mRR3EcRmFS5EorYi0Aaj/45s3f/YEr3Bf/&amp;#43;13W/&amp;#43;avO8QJZOELT1rrULIqaqlSHne01Viafq2WaWOR1UavGnX77OB0/8tFME/zJM7SKFyGcZwUhdRGWATa1je31rd2eh/9rH95/OknHzJFmc/FQLhhWficW4BSq37NTcqyN7&amp;#43;8Fs&amp;#43;sI3CzfUVrRuv7enl&amp;#43;dHR2dr5MgjjL4jwL4zjKMmSQz1yLlLu&amp;#43;dvMbv72czfTlwc8fP16UJRPUmedZS7gNIRJZ&amp;#43;g7HCEd53mZO&amp;#43;3LsFTGhzsHBaajR3WE7KqPZ1VWcpZdX86AaS6YxJgahUoVZrjjnxMk/eugKPj47DadXigAjGHkOT5XuuG7XrS2L3GOOYyGcXtZiOSa1UlqFhZVhOw9Ox2dhNfqiKGUqZVJq2exlYZCGgcXEd2swOW/4Nb/mJ0UROkJbxRJpag4lmC7ybKRUL0pIFPE4yuL4yelRv9cnCIo09aldlDCdzYIoTos8TuIoz8&amp;#43;TDCmLMCm5yyiTSvX6vf5w1O&amp;#43;vJHG0&amp;#43;/gzYSXjjGgLvuB5lF3&amp;#43;609Wu11ANpVSKVnza4cHz6y1r792r95oPH3yi2AyCfMiLfNFmpRUtPur2xubGOHj8UmUZtQRjHtZlh0cHYaLqzRL0yRmHmNJUVql3Di&amp;#43;AnUyPuOMddptwUR32NnaeCGOo4Ojw3ar/Wz/yKbxb/7qW3du7qz2&amp;#43;51Oc204arQ71OFG6/kyODg5fve9hz/&amp;#43;6fu5KoXwByvrMDD4h3/zTyacr4&amp;#43;u/fzffpTHyWBte&amp;#43;/pk/XRqNPuWGukknmWLhaL42e7v/ett7//9rchTlijrmVGHOK6rucK7tUQgqqPjGmtZ4vl&amp;#43;48&amp;#43;Ojq7nAThbLnEf/jHfxZGS0LY6/ff/Nl//uj4&amp;#43;GR1ffto/8nq2jZGSCvJGGs3W3/w9Qdf3b6hiEgLadIxRpIK16esVq87fs0oRT0XYYwIsQCYUqM1IlRVfb5zHwECQBdn41ff&amp;#43;Joqsg9/&amp;#43;h93776KKRufHt9&amp;#43;6c7aaO3ljbU316/lCpK4sFjb4spU1AHuMOow4jiglLEWAdZFRiizxmLGQBsMiFWRShNG0Vd31qma3Xr5Xr1eZ6zWaHW2NrfnsxkhtNd2o&amp;#43;XSElFazFSOpTSMMqMdTLEliDqAiYxT5tYQRqaUAIgasMZQR9A/&amp;#43;uGfHp8cqVLOlsH4ZC8JZ63ehnA9rbUF5AgOCLM07BBelDIvMikDW5YKA9IGV&amp;#43;QBwl2rbRGFBrCtmEeM0lobZKtDv1OSB6363uzRdf0eN3kg7jDGjNFlWUhZaC0XFyfvv/fuZqtlLMRJonGJqjdFNi8RAGBEuatKVeYZUGqMBlMh1cjcFJmRkt7Z&amp;#43;SUnCv53&amp;#43;sU7b6zuFRv//unBZDZL01QpLZWO5peffvj&amp;#43;&amp;#43;HJyJZXHSJFlSZ4TYilj1FaPSSglXFggWZoAJghh0MaqEox9/q3Y&amp;#43;q3rR76Ap&amp;#43;6f//1PnsiJWLmexmEUzMqicF2XERImcX8wEp3BP3/yMZH5tcHq/Ts7X3GYaLS10UWRssI3uiilNNZQ5hCMCbKEAOMeGEOHL792fDHe3T9YKLh5536nP0AYomXACEEYVyiT&amp;#43;d3XfjkJl0kShWl8Mj1fZAl3WL/ZoIyDtY4jSm2kLAyAtkZrBRYQJcYaC4a&amp;#43;&amp;#43;eC1YUdMA7N17cWbN140Fu7df1BvtBFCvt8os9jhfBGGzK23eoNmq&amp;#43;v6jSQvPvifzzSCFmeIYKA0lyorUgOQ55lSJVBswVqElNXUHW56ja3tzRud3oqyxOFiGcyEw7Ik7PUHmxvb0eyi&amp;#43;ittFotZEIVMeF6jm5X5Mi8f7T6NykIhG&amp;#43;dpXOSZzDVYaY0GsBiXWklt8Pd&amp;#43;8Ce9/pBSTp6XEAAQQkWefvzBfwnB33rrGxawNlZbkKVM0zhczvf3dzEyx3tfUMYxw0ibwUp/fWOj226vdzujTqfuui4XLheUENbprEgpCTGVs62pIggwvRjPZ9Nvffu3qpxYzBAGBJRRr&amp;#43;YrpQT3jp59bgD8ejOJFoY5pxrOLxfmcm4x8l2x1mpd63Ze7Pf6vs/iLCcEIZCouqDaPHSRT85OXnn19W5/CBY/vxHAKKO1tTZJk/n8UivZG21Hi4nx6qbZQsJVBHPGGMGptcdpPtHmkyBe8Vy2dzRmFVG44ziMMYRJnQspC8prWa4Ed6yx&amp;#43;vkxWkmpguXCGuM1WgRbW28317fiaoCGYASU1D2XUppKmSMotEoSzepNroxZBNM4jhBCjJCm5zsUj6ezSZB5XPh&amp;#43;TXBOEDLWVImUkiLb7g8v59NyMCoJWx2uZEVmjTHWRlo7lIhGMy8lILAA7Lvv/I4CfnJ6sfvks8FwdbQ2ShbTf/m7v9BR0uoPI4TyswwMEEoYZXW/pWxFEeY31HDNWx1Rh8cA3e5gGgbSGCo8g1GBUL3RTLO012jQi2nw8L0ff7n7izxZhosZAMwvTo8Pd&amp;#43;u1&amp;#43;jvf/f3rN16u&amp;#43;y1j7NbW9Tt3X637tcePHnLOS4fzl&amp;#43;6mgEuEFcaRltfWNnNrNamU4ArRb7eHvf40SViFRFsWaR4vJsbYwyePGMGe3/A88Q9/&amp;#43;9eYMIyx57kuRbbT6XZ6GKzf7JwKzxUeqjKHECWA0H643FnfzMpMEJIVxVGwQGCbXo21Nl/yyjSNl1kU5PFSFhnBBDuOAmt0Xq1zWkULczU5efL5B4xWXrQYqZXVUslut7&amp;#43;IQ8Ck7nqjdsdY3W529s7HhZSYMQywVAqL5pAQ5Ld6zZX11spao9lmXADC1YqXhXEwj5bzPFpoVXLKAEGz0QLPO/zKDjgOJeylrW2tdZxnF/MrW4Uabq9v7Z&amp;#43;flmWBwCKEcPPmPaMlqBIpbXWJjTay/H&amp;#43;j1vxGvTNo9obNTl/4PmBMCAZMn10cJzdubYzWgeCrYIERCtIE2eeysRaDvT4YHU7OrNHdeh07b38PRyEpMiKlVZLiqm8Oo1ZKI0usNVilpUSmqgLCiLn1ztd&amp;#43;jb9y73QxqwSAsc8FoyTK0opvlZltx/Pubm3Plsu981MG9x&amp;#43;0KUWyoBbRLJ6Mj1ESNTgLJue4yJnRWCuiNQA4ANgawV3U7Z8Gc2AMEwIEp2CajPuNRpplnsOawk3L4tn0imFEHM5WhquX8xlQirB9Zef2mVdjAMPR2uXBM6SkkuXOYGCi8GR/rwwXuCw1IU67O2p3LqIlwpUyEEKRKl9YGa60Wss0uYwjZG1S5IxQv978vwAAAP//2jwCbc5m4cEAAAAASUVORK5CYII=);
">
&lt;source src="https://ianthehenry.com/posts/kyria-build/keycaps/double-decker-demo-1078x1164.e0bcc0d46f30ed093faa6c81feb43e4764741ad40ff4e5273dfd5c4e6c3f3e31.mp4" type="video/mp4">
&lt;/video>
&lt;/div>
&lt;aside>
&lt;p>I could find &lt;em>no way&lt;/em> to get O-rings seated on the switch with these keycaps: they&amp;rsquo;re too big for the loop-and-roll trick to work. I snapped every single O-ring that I tried, and no other technique that I tried bore any fruit.&lt;/p>
&lt;/aside>
&lt;p>For my first attempt at these double-decker keys, I glued the keys together with standard superglue. But I didn&amp;rsquo;t use an activator, so it took a &lt;em>long&lt;/em> time to set in the anaerobic chamber between the two keys.&lt;/p>
&lt;p>I had to leave it overnight before it started holding at all, and even then it wasn&amp;rsquo;t fully cured. I found out the hard way when I left the keyboard alone for a few hours, and came back to find it covered in weird cyanoacrylate fume dust:&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/keycaps/fumes_hu860298440748554ff0ea860b24b18555_2778065_1512x1512_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/fumes_hu860298440748554ff0ea860b24b18555_2778065_756x756_fit_q75_h2_box_3.webp 756w, https://ianthehenry.com/posts/kyria-build/keycaps/fumes_hu860298440748554ff0ea860b24b18555_2778065_1512x1512_fit_q75_h2_box_3.webp 1512w, https://ianthehenry.com/posts/kyria-build/keycaps/fumes_hu860298440748554ff0ea860b24b18555_2778065_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/keycaps/fumes_hu860298440748554ff0ea860b24b18555_2778065_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 756px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/fumes_hu860298440748554ff0ea860b24b18555_2778065_756x756_fit_box_3.png 756w, https://ianthehenry.com/posts/kyria-build/keycaps/fumes_hu860298440748554ff0ea860b24b18555_2778065_1512x1512_fit_box_3.png 1512w, https://ianthehenry.com/posts/kyria-build/keycaps/fumes_hu860298440748554ff0ea860b24b18555_2778065_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/keycaps/fumes_hu860298440748554ff0ea860b24b18555_2778065_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 756px"
width="756"
height="634"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAIAAAC6O5sJAAAAtklEQVR4nATAS06EMBgA4Jm2/vQhFAp2qjHxsTXuXOnetec2egSCxpBAUBAUaAMl85GX56e6/bPLLtMX&amp;#43;iz9KktAKwGOsTDDtAIN&amp;#43;/43igRAQIDOs8OXt/f0VKk0wYTUVS1DsW3b1fUN2e93mRSDXQ7aJLE0Rr&amp;#43;/vVq3IAhAxOKjyPNqZJEuis/V&amp;#43;3Ga8ePDXfvTefffd81307AAM0CUcZTpc2enNImNEgfFR&amp;#43;fRCZchOQYAAP//035Eb7YfvSAAAAAASUVORK5CYII=);"
/>&lt;/picture>&lt;/a>
&lt;p>It cleaned off just fine, but I did panic slightly when I first saw it.&lt;/p>
&lt;p>After that, I switched to a one-part &amp;ldquo;contact adhesive,&amp;rdquo; which both cured faster and didn&amp;rsquo;t fumigate my keyboard.&lt;/p>
&lt;h1 id="an-alternative-solution">An alternative solution&lt;/h1>
&lt;p>If you&amp;rsquo;re building a Kyria with &amp;ldquo;normal&amp;rdquo; switches, you can choose to merge each of these keys into a single 2u key:&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/keycaps/2u-thumbs_hu8277c4112027be9c7830d68a4ff8885b_68096_576x576_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/2u-thumbs_hu8277c4112027be9c7830d68a4ff8885b_68096_288x288_fit_q75_h3_box_3.webp 227w, https://ianthehenry.com/posts/kyria-build/keycaps/2u-thumbs_hu8277c4112027be9c7830d68a4ff8885b_68096_576x576_fit_q75_h3_box_3.webp 453w, https://ianthehenry.com/posts/kyria-build/keycaps/2u-thumbs_hu8277c4112027be9c7830d68a4ff8885b_68096_375x375_fit_q75_h3_box_3.webp 295w, https://ianthehenry.com/posts/kyria-build/keycaps/2u-thumbs_hu8277c4112027be9c7830d68a4ff8885b_68096_750x750_fit_q75_h3_box_3.webp 577w"
sizes="(max-width: 400px) 375px, 288px">&lt;img
class="image-with-light-background"
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/2u-thumbs_hu8277c4112027be9c7830d68a4ff8885b_68096_288x288_fit_box_3.png 227w, https://ianthehenry.com/posts/kyria-build/keycaps/2u-thumbs_hu8277c4112027be9c7830d68a4ff8885b_68096_576x576_fit_box_3.png 453w, https://ianthehenry.com/posts/kyria-build/keycaps/2u-thumbs_hu8277c4112027be9c7830d68a4ff8885b_68096_375x375_fit_box_3.png 295w, https://ianthehenry.com/posts/kyria-build/keycaps/2u-thumbs_hu8277c4112027be9c7830d68a4ff8885b_68096_750x750_fit_box_3.png 577w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 288px"
width="227"
height="288"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAKCAIAAAAGpYjXAAAAn0lEQVR4nFzNsQqDMBDG8eTuqDrIIbjk/R/IN3DSQfhwUIlZzJWmLdj&amp;#43;xvvDfWJm7gsAEV3XdRyHuBvv/bIsdV2LyH/o&amp;#43;945F2P8CSmlGCMziwi9T9u2DcMgRdM03ntvZgCqqjrPk5lVFcCrj&amp;#43;NoZo&amp;#43;i6zoAKSVmJlU1sxBCznme533fVbVt288rAKqacw4hEJVhK9Z1nabJbp4BAAD//2lOZCBmJsJrAAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;p>But the Kyria is not compatible with 2u chocs, which have a very different footprint than normal cherry keys.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/keycaps/2u-footprint_hu56f26e7b6ba6efc781392a6483c77e4f_2507108_1512x1512_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/2u-footprint_hu56f26e7b6ba6efc781392a6483c77e4f_2507108_756x756_fit_q75_h2_box_3.webp 756w, https://ianthehenry.com/posts/kyria-build/keycaps/2u-footprint_hu56f26e7b6ba6efc781392a6483c77e4f_2507108_1512x1512_fit_q75_h2_box_3.webp 1512w, https://ianthehenry.com/posts/kyria-build/keycaps/2u-footprint_hu56f26e7b6ba6efc781392a6483c77e4f_2507108_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/keycaps/2u-footprint_hu56f26e7b6ba6efc781392a6483c77e4f_2507108_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 756px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/2u-footprint_hu56f26e7b6ba6efc781392a6483c77e4f_2507108_756x756_fit_box_3.png 756w, https://ianthehenry.com/posts/kyria-build/keycaps/2u-footprint_hu56f26e7b6ba6efc781392a6483c77e4f_2507108_1512x1512_fit_box_3.png 1512w, https://ianthehenry.com/posts/kyria-build/keycaps/2u-footprint_hu56f26e7b6ba6efc781392a6483c77e4f_2507108_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/keycaps/2u-footprint_hu56f26e7b6ba6efc781392a6483c77e4f_2507108_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 756px"
width="756"
height="447"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAIAAAD38zoCAAAAjUlEQVR4nAB9AIL/BMS5sfv4&amp;#43;f37/f/&amp;#43;/f8AAAgJCP36/AIEBQQBAP/&amp;#43;/f6UuM3&amp;#43;/wAeDAIuIBgVDwwNDw8E//778fX03enyCAwN4e70v9vUNiIXRCwdAv79/AgC/FoyDiQN/QH/Af4CBQD59P/&amp;#43;/QT8/P38/P8mHRwZDOtBIfjb6fYjHBgODwwBAAD//2GlP6d2kHJdAAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;p>But it&amp;rsquo;s still &lt;em>sort of&lt;/em> possible to use a 2u key, by making a custom 2u that spans two 1u switches.&lt;/p>
&lt;p>I clipped the stems off the 2u key with flush cutters, and I clipped the edges off of two 1u keys, to isolate the stems:&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/keycaps/2u-trimmed_hu92b33bf86fee4fc0db1e15262eed9c7b_2639616_1512x1512_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/2u-trimmed_hu92b33bf86fee4fc0db1e15262eed9c7b_2639616_756x756_fit_q75_h2_box_3.webp 756w, https://ianthehenry.com/posts/kyria-build/keycaps/2u-trimmed_hu92b33bf86fee4fc0db1e15262eed9c7b_2639616_1512x1512_fit_q75_h2_box_3.webp 1512w, https://ianthehenry.com/posts/kyria-build/keycaps/2u-trimmed_hu92b33bf86fee4fc0db1e15262eed9c7b_2639616_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/keycaps/2u-trimmed_hu92b33bf86fee4fc0db1e15262eed9c7b_2639616_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 756px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/2u-trimmed_hu92b33bf86fee4fc0db1e15262eed9c7b_2639616_756x756_fit_box_3.png 756w, https://ianthehenry.com/posts/kyria-build/keycaps/2u-trimmed_hu92b33bf86fee4fc0db1e15262eed9c7b_2639616_1512x1512_fit_box_3.png 1512w, https://ianthehenry.com/posts/kyria-build/keycaps/2u-trimmed_hu92b33bf86fee4fc0db1e15262eed9c7b_2639616_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/keycaps/2u-trimmed_hu92b33bf86fee4fc0db1e15262eed9c7b_2639616_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 756px"
width="756"
height="738"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAyklEQVR4nATAYU7CMBQA4Ob17clc6SY49YeI3MF4KO9j4p0MiYkmGhPUH8qW0UTZSu0K9PHh3f1DiFEfp50PgyOSKAWLxnbYOhfiHgHM4tMbc3V7o7ROiYAkkERCmYwKUeTL55d2&amp;#43;ePDFja&amp;#43;/&amp;#43;97YFZ2k35Xp3/Wzp9ySjCV4Kr663FeJIOzTAkhOHD9&amp;#43;obNytD7ojwZMYsY&amp;#43;XfrrVaz6yleluMPQuW92&amp;#43;1qBD2b0nC4R8Rq3XZFvm5WajLJtL44L4lonGWHAAAA//8T41m8mTJGdQAAAABJRU5ErkJggg==);"
/>&lt;/picture>&lt;/a>
&lt;p>Then I sanded the 1u stem tops flat, and put them in my spare acrylic plate as a spacer.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/keycaps/spaced_hu76589812fc365d866ca0708f271d654f_1599309_1512x1512_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/spaced_hu76589812fc365d866ca0708f271d654f_1599309_756x756_fit_q75_h2_box_3.webp 756w, https://ianthehenry.com/posts/kyria-build/keycaps/spaced_hu76589812fc365d866ca0708f271d654f_1599309_1512x1512_fit_q75_h2_box_3.webp 1512w, https://ianthehenry.com/posts/kyria-build/keycaps/spaced_hu76589812fc365d866ca0708f271d654f_1599309_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/keycaps/spaced_hu76589812fc365d866ca0708f271d654f_1599309_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 756px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/spaced_hu76589812fc365d866ca0708f271d654f_1599309_756x756_fit_box_3.png 756w, https://ianthehenry.com/posts/kyria-build/keycaps/spaced_hu76589812fc365d866ca0708f271d654f_1599309_1512x1512_fit_box_3.png 1512w, https://ianthehenry.com/posts/kyria-build/keycaps/spaced_hu76589812fc365d866ca0708f271d654f_1599309_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/keycaps/spaced_hu76589812fc365d866ca0708f271d654f_1599309_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 756px"
width="756"
height="394"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r&amp;#43;mnAAAAdElEQVR4nABkAJv/BEmfr/nc293h4BX39vUJChkHCP0BAAkREQT5&amp;#43;vwD8fE/Hh7w5OMFGh3y&amp;#43;ffqBAIcAAACBAIEIQUGLQkNFQgKHgYKAu7uCuvt&amp;#43;Pj5BP8CA8nV0MX8&amp;#43;wsEBQHq5gwODx07PPLExgEAAP//lhkqQlCfdYsAAAAASUVORK5CYII=);"
/>&lt;/picture>&lt;/a>
&lt;p>Then I attached these stems to a 2u key with contact adhesive, clamping the whole thing together with some masking tape:&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/keycaps/sandwich_hu465f7acaa307891aada7c9f618745f02_1772265_1512x1512_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/sandwich_hu465f7acaa307891aada7c9f618745f02_1772265_756x756_fit_q75_h2_box_3.webp 756w, https://ianthehenry.com/posts/kyria-build/keycaps/sandwich_hu465f7acaa307891aada7c9f618745f02_1772265_1512x1512_fit_q75_h2_box_3.webp 1512w, https://ianthehenry.com/posts/kyria-build/keycaps/sandwich_hu465f7acaa307891aada7c9f618745f02_1772265_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/keycaps/sandwich_hu465f7acaa307891aada7c9f618745f02_1772265_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 756px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/sandwich_hu465f7acaa307891aada7c9f618745f02_1772265_756x756_fit_box_3.png 756w, https://ianthehenry.com/posts/kyria-build/keycaps/sandwich_hu465f7acaa307891aada7c9f618745f02_1772265_1512x1512_fit_box_3.png 1512w, https://ianthehenry.com/posts/kyria-build/keycaps/sandwich_hu465f7acaa307891aada7c9f618745f02_1772265_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/keycaps/sandwich_hu465f7acaa307891aada7c9f618745f02_1772265_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 756px"
width="756"
height="564"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAIAAABxZ0isAAAApklEQVR4nACWAGn/BLyad&amp;#43;ft9AT99ighC8LQ4T0wH/H1AAspTAQVBgoLEAb39w0A&amp;#43;A0MHAfK9AMyDwEKAPsBRz1B6fP&amp;#43;9/r9Kygd7fX14gAXaUYnNhDlA&amp;#43;4MJQLx3REC8gL59A8G/fTy7hMF8Pb29QSHQxMODD/WAQrlAghPDvC42PtlPxUKDQYECQgD9AoLRCYc&amp;#43;vf06er1WEMZFiIYq6/BAQAA///OGz968bP9QgAAAABJRU5ErkJggg==);"
/>&lt;/picture>&lt;/a>
&lt;p>After leaving it to cure overnight, I found that it worked&amp;hellip; &lt;em>okay&lt;/em>.&lt;/p>
&lt;p>It&amp;rsquo;s not pretty: the keycap moved slightly during clamping, so the key is not perfectly centered. But it&amp;rsquo;s close enough.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/keycaps/frankenkey_hu04137620e99e69c3042892e0e0aac911_1272982_1512x1512_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/frankenkey_hu04137620e99e69c3042892e0e0aac911_1272982_756x756_fit_q75_h2_box_3.webp 756w, https://ianthehenry.com/posts/kyria-build/keycaps/frankenkey_hu04137620e99e69c3042892e0e0aac911_1272982_1512x1512_fit_q75_h2_box_3.webp 1512w, https://ianthehenry.com/posts/kyria-build/keycaps/frankenkey_hu04137620e99e69c3042892e0e0aac911_1272982_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/keycaps/frankenkey_hu04137620e99e69c3042892e0e0aac911_1272982_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 756px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/frankenkey_hu04137620e99e69c3042892e0e0aac911_1272982_756x756_fit_box_3.png 756w, https://ianthehenry.com/posts/kyria-build/keycaps/frankenkey_hu04137620e99e69c3042892e0e0aac911_1272982_1512x1512_fit_box_3.png 1512w, https://ianthehenry.com/posts/kyria-build/keycaps/frankenkey_hu04137620e99e69c3042892e0e0aac911_1272982_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/keycaps/frankenkey_hu04137620e99e69c3042892e0e0aac911_1272982_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 756px"
width="756"
height="321"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAIAAAAhqtkfAAAAW0lEQVR4nABLALT/BFiQlwYDAgD&amp;#43;/QcAAPj09AULCQYFAwD7&amp;#43;QT//v/56efzx8gSEBD6/PzzFBAaNTL7/v8E9vX1BAD/8RMR9g0NCg0MBgsJ&amp;#43;Pr6BwQEAQAA//8KVCHPhfGKsAAAAABJRU5ErkJggg==);"
/>&lt;/picture>&lt;/a>
&lt;p>Without O-rings on these stems, the added height of the 1u remnants isn&amp;rsquo;t really noticeable. And the MBK 2u keys are convex anyway, so it already sticks out a little bit.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/keycaps/2u-thumb_huace4638d10b9f9067a164148dc78acc3_2790006_1512x1512_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/2u-thumb_huace4638d10b9f9067a164148dc78acc3_2790006_756x756_fit_q75_h2_box_3.webp 756w, https://ianthehenry.com/posts/kyria-build/keycaps/2u-thumb_huace4638d10b9f9067a164148dc78acc3_2790006_1512x1512_fit_q75_h2_box_3.webp 1512w, https://ianthehenry.com/posts/kyria-build/keycaps/2u-thumb_huace4638d10b9f9067a164148dc78acc3_2790006_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/keycaps/2u-thumb_huace4638d10b9f9067a164148dc78acc3_2790006_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 756px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/keycaps/2u-thumb_huace4638d10b9f9067a164148dc78acc3_2790006_756x756_fit_box_3.png 756w, https://ianthehenry.com/posts/kyria-build/keycaps/2u-thumb_huace4638d10b9f9067a164148dc78acc3_2790006_1512x1512_fit_box_3.png 1512w, https://ianthehenry.com/posts/kyria-build/keycaps/2u-thumb_huace4638d10b9f9067a164148dc78acc3_2790006_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/keycaps/2u-thumb_huace4638d10b9f9067a164148dc78acc3_2790006_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 756px"
width="756"
height="510"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAIAAAD38zoCAAAAi0lEQVR4nATA0cqCMBQAYP&amp;#43;deRT/ZV1lSHVhVNBT9Wr1HPUo3UgFgsLJdtjapvXJ4&amp;#43;nsNY/Xy2bOjS/NJ1Tr8qVZ/CEKIlQZpwfq&amp;#43;RtFvTbjMAhHfVI/m5bexkIcF8WiaTttg7QJdpb/1aQmiperWz4NIL1z0hsNu&amp;#43;pR32f7rVAK0yxHBIBfAAAA//&amp;#43;mdUAD2AR7VgAAAABJRU5ErkJggg==);"
/>&lt;/picture>&lt;/a>
&lt;p>It looks pretty good, I think. It&amp;rsquo;s passable. I was very careful removing the keycap from the switches &amp;ndash; I don&amp;rsquo;t totally trust the contact adhesive to withstand the force of pulling out two Choc stems at once, so I sort of pushed it out from underneath, and it held up fine.&lt;/p>
&lt;p>But it&amp;rsquo;s very hard to press the key. Like, it literally takes a lot of force to depress both switches at once. Which, I mean, duh, I guess, but I didn&amp;rsquo;t expect it to be so noticeable. Thumbs are strong! But if you actually want to go the frankencap 2u route, I would strongly recommend getting lighter springs for those two switches.&lt;/p>
&lt;p>But I prefer the two-story keycaps anyway, so I didn&amp;rsquo;t bother with that.&lt;/p>
&lt;section class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1" role="doc-endnote">
&lt;p>Oh no. The audiophile was inside me all along.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/section></description><pubDate>Fri, 07 Jan 2022 00:00:00 +0000</pubDate><link>https://ianthehenry.com/posts/kyria-build/keycaps/</link><guid isPermaLink="true">https://ianthehenry.com/posts/kyria-build/keycaps/</guid></item><item><title>Kyria Build, Part 9: Soldering time</title><description>&lt;p>So: I have my fancy, unstapled, lubricated switches.&lt;/p>
&lt;p>I have my custom-manufactured, freshly painted plates.&lt;/p>
&lt;p>It&amp;rsquo;s time to solder this thing together.&lt;/p>
&lt;p>I ordered a set of prototyping boards to use to practice soldering. I thought I would have to &lt;em>practice&lt;/em> soldering, like this was a skill that I would have to work on until I was ready to tackle the keyboard.&lt;/p>
&lt;p>This was absolutely not true.&lt;/p>
&lt;p>It was nice to have the practice boards to get a feel for the temperature of the iron &amp;ndash; I found 375°C to be right for my particular combination of cheap soldering iron and lead-free rosin-core solder &amp;ndash; but beyond that&amp;hellip; well, it&amp;rsquo;s really, really easy to solder through-hole components. I watched some videos on proper soldering technique &amp;ndash; which was very valuable &amp;ndash; and by doing the things people said everything just fell into place. Solder wants to adhere to hot metal. Make both contacts hot, press some solder on, and you&amp;rsquo;re done.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/soldering-time/practice-pins_hu1058362787ddaf17d7ec623a06627d72_1321128_1512x1512_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/soldering-time/practice-pins_hu1058362787ddaf17d7ec623a06627d72_1321128_756x756_fit_q75_h2_box_3.webp 756w, https://ianthehenry.com/posts/kyria-build/soldering-time/practice-pins_hu1058362787ddaf17d7ec623a06627d72_1321128_1512x1512_fit_q75_h2_box_3.webp 1512w, https://ianthehenry.com/posts/kyria-build/soldering-time/practice-pins_hu1058362787ddaf17d7ec623a06627d72_1321128_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/soldering-time/practice-pins_hu1058362787ddaf17d7ec623a06627d72_1321128_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 756px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/soldering-time/practice-pins_hu1058362787ddaf17d7ec623a06627d72_1321128_756x756_fit_box_3.png 756w, https://ianthehenry.com/posts/kyria-build/soldering-time/practice-pins_hu1058362787ddaf17d7ec623a06627d72_1321128_1512x1512_fit_box_3.png 1512w, https://ianthehenry.com/posts/kyria-build/soldering-time/practice-pins_hu1058362787ddaf17d7ec623a06627d72_1321128_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/soldering-time/practice-pins_hu1058362787ddaf17d7ec623a06627d72_1321128_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 756px"
width="756"
height="345"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r&amp;#43;mnAAAAdElEQVR4nABkAJv/BN2YkOoCBHzX4vsCBPj5&amp;#43;AwND&amp;#43;709gD&amp;#43;&amp;#43;QLl5e4S&amp;#43;vtoGxDy8fHu9fIB/Pb&amp;#43;&amp;#43;fD/&amp;#43;vcE4eroxNzW7g8JDQgMCvwF5&amp;#43;jpBQICDwcFA9gA&amp;#43;Oj&amp;#43;//cHDOr7//v9/g4EAQ8F/w0A/QEAAP//uG443v5c5XgAAAAASUVORK5CYII=);"
/>&lt;/picture>&lt;/a>
&lt;p>I experimented with different quantities of solder to get a feel for what was too much and what was too little, and I played around with the temperature a little. And then I got bored, and started on the real thing.&lt;/p>
&lt;p>The first step is to solder in the diodes &amp;ndash; one for each switch. In order to do that you have to bend the legs, and there are special diode-leg-bending tools you can get to make that easy. I didn&amp;rsquo;t get one, but I found that two of the 3mm acrylic plates sandwiched together made a perfect guide.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/soldering-time/diode-legs_hua7dfeeb30bc38078b5601f1fcd9e11f8_1248377_934x934_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/soldering-time/diode-legs_hua7dfeeb30bc38078b5601f1fcd9e11f8_1248377_467x467_fit_q75_h2_box_3.webp 433w, https://ianthehenry.com/posts/kyria-build/soldering-time/diode-legs_hua7dfeeb30bc38078b5601f1fcd9e11f8_1248377_934x934_fit_q75_h2_box_3.webp 866w, https://ianthehenry.com/posts/kyria-build/soldering-time/diode-legs_hua7dfeeb30bc38078b5601f1fcd9e11f8_1248377_375x375_fit_q75_h2_box_3.webp 348w, https://ianthehenry.com/posts/kyria-build/soldering-time/diode-legs_hua7dfeeb30bc38078b5601f1fcd9e11f8_1248377_750x750_fit_q75_h2_box_3.webp 696w"
sizes="(max-width: 400px) 375px, 467px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/soldering-time/diode-legs_hua7dfeeb30bc38078b5601f1fcd9e11f8_1248377_467x467_fit_box_3.png 433w, https://ianthehenry.com/posts/kyria-build/soldering-time/diode-legs_hua7dfeeb30bc38078b5601f1fcd9e11f8_1248377_934x934_fit_box_3.png 866w, https://ianthehenry.com/posts/kyria-build/soldering-time/diode-legs_hua7dfeeb30bc38078b5601f1fcd9e11f8_1248377_375x375_fit_box_3.png 348w, https://ianthehenry.com/posts/kyria-build/soldering-time/diode-legs_hua7dfeeb30bc38078b5601f1fcd9e11f8_1248377_750x750_fit_box_3.png 696w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 467px"
width="433"
height="467"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAJCAIAAACAMfp5AAAA8UlEQVR4nADhAB7/BOO8kAIBBNnq8KDd7d7b4fr09iomJO4B/gNQNCbj6/YTCwMTCwnfBgsGCQn0&amp;#43;voHCwkEAQED8gUX8PgK7tfHCA8VAxAO/gMC/PX4AhogHTEE8fzj3ewJGwvd4QL5&amp;#43;QX//yAGAALw8vfw6O3g0cs2PUXx9wEO8vEK7Or33N8DKx4S2PL98&amp;#43;74JSYj/BcmzMG7FxYpAvzzAtjg5v8VHv4mLA/RzxwgKAcJE&amp;#43;/w7un&amp;#43;AAMJEA0AChIjKjDn2s4RAf4BKT3LtaEWEgsDBQYE&amp;#43;/n8PkFG5vn&amp;#43;Ow4M6SU87NvOA/rxAQAA///Ny2lcPvvuRwAAAABJRU5ErkJggg==);"
/>&lt;/picture>&lt;/a>
&lt;p>I bent them, installed them, and soldered them, being very careful about the orientation &amp;ndash; honestly there&amp;rsquo;s nothing interesting to say about this part. I followed &lt;a href="https://docs.splitkb.com/hc/en-us/articles/360010443580-Kyria-Build-Guide-Diodes">the official build guide&lt;/a>. It was fun and meditative and relaxing.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/soldering-time/diodes_hu9bf1ae82084b88a0811be767f4594e49_2499250_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/soldering-time/diodes_hu9bf1ae82084b88a0811be767f4594e49_2499250_768x768_fit_q75_h2_box_3.webp 768w, https://ianthehenry.com/posts/kyria-build/soldering-time/diodes_hu9bf1ae82084b88a0811be767f4594e49_2499250_1536x1536_fit_q75_h2_box_3.webp 1536w, https://ianthehenry.com/posts/kyria-build/soldering-time/diodes_hu9bf1ae82084b88a0811be767f4594e49_2499250_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/soldering-time/diodes_hu9bf1ae82084b88a0811be767f4594e49_2499250_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/soldering-time/diodes_hu9bf1ae82084b88a0811be767f4594e49_2499250_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/kyria-build/soldering-time/diodes_hu9bf1ae82084b88a0811be767f4594e49_2499250_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/kyria-build/soldering-time/diodes_hu9bf1ae82084b88a0811be767f4594e49_2499250_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/soldering-time/diodes_hu9bf1ae82084b88a0811be767f4594e49_2499250_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="395"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r&amp;#43;mnAAAAdElEQVR4nABkAJv/BE6RqAEDAvL6&amp;#43;v3x8AoECgcJCwUQCQMFBwTz9vcJ8O31z8r78/ADDw/5AgAMERAFLDME&amp;#43;fDxAdbRAvz6DhYZ&amp;#43;QgGChsaBA4NAPz1BPgFBfoTGfwcIgITEgYA/QgFAfv9&amp;#43;v/7&amp;#43;wEAAP//1qEoL7WmfxgAAAAASUVORK5CYII=);"
/>&lt;/picture>&lt;/a>
&lt;p>The only components you &lt;em>need&lt;/em> to solder on for a wireless keyboard are the diodes, switches, and microcontroller. The reset button is pretty nice too, but you can just bind a key to reset in your firmware, and short the reset pin manually to flash it the first time.&lt;/p>
&lt;p>I went ahead and soldered everything, though &amp;ndash; which just means the TRRS jack and OLED resistors. Because the nice!nano is &amp;ldquo;socketed,&amp;rdquo; not soldered directly to the PCB, I can always pull it out and replace it, so it&amp;rsquo;s nice to have the TRRS jack in case this whole Bluetooth thing doesn&amp;rsquo;t work out. I don&amp;rsquo;t think I would ever install an OLED display on my keyboard, but hey the resistors look cool and soldering is fun.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/soldering-time/switches_huab16dc74a587037d4dad0b212eda8a53_3118961_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/soldering-time/switches_huab16dc74a587037d4dad0b212eda8a53_3118961_768x768_fit_q75_h2_box_3.webp 768w, https://ianthehenry.com/posts/kyria-build/soldering-time/switches_huab16dc74a587037d4dad0b212eda8a53_3118961_1536x1536_fit_q75_h2_box_3.webp 1536w, https://ianthehenry.com/posts/kyria-build/soldering-time/switches_huab16dc74a587037d4dad0b212eda8a53_3118961_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/soldering-time/switches_huab16dc74a587037d4dad0b212eda8a53_3118961_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/soldering-time/switches_huab16dc74a587037d4dad0b212eda8a53_3118961_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/kyria-build/soldering-time/switches_huab16dc74a587037d4dad0b212eda8a53_3118961_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/kyria-build/soldering-time/switches_huab16dc74a587037d4dad0b212eda8a53_3118961_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/soldering-time/switches_huab16dc74a587037d4dad0b212eda8a53_3118961_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="368"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r&amp;#43;mnAAAAdElEQVR4nABkAJv/BGCTpQcFBP/39vfq5v78&amp;#43;gMGBQgQEQQTEwT//PnsycAL&amp;#43;Pb49PL9AAEEAP0ECQcLNDUDKBsdEv3&amp;#43;6e3s7Pz79wEB&amp;#43;AMC/w8O//76BO0BAeT07xY0NiYQEgP//BYMCAL/&amp;#43;wMA/QEAAP//m5svREnARZoAAAAASUVORK5CYII=);"
/>&lt;/picture>&lt;/a>
&lt;p>My favorite part was soldering the switches. I kind of want to build another keyboard just to do more soldering. It was so&amp;hellip; peaceful. &lt;em>Just&lt;/em> complicated enough that you can&amp;rsquo;t completely zone out, but so repetitive that I sort of entered a trance state. Makes me want to look into knitting or something.&lt;/p>
&lt;p>Somehow I screwed up and only ordered one set of pins for my microcontroller sockets, so I got to try using diode legs for one of them and fancy header pins for the other one.&lt;/p>
&lt;p>I do prefer the fancy pins &amp;ndash; they&amp;rsquo;re much stiffer, so they don&amp;rsquo;t bend when you remove the microcontroller. The diode legs, meanwhile, are incredibly flexible, and any time I take the microcontroller out I have to manually re-straighten the pins with tweezers.&lt;/p>
&lt;p>But the pins are like $4 per microcontroller or something like that, which feels pretty pricey for what they are. I don&amp;rsquo;t know if they&amp;rsquo;re &lt;em>that&lt;/em> much better. It&amp;rsquo;s not like I&amp;rsquo;m going to remove the microcontroller very often.&lt;/p>
&lt;p>I was very neurotic about testing every switch with a multimeter, before and after soldering, to make sure that I didn&amp;rsquo;t get any defects or short anything out. But I didn&amp;rsquo;t. Everything went beautifully.&lt;/p>
&lt;p>Until the very end.&lt;/p>
&lt;p>The only part of this process that I &lt;em>didn&amp;rsquo;t&lt;/em> like was soldering the battery terminals.&lt;/p>
&lt;aside>
&lt;p>&lt;strong>Note: the Kyria rev2 addresses all of the following issues.&lt;/strong>&lt;/p>
&lt;p>The current iteration of the Kyria contains a footprint for a JST connector directly on the PCB, so you don&amp;rsquo;t need to solder anything to the battery terminals on the nice!nano. So that&amp;rsquo;s pretty great. I built a Kyria rev1.4, because that&amp;rsquo;s what existed when I bought these parts. But it&amp;rsquo;s the future now, and the future is bright.&lt;/p>
&lt;/aside>
&lt;p>See, in order to fit in a normal Pro Micro footprint (I assume), the holes for the battery terminals on the nice!nano are &lt;em>much smaller&lt;/em> than the rest of the holes.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/soldering-time/battery-holes_huc47e280050e7c6bd65b6e97718bf4e1f_3384478_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/soldering-time/battery-holes_huc47e280050e7c6bd65b6e97718bf4e1f_3384478_768x768_fit_q75_h2_box_3.webp 768w, https://ianthehenry.com/posts/kyria-build/soldering-time/battery-holes_huc47e280050e7c6bd65b6e97718bf4e1f_3384478_1536x1536_fit_q75_h2_box_3.webp 1536w, https://ianthehenry.com/posts/kyria-build/soldering-time/battery-holes_huc47e280050e7c6bd65b6e97718bf4e1f_3384478_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/soldering-time/battery-holes_huc47e280050e7c6bd65b6e97718bf4e1f_3384478_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/soldering-time/battery-holes_huc47e280050e7c6bd65b6e97718bf4e1f_3384478_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/kyria-build/soldering-time/battery-holes_huc47e280050e7c6bd65b6e97718bf4e1f_3384478_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/kyria-build/soldering-time/battery-holes_huc47e280050e7c6bd65b6e97718bf4e1f_3384478_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/soldering-time/battery-holes_huc47e280050e7c6bd65b6e97718bf4e1f_3384478_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="498"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAIAAAD38zoCAAAAjUlEQVR4nAB9AIL/BEF9hfH29QL292E&amp;#43;Penz8rnS0xgPDe4EBwQLBgQR9fgT6&amp;#43;JGIR0JDAztwbX/GTT9BQoBQXuCBfHtLvn2&amp;#43;fn9CAgJBQX92AsSARgcBP//AP8DBOfp5wQFDdvg5RgTCgMlEeby8wT8/v4IBwjt7OwJC/4eGhXy8u0RCAX8CwoBAAD//xmUN/y1637rAAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;p>And because I was soldering &lt;em>wire&lt;/em>, not diode legs or switch terminals, I had to use a &amp;ldquo;helping hands&amp;rdquo; in order to hold it the microcontroller stable &amp;ndash; though I guess I could have stuck it in a breadboard instead.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/soldering-time/helping-hands_hub95b076e0ef14985c8d970125dded724_2995959_1512x1512_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/soldering-time/helping-hands_hub95b076e0ef14985c8d970125dded724_2995959_756x756_fit_q75_h2_box_3.webp 756w, https://ianthehenry.com/posts/kyria-build/soldering-time/helping-hands_hub95b076e0ef14985c8d970125dded724_2995959_1512x1512_fit_q75_h2_box_3.webp 1512w, https://ianthehenry.com/posts/kyria-build/soldering-time/helping-hands_hub95b076e0ef14985c8d970125dded724_2995959_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/soldering-time/helping-hands_hub95b076e0ef14985c8d970125dded724_2995959_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 756px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/soldering-time/helping-hands_hub95b076e0ef14985c8d970125dded724_2995959_756x756_fit_box_3.png 756w, https://ianthehenry.com/posts/kyria-build/soldering-time/helping-hands_hub95b076e0ef14985c8d970125dded724_2995959_1512x1512_fit_box_3.png 1512w, https://ianthehenry.com/posts/kyria-build/soldering-time/helping-hands_hub95b076e0ef14985c8d970125dded724_2995959_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/soldering-time/helping-hands_hub95b076e0ef14985c8d970125dded724_2995959_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 756px"
width="756"
height="665"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAIAAAC6O5sJAAAAv0lEQVR4nACvAFD/BG1&amp;#43;e7rKyVc1LOj9Ax0ICw8QEtHW3P/69AP3Eg0lLCcN/wXq&amp;#43;P4WCwIbBfFALyBEOSsETCQKHxb38foR&amp;#43;w4CHwfr8Orp8fHoBf8CAxcQFQMICv0JBwD/AeX7Cd8GGM3wA9bo9AP6Jy/pChYGEhoB/wL34&amp;#43;Hz/f4CDg8CDxAEIDMzAP7&amp;#43;5/T2A/z73MnSEiEeFysNAgMCBPr7&amp;#43;/7&amp;#43;/gQCAvr3&amp;#43;fQaHhIOEQgCACcPAAEAAP//LklIiWvwbrgAAAAASUVORK5CYII=);"
/>&lt;/picture>&lt;/a>
&lt;p>But the trickiest part of this process was entirely my fault: I cut the wires on one microcontroller to the wrong length, and had to desolder and reconnect them.&lt;/p>
&lt;p>Desoldering these tiny holes was &lt;em>really hard&lt;/em>. I used the solder sucker that came with my soldering iron, and it worked &lt;em>eventually&lt;/em>. But I would recommend being very careful with this part. Soldering them wasn&amp;rsquo;t fun in the first place. Desoldering was even worse.&lt;/p>
&lt;p>I didn&amp;rsquo;t take any pictures of the desoldering bit so please content yourself with this picture of one of my quality inspectors bringing me a Christmas present just a few days after he joined the firm:&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/soldering-time/odin_huf5094b4639975f301af31b7b26b50c35_2988274_1328x1328_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/soldering-time/odin_huf5094b4639975f301af31b7b26b50c35_2988274_664x664_fit_q75_h2_box_3.webp 664w, https://ianthehenry.com/posts/kyria-build/soldering-time/odin_huf5094b4639975f301af31b7b26b50c35_2988274_1328x1328_fit_q75_h2_box_3.webp 1328w, https://ianthehenry.com/posts/kyria-build/soldering-time/odin_huf5094b4639975f301af31b7b26b50c35_2988274_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/soldering-time/odin_huf5094b4639975f301af31b7b26b50c35_2988274_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 664px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/soldering-time/odin_huf5094b4639975f301af31b7b26b50c35_2988274_664x664_fit_box_3.png 664w, https://ianthehenry.com/posts/kyria-build/soldering-time/odin_huf5094b4639975f301af31b7b26b50c35_2988274_1328x1328_fit_box_3.png 1328w, https://ianthehenry.com/posts/kyria-build/soldering-time/odin_huf5094b4639975f301af31b7b26b50c35_2988274_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/soldering-time/odin_huf5094b4639975f301af31b7b26b50c35_2988274_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 664px"
width="664"
height="490"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAIAAABxZ0isAAAApUlEQVR4nATAuw7BUBgA4HP5T3t6IxYGo8FIIhKxeirv4RHsJo9gILFgkugmmoZe0J5Wz8UH29XSD3xp0PH6QAgtpkMlJTAGSRzlTyrqZr3Zc6LHPUaBlKKCt1DYSGDQbzNMaPYR3IK8asDlnFDs23Q06EZJ4bk2ECKyArCR&amp;#43;qc1WPPZJAi8Kn2db/dTGEOn5ZSl4I79zdLd4VI3OoxSatQ/AAD//6h3SDfMkE2iAAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;aside>
&lt;p>Very good boy.&lt;/p>
&lt;/aside>
&lt;p>I used a JST connector, rather than soldering the battery directly to the nice!nano, in case I ever need to replace it.&lt;/p>
&lt;p>Unfortunately the Kyria wasn&amp;rsquo;t designed with a slot for a JST on the PCB itself, so the wires are just kind of hanging out loose next to the microcontroller.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/soldering-time/battery-wires_hu3c30d11e69710becea917481ae608c41_2844740_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/soldering-time/battery-wires_hu3c30d11e69710becea917481ae608c41_2844740_768x768_fit_q75_h2_box_3.webp 768w, https://ianthehenry.com/posts/kyria-build/soldering-time/battery-wires_hu3c30d11e69710becea917481ae608c41_2844740_1536x1536_fit_q75_h2_box_3.webp 1536w, https://ianthehenry.com/posts/kyria-build/soldering-time/battery-wires_hu3c30d11e69710becea917481ae608c41_2844740_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/soldering-time/battery-wires_hu3c30d11e69710becea917481ae608c41_2844740_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/soldering-time/battery-wires_hu3c30d11e69710becea917481ae608c41_2844740_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/kyria-build/soldering-time/battery-wires_hu3c30d11e69710becea917481ae608c41_2844740_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/kyria-build/soldering-time/battery-wires_hu3c30d11e69710becea917481ae608c41_2844740_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/soldering-time/battery-wires_hu3c30d11e69710becea917481ae608c41_2844740_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="417"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r&amp;#43;mnAAAAdElEQVR4nABkAJv/BHaWlwkQDPf5&amp;#43;Oz/AAn29RIFBOfW3Af6&amp;#43;QMSBQkL9/YL7u/29/IG5vD139zn494CAgUE8u7n8gHp9f4Q6BUW5ensI/nxKiAMCxMUAjs&amp;#43;Rf8TK/IHBwQGAAMcHAUTEsbb&amp;#43;&amp;#43;zy&amp;#43;gEAAP//SkkxTUbAucYAAAAASUVORK5CYII=);"
/>&lt;/picture>&lt;/a>
&lt;p>It&amp;rsquo;s not the prettiest thing, but they&amp;rsquo;ll be covered up in regular use so whatever.&lt;/p>
&lt;aside>
&lt;p>And once again: the Kyria &lt;em>that I have&lt;/em> wasn&amp;rsquo;t designed for it. The Kyria that you can buy now &lt;em>was&lt;/em> designed for it, so you don&amp;rsquo;t have to have ugly wires if you do this build today.&lt;/p>
&lt;/aside>
&lt;p>The last part of assembly was installing the bottom plate and the little rubber feetsies.&lt;/p>
&lt;p>So one thing that I wanted to do was have the case snap together with its magnets. That means the polarity has to be correct, or the halves will repel one another. I got that right. And the rubber feet have to be stuck on at &lt;em>slightly&lt;/em> different positions on each half, so that they won&amp;rsquo;t hit each other. Got that too.&lt;/p>
&lt;p>But I didn&amp;rsquo;t think about the screws.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/soldering-time/screw-collision_hu86d77b59e2a45a65928b77dc2cae07e8_116014_1050x1050_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/soldering-time/screw-collision_hu86d77b59e2a45a65928b77dc2cae07e8_116014_525x525_fit_q75_h3_box_3.webp 351w, https://ianthehenry.com/posts/kyria-build/soldering-time/screw-collision_hu86d77b59e2a45a65928b77dc2cae07e8_116014_1050x1050_fit_q75_h3_box_3.webp 703w, https://ianthehenry.com/posts/kyria-build/soldering-time/screw-collision_hu86d77b59e2a45a65928b77dc2cae07e8_116014_375x375_fit_q75_h3_box_3.webp 251w, https://ianthehenry.com/posts/kyria-build/soldering-time/screw-collision_hu86d77b59e2a45a65928b77dc2cae07e8_116014_750x750_fit_q75_h3_box_3.webp 502w"
sizes="(max-width: 400px) 375px, 525px">&lt;img
class="image-with-light-background"
srcset="https://ianthehenry.com/posts/kyria-build/soldering-time/screw-collision_hu86d77b59e2a45a65928b77dc2cae07e8_116014_525x525_fit_box_3.png 351w, https://ianthehenry.com/posts/kyria-build/soldering-time/screw-collision_hu86d77b59e2a45a65928b77dc2cae07e8_116014_1050x1050_fit_box_3.png 703w, https://ianthehenry.com/posts/kyria-build/soldering-time/screw-collision_hu86d77b59e2a45a65928b77dc2cae07e8_116014_375x375_fit_box_3.png 251w, https://ianthehenry.com/posts/kyria-build/soldering-time/screw-collision_hu86d77b59e2a45a65928b77dc2cae07e8_116014_750x750_fit_box_3.png 502w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 525px"
width="351"
height="525"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAMCAIAAADQ/GvKAAAApUlEQVR4nGxQscqGQAyrx81OTg6Ciz6FD&amp;#43;4guPkkFcFBUaFIsfk59D/wwyx3IWka6gHQF3z8zfM8jmOapmVZBo5/DMNgZpEmAJhZVadpEpG6rvM8JyJHRGamqkVRHMchIneyux8A&amp;#43;76f5xlXPkLf913Xrevatu2rVdM0WZZt2/aaSJJQYVkWZv6NIqKqqlQ10uC9rguA997Mgte5R/g8yV8AAAD//zFObCx5qyeMAAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;p>In order for the halves to fit together as flatly as possible, the screws would have to stick out at most half of the thickness of the rubber bumpers.&lt;/p>
&lt;p>But the custom black screws I bought were way too thick for that. Actually slightly thicker than even a single rubber bumper, so the case couldn&amp;rsquo;t even sit flat on a surface without the screws touching:&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/soldering-time/screw-height_hu16ba8753fdd152565f91991551499acd_1561975_1512x1512_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/soldering-time/screw-height_hu16ba8753fdd152565f91991551499acd_1561975_756x756_fit_q75_h2_box_3.webp 756w, https://ianthehenry.com/posts/kyria-build/soldering-time/screw-height_hu16ba8753fdd152565f91991551499acd_1561975_1512x1512_fit_q75_h2_box_3.webp 1512w, https://ianthehenry.com/posts/kyria-build/soldering-time/screw-height_hu16ba8753fdd152565f91991551499acd_1561975_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/soldering-time/screw-height_hu16ba8753fdd152565f91991551499acd_1561975_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 756px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/soldering-time/screw-height_hu16ba8753fdd152565f91991551499acd_1561975_756x756_fit_box_3.png 756w, https://ianthehenry.com/posts/kyria-build/soldering-time/screw-height_hu16ba8753fdd152565f91991551499acd_1561975_1512x1512_fit_box_3.png 1512w, https://ianthehenry.com/posts/kyria-build/soldering-time/screw-height_hu16ba8753fdd152565f91991551499acd_1561975_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/soldering-time/screw-height_hu16ba8753fdd152565f91991551499acd_1561975_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 756px"
width="756"
height="425"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r&amp;#43;mnAAAAdElEQVR4nABkAJv/BFmLef37/vwDBvn8AxYA/xjw8tTa4FBDNgQE5vEA7/QEAP8RBAYdGxgQGhsaHR0GEBEE/holzb&amp;#43;mAgABAgED3OHoCgoICQgIDQwLBAAEBRMWG&amp;#43;bm6fz8&amp;#43;/Lj6Pr49Pj29QUC/wEAAP//9t4pqvDYY4wAAAAASUVORK5CYII=);"
/>&lt;/picture>&lt;/a>
&lt;p>So that obviously wasn&amp;rsquo;t going to work &amp;ndash; I&amp;rsquo;d have to countersink them.&lt;/p>
&lt;p>SendCutSend &lt;em>can&lt;/em> do countersinking, apparently, if you contact them to get a custom quote. It&amp;rsquo;s an experimental new product that they&amp;rsquo;re testing out. But I didn&amp;rsquo;t think of this in advance, so I ended up countersinking the screws by hand.&lt;/p>
&lt;p>Which was actually fine! And better than spending $42 on countersinking &amp;ndash; SendCutSend charges $3 per hole, and each half has seven screws.&lt;/p>
&lt;p>Because the holes were already in place, I just used a cordless drill with a regular drill bit, and the existing hole acted like a guide to keep it centered. Aluminum is very soft &amp;ndash; you can literally cut it with a pocket knife &amp;ndash; so drilling into it is no problem. You don&amp;rsquo;t need a special drill bit or anything, and for such a tiny cut I just took it very slow so that I wouldn&amp;rsquo;t have to worry about the bit heating up.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/soldering-time/countersinking_hu6dc67c61a0a5e99d7370caac79488985_2871059_1504x1504_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/soldering-time/countersinking_hu6dc67c61a0a5e99d7370caac79488985_2871059_752x752_fit_q75_h2_box_3.webp 752w, https://ianthehenry.com/posts/kyria-build/soldering-time/countersinking_hu6dc67c61a0a5e99d7370caac79488985_2871059_1504x1504_fit_q75_h2_box_3.webp 1504w, https://ianthehenry.com/posts/kyria-build/soldering-time/countersinking_hu6dc67c61a0a5e99d7370caac79488985_2871059_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/soldering-time/countersinking_hu6dc67c61a0a5e99d7370caac79488985_2871059_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 752px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/soldering-time/countersinking_hu6dc67c61a0a5e99d7370caac79488985_2871059_752x752_fit_box_3.png 752w, https://ianthehenry.com/posts/kyria-build/soldering-time/countersinking_hu6dc67c61a0a5e99d7370caac79488985_2871059_1504x1504_fit_box_3.png 1504w, https://ianthehenry.com/posts/kyria-build/soldering-time/countersinking_hu6dc67c61a0a5e99d7370caac79488985_2871059_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/soldering-time/countersinking_hu6dc67c61a0a5e99d7370caac79488985_2871059_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 752px"
width="752"
height="639"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAIAAAC6O5sJAAAArUlEQVR4nATAoU7AMBAA0OvdrS3dGkZnFpZgUJg5wgfwBSAGggS&amp;#43;lGDwOCQKBwkYYG2vx&amp;#43;N1dk3h8CgS4sfXb21wtp7f3D2Y02QZYUpxL/KTtYo2hQaGi6gqGOqkIrIyARGytXh7MUszWaDW5kMfhriMBye9offPPwFQgHk5Ju6c9xnd966cGwxjimliGzwTM9davLN8tW2X1/e7wPPT49vrSwzGgJac/wMAAP//c0xA&amp;#43;9a0398AAAAASUVORK5CYII=);"
/>&lt;/picture>&lt;/a>
&lt;aside>
&lt;p>Make sure you do your countersinking in the worst possible lighting you can find.&lt;/p>
&lt;/aside>
&lt;p>A drill press might have been nice to ensure a consistent depth, but I just eyeballed it, and the screws came out &lt;em>fine&lt;/em>.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/soldering-time/countersunk_hud158499281ee3ebeb160b939692cdf39_1679585_1302x1302_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/soldering-time/countersunk_hud158499281ee3ebeb160b939692cdf39_1679585_651x651_fit_q75_h2_box_3.webp 651w, https://ianthehenry.com/posts/kyria-build/soldering-time/countersunk_hud158499281ee3ebeb160b939692cdf39_1679585_1302x1302_fit_q75_h2_box_3.webp 1302w, https://ianthehenry.com/posts/kyria-build/soldering-time/countersunk_hud158499281ee3ebeb160b939692cdf39_1679585_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/soldering-time/countersunk_hud158499281ee3ebeb160b939692cdf39_1679585_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 651px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/soldering-time/countersunk_hud158499281ee3ebeb160b939692cdf39_1679585_651x651_fit_box_3.png 651w, https://ianthehenry.com/posts/kyria-build/soldering-time/countersunk_hud158499281ee3ebeb160b939692cdf39_1679585_1302x1302_fit_box_3.png 1302w, https://ianthehenry.com/posts/kyria-build/soldering-time/countersunk_hud158499281ee3ebeb160b939692cdf39_1679585_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/soldering-time/countersunk_hud158499281ee3ebeb160b939692cdf39_1679585_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 651px"
width="651"
height="447"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAIAAAD38zoCAAAAjUlEQVR4nAB9AIL/BG&amp;#43;Dj&amp;#43;fz8wIfKAcUFgIKCfjq5d&amp;#43;gkwUEBAQPCxr18OH41NT/Af8LDQwI/vkiJSjAw7sEAfzzBQQGAwsMBAQCCAcDFBIT6QYBRnuHA/H09tLKu&amp;#43;jo4/bz7gQB/P7//vD17BkgGwEIDQ0AAP8BBgYMBwYC//4KBwIuQD4sRE0BAAD//6MiMYL9lX78AAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;p>I wish that I had done this before painting everything, but whatever. It&amp;rsquo;s the bottom of the case. No one will ever notice.&lt;/p>
&lt;p>And once I was done, the halves snapped together perfectly:&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/soldering-time/halves_hu98ff4e1700643c2b52a3605cceb79033_2470932_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/soldering-time/halves_hu98ff4e1700643c2b52a3605cceb79033_2470932_768x768_fit_q75_h2_box_3.webp 768w, https://ianthehenry.com/posts/kyria-build/soldering-time/halves_hu98ff4e1700643c2b52a3605cceb79033_2470932_1536x1536_fit_q75_h2_box_3.webp 1536w, https://ianthehenry.com/posts/kyria-build/soldering-time/halves_hu98ff4e1700643c2b52a3605cceb79033_2470932_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/soldering-time/halves_hu98ff4e1700643c2b52a3605cceb79033_2470932_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/soldering-time/halves_hu98ff4e1700643c2b52a3605cceb79033_2470932_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/kyria-build/soldering-time/halves_hu98ff4e1700643c2b52a3605cceb79033_2470932_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/kyria-build/soldering-time/halves_hu98ff4e1700643c2b52a3605cceb79033_2470932_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/soldering-time/halves_hu98ff4e1700643c2b52a3605cceb79033_2470932_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="399"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r&amp;#43;mnAAAAdElEQVR4nABkAJv/BEg8NQIA/wT//g0JBysnHBIPFaK9ylRPSwP&amp;#43;AgPq8PT1AAP7BAnm8/0LFxnk5en4&amp;#43;PgDEBAPAgED&amp;#43;/v7/P7//v7&amp;#43;BwYG7vDx&amp;#43;Pn4AmdVRTQnGzQqIAgHAwICAEJDQwEA/////QEAAP//U0QrzjXKAzwAAAAASUVORK5CYII=);"
/>&lt;/picture>&lt;/a></description><pubDate>Thu, 06 Jan 2022 00:00:00 +0000</pubDate><link>https://ianthehenry.com/posts/kyria-build/soldering-time/</link><guid isPermaLink="true">https://ianthehenry.com/posts/kyria-build/soldering-time/</guid></item><item><title>Kyria Build, Part 8: Painting plates</title><description>&lt;p>It took a little bit longer to get these plates than my first order &amp;ndash; the tapping added time, and I guess it was closer to the Christmas holidays. But I still had my parts in hand ten days after I ordered them.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/painting-plates/sendcutsend-2_huaf37498a38c5c70363a27e4b6cb868c5_64451_776x776_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/painting-plates/sendcutsend-2_huaf37498a38c5c70363a27e4b6cb868c5_64451_388x388_fit_q75_h1_box_3.webp 312w, https://ianthehenry.com/posts/kyria-build/painting-plates/sendcutsend-2_huaf37498a38c5c70363a27e4b6cb868c5_64451_776x776_fit_q75_h1_box_3.webp 625w, https://ianthehenry.com/posts/kyria-build/painting-plates/sendcutsend-2_huaf37498a38c5c70363a27e4b6cb868c5_64451_375x375_fit_q75_h1_box_3.webp 302w, https://ianthehenry.com/posts/kyria-build/painting-plates/sendcutsend-2_huaf37498a38c5c70363a27e4b6cb868c5_64451_750x750_fit_q75_h1_box_3.webp 604w"
sizes="(max-width: 400px) 375px, 388px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/painting-plates/sendcutsend-2_huaf37498a38c5c70363a27e4b6cb868c5_64451_388x388_fit_box_3.png 312w, https://ianthehenry.com/posts/kyria-build/painting-plates/sendcutsend-2_huaf37498a38c5c70363a27e4b6cb868c5_64451_776x776_fit_box_3.png 625w, https://ianthehenry.com/posts/kyria-build/painting-plates/sendcutsend-2_huaf37498a38c5c70363a27e4b6cb868c5_64451_375x375_fit_box_3.png 302w, https://ianthehenry.com/posts/kyria-build/painting-plates/sendcutsend-2_huaf37498a38c5c70363a27e4b6cb868c5_64451_750x750_fit_box_3.png 604w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 388px"
width="312"
height="388"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAKCAIAAAAGpYjXAAAAkElEQVR4nDyOQa7CMAxEPamj/9lxp7LlrFyMJYVGsT0oTulsEmk8T0/X9bZtLxFhxt0lowAWVUbMopRCMiKU5DgAGNF7l1/K&amp;#43;RNAVWutAAZqwCcnxhNmx2KQAMkrAKUcDDXrQk6n2R1Fay1IpO45GlZXd7v8C8XcW3ZlWdq&amp;#43;65O8f95/Vd3sEclJ6W8AAAD//8HAZVCVoPo/AAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;p>Both of the aluminum plates had one pretty sharp edge along the top, although the deburring was otherwise perfect.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/painting-plates/top-burr_hud96f16855c4b418edf64467eaaed43f7_2277234_1512x1512_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/painting-plates/top-burr_hud96f16855c4b418edf64467eaaed43f7_2277234_756x756_fit_q75_h2_box_3.webp 756w, https://ianthehenry.com/posts/kyria-build/painting-plates/top-burr_hud96f16855c4b418edf64467eaaed43f7_2277234_1512x1512_fit_q75_h2_box_3.webp 1512w, https://ianthehenry.com/posts/kyria-build/painting-plates/top-burr_hud96f16855c4b418edf64467eaaed43f7_2277234_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/painting-plates/top-burr_hud96f16855c4b418edf64467eaaed43f7_2277234_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 756px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/painting-plates/top-burr_hud96f16855c4b418edf64467eaaed43f7_2277234_756x756_fit_box_3.png 756w, https://ianthehenry.com/posts/kyria-build/painting-plates/top-burr_hud96f16855c4b418edf64467eaaed43f7_2277234_1512x1512_fit_box_3.png 1512w, https://ianthehenry.com/posts/kyria-build/painting-plates/top-burr_hud96f16855c4b418edf64467eaaed43f7_2277234_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/painting-plates/top-burr_hud96f16855c4b418edf64467eaaed43f7_2277234_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 756px"
width="756"
height="714"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAtUlEQVR4nATAMUoEQRAF0KranhmmW8FdQZABNzAw8i4ewqOYeRkPIoiBhxADA3d6e7rqV/nSy&amp;#43;vz148&amp;#43;3R/XnN/eP5IIC5V5ks/vTkBXfbi5Fg9y7IhVTX7/Tgw32MWwu5pG7WpqgAsHDcJOUmt9PN72ruFOEbK2Fh4eXM9t2V/mcWhdHS5TSnXrLKKGu0NprecxJeGkBhscHha07OeAwcDMomabYS4ZJG5YDuW0noXoPwAA//&amp;#43;1oGyB5ddUDAAAAABJRU5ErkJggg==);"
/>&lt;/picture>&lt;/a>
&lt;p>I had to spend a few minutes with a file taking that off. Not a big deal, but I was surprised because the first set had been completely smooth.&lt;/p>
&lt;p>That was my only complaint, though. The taps were perfect, and the holes for magnets made a tight friction fit.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/painting-plates/magnet_hu0fc7260703b740ee93cd876811b4591e_2355714_1512x1512_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/painting-plates/magnet_hu0fc7260703b740ee93cd876811b4591e_2355714_756x756_fit_q75_h2_box_3.webp 756w, https://ianthehenry.com/posts/kyria-build/painting-plates/magnet_hu0fc7260703b740ee93cd876811b4591e_2355714_1512x1512_fit_q75_h2_box_3.webp 1512w, https://ianthehenry.com/posts/kyria-build/painting-plates/magnet_hu0fc7260703b740ee93cd876811b4591e_2355714_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/painting-plates/magnet_hu0fc7260703b740ee93cd876811b4591e_2355714_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 756px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/painting-plates/magnet_hu0fc7260703b740ee93cd876811b4591e_2355714_756x756_fit_box_3.png 756w, https://ianthehenry.com/posts/kyria-build/painting-plates/magnet_hu0fc7260703b740ee93cd876811b4591e_2355714_1512x1512_fit_box_3.png 1512w, https://ianthehenry.com/posts/kyria-build/painting-plates/magnet_hu0fc7260703b740ee93cd876811b4591e_2355714_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/painting-plates/magnet_hu0fc7260703b740ee93cd876811b4591e_2355714_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 756px"
width="756"
height="622"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAIAAAC6O5sJAAAAv0lEQVR4nACvAFD/BD9vaA0HBv78/AYEBAADAgMGBQYHBgUIBwQLAQD/&amp;#43;voqGBcRDAvE19kABQQADAoB//8Ejywd6AgN&amp;#43;w0SFBEQFAkFpsPJ/fr7/w/&amp;#43;A1I1JvAAAv0GCtfY1SgcHBMMCdPc3/z6&amp;#43;wT5BwMGFBb/AwP&amp;#43;/v709/Y3JSEHBAKpw8oDPTkzCA8SBAcKERIU9/j5BAMDJRsZ7fHxAvX8Ac7S1/f39wABAhITFAUIC9jl6c7d4AEAAP//ssxBJIst3w4AAAAASUVORK5CYII=);"
/>&lt;/picture>&lt;/a>
&lt;p>I could find no fault with the top plates. I was pleased to see that my janky custom top plate aligned perfectly with the PCB &amp;ndash; manually positioning the switch holes worked out for me. And the 1.2mm thickness was just about perfect for the switches to pop in snugly:&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/painting-plates/switch-fit_hu3b813a7ebe549c6e12e635439257e360_821518_1018x1018_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/painting-plates/switch-fit_hu3b813a7ebe549c6e12e635439257e360_821518_509x509_fit_q75_h2_box_3.webp 509w, https://ianthehenry.com/posts/kyria-build/painting-plates/switch-fit_hu3b813a7ebe549c6e12e635439257e360_821518_1018x1018_fit_q75_h2_box_3.webp 1018w, https://ianthehenry.com/posts/kyria-build/painting-plates/switch-fit_hu3b813a7ebe549c6e12e635439257e360_821518_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/painting-plates/switch-fit_hu3b813a7ebe549c6e12e635439257e360_821518_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 509px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/painting-plates/switch-fit_hu3b813a7ebe549c6e12e635439257e360_821518_509x509_fit_box_3.png 509w, https://ianthehenry.com/posts/kyria-build/painting-plates/switch-fit_hu3b813a7ebe549c6e12e635439257e360_821518_1018x1018_fit_box_3.png 1018w, https://ianthehenry.com/posts/kyria-build/painting-plates/switch-fit_hu3b813a7ebe549c6e12e635439257e360_821518_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/painting-plates/switch-fit_hu3b813a7ebe549c6e12e635439257e360_821518_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 509px"
width="509"
height="370"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAIAAABxZ0isAAAApklEQVR4nACWAGn/BLmZkB4kJ&amp;#43;vo5tfT0e7p5bfz&amp;#43;&amp;#43;Tx8/sDAwQEFhra5&amp;#43;nn3Nza6&amp;#43;znBg9AOysKBAL07&amp;#43;sE9&amp;#43;fk2OvtqbC1BwcF8f3&amp;#43;2ePkEBsbTywlBNTz9cbN0ePm5xkPB/X7A/vx8Vg/OQcEAwQF9PBAOTQsKCTh4N/q7e4kIyIUEQ8jBgYE4sS/suLpFxYYFgYEQjc0Ex8dAwIAAQMCAQAA///dv0iv4CISzQAAAABJRU5ErkJggg==);"
/>&lt;/picture>&lt;/a>
&lt;p>I liked the look of the stainless steel so much that I thought about leaving it unpainted, but eventually I decided to stick to the plan.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/painting-plates/steel-plate_hu8d33ef3053f026d9065b875e624e43e0_2167098_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/painting-plates/steel-plate_hu8d33ef3053f026d9065b875e624e43e0_2167098_768x768_fit_q75_h2_box_3.webp 768w, https://ianthehenry.com/posts/kyria-build/painting-plates/steel-plate_hu8d33ef3053f026d9065b875e624e43e0_2167098_1536x1536_fit_q75_h2_box_3.webp 1536w, https://ianthehenry.com/posts/kyria-build/painting-plates/steel-plate_hu8d33ef3053f026d9065b875e624e43e0_2167098_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/painting-plates/steel-plate_hu8d33ef3053f026d9065b875e624e43e0_2167098_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/painting-plates/steel-plate_hu8d33ef3053f026d9065b875e624e43e0_2167098_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/kyria-build/painting-plates/steel-plate_hu8d33ef3053f026d9065b875e624e43e0_2167098_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/kyria-build/painting-plates/steel-plate_hu8d33ef3053f026d9065b875e624e43e0_2167098_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/painting-plates/steel-plate_hu8d33ef3053f026d9065b875e624e43e0_2167098_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="429"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r&amp;#43;mnAAAAdElEQVR4nABkAJv/BDmLlgX5&amp;#43;Ajz8hQCAB4dGfH8/OT4/OP3/AL6&amp;#43;PkJ4t8t//gb/vcgAv0W7&amp;#43;oP1tIN/foCB&amp;#43;nqJwwJ/fz9ERUW1d3j7vr/EiEhCwYEBPwVF9bm4OwRF/v1A/oHE//&amp;#43;/AX8AQL8/QEAAP///J42/7YS6YQAAAAASUVORK5CYII=);"
/>&lt;/picture>&lt;/a>
&lt;p>So I painted them.&lt;/p>
&lt;p>I painted them with regular Rustoleum &amp;ldquo;Universal Enamel&amp;rdquo; spray paint in &amp;ldquo;Satin Black.&amp;rdquo; Rustoleum claims that this spray paint works on any surface, including &amp;ldquo;metal&amp;rdquo; and &amp;ldquo;aluminum,&amp;rdquo; and the internet confirmed that that included stainless steel. These claims, as far as I can tell, are absolutely correct.&lt;/p>
&lt;p>I had never spray painted anything before, but it was pretty easy. I happened to already own a pretty good ventilator mask, as well as eye protection and nitrile gloves, so all I had to buy was the can of spray paint.&lt;/p>
&lt;p>Your quality inspectors will want to supervise, so make sure that you do the painting somewhere they aren&amp;rsquo;t authorized to enter.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/painting-plates/assistants_hu015e7f9ba4361c93b09b1adfcd54ff96_2763801_1512x1512_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/painting-plates/assistants_hu015e7f9ba4361c93b09b1adfcd54ff96_2763801_756x756_fit_q75_h2_box_3.webp 756w, https://ianthehenry.com/posts/kyria-build/painting-plates/assistants_hu015e7f9ba4361c93b09b1adfcd54ff96_2763801_1512x1512_fit_q75_h2_box_3.webp 1512w, https://ianthehenry.com/posts/kyria-build/painting-plates/assistants_hu015e7f9ba4361c93b09b1adfcd54ff96_2763801_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/painting-plates/assistants_hu015e7f9ba4361c93b09b1adfcd54ff96_2763801_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 756px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/painting-plates/assistants_hu015e7f9ba4361c93b09b1adfcd54ff96_2763801_756x756_fit_box_3.png 756w, https://ianthehenry.com/posts/kyria-build/painting-plates/assistants_hu015e7f9ba4361c93b09b1adfcd54ff96_2763801_1512x1512_fit_box_3.png 1512w, https://ianthehenry.com/posts/kyria-build/painting-plates/assistants_hu015e7f9ba4361c93b09b1adfcd54ff96_2763801_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/painting-plates/assistants_hu015e7f9ba4361c93b09b1adfcd54ff96_2763801_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 756px"
width="756"
height="516"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAIAAAD38zoCAAAAjUlEQVR4nAB9AIL/BNG7odvr/vPs5fLz6xoXEO7u&amp;#43;A0OD/H28gLq5&amp;#43;MFBgUrKikiHyLO2PERFRUOERH5AAUCEA0J/vz78/DqyMzY5OPiBQT7BQX9&amp;#43;fgBBO/r5u76&amp;#43;vsD&amp;#43;BkSBB4gM/b1AAAC/yAcGQTwCiQUFxYRDwsLHfXj7eUCCQrx&amp;#43;PPx8PkBAAD///L1Pe0h9oaHAAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;p>Also bear in mind that your quality inspectors have never seen you in a ventilator mask and eye goggles before, and they &lt;em>will&lt;/em> decide that you are an intruder once you smell like vaguely like aerosol. So it&amp;rsquo;s better to give them the day off.&lt;/p>
&lt;p>I did a test run with a couple of the old bottom plates that I wasn&amp;rsquo;t going to use, to get a feel for how spray paint works. It turns out it&amp;rsquo;s pretty idiot proof: I did one in multiple light coats, and one in a single heavy coat, and I couldn&amp;rsquo;t tell any difference in the final result.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/painting-plates/exciting-action-shot_hu7288328b8f6c25dc8dfcf3470d7a6d12_1753694_1168x1168_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/painting-plates/exciting-action-shot_hu7288328b8f6c25dc8dfcf3470d7a6d12_1753694_584x584_fit_q75_h2_box_3.webp 584w, https://ianthehenry.com/posts/kyria-build/painting-plates/exciting-action-shot_hu7288328b8f6c25dc8dfcf3470d7a6d12_1753694_1168x1168_fit_q75_h2_box_3.webp 1168w, https://ianthehenry.com/posts/kyria-build/painting-plates/exciting-action-shot_hu7288328b8f6c25dc8dfcf3470d7a6d12_1753694_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/painting-plates/exciting-action-shot_hu7288328b8f6c25dc8dfcf3470d7a6d12_1753694_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 584px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/painting-plates/exciting-action-shot_hu7288328b8f6c25dc8dfcf3470d7a6d12_1753694_584x584_fit_box_3.png 584w, https://ianthehenry.com/posts/kyria-build/painting-plates/exciting-action-shot_hu7288328b8f6c25dc8dfcf3470d7a6d12_1753694_1168x1168_fit_box_3.png 1168w, https://ianthehenry.com/posts/kyria-build/painting-plates/exciting-action-shot_hu7288328b8f6c25dc8dfcf3470d7a6d12_1753694_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/painting-plates/exciting-action-shot_hu7288328b8f6c25dc8dfcf3470d7a6d12_1753694_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 584px"
width="584"
height="394"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAIAAAD38zoCAAAAiklEQVR4nATAv86CMBAA8N5RvoZ/4YOEhgElJg466OID&amp;#43;Apuvn&amp;#43;CgwOaxhSKXHv&amp;#43;5OZ8y5TctUlTpQpmpulyaDudRf3&amp;#43;pHVjuXCEgrnMZAjEqGRed6t3&amp;#43;B2WUM3y70OKjB3NAyMEIYg88fK0azy8&amp;#43;eXUOAHer9uqSNK8jtN/JgPghYBjX/4CAAD//0eTNRoTjJUXAAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;aside>
&lt;p>This looks like way too much spray paint, but it dried to a perfectly smooth surface, so who knows.&lt;/p>
&lt;/aside>
&lt;p>I&amp;rsquo;m glad I did the test pieces, because I learned that the paint doesn&amp;rsquo;t adhere very well to the sharp corners of a laser-cut piece.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/painting-plates/sharp-edge_hub61433e33927fd421188e92eca2cdf0d_2510310_1512x1512_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/painting-plates/sharp-edge_hub61433e33927fd421188e92eca2cdf0d_2510310_756x756_fit_q75_h2_box_3.webp 705w, https://ianthehenry.com/posts/kyria-build/painting-plates/sharp-edge_hub61433e33927fd421188e92eca2cdf0d_2510310_1512x1512_fit_q75_h2_box_3.webp 1409w, https://ianthehenry.com/posts/kyria-build/painting-plates/sharp-edge_hub61433e33927fd421188e92eca2cdf0d_2510310_375x375_fit_q75_h2_box_3.webp 350w, https://ianthehenry.com/posts/kyria-build/painting-plates/sharp-edge_hub61433e33927fd421188e92eca2cdf0d_2510310_750x750_fit_q75_h2_box_3.webp 699w"
sizes="(max-width: 400px) 375px, 756px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/painting-plates/sharp-edge_hub61433e33927fd421188e92eca2cdf0d_2510310_756x756_fit_box_3.png 705w, https://ianthehenry.com/posts/kyria-build/painting-plates/sharp-edge_hub61433e33927fd421188e92eca2cdf0d_2510310_1512x1512_fit_box_3.png 1409w, https://ianthehenry.com/posts/kyria-build/painting-plates/sharp-edge_hub61433e33927fd421188e92eca2cdf0d_2510310_375x375_fit_box_3.png 350w, https://ianthehenry.com/posts/kyria-build/painting-plates/sharp-edge_hub61433e33927fd421188e92eca2cdf0d_2510310_750x750_fit_box_3.png 699w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 756px"
width="705"
height="756"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAJCAIAAACAMfp5AAAA8UlEQVR4nADhAB7/BLytisDAxAIECff9COju&amp;#43;ygmJ/kABtvWzwMkC/rX4fPi6&amp;#43;oICAvv8vsB///f4eP59/UC4PAiAwqo/P0l3&amp;#43;IR/fhL5&amp;#43;fkBAQG7/DyAubxQfHt5Nzg9P4D8wL&amp;#43;Tv/7h/fyJf8ABQMxKhsQFMEHDAAHDAne1O4UEjkB/jsCADUDUlMuAgcGDBIW&amp;#43;QMU08Tm5ebH/PkIDhAjBAISMQH1/fn5Cvj59xEJFOrz2&amp;#43;TiygAEDAL0DTvyBSnw&amp;#43;Qz19fgfITIHAxcQDRMMEQcE8vf&amp;#43;8fT59vHwDfAnBRUZCgkYAQD9CgkLAQAA//8ys2xWaywlCAAAAABJRU5ErkJggg==);"
/>&lt;/picture>&lt;/a>
&lt;p>So before I did the real plate, I rounded off the corners a tiny bit with a small file and some sandpaper.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/painting-plates/rounded_huba4a9e9034ea72098df8ade068ad4c8d_1675988_1392x1392_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/painting-plates/rounded_huba4a9e9034ea72098df8ade068ad4c8d_1675988_696x696_fit_q75_h2_box_3.webp 696w, https://ianthehenry.com/posts/kyria-build/painting-plates/rounded_huba4a9e9034ea72098df8ade068ad4c8d_1675988_1392x1392_fit_q75_h2_box_3.webp 1392w, https://ianthehenry.com/posts/kyria-build/painting-plates/rounded_huba4a9e9034ea72098df8ade068ad4c8d_1675988_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/painting-plates/rounded_huba4a9e9034ea72098df8ade068ad4c8d_1675988_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 696px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/painting-plates/rounded_huba4a9e9034ea72098df8ade068ad4c8d_1675988_696x696_fit_box_3.png 696w, https://ianthehenry.com/posts/kyria-build/painting-plates/rounded_huba4a9e9034ea72098df8ade068ad4c8d_1675988_1392x1392_fit_box_3.png 1392w, https://ianthehenry.com/posts/kyria-build/painting-plates/rounded_huba4a9e9034ea72098df8ade068ad4c8d_1675988_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/painting-plates/rounded_huba4a9e9034ea72098df8ade068ad4c8d_1675988_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 696px"
width="696"
height="581"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAIAAAC6O5sJAAAAv0lEQVR4nACvAFD/BGpdUOfi1/f39wACBfHv6xIQEiMmLREYHgNkcIL4/gUAAwQuO0kHBAjt6eL39fDs5NsEICAjCAkJ&amp;#43;PMs6&amp;#43;zpICcu3tnO9vn6/f8CBPTx7gL&amp;#43;9f3&amp;#43;AA4RFgUBAh8vRPLs4eXl5AT39Oz8&amp;#43;fD58ekDBwgNFB4QGCf9Aw4mFSgC&amp;#43;PDlGRYKAQIEHBkS&amp;#43;vr4MzAsOz1BBQ0aBN7Y1AUJM/7&amp;#43;/RcVE&amp;#43;Tp5xQK&amp;#43;iMeGSsoIwEAAP//AQ5N/JZnDaEAAAAASUVORK5CYII=);"
/>&lt;/picture>&lt;/a>
&lt;p>Okay, I guess they don&amp;rsquo;t look very rounded, but they &lt;em>felt&lt;/em> smooth. And the paint adhered great!&lt;/p>
&lt;p>The &amp;ldquo;satin&amp;rdquo; spray paint is noticeably shinier than the matte black acrylic of the official Kyria plate, but it almost perfectly matches the shininess of the keycaps I got, so I&amp;rsquo;m not sad about it. I&amp;rsquo;ll pretend that I planned it that way.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/painting-plates/satin-comparison_hu65acf380a7680756406ca0ad351bff96_2024945_1282x1282_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/painting-plates/satin-comparison_hu65acf380a7680756406ca0ad351bff96_2024945_641x641_fit_q75_h2_box_3.webp 641w, https://ianthehenry.com/posts/kyria-build/painting-plates/satin-comparison_hu65acf380a7680756406ca0ad351bff96_2024945_1282x1282_fit_q75_h2_box_3.webp 1282w, https://ianthehenry.com/posts/kyria-build/painting-plates/satin-comparison_hu65acf380a7680756406ca0ad351bff96_2024945_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/painting-plates/satin-comparison_hu65acf380a7680756406ca0ad351bff96_2024945_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 641px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/painting-plates/satin-comparison_hu65acf380a7680756406ca0ad351bff96_2024945_641x641_fit_box_3.png 641w, https://ianthehenry.com/posts/kyria-build/painting-plates/satin-comparison_hu65acf380a7680756406ca0ad351bff96_2024945_1282x1282_fit_box_3.png 1282w, https://ianthehenry.com/posts/kyria-build/painting-plates/satin-comparison_hu65acf380a7680756406ca0ad351bff96_2024945_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/painting-plates/satin-comparison_hu65acf380a7680756406ca0ad351bff96_2024945_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 641px"
width="641"
height="444"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAIAAABxZ0isAAAApklEQVR4nACWAGn/BF2Hm7eRfkZygwn/Af3//v0BAQMQEvXz8AQCDg06YG3z39/w6eMBAAAODxH6BQYULjAE///&amp;#43;&amp;#43;93f59jSEhEQDAwN9Pb0CwwNAvPxBAD5&amp;#43;fTl3xIREQQEBP7&amp;#43;//7&amp;#43;/fz6&amp;#43;QsDAgMeIicI9/b6&amp;#43;/rn6&amp;#43;bs7usGCQjW2tMeJykE9wYD3ObcHzU4L0RDA/79ExMUMf7&amp;#43;DAkJAQAA//8RvEdiVQam6wAAAABJRU5ErkJggg==);"
/>&lt;/picture>&lt;/a>
&lt;p>But&amp;hellip; spoilers.&lt;/p></description><pubDate>Thu, 06 Jan 2022 00:00:00 +0000</pubDate><link>https://ianthehenry.com/posts/kyria-build/painting-plates/</link><guid isPermaLink="true">https://ianthehenry.com/posts/kyria-build/painting-plates/</guid></item><item><title>Kyria Build, Part 7: Bespoker aluminum plates</title><description>&lt;p>So I decided that I didn&amp;rsquo;t like the design of the Kyria&amp;rsquo;s tenting puck, and would rather have something sturdier. And I really didn&amp;rsquo;t like the spring-loaded switches in the 3mm top plate &amp;ndash; I wanted a &amp;ldquo;real&amp;rdquo; plate to snap my switches into.&lt;/p>
&lt;p>I did not actually assemble the keyboard as-is, though, so I&amp;rsquo;m not claiming that it&amp;rsquo;s fragile or anything. I was worried that I could drop it and send switches flying off of it, but this is purely an Ian worry. Remember that I don&amp;rsquo;t know anything about soldering or keyboards, so take all this FUD with a large pyramid of fancy finishing salt.&lt;/p>
&lt;p>So: the standard Kyria top plate looks like this:&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/vanilla-top-plate_hu910f3616b8e057fa4ddc859b48f0e7a6_47183_1244x1244_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/vanilla-top-plate_hu910f3616b8e057fa4ddc859b48f0e7a6_47183_622x622_fit_q75_h3_box_3.webp 622w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/vanilla-top-plate_hu910f3616b8e057fa4ddc859b48f0e7a6_47183_1244x1244_fit_q75_h3_box_3.webp 1244w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/vanilla-top-plate_hu910f3616b8e057fa4ddc859b48f0e7a6_47183_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/vanilla-top-plate_hu910f3616b8e057fa4ddc859b48f0e7a6_47183_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 622px">&lt;img
class="image-with-light-background"
srcset="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/vanilla-top-plate_hu910f3616b8e057fa4ddc859b48f0e7a6_47183_622x622_fit_box_3.png 622w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/vanilla-top-plate_hu910f3616b8e057fa4ddc859b48f0e7a6_47183_1244x1244_fit_box_3.png 1244w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/vanilla-top-plate_hu910f3616b8e057fa4ddc859b48f0e7a6_47183_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/vanilla-top-plate_hu910f3616b8e057fa4ddc859b48f0e7a6_47183_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 622px"
width="622"
height="495"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAIAAABxZ0isAAAAWklEQVR4nGSMTQ6EIQxCS7XR&amp;#43;x/W/8pk7PJ7KwJ5ZJIiMsbYe6sqyVKKmWV5rLXOOQBIzjlrrRoDHpHDy&amp;#43;7eWnP3e2/chodoAagqgJSSmf1Fkr13fvgFAAD//2NiSo&amp;#43;dqHlmAAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;p>Note the four large round holes for the tenting puck screws, and the various weird-shaped key holes.&lt;/p>
&lt;p>These weird-shaped holes exist so that you can install encoder knobs, or stabilizers for 2u thumb keys.&lt;/p>
&lt;p>But I wasn&amp;rsquo;t planning on having any encoder knobs, and the Kyria isn&amp;rsquo;t even compatible with Choc 2u keys &amp;ndash; which have a very different footprint than standard 2u keys.&lt;/p>
&lt;p>So they&amp;rsquo;re sort of just wasted extra holes. So I took them out:&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/custom-top-plate_hud35c80c2f1aaab495c21b677b656b7e1_47143_1256x1256_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/custom-top-plate_hud35c80c2f1aaab495c21b677b656b7e1_47143_628x628_fit_q75_h3_box_3.webp 628w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/custom-top-plate_hud35c80c2f1aaab495c21b677b656b7e1_47143_1256x1256_fit_q75_h3_box_3.webp 1256w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/custom-top-plate_hud35c80c2f1aaab495c21b677b656b7e1_47143_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/custom-top-plate_hud35c80c2f1aaab495c21b677b656b7e1_47143_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 628px">&lt;img
class="image-with-light-background"
srcset="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/custom-top-plate_hud35c80c2f1aaab495c21b677b656b7e1_47143_628x628_fit_box_3.png 628w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/custom-top-plate_hud35c80c2f1aaab495c21b677b656b7e1_47143_1256x1256_fit_box_3.png 1256w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/custom-top-plate_hud35c80c2f1aaab495c21b677b656b7e1_47143_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/custom-top-plate_hud35c80c2f1aaab495c21b677b656b7e1_47143_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 628px"
width="628"
height="501"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAIAAABxZ0isAAAAXklEQVR4nGTLMY5FIQxDUccvgMT&amp;#43;N0oDEkHxaKD8p3BzZZcEYO8dEXa11kjaC2OMiPi&amp;#43;LzMl9d4dl5mRBMBLkp9z5pwRASAz35L0fdVaSynv5&amp;#43;5m9t/XWvrxFwAA//&amp;#43;PqEejBND93QAAAABJRU5ErkJggg==);"
/>&lt;/picture>&lt;/a>
&lt;p>I did this by editing the DXF files in &lt;a href="https://inkscape.org/">Inkscape&lt;/a>, a free vector drawing program. Inkscape is sort of awful and there&amp;rsquo;s definitely a better way to do this, but it did work&amp;hellip; eventually.&lt;/p>
&lt;p>For the top plate, I just copied and pasted one of &amp;ldquo;regular&amp;rdquo; key cutouts, and then manually dragged that rectangle into place, eyeballing the rotation for the thumb keys. It was extremely janky and I felt very silly, but it ended up working perfectly.&lt;/p>
&lt;p>I also wanted a better mounting solution than the Puck, so I made a custom bottom plate as well. I just drew some circles on top of the default plate:&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/custom-bottom-plate_hue436cf6c9032ad77837470e6791e699c_90910_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/custom-bottom-plate_hue436cf6c9032ad77837470e6791e699c_90910_768x768_fit_q75_h3_box_3.webp 768w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/custom-bottom-plate_hue436cf6c9032ad77837470e6791e699c_90910_1536x1536_fit_q75_h3_box_3.webp 1536w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/custom-bottom-plate_hue436cf6c9032ad77837470e6791e699c_90910_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/custom-bottom-plate_hue436cf6c9032ad77837470e6791e699c_90910_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class="image-with-light-background"
srcset="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/custom-bottom-plate_hue436cf6c9032ad77837470e6791e699c_90910_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/custom-bottom-plate_hue436cf6c9032ad77837470e6791e699c_90910_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/custom-bottom-plate_hue436cf6c9032ad77837470e6791e699c_90910_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/custom-bottom-plate_hue436cf6c9032ad77837470e6791e699c_90910_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="295"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAIAAAAhqtkfAAAARUlEQVR4nBTJQQoAIQwDwIgtCOL/H&amp;#43;rJaJNlzxP33r33ey8zW2skI2LO&amp;#43;cM5x7YkALarKjND0hhjrdV7ByCJJIAvAAD//02vJvh9X6HJAAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;p>SendCutSend can do &amp;ldquo;tapping&amp;rdquo; for you &amp;ndash; which just means putting threads into a hole so that they interlock with threaded screws. SendCutSend charges $3 per tapped hole, with a $29 minimum. So I put in ten holes for tripod mounts, even though I only really needed two. I&amp;rsquo;m glad I did this, though &amp;ndash; the differently positioned holes allow for a wide range of pretty severe tenting/tilting options.&lt;/p>
&lt;p>I also mirrored the part, instead of ordering two of the same thing, so that the threads would have the correct orientation on each half: if you ordered two identical plates and flipped one over, one of them would screw righty-tighty and the other would screw lefty-tighty. And that would drive me insane.&lt;/p>
&lt;p>But it turns out that&amp;rsquo;s not&amp;hellip; how threads work. Only the orientation of the screws matters; you can screw it in from either the &amp;ldquo;top&amp;rdquo; or the &amp;ldquo;bottom&amp;rdquo; of the plate. &lt;em>This seems like it shouldn&amp;rsquo;t work&lt;/em> but, fortunately, my inability to reason in three dimensions has no bearing on reality.&lt;/p>
&lt;p>I also put in some larger holes that I planned to glue some magnets into. I love magnets. Magnets are great.&lt;/p>
&lt;h1 id="how-to-edit-dxf-files-in-inkscape">How to edit DXF files in Inkscape&lt;/h1>
&lt;p>So I learned a few things in the course of doing this, and if you want to go this weird low-tech route without actually learning how to use any CAD software, you can learn them too.&lt;/p>
&lt;p>The first: Inkscape will, by default, weirdly mangle DXF files. Like, if you open a file and hit save, without making any changes, you will suddely have a file that is completely unrecognizable to SendCutSend. I don&amp;rsquo;t know why. I don&amp;rsquo;t know anything about this. Maybe the file is fine, and it&amp;rsquo;s SendCutSend&amp;rsquo;s fault. Maybe not. I don&amp;rsquo;t know.&lt;/p>
&lt;p>The only way I found to get a working file again was to use &amp;ldquo;Save As&amp;rdquo; &amp;ndash; there&amp;rsquo;s no &amp;ldquo;Export&amp;rdquo; &amp;ndash; and then to change the format from &amp;ldquo;DXF R12&amp;rdquo; to &amp;ldquo;DXF R14.&amp;rdquo; And then it worked fine. No idea.&lt;/p>
&lt;p>The other thing I learned has to do with nominal sizes.&lt;/p>
&lt;p>I drew some circles in the bottom plate, but you can&amp;rsquo;t just draw &lt;em>any&lt;/em> holes and expect SendCutSend to tap them. The holes have to be exactly the right size, or the SendCutSend web interface thing won&amp;rsquo;t recognize them as &amp;ldquo;tappable.&amp;rdquo;&lt;/p>
&lt;p>And for the longest time, I couldn&amp;rsquo;t get it to recognize mine.&lt;/p>
&lt;p>The problem turned out to be two-fold. The first problem was a very dumb problem: when you open a DXF file, Inkscape will put a little stroke around all of your shapes:&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/inkscape-stroke_hucb5250ad83152485519112451d3f2e5a_224395_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/inkscape-stroke_hucb5250ad83152485519112451d3f2e5a_224395_768x768_fit_q75_h1_box_3.webp 768w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/inkscape-stroke_hucb5250ad83152485519112451d3f2e5a_224395_1536x1536_fit_q75_h1_box_3.webp 1536w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/inkscape-stroke_hucb5250ad83152485519112451d3f2e5a_224395_375x375_fit_q75_h1_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/inkscape-stroke_hucb5250ad83152485519112451d3f2e5a_224395_750x750_fit_q75_h1_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/inkscape-stroke_hucb5250ad83152485519112451d3f2e5a_224395_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/inkscape-stroke_hucb5250ad83152485519112451d3f2e5a_224395_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/inkscape-stroke_hucb5250ad83152485519112451d3f2e5a_224395_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/inkscape-stroke_hucb5250ad83152485519112451d3f2e5a_224395_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="511"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAYAAAB4ka1VAAAAdklEQVR4nEyLy6rCQBAF6/R07jX4AHGR//&amp;#43;yuA3IBHQTHe2RESIWNH0WVZ4v08u7f0milEJEkFJCZpiEy/603e1Va6UHmth2&amp;#43;/OcMcSXVrdbqVHxiOen4KdeJUuGj&amp;#43;OZYVi4Xyemped0y2yOB5I7j855BwAA//8cCTN6mOeJAAAAAABJRU5ErkJggg==);"
/>&lt;/picture>&lt;/a>
&lt;p>SendCutSend ignores these strokes; I expect that they aren&amp;rsquo;t even present in the DXF files and Inkscape just adds them on import.&lt;/p>
&lt;p>But they&amp;rsquo;re included in the size reported by Inkscape. So if you add a circle with a diameter of exactly 15mm, you&amp;rsquo;re actually making a circle that&amp;rsquo;s &lt;em>slightly smaller&lt;/em> by the width of the stroke.&lt;/p>
&lt;p>The solution is to turn off the stroke and use a fill color instead, and then you can exactly size elements in Inkscape.&lt;/p>
&lt;p>Or, well, the real solution is to use something other than Inkscape for this, but it did work eventually so whatever.&lt;/p>
&lt;p>But &lt;em>even after&lt;/em> doing this, and doing lots of experiments to become quite confident that SendCutSend agreed with the sizes of the circles that I was making, it &lt;em>still&lt;/em> wouldn&amp;rsquo;t let me tap a standard tripod mount hole.&lt;/p>
&lt;p>The problem turned out to be very dumb: SendCutSend gives dimensions in imperial and in metric. But the metric dimensions appear to be &lt;em>rounded conversions of the imperial&lt;/em>. But the SendCutSend software actually only cares about imperial sizes, and the rounded metric sizes are not recognizable.&lt;/p>
&lt;p>So while &lt;a href="https://sendcutsend.com/tapping-guidelines/">SendCutSend &lt;em>claims&lt;/em>&lt;/a> that you should make a 0.201&amp;quot; or 5.11mm hole to tap for a standard 1/4-20 tripod screw, you &lt;em>actually&lt;/em> need to make a 5.105mm hole &amp;ndash; a more precise conversion of the imperial dimensions.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-tapping_hub5cb54599dea4cbc94d19e5aa6d29bd8_73443_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-tapping_hub5cb54599dea4cbc94d19e5aa6d29bd8_73443_768x768_fit_q75_h3_box_3.webp 768w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-tapping_hub5cb54599dea4cbc94d19e5aa6d29bd8_73443_1536x1536_fit_q75_h3_box_3.webp 1536w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-tapping_hub5cb54599dea4cbc94d19e5aa6d29bd8_73443_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-tapping_hub5cb54599dea4cbc94d19e5aa6d29bd8_73443_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class="image-with-light-background"
srcset="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-tapping_hub5cb54599dea4cbc94d19e5aa6d29bd8_73443_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-tapping_hub5cb54599dea4cbc94d19e5aa6d29bd8_73443_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-tapping_hub5cb54599dea4cbc94d19e5aa6d29bd8_73443_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-tapping_hub5cb54599dea4cbc94d19e5aa6d29bd8_73443_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="238"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAIAAADq9gq6AAAANElEQVR4nBTH0Q2AQAwCUOhdYvffVtKC8fNdSTuT5Ol&amp;#43;pVMnSRWvd0EC&amp;#43;E3aBhHwCwAA///h/xjtuu9CpwAAAABJRU5ErkJggg==);"
/>&lt;/picture>&lt;/a>
&lt;p>So that was fun. I reported this as a bug to SendCutSend, but the response I got was basically &amp;ldquo;uhh this sounds like an Inkscape problem&amp;rdquo; so I don&amp;rsquo;t know if it&amp;rsquo;s actually an issue on their end or mine.&lt;/p>
&lt;p>&lt;em>Anyway&lt;/em>.&lt;/p>
&lt;p>I also made my new custom bottom plate thicker this time, because I wanted more thread engagement. So I got that plate in 4.7mm aluminum instead. It&amp;rsquo;s slightly more expensive than 3mm, but the tapping still cost more than the actual plates.&lt;/p>
&lt;p>I had the top plate made out of stainless steel. This is pretty standard for keyboard plates, and I actually didn&amp;rsquo;t have much of an option anyway: it was the only suitable material that was available on SendCutSend with the right thickness.&lt;/p>
&lt;p>The technical drawings of Choc switches imply that you should use a 1.3mm plate:&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/choc-diagram_hu13081614708dcafd48fccae0414c2315_55669_1188x1188_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/choc-diagram_hu13081614708dcafd48fccae0414c2315_55669_594x594_fit_q75_h3_box_3.webp 594w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/choc-diagram_hu13081614708dcafd48fccae0414c2315_55669_1188x1188_fit_q75_h3_box_3.webp 1188w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/choc-diagram_hu13081614708dcafd48fccae0414c2315_55669_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/choc-diagram_hu13081614708dcafd48fccae0414c2315_55669_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 594px">&lt;img
class="image-with-light-background"
srcset="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/choc-diagram_hu13081614708dcafd48fccae0414c2315_55669_594x594_fit_box_3.png 594w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/choc-diagram_hu13081614708dcafd48fccae0414c2315_55669_1188x1188_fit_box_3.png 1188w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/choc-diagram_hu13081614708dcafd48fccae0414c2315_55669_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/choc-diagram_hu13081614708dcafd48fccae0414c2315_55669_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 594px"
width="594"
height="214"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAAAAACLoxGUAAAAKUlEQVR4nGL59lXo6z/mXzxM3x/&amp;#43;/sr68d1vxm&amp;#43;/2T9zf2MQBAQAAP//5IsPpTyoe5wAAAAASUVORK5CYII=);"
/>&lt;/picture>&lt;/a>
&lt;p>Er&amp;hellip;&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/choc-diagram-annotated_hu2639bcd19951494b8d3c16890319f3cd_111758_1188x1188_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/choc-diagram-annotated_hu2639bcd19951494b8d3c16890319f3cd_111758_594x594_fit_q75_h3_box_3.webp 594w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/choc-diagram-annotated_hu2639bcd19951494b8d3c16890319f3cd_111758_1188x1188_fit_q75_h3_box_3.webp 1188w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/choc-diagram-annotated_hu2639bcd19951494b8d3c16890319f3cd_111758_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/choc-diagram-annotated_hu2639bcd19951494b8d3c16890319f3cd_111758_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 594px">&lt;img
class="image-with-light-background"
srcset="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/choc-diagram-annotated_hu2639bcd19951494b8d3c16890319f3cd_111758_594x594_fit_box_3.png 594w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/choc-diagram-annotated_hu2639bcd19951494b8d3c16890319f3cd_111758_1188x1188_fit_box_3.png 1188w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/choc-diagram-annotated_hu2639bcd19951494b8d3c16890319f3cd_111758_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/choc-diagram-annotated_hu2639bcd19951494b8d3c16890319f3cd_111758_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 594px"
width="594"
height="214"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAIAAAAhqtkfAAAATklEQVR4nATAQQqAIBQE0F&amp;#43;mQehC7385d9FCcDEjOPDpXSQBtNYAuHsIYe&amp;#43;dcz7XWr13SQBijHPOMYakg6SkOyV871MK3Mys1voHAAD//2sKLd&amp;#43;kAfIiAAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;p>That&amp;rsquo;s better.&lt;/p>
&lt;p>But SendCutSend can only do 1.2mm or 1.5mm stainless steel.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-thicknesses_hu4c4e66afd26a4893cf51ceda304b9995_29770_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-thicknesses_hu4c4e66afd26a4893cf51ceda304b9995_29770_768x768_fit_q75_h3_box_3.webp 768w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-thicknesses_hu4c4e66afd26a4893cf51ceda304b9995_29770_1536x1536_fit_q75_h3_box_3.webp 1536w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-thicknesses_hu4c4e66afd26a4893cf51ceda304b9995_29770_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-thicknesses_hu4c4e66afd26a4893cf51ceda304b9995_29770_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class="image-with-light-background"
srcset="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-thicknesses_hu4c4e66afd26a4893cf51ceda304b9995_29770_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-thicknesses_hu4c4e66afd26a4893cf51ceda304b9995_29770_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-thicknesses_hu4c4e66afd26a4893cf51ceda304b9995_29770_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-thicknesses_hu4c4e66afd26a4893cf51ceda304b9995_29770_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="144"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAABCAIAAABsYngUAAAAI0lEQVR4nATACQEAIBACQR77N97DeQB32tpKAmwn&amp;#43;QEAAP//uVEK/K1lw4kAAAAASUVORK5CYII=);"
/>&lt;/picture>&lt;/a>
&lt;p>I went with 1.2mm, because I thought a slightly-loose switch would be better than a switch that might not fit at all.&lt;/p>
&lt;p>Most metals &amp;ndash; aluminum included &amp;ndash; only come in 1mm or 1.6mm thicknesses. The only metal that SendCutSend has in 1.3mm is chromoly, a steel alloy that contains &lt;em>some&lt;/em> chromium but not enough to earn the &amp;ldquo;stainless&amp;rdquo; moniker. Chromoly is magnetic, though &amp;ndash; unlike stainless steel &amp;ndash; so I was sort of afraid of that with my magnetic plans.&lt;/p>
&lt;p>These plates were quite a bit more expensive than my original $6.38 test plates.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-invoice_hu0b20db8b17ca7f5c800e47275e2c8bd4_134183_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-invoice_hu0b20db8b17ca7f5c800e47275e2c8bd4_134183_768x768_fit_q75_h3_box_3.webp 768w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-invoice_hu0b20db8b17ca7f5c800e47275e2c8bd4_134183_1536x1536_fit_q75_h3_box_3.webp 1536w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-invoice_hu0b20db8b17ca7f5c800e47275e2c8bd4_134183_375x375_fit_q75_h3_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-invoice_hu0b20db8b17ca7f5c800e47275e2c8bd4_134183_750x750_fit_q75_h3_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class="image-with-light-background"
srcset="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-invoice_hu0b20db8b17ca7f5c800e47275e2c8bd4_134183_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-invoice_hu0b20db8b17ca7f5c800e47275e2c8bd4_134183_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-invoice_hu0b20db8b17ca7f5c800e47275e2c8bd4_134183_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-invoice_hu0b20db8b17ca7f5c800e47275e2c8bd4_134183_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="464"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAIAAAD38zoCAAAAX0lEQVR4nDTLOxJDIQxDUdtg07D/NSZp8koYLDmT3xmVuv12fxTLw1WE9V4VAWgmrus55zyZ4R4RIPOkrrUAjDHMTP4S6PmhqmS1Zu7&amp;#43;K/beZlYivbXvnSTIVwAAAP//3sZAcEQ0wMEAAAAASUVORK5CYII=);"
/>&lt;/picture>&lt;/a>
&lt;p>I used a 10% off coupon &amp;ndash; SendCutSend &lt;em>loves&lt;/em> giving out 10% off coupons; any time I left something in my cart for more than five minutes I got an email with a promo code in it &amp;ndash; so the total came to $80.&lt;/p>
&lt;p>For comparison, the acrylic plates and tenting pucks from splitbk.com came out to $60 with the current Euro exchange rate.&lt;/p>
&lt;p>That&amp;rsquo;s not really a fair comparison, though, because I also had to buy new screws.&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup> The screws that came with the Kyria plate assumed a 3mm plate, and they weren&amp;rsquo;t long enough to get through a 4.7mm plate. So I had to buy some M2 screws as well, and I spent $15 on a pack of &lt;em>way too many screws&lt;/em> because it was the only way I could get all the sizes I needed.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/screws_hu77b0afbfac8f365911f5ae25c3c6ecf0_1262555_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/screws_hu77b0afbfac8f365911f5ae25c3c6ecf0_1262555_768x768_fit_q75_h2_box_3.webp 768w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/screws_hu77b0afbfac8f365911f5ae25c3c6ecf0_1262555_1536x1536_fit_q75_h2_box_3.webp 1536w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/screws_hu77b0afbfac8f365911f5ae25c3c6ecf0_1262555_375x375_fit_q75_h2_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/screws_hu77b0afbfac8f365911f5ae25c3c6ecf0_1262555_750x750_fit_q75_h2_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class=""
srcset="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/screws_hu77b0afbfac8f365911f5ae25c3c6ecf0_1262555_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/screws_hu77b0afbfac8f365911f5ae25c3c6ecf0_1262555_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/screws_hu77b0afbfac8f365911f5ae25c3c6ecf0_1262555_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/screws_hu77b0afbfac8f365911f5ae25c3c6ecf0_1262555_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="486"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAIAAAD38zoCAAAAjUlEQVR4nAB9AIL/BG2Th/b5&amp;#43;SUWFdro6gYFBQEAAAsHBfX4&amp;#43;ALv9PT48/MI9/f/&amp;#43;Pf65OL6/Pvv9vYNCAcCAwICBfz8EPr5&amp;#43;vT06M/UCfz7HBAOGA4OAhgPDhAREpnCyS4jIdjo7dvX3OPs7t7r6wMjOjXy/PwKEhETEA/nCQkQFBEIBgX8/v4BAAD//3XUP2dRC4l/AAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;p>I got some black ones, because at this point I had decided to paint the whole case black, and I thought they would blend in. I think it looks pretty nice.&lt;/p>
&lt;p>If I were doing this again, I&amp;rsquo;d try tapping the holes myself &amp;ndash; you can buy a 1/4-20 tap for a lot less than $30, and aluminum is &lt;em>apparently&lt;/em> pretty easy to tap by hand.&lt;/p>
&lt;p>But I haven&amp;rsquo;t actually tried it. Maybe next time&amp;hellip;&lt;/p>
&lt;aside>
&lt;p>SendCutSend has now lowered its tapping minimum to $19, so you could get by with three holes per plate.&lt;/p>
&lt;p>And if you order this as two of the same part &amp;ndash; instead of mirroring it unnecessarily &amp;ndash; you also get a 20% discount on the aluminum.&lt;/p>
&lt;a class="image-container" href="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-three-holes_hu1b4bf1c0e0e3b19a8153fb74b65cb8ab_78047_1536x1536_fit_box_3.png">&lt;picture>&lt;source type="image/webp"
srcset="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-three-holes_hu1b4bf1c0e0e3b19a8153fb74b65cb8ab_78047_768x768_fit_q75_h1_box_3.webp 768w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-three-holes_hu1b4bf1c0e0e3b19a8153fb74b65cb8ab_78047_1536x1536_fit_q75_h1_box_3.webp 1536w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-three-holes_hu1b4bf1c0e0e3b19a8153fb74b65cb8ab_78047_375x375_fit_q75_h1_box_3.webp 375w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-three-holes_hu1b4bf1c0e0e3b19a8153fb74b65cb8ab_78047_750x750_fit_q75_h1_box_3.webp 750w"
sizes="(max-width: 400px) 375px, 768px">&lt;img
class="image-with-light-background"
srcset="https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-three-holes_hu1b4bf1c0e0e3b19a8153fb74b65cb8ab_78047_768x768_fit_box_3.png 768w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-three-holes_hu1b4bf1c0e0e3b19a8153fb74b65cb8ab_78047_1536x1536_fit_box_3.png 1536w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-three-holes_hu1b4bf1c0e0e3b19a8153fb74b65cb8ab_78047_375x375_fit_box_3.png 375w, https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/sendcutsend-three-holes_hu1b4bf1c0e0e3b19a8153fb74b65cb8ab_78047_750x750_fit_box_3.png 750w"
alt=""
title=""
sizes="(max-width: 400px) 375px, 768px"
width="768"
height="180"
style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAIAAADq9gq6AAAAOUlEQVR4nATAAQqAMAgFUL9zwaDv/S&amp;#43;qGYT2LDMjguRTBYA3e/qtMhFx97XsHFx7A&amp;#43;hvVPUPAAD//0apEj67UcwUAAAAAElFTkSuQmCC);"
/>&lt;/picture>&lt;/a>
&lt;p>This brings the price for the bottom plates down from $55.94 to $39.02. Not bad!&lt;/p>
&lt;p>The total is still more expensive than buying the acrylic plates and pucks &amp;ndash; $69 instead of $60 &amp;ndash; and bear in mind that you&amp;rsquo;d still have to source screws, standoffs, and rubber bumpers on top of that price.&lt;/p>
&lt;/aside>
&lt;section class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1" role="doc-endnote">
&lt;p>I didn&amp;rsquo;t actually have to get new screws &amp;ndash; I could have countersunk the existing ones instead. But I thought that would be more work, and I was lazy. But then I ended up having to countersink them &lt;em>anyway&lt;/em> for reasons that will be explained in a future post, so this was a pretty unnecessary expenditure.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/section></description><pubDate>Thu, 06 Jan 2022 00:00:00 +0000</pubDate><link>https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/</link><guid isPermaLink="true">https://ianthehenry.com/posts/kyria-build/bespoker-aluminum-plates/</guid></item></channel></rss>