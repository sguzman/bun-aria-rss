{
  "title": "Craft Minimal Bug Reports",
  "link": "",
  "updated": "2018-02-28T00:00:00+00:00",
  "id": "https://mrocklin.github.io/blog/work/2018/02/28/minimal-bug-reports",
  "content": "<p>Following up on a post on <a href=\"../../../2016/08/25/supporting-users\">supporting users in open source</a>\nthis post lists some suggestions on how to ask a maintainer to help you with a problem.</p>\n\n<p>You don’t have to follow these suggestions.  They are optional.\nThey make it more likely that a project maintainer will spend time helping you.\nIt’s important to remember that their willingness to support you for free is optional too.</p>\n\n<p>Crafting minimal bug reports is essential for the life and maintenance of community-driven open source projects.\nDoing this well is an incredible service to the community.</p>\n\n<h2 id=\"minimal-complete-verifiable-examples\">Minimal Complete Verifiable Examples</h2>\n\n<p>I strongly recommend following Stack Overflow’s guidelines on <a href=\"https://stackoverflow.com/help/mcve\">Minimal Complete Verifiable Exmamples</a>.  I’ll include brief highlights here:</p>\n\n<blockquote>\n  <p>… code should be …</p>\n</blockquote>\n\n<blockquote>\n  <ul>\n    <li>Minimal – Use as little code as possible that still produces the same problem</li>\n  </ul>\n</blockquote>\n\n<blockquote>\n  <ul>\n    <li>Complete – Provide all parts needed to reproduce the problem</li>\n  </ul>\n</blockquote>\n\n<blockquote>\n  <ul>\n    <li>Verifiable – Test the code you’re about to provide to make sure it reproduces the problem</li>\n  </ul>\n</blockquote>\n\n<p>Lets be clear, this is <em>hard</em> and takes time.</p>\n\n<p>As a question-asker I find that creating an MCVE often takes 10-30 minutes for a simple problem.\nFortunately this work is usually straightforward,\neven if I don’t know very much about the package I’m having trouble with.\nMost of the work to create a minimal example is about removing all of the code that was specific to my application,\nand as the question-asker I am probably the most qualified person to do that.</p>\n\n<p>When answering questions I often point people to StackOverflow’s MCVE document.\nThey sometimes come back with a better-but-not-yet-minimal example.\nThis post clarifies a few common issues.</p>\n\n<p>As an running example I’m going to use Pandas dataframe problems.</p>\n\n<h2 id=\"dont-post-data\">Don’t post data</h2>\n\n<p>You shouldn’t post the file that you’re working with.\nInstead, try to see if you can reproduce the problem with just a few lines of data rather than the whole thing.</p>\n\n<p>Having to download a file, unzip it, etc. make it much less likely that someone will actually run your example in their free time.</p>\n\n<h3 id=\"dont\">Don’t</h3>\n\n<p>I’ve uploaded my data to Dropbox and you can get it here: <a href=\"\">my-data.csv.gz</a></p>\n\n<div class=\"language-python highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kn\">import</span> <span class=\"nn\">pandas</span> <span class=\"k\">as</span> <span class=\"n\">pd</span>\n<span class=\"n\">df</span> <span class=\"o\">=</span> <span class=\"n\">pd</span><span class=\"p\">.</span><span class=\"n\">read_csv</span><span class=\"p\">(</span><span class=\"s\">'my-data.csv.gz'</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<h3 id=\"do\">Do</h3>\n\n<p>You should be able to copy-paste the following to get enough of my data to cause the problem:</p>\n\n<div class=\"language-python highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kn\">import</span> <span class=\"nn\">pandas</span> <span class=\"k\">as</span> <span class=\"n\">pd</span>\n<span class=\"n\">df</span> <span class=\"o\">=</span> <span class=\"n\">pd</span><span class=\"p\">.</span><span class=\"n\">DataFrame</span><span class=\"p\">({</span><span class=\"s\">'account-start'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s\">'2017-02-03'</span><span class=\"p\">,</span> <span class=\"s\">'2017-03-03'</span><span class=\"p\">,</span> <span class=\"s\">'2017-01-01'</span><span class=\"p\">],</span>\n                   <span class=\"s\">'client'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s\">'Alice Anders'</span><span class=\"p\">,</span> <span class=\"s\">'Bob Baker'</span><span class=\"p\">,</span> <span class=\"s\">'Charlie Chaplin'</span><span class=\"p\">],</span>\n                   <span class=\"s\">'balance'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mf\">1432.32</span><span class=\"p\">,</span> <span class=\"mf\">10.43</span><span class=\"p\">,</span> <span class=\"mf\">30000.00</span><span class=\"p\">],</span>\n                   <span class=\"s\">'db-id'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"mi\">1234</span><span class=\"p\">,</span> <span class=\"mi\">2424</span><span class=\"p\">,</span> <span class=\"mi\">251</span><span class=\"p\">],</span>\n                   <span class=\"s\">'proxy-id'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"mi\">525</span><span class=\"p\">,</span> <span class=\"mi\">1525</span><span class=\"p\">,</span> <span class=\"mi\">2542</span><span class=\"p\">],</span>\n                   <span class=\"s\">'rank'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"mi\">52</span><span class=\"p\">,</span> <span class=\"mi\">525</span><span class=\"p\">,</span> <span class=\"mi\">32</span><span class=\"p\">],</span>\n                   <span class=\"p\">...</span>\n                   <span class=\"p\">})</span>\n</code></pre></div></div>\n\n<h2 id=\"actually-dont-include-your-data-at-all\">Actually don’t include your data at all</h2>\n\n<p>Actually, your data probably has lots of information that is very specific to\nyour application.  Your eyes gloss over it but a maintainer doesn’t know what\nis relevant and what isn’t, so it will take them time to digest it if you\ninclude it.  Instead see if you can reproduce your same failure with artificial\nor random data.</p>\n\n<h3 id=\"dont-1\">Don’t</h3>\n\n<p>Here is enough of my data to reproduce the problem</p>\n\n<div class=\"language-python highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kn\">import</span> <span class=\"nn\">pandas</span> <span class=\"k\">as</span> <span class=\"n\">pd</span>\n<span class=\"n\">df</span> <span class=\"o\">=</span> <span class=\"n\">pd</span><span class=\"p\">.</span><span class=\"n\">DataFrame</span><span class=\"p\">({</span><span class=\"s\">'account-start'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s\">'2017-02-03'</span><span class=\"p\">,</span> <span class=\"s\">'2017-03-03'</span><span class=\"p\">,</span> <span class=\"s\">'2017-01-01'</span><span class=\"p\">],</span>\n                   <span class=\"s\">'client'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s\">'Alice Anders'</span><span class=\"p\">,</span> <span class=\"s\">'Bob Baker'</span><span class=\"p\">,</span> <span class=\"s\">'Charlie Chaplin'</span><span class=\"p\">],</span>\n                   <span class=\"s\">'balance'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mf\">1432.32</span><span class=\"p\">,</span> <span class=\"mf\">10.43</span><span class=\"p\">,</span> <span class=\"mf\">30000.00</span><span class=\"p\">],</span>\n                   <span class=\"s\">'db-id'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"mi\">1234</span><span class=\"p\">,</span> <span class=\"mi\">2424</span><span class=\"p\">,</span> <span class=\"mi\">251</span><span class=\"p\">],</span>\n                   <span class=\"s\">'proxy-id'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"mi\">525</span><span class=\"p\">,</span> <span class=\"mi\">1525</span><span class=\"p\">,</span> <span class=\"mi\">2542</span><span class=\"p\">],</span>\n                   <span class=\"s\">'rank'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"mi\">52</span><span class=\"p\">,</span> <span class=\"mi\">525</span><span class=\"p\">,</span> <span class=\"mi\">32</span><span class=\"p\">],</span>\n                   <span class=\"p\">...</span>\n                   <span class=\"p\">})</span>\n</code></pre></div></div>\n\n<h3 id=\"do-1\">Do</h3>\n\n<p>My actual problem is about finding the best ranked employee over a certain time period,\nbut we can reproduce the problem with this simpler dataset.\nNotice that the dates are <em>out of order</em> in this data (2000-01-02 comes after 2000-01-03).\nI found that this was critical to reproducing the error.</p>\n\n<div class=\"language-python highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kn\">import</span> <span class=\"nn\">pandas</span> <span class=\"k\">as</span> <span class=\"n\">pd</span>\n<span class=\"n\">df</span> <span class=\"o\">=</span> <span class=\"n\">pd</span><span class=\"p\">.</span><span class=\"n\">DataFrame</span><span class=\"p\">({</span><span class=\"s\">'account-start'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s\">'2000-01-01'</span><span class=\"p\">,</span> <span class=\"s\">'2000-01-03'</span><span class=\"p\">,</span> <span class=\"s\">'2000-01-02'</span><span class=\"p\">],</span>\n                   <span class=\"s\">'db-id'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">],</span>\n                   <span class=\"s\">'name'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s\">'Alice'</span><span class=\"p\">,</span> <span class=\"s\">'Bob'</span><span class=\"p\">,</span> <span class=\"s\">'Charlie'</span><span class=\"p\">})</span>\n</code></pre></div></div>\n\n<p>As we shrink down our example problem we often discover a lot about what causes the problem.\nThis discovery is valuable\nand something that only the question-asker is capable of doing efficiently.</p>\n\n<h2 id=\"see-how-small-you-can-make-things\">See how small you can make things</h2>\n\n<p>To make it even easier, see how small you can make your data.\nFor example if working with tabular data (like Pandas),\nthen how many columns do you actually need to reproduce the failure?\nHow many rows do you actually need to reproduce the failure?\nDo the columns need to be named as you have them now or could they be just “A” and “B”\nor descriptive of the types within?</p>\n\n<h3 id=\"do-2\">Do</h3>\n\n<div class=\"language-python highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kn\">import</span> <span class=\"nn\">pandas</span> <span class=\"k\">as</span> <span class=\"n\">pd</span>\n<span class=\"n\">df</span> <span class=\"o\">=</span> <span class=\"n\">pd</span><span class=\"p\">.</span><span class=\"n\">DataFrame</span><span class=\"p\">({</span><span class=\"s\">'datetime'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s\">'2000-01-03'</span><span class=\"p\">,</span> <span class=\"s\">'2000-01-02'</span><span class=\"p\">],</span>\n                   <span class=\"s\">'id'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">]})</span>\n</code></pre></div></div>\n\n<h2 id=\"remove-unnecessary-steps\">Remove unnecessary steps</h2>\n\n<p>Is every line in your example absolutely necessary to reproduce the error?\nIf you’re able to delete a line of code then please do.\nBecause you already understand your problem you are <em>much more efficient</em> at doing this than the maintainer is.\nThey probably know more about the tool, but you know more about your code.</p>\n\n<h3 id=\"dont-2\">Don’t</h3>\n\n<p>The groupby step below is raising a warning that I don’t understand</p>\n\n<div class=\"language-python highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">df</span> <span class=\"o\">=</span> <span class=\"n\">pd</span><span class=\"p\">.</span><span class=\"n\">DataFrame</span><span class=\"p\">(...)</span>\n\n<span class=\"n\">df</span> <span class=\"o\">=</span> <span class=\"n\">df</span><span class=\"p\">[</span><span class=\"n\">df</span><span class=\"p\">.</span><span class=\"n\">value</span> <span class=\"o\">&gt;</span> <span class=\"mi\">0</span><span class=\"p\">]</span>\n<span class=\"n\">df</span> <span class=\"o\">=</span> <span class=\"n\">df</span><span class=\"p\">.</span><span class=\"n\">fillna</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n\n<span class=\"n\">df</span><span class=\"p\">.</span><span class=\"n\">groupby</span><span class=\"p\">(</span><span class=\"n\">df</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"p\">).</span><span class=\"n\">y</span><span class=\"p\">.</span><span class=\"n\">mean</span><span class=\"p\">()</span>  <span class=\"c1\"># &lt;-- this produces the error\n</span></code></pre></div></div>\n\n<h3 id=\"do-3\">Do</h3>\n\n<p>The groupby step below is raising a warning that I don’t understand</p>\n\n<div class=\"language-python highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">df</span> <span class=\"o\">=</span> <span class=\"n\">pd</span><span class=\"p\">.</span><span class=\"n\">DataFrame</span><span class=\"p\">(...)</span>\n\n<span class=\"n\">df</span><span class=\"p\">.</span><span class=\"n\">groupby</span><span class=\"p\">(</span><span class=\"n\">df</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"p\">).</span><span class=\"n\">y</span><span class=\"p\">.</span><span class=\"n\">mean</span><span class=\"p\">()</span>  <span class=\"c1\"># &lt;-- this produces the error\n</span></code></pre></div></div>\n\n<h2 id=\"use-syntax-highlighting\">Use Syntax Highlighting</h2>\n\n<p>When using Github you can enclose code blocks in triple-backticks (the\ncharacter on the top-left of your keyboard on US-standard QWERTY keyboards).\nIt looks like this:</p>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>```python\nx = 1\n```\n</code></pre></div></div>\n\n<h2 id=\"provide-complete-tracebacks\">Provide complete tracebacks</h2>\n\n<p>You know all of that stuff between your code and the exception that is hard to\nmake sense of?  You should include it.</p>\n\n<h3 id=\"dont-3\">Don’t</h3>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>I get a ZeroDivisionError from the following code:\n\n```python\ndef div(x, y):\n    return x / y\n\ndiv(1, 0)\n```\n</code></pre></div></div>\n\n<h3 id=\"do-4\">Do</h3>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>I get a ZeroDivisionError from the following code:\n\n```python\ndef div(x, y):\n    return x / y\n\ndiv(1, 0)\n```\n\n```python-traceback\nZeroDivisionError                         Traceback (most recent call last)\n&lt;ipython-input-4-7b96263abbfa&gt; in &lt;module&gt;()\n----&gt; 1 div(1, 0)\n\n&lt;ipython-input-3-7685f97b4ce5&gt; in div(x, y)\n      1 def div(x, y):\n----&gt; 2     return x / y\n      3\n\nZeroDivisionError: division by zero\n```\n</code></pre></div></div>\n\n<p>If the traceback is long that’s ok.  If you really want to be clean you can put\nit in <code class=\"language-plaintext highlighter-rouge\">&lt;details&gt;</code>  brackets.</p>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>I get a ZeroDivisionError from the following code:\n\n```python\ndef div(x, y):\n    return x / y\n\ndiv(1, 0)\n```\n\n### Traceback\n\n&lt;details&gt;\n\n```python\nZeroDivisionError                         Traceback (most recent call last)\n&lt;ipython-input-4-7b96263abbfa&gt; in &lt;module&gt;()\n----&gt; 1 div(1, 0)\n\n&lt;ipython-input-3-7685f97b4ce5&gt; in div(x, y)\n      1 def div(x, y):\n----&gt; 2     return x / y\n      3\n\nZeroDivisionError: division by zero\n```\n\n&lt;/details&gt;\n</code></pre></div></div>\n\n<h3 id=\"ask-questions-in-public-places\">Ask Questions in Public Places</h3>\n\n<p>When raising issues you often have a few possible locations:</p>\n\n<ol>\n  <li>GitHub issue tracker</li>\n  <li>Stack Overflow</li>\n  <li>Project mailing list</li>\n  <li>Project Chat room</li>\n  <li>E-mail maintainers directly (never do this)</li>\n</ol>\n\n<p>Different projects handle this differently, but they usually have a page on\ntheir documentation about where to go for help.  This is often labeled\n“Community”, “Support” or “Where to ask for help”.  Here are the\nrecommendations from the\n<a href=\"https://pandas.pydata.org/community.html\">Pandas community</a>.</p>\n\n<p>Generally it’s good to ask questions where many maintainers can see your\nquestion and help, and where other users can find your question and answer if\nthey encounter a similar bug in the future.</p>\n\n<p>While your goal may be to solve your problem, the maintainer’s goal is likely\nto create a record of how to solve problems like yours.  This helps many more\nusers who will have a similar problem in the future, see your well-crafted bug\nreport, and learn from the resulting conversation.</p>\n\n<h3 id=\"my-personal-preferences\">My personal preferences</h3>\n\n<ul>\n  <li>For user questions like “What is the right way to do X?” I prefer Stack Overflow.</li>\n  <li>For bug reports like “I did X, I’m pretty confident that it should work, but I\nget this error” I prefer Github issues</li>\n  <li>For general chit-chat I prefer Gitter, though actually, I personally spend\nalmost no time in gitter because it isn’t easily searchable by future\nusers.  If you’ve asked me a question in Gitter I will almost certainly\nnot respond to it, except to direct you to github, stack overflow, or this\nblogpost.</li>\n  <li>I only like personal e-mail if someone is proposing to fund or seriously\nsupport the project in some way</li>\n</ul>\n\n<p>But again, different projects do this differently and have different policies.\nYou should check the documentation of the project you’re dealing with to learn\nhow they like to support users.</p>"
}