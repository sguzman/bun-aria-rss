{
  "title": "The Cloud Is Just Someone Else's Computer",
  "description": "<!--kg-card-begin: markdown--><p>When we started <a href=\"https://discourse.org\">Discourse</a> in 2013, our server requirements were high:</p>\n<ul>\n<li>1GB RAM</li>\n<li>modern, fast dual core CPU</li>\n<li>speedy solid state drive with 20+ GB</li>\n</ul>\n<p>I'm not talking about a cheapo shared cpanel server, either, I mean a <em>dedicated</em> virtual private server with those specifications.</p>\n<p>We were OK</p>",
  "link": "https://blog.codinghorror.com/the-cloud-is-just-someone-elses-computer/",
  "guid": "5c68a26293063200bf4c742b",
  "dc:creator": "Jeff Atwood",
  "pubDate": "Sun, 17 Feb 2019 02:15:26 GMT",
  "content:encoded": "<!--kg-card-begin: markdown--><p>When we started <a href=\"https://discourse.org\">Discourse</a> in 2013, our server requirements were high:</p>\n<ul>\n<li>1GB RAM</li>\n<li>modern, fast dual core CPU</li>\n<li>speedy solid state drive with 20+ GB</li>\n</ul>\n<p>I'm not talking about a cheapo shared cpanel server, either, I mean a <em>dedicated</em> virtual private server with those specifications.</p>\n<p>We were OK with that, because we were <a href=\"https://blog.codinghorror.com/why-ruby/\">building in Ruby</a> for the next decade of the Internet. I predicted early on that the cost of renting a suitable VPS would drop to $5 per month, and courtesy of Digital Ocean that indeed <a href=\"https://meta.discourse.org/t/new-digital-ocean-pricing-spoiler-5-for-a-1gb-droplet/78230\">happened in January 2018</a>.</p>\n<p>The cloud got cheaper, and faster. Not really a surprise, since <a href=\"https://blog.codinghorror.com/when-hardware-is-free-power-is-expensive/\">the price of hardware trends to zero over time</a>. But it's still the cloud, and that means it isn't exactly <em>cheap</em>. It is, after all, someone else's computer that you pay for the privilege of renting.</p>\n<p><img src=\"https://blog.codinghorror.com/content/images/2019/02/there-is-no-cloud.png\" alt=\"there-is-no-cloud\" loading=\"lazy\"></p>\n<p>But wait &#x2026; <strong>what if you could put your <em>own</em> computer \"in the cloud\"?</strong></p>\n<p>Wouldn't that be the best of both worlds? Reliable connectivity,  plus a nice low monthly price for extremely fast hardware? If this sounds crazy, it shouldn't &#x2013; Mac users have been doing this <a href=\"https://www.macstadium.com/pricing/colo\">for years now</a>.</p>\n<p><img src=\"https://blog.codinghorror.com/content/images/2019/02/mac-colocation-2019-1.png\" alt=\"mac-colocation-2019-1\" loading=\"lazy\"></p>\n<p>I suppose it's understandable that Mac users would be on the cutting edge here since Apple <a href=\"https://en.wikipedia.org/wiki/Xserve#Intel_Xserve\">barely makes server hardware</a>, whereas the PC world has always been <a href=\"https://blog.codinghorror.com/building-a-computer-the-google-way/\">the literal de-facto standard for server hardware</a>.</p>\n<p><img src=\"https://blog.codinghorror.com/content/images/2019/02/mac-stadium-colocation.jpg\" alt=\"mac-stadium-colocation\" loading=\"lazy\"></p>\n<p>Given the prevalence and maturity of cloud providers, it's even a <em>little</em> controversial these days to <a href=\"https://blog.codinghorror.com/building-servers-for-fun-and-prof-ok-maybe-just-for-fun/\">colocate actual servers</a>. We've also experimented with <a href=\"https://blog.codinghorror.com/the-scooter-computer/\">colocating mini-pcs</a> in various hosting roles. I'm still curious why there isn't more of a cottage industry for colocating mini PCs. Because &#x2026; <em>I think there should be</em>.</p>\n<p>I originally wrote about <a href=\"https://blog.codinghorror.com/the-scooter-computer/\">the scooter computers</a> we added to our Discourse infrastructure in 2016, plus my own colocation experiment that ran concurrently. <strong>Over the last three years of both experiments, I've concluded that these little boxes are plenty reliable</strong>, with one role specific caveat that I'll explain in the comments. I remain an unabashed fan of mini-PC colocation. I like it so much I put together a new 2019 iteration:</p>\n<table style=\"border-spacing:8px\">\n    <tr><td><b>2017 &#x2014; $670</b></td><td><b>2019 &#x2014; $820</b></td></tr>\n    <tr><td><a href=\"https://ark.intel.com/products/95451/Intel-Core-i7-7500U-Processor-4M-Cache-up-to-3_50-GHz-\">i7-7500u</a><br>2.7-3.5 Ghz, 2c / 4t</td><td><a href=\"https://ark.intel.com/products/134906/Intel-Core-i7-8750H-Processor-9M-Cache-up-to-4-10-GHz-\">i7-8750h</a><br>2.2-4.1 Ghz, 6c / 12t</td></tr>\n    <tr><td>16GB DDR3 RAM</td><td>32GB DDR4 RAM</td></tr>\n    <tr><td>500GB SATA SSD</td><td>500GB NVMe SSD</td></tr>\n</table>\n<p>This year's scooter computer offers <strong>3&#xD7; the cores, 2&#xD7; the memory, and 3&#xD7; faster drive</strong>. It is, as the kids say &#x2026; an <em>absolute unit</em>. &#x1F631;</p>\n<p><img src=\"https://blog.codinghorror.com/content/images/2019/02/2019-scooter-computer-top-interior-1.jpeg\" alt=\"2019-scooter-computer-top-interior-1\" loading=\"lazy\"></p>\n<p><img src=\"https://blog.codinghorror.com/content/images/2019/02/2019-scooter-computer-bottom-interior.jpeg\" alt=\"2019-scooter-computer-bottom-interior\" loading=\"lazy\"></p>\n<p><img src=\"https://blog.codinghorror.com/content/images/2019/02/2019-scooter-computer-front-and-back.jpg\" alt=\"2019-scooter-computer-front-and-back\" loading=\"lazy\"></p>\n<p>It also has a rather elegant dual-sided internal layout. There is a slot for an old-school 2.5\" drive, plus built in wi-fi, but you won't see it in my pictures because I physically removed both.</p>\n<p>I vetted each box via my <a href=\"https://blog.codinghorror.com/is-your-computer-stable/\">recommended burn in and stability testing</a> and they all passed with flying colors, though I did have to RMA one set of bodgy RAM sticks in the process. The benchmarks tell the story, as compared to the average Digital Ocean droplet:</p>\n<p><strong>Per-core performance</strong><br>\n<code>sysbench cpu --cpu-max-prime=20000 run</code></p>\n<table style=\"border-spacing:8px\">\n    <tr><td>DO Droplet</td><td style=\"text-align:right\">2,988</td></tr>\n    <tr><td>2017 Mini-PC</td><td style=\"text-align:right\">4,800</td></tr>\n    <tr><td>2019 Mini-PC</td><td style=\"text-align:right\">5,671</td></tr>\n</table>        \n<p><strong>Multi-core performance</strong><br>\n<code>sysbench cpu --cpu-max-prime=40000 --num-threads=8 run</code></p>\n<table style=\"border-spacing:8px\">\n    <tr><td>DO Droplet</td><td style=\"text-align:right\">2,200</td></tr>\n    <tr><td>2017 Mini-PC</td><td style=\"text-align:right\">5,588</td></tr>\n    <tr><td>2019 Mini-PC</td><td style=\"text-align:right\">14,604</td></tr>\n</table>   \n<p><strong>Disk performance</strong><br>\n<code>dd bs=1M count=512 if=/dev/zero of=test conv=fdatasync</code><br>\n<code>hdparm -Tt /dev/sda</code></p>\n<table style=\"border-spacing:8px\">\n    <tr><td>DO Droplet</td><td style=\"text-align:right\">701 / 8818 / 471 MB/sec</td></tr>\n    <tr><td>2017 Mini-PC</td><td style=\"text-align:right\">444 / 12564 / 505 MB/sec</td></tr>\n    <tr><td>2019 Mini-PC</td><td style=\"text-align:right\">1200 / 17919 / 3115 MB/sec</td></tr>\n</table> \n<p><strong>Discourse rebuild</strong><br>\n<code>time ./launcher rebuild app</code></p>\n<table style=\"border-spacing:8px\">\n    <tr><td>DO Droplet</td><td style=\"text-align:right\">6:59</td></tr>\n    <tr><td>2017 Mini-PC</td><td style=\"text-align:right\">3:41</td></tr>\n    <tr><td>2019 Mini-PC</td><td style=\"text-align:right\">3:24</td></tr>\n</table> \n<p>Power consumption could be a concern, as the 2017 version had a much lower 15 watt TDP, compared to the 45 watts of this version. That 3&#xD7; increase in core count ain't free! So I tested that, too, with a combination of <code>i7z</code>, <code>stress</code>,  and my handy dandy <a href=\"https://blog.codinghorror.com/why-estimate-when-you-can-measure/\">watt meter</a>.</p>\n<p><img src=\"https://blog.codinghorror.com/content/images/2019/02/2019-mini-pc-i7z-testing.png\" alt=\"2019-mini-pc-i7z-testing\" loading=\"lazy\"></p>\n<table style=\"border-spacing:4px\">\n    <tr><td>(idle login)</td><td>800 Mhz</td><td style=\"text-align:right\">10w</td></tr>\n    <tr><td><code>stress --cpu 1</code></td><td>4.1 GHz</td><td style=\"text-align:right\">30w</td></tr>\n    <tr><td><code>stress --cpu 2</code></td><td>4.1 GHz</td><td style=\"text-align:right\">42w</td></tr>\n    <tr><td><code>stress --cpu 3</code></td><td>4.0 GHz</td><td style=\"text-align:right\">53w</td></tr>\n    <tr><td><code>stress --cpu 4</code></td><td>3.9 GHz</td><td style=\"text-align:right\">65w</td></tr>\n    <tr><td><code>stress --cpu 5</code></td><td>3.7 GHz</td><td style=\"text-align:right\">65w</td></tr>\n    <tr><td><code>stress --cpu 6</code></td><td>3.5 GHz</td><td style=\"text-align:right\">65w</td></tr>\n    <tr><td><code>stress --cpu 12</code></td><td>3.3 Ghz</td><td style=\"text-align:right\">65w</td></tr>    \n</table>\n<p>I'd expect around 10 - 20 watts doing typical low-load stuff that isn't super CPU intensive. Note that running current-ish versions of <code>mprime</code> jacks power consumption up to 75w &#x1F525; and the overall clock scales down to 3.1 Ghz &#x2026; let me tell you, I've learned to be <a href=\"https://blog.cloudflare.com/on-the-dangers-of-intels-frequency-scaling/\">very, <em>very</em> afraid of AVX2 extensions</a>.</p>\n<p>(If you're worried about noise, don't be. This active cooling solution is clearly overkill for a 65w load, because it barely spun up at all even under full core load. It was <em>extremely</em> quiet.)</p>\n<p>So we're happy that this machine is a slammin' deal for $820, it's super fast, and plenty reliable. But how about colocation costs? My colocation provider is <a href=\"https://endoffice.com/\">EndOffice</a> out of Boston, and they offer very competitive rates to colocate a Mini-PC: $29/month.</p>\n<p><a href=\"https://endoffice.com/minicolo.html\"><img src=\"https://blog.codinghorror.com/content/images/2019/02/endoffice-mini-pc-colocation.png\" alt=\"endoffice-mini-pc-colocation\" loading=\"lazy\"></a></p>\n<p>I personally colocate three Mini-PCs for redundancy and just-in-case; there are discounts for colocating more than one. Here they are racked up and in action. Of course I labelled the front and rear before shipping because that's how I roll.</p>\n<p><img src=\"https://blog.codinghorror.com/content/images/2019/02/endoffice-colocated-2019-mini-pcs.jpg\" alt=\"endoffice-colocated-2019-mini-pcs\" loading=\"lazy\"></p>\n<p>Let's break this down and see what the actual costs of colocating a Mini-PC are versus the cloud. Given the plateauing of CPU speeds, I think five years of useful life for these boxes is realistic, but let's assume a conservative three year lifespan to be safe.</p>\n<ul>\n<li>$880 mini-pc 32GB RAM, 6 CPUs, 500GB SSD</li>\n<li>$120 taxes / shipping / misc</li>\n<li>$29 &#xD7; 12 &#xD7; 3 = $1,044</li>\n</ul>\n<p>That's <strong>$2,044 for three years of hosting</strong>. How can we do on Digital Ocean? Per <a href=\"https://www.digitalocean.com/pricing/\">their current pricing page</a>:</p>\n<ul>\n<li>32GB RAM, 8 vCPUs, 640GB SSD</li>\n<li>$160/month</li>\n<li>$160 &#xD7; 12 &#xD7; 3 = <strong>$5,760</strong></li>\n</ul>\n<p>This isn't <em>quite</em> apples to apples, as we are getting an extra 140GB of disk and 2 bonus CPUs, but those CPUs are both slower and partially consumed by multi-tenancy compared to our brand new dedicated, isolated CPUs. (I was curious about this, so I just spun up a new $160/month DO instance for a quick test. The <code>sysbench</code> results are 4086 and 11760 respectively, considerably below the 2019 Mini-PC results, above.) As you can see, <strong>you pay almost three times as much for a cloud server.</strong> &#x1F911;</p>\n<p>I'm not saying this is for everyone. If you just need to spin up a quick server or two for testing and experimentation, there's absolutely no way you need to go to the trouble and up-front cost of building and then racking colocated mini-pcs. There's no denying that spinning servers up in the cloud offers unparalleled flexibility and redundancy. But if you do have need for <strong>dedicated computing resources over a period of years</strong>, then building your own small personal cloud, with machines <em>you actually own</em>, is not only one third the cost but also &#x2026; kinda cool?</p>\n<p><img src=\"https://blog.codinghorror.com/content/images/2019/02/your-own-personal-cloud.jpg\" alt=\"your-own-personal-cloud\" loading=\"lazy\"></p>\n<p>If you'd also like to embark upon this project, you can get <a href=\"https://www.amazon.com/Partaker-Coffee-Graphics-Barebone-System/dp/B07L4KJXWL?tag=codihorr-20\">the same Partaker B18 box I did for $490 from Amazon</a>, or <a href=\"https://www.aliexpress.com/item/Partaker-B18-DDR4-Coffee-Lake-8th-Gen-Mini-PC-Intel-Core-i7-8750H-32GB-RAM-Intel/32948461273.html\">$460 direct from China via AliExpress</a>. Add memory and drive to taste, build it up, then check out <a href=\"https://endoffice.com/\">endoffice.com</a> who I can enthusiastically recommend for colocation, or the colocation provider of your choice.</p>\n<p>Get something cool hosted out there; let's do our part to keep the internet <a href=\"https://jarredsumner.com/codeblog/\">fun and weird!</a></p>\n<!--kg-card-end: markdown-->"
}