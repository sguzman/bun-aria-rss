{
  "title": "How do I count thee?  Let me count the ways?",
  "link": "https://www.r-bloggers.com/2022/11/how-do-i-count-thee-let-me-count-the-ways/",
  "dc:creator": "Jerry Tuttle",
  "pubDate": "Tue, 01 Nov 2022 19:04:11 +0000",
  "category": "R bloggers",
  "guid": "https://r-posts.com/?p=9934",
  "description": "<div style = \"width:60%; display: inline-block; float:left; \"> How do I count thee? Let me count the ways? by Jerry Tuttle    In Major League Baseball, a player who hits 50 home runs in a single season has hit a lot of home runs. Suppose I want to count the number of 50 homer seasons by team, and also the number ...</div>\n<div style = \"width: 40%; display: inline-block; float:right;\"></div>\n<div style=\"clear: both;\"></div>\n<strong>Continue reading</strong>: <a href=\"https://www.r-bloggers.com/2022/11/how-do-i-count-thee-let-me-count-the-ways/\">How do I count thee?  Let me count the ways?</a>",
  "content:encoded": "<!-- \n<div style=\"min-height: 30px;\">\n[social4i size=\"small\" align=\"align-left\"]\n</div>\n-->\n\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\n[This article was first published on  <strong><a href=\"http://r-posts.com/how-do-i-count-thee-let-me-count-the-ways/\"> R-posts.com</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\n<hr>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div>\n<code>How do I count thee?  Let me count the ways?</code>\n\n\nby Jerry Tuttle   \n\n\n\n\n\n  In Major League Baseball, a player who hits 50 home runs in a single season\n  has hit a lot of home runs. Suppose I want to count the number of 50 homer\n  seasons by team, and also the number of 50 homer seasons by New York Yankees.\n  (I will count Maris and Mantle in 1961 as two.) Here is the data including Aaron Judge’s 62 in 2022\n :\n\n\n<div class=\"separator\" style=\"clear: both\"><a href=\"https://i0.wp.com/blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEit4h2l6DfUxIpVzuNtzbp9mqugdXOkE3QrNlHnjQhIb21PiaOqDI1f6S6COOamIYSig0xt35pCZZiFMG52nSmltI9LVvPEQjEMZtOo4vP_tsHj_ryqAKMTs8PpVNvyayg0vvP_4deI9qit2Qd_ltWaa3tSOFG2aUX6rtvrDjr2UARmqs_4quAUfutJ/s752/50.JPG?ssl=1\" style=\"padding: 1em 0;text-align: center\" rel=\"nofollow\" target=\"_blank\"><img alt=\"\" border=\"0\" height=\"600\" data-original-height=\"752\" data-original-width=\"224\" src=\"https://i0.wp.com/blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEit4h2l6DfUxIpVzuNtzbp9mqugdXOkE3QrNlHnjQhIb21PiaOqDI1f6S6COOamIYSig0xt35pCZZiFMG52nSmltI9LVvPEQjEMZtOo4vP_tsHj_ryqAKMTs8PpVNvyayg0vvP_4deI9qit2Qd_ltWaa3tSOFG2aUX6rtvrDjr2UARmqs_4quAUfutJ/s600/50.JPG?fit=660%2C600&#038;ssl=1\" data-recalc-dims=\"1\" /></a></div>\n\nYou would think base R would have a count function such as count(df$Team) and\ncount(df$Team == “NYY”) but this gives the error “could not find function\n‘count&#8217;”. Base R does not have a count function.\n\n\n\nBase R has at last four ways to perform a count:\n\n\n  1. The table function will count items in a vector.   \n  table(df$Team) presents results horizontally, and data.frame(table(df$Team))\n  presents results vertically.    table(df$Team == “NYY”) displays results 37\n  false and 10 true, while table(df$Team == “NYY”)[2] just displays the result 10 true.\n\n\n\n  2. The sum function can be used to count the number of rows meeting a\n  condition.    sum(df$Team == “NYY”) displays the result 10. Here\n  df$Team == “NYY” is creating a logical vector, and sum is summing the number\n  of true = 1.\n\n\n\n  3. Similar to sum, nrow(df[df$Team == “NYY”, ]) counts the number of rows\n  meeting the NYY condition.\n\n\n\n  4. The length function counts the number of elements in an R object.\n     length(which(df$Team == “NYY”)) , length(df$Team[df$Team ==\n  “NYY”]) , and length(grep(“NYY”, df[ , “Team”])) are all ways that will count\n  the 10 Yankees.\n\n\n\n  The more direct solution to counting uses the count function in the dplyr\n  library. Note that dplyr’s count function applies to a data frame or tibble,\n  but not to a vector. After loading library(dplyr) ,\n\n\n1. df %>% count(Team) lists the count for each team.\n\n\n  2. df %>% filter(Team = “NYY”) lists each Yankee, and you can see there are\n  10.\n\n\n\n  3. df %>% count(Team == “NYY”) displays 37 false and 10 true, while df %>%\n  filter(Team == “NYY”) %>% count() just displays the 10 true.\n\n\n\n  The following is a bar chart of the results by team for teams with at least 1\n  50 homer season:\n\n\n\n\n<div class=\"separator\" style=\"clear: both\">\n  <a href=\"https://i0.wp.com/blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjxHDYU4cmCrCRN0f__ztC9WKBVp0EGSy8s6h7mbbe6hgA0rjC4shpIzY2P0aJ3cmvnvNHiDwKUthpWvYEWJZblScM0jitWhiokAY7liixSHiKEMbuIux1TPncxSUkIF1Q2YxSxa47Ef_JIfvlNVWMxu3MLDy68sAh1CGCQ8uoFMnzgSQ1CdSsaRC7f/s824/50.JPG?ssl=1\" style=\"padding: 1em 0;text-align: center\" rel=\"nofollow\" target=\"_blank\"><img alt=\"\" border=\"0\" data-original-height=\"743\" data-original-width=\"450\" src=\"https://i0.wp.com/blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjxHDYU4cmCrCRN0f__ztC9WKBVp0EGSy8s6h7mbbe6hgA0rjC4shpIzY2P0aJ3cmvnvNHiDwKUthpWvYEWJZblScM0jitWhiokAY7liixSHiKEMbuIux1TPncxSUkIF1Q2YxSxa47Ef_JIfvlNVWMxu3MLDy68sAh1CGCQ8uoFMnzgSQ1CdSsaRC7f/s320/50.JPG?w=320&#038;ssl=1\" data-recalc-dims=\"1\" /></a>\n</div>\n\nFinally, “How do I count thee? Let me count the ways?” is of course adapted from\nElizabeth Barrett Browning’s poem “How do I <b>love</b> thee? Let me count the\nways?” But in her poem, just how would we count the number of times “love” is\nmentioned? The tidytext library makes counting words fairly easy, and the answer\nis ten, the same number of 50 homer Yankee seasons. Coincidence?\n\nThe following is all the R code. Happy counting!\n\n<pre>\n\n  library(dplyr) \n\n  library(ggplot2) \n\n  library(tidytext) \n\n\n\n\n  df <- data.frame(\n\n     Player=c('Ruth','Ruth','Ruth','Ruth','Wilson','Foxx','Greenberg','Foxx','Kiner','Mize','Kiner','Mays','Mantle','Maris',\n  'Mantle','Mays','Foster','Fielder','Belle','McGwire','Anderson','McGwire','Griffey','McGwire','Sosa','Griffey',\n  'Vaughn','McGwire','Sosa','Sosa','Bonds','Sosa','Gonzalez','Rodriguez','Rodriguez','Thome','Jones','Howard','Ortiz',\n  'Rodriguez','Fielder','Bautista','Davis','Stanton','Judge','Alonso','Judge'),\n  \n\n     Year=c(1920,1921,1927,1928,1930,1932,1938,1938,1947,1947,1949,1955,1956,1961,1961,1965,1977,1990,1995,1996,1996,1997,1997,\n  1998,1998,1998,1998,1999,1999,2000,2001,2001,2001,2001,2002,2002,2005,2006,2006,2007,2007,2010,2013,2017,2017,2019,2022),\n  \n\n\n     Homers=c(54,59,60,54,56,58,58,50,51,51,54,51,52,61,54,52,52,51,50,52,50,58,56,70,66,56,50,65,63,50,73,64,57,52,57,52,51,\n  58,54,54,50,54,53,59,52,53,62), \n\n     Team=c('NYY','NYY','NYY','NYY','CHC','PHA','DET','BOS','PIT','NYG','PIT','NYG','NYY','NYY','NYY','SF','CIN','DET','CLE',\n  'OAK','BAL','OAK/SLC','SEA','SLC','CHC','SEA','SD','SLC','CHC','CHC','SF','CHC','ARI','TEX','TEX','CLE','ATL','PHP',\n  'BOR','NYY','MIL','TOR','BAL','MIA','NYY','NYM','NYY'))\n\n\nhead(df)\n\n# base R ways to count:\n\n\n  table(df$Team)    # shows results horizontally \n\n  data.frame(table(df$Team))    #shows results vertically \n\n  table(df$Team == \"NYY\")    # displays 37 false and 10 true\n  \n\n  table(df$Team == \"NYY\")[2]\n\n\nsum(df$Team == \"NYY\")    # displays the result 10.\n\n\n  nrow(df[df$Team == \"NYY\", ])    # counts the number of rows\n  meeting the NYY condition.\n\n\n\n  length(which(df$Team == \"NYY\"))     # which returns a vector of\n  indices which are true \n\n  length(df$Team[df$Team == \"NYY\"]) \n\n  length(grep(\"NYY\", df[ , \"Team\"]))     # grep returns a vector\n  of indices that match the pattern\n\n\n# dplyr R ways to count; remember to load library(dplyr):\n\ndf %>% count(Team)    # lists the count for each team.\n\n\n  df %>% filter(Team == \"NYY\")    # lists each Yankee, and you\n  can see there are 10.\n\n\n\n  df %>% count(Team == \"NYY\")    # displays 37 false and 10 true,\n  while \n df %>% filter(Team == \"NYY\") %>% count()    #\n  just displays the 10 true.\n\n\n\n  # barplot of all teams with at least 1 50 homer season; remember to load\n  library(ggplot2)\n\n\n\n  df %>% \n\n      group_by(Team) %>% \n\n      summarise(count = n()) %>% \n\n      ggplot(aes(x=reorder(Team, count), y=count, fill=Team)) +\n  \n\n      geom_bar(stat = 'identity') + \n\n      ggtitle(\"Count of 50 Homer Seasons\") + \n\n      xlab(\"Team\") + \n\n      scale_y_continuous(breaks=c(1,2,3,4,5,6,7,8,9,10)) + \n\n      coord_flip() + \n\n      theme(plot.title = element_text(face=\"bold\", size=18)) +\n  \n\n      theme(axis.title.y = element_text(face=\"bold\")) + \n\n      theme(axis.title.x = element_blank()) + \n\n      theme(axis.text.x = element_text(size=12, face=\"bold\"),\n  \n\n      axis.text.y = element_text(size=12, face=\"bold\")) + \n\n      theme(legend.position=\"none\") \n\n\n\n\n  # count number of times \"love\" is mentioned in Browning's poem; remember to\n  load library(tidytext)\n\n\n\n  textfile <- c(\"How do I love thee? Let me count the ways.\", \n\n  \"I love thee to the depth and breadth and height\", \n\n  \"My soul can reach, when feeling out of sight\", \n\n  \"For the ends of being and ideal grace.\", \n\n  \"I love thee to the level of every day's\", \n\n  \"Most quiet need, by sun and candle-light.\", \n\n  \"I love thee freely, as men strive for right.\", \n\n  \"I love thee purely, as they turn from praise.\", \n\n  \"I love thee with the passion put to use\", <br \n\n  \"In my old griefs, and with my childhood's faith.\", \n\n  \"I love thee with a love I seemed to lose\", \n\n  \"With my lost saints. I love thee with the breath,\", <br \n\n  \"Smiles, tears, of all my life; and, if God choose,\", \n\n  \"I shall but love thee better after death.\") \n\n\n\n\n  df<-data.frame(line=1:length(textfile), text=textfile) <br <br \n\n  df_words % unnest_tokens(word, text) <br \n\n  cleaned_words % anti_join(get_stopwords()) \n\n  cleaned_words %>% count(word, sort = TRUE) %>% head(6) \n\n  cleaned_words %>% filter(word == \"love\") %>% count() \n\n\n</pre><hr style=\"border-top:black solid 1px\" /><a href=\"http://r-posts.com/how-do-i-count-thee-let-me-count-the-ways/\" rel=\"nofollow\" target=\"_blank\">How do I count thee?  Let me count the ways?</a> was first posted on November 1, 2022 at 7:04 pm.<br />\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"http://r-posts.com/how-do-i-count-thee-let-me-count-the-ways/\"> R-posts.com</a></strong>.</div>\n<hr />\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a title=\"The R Project for Statistical Computing\" href=\"https://www.r-project.org/\" rel=\"nofollow\">R</a> news and tutorials about <a title=\"R tutorials\" href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\">learning R</a> and many other topics. <a title=\"Data science jobs\" href=\"https://www.r-users.com/\" rel=\"nofollow\">Click here if you're looking to post or find an R/data-science job</a>.\n\n<hr>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div><strong>Continue reading</strong>: <a href=\"https://www.r-bloggers.com/2022/11/how-do-i-count-thee-let-me-count-the-ways/\">How do I count thee?  Let me count the ways?</a>",
  "enclosure": "",
  "post-id": 334122
}