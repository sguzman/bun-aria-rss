{
  "title": "DIY : Use Instagram data to plan your next vacation",
  "link": "https://datanice.wordpress.com/2015/09/04/diy-use-instagram-data-to-plan-your-next-vacation/",
  "comments": "https://datanice.wordpress.com/2015/09/04/diy-use-instagram-data-to-plan-your-next-vacation/#respond",
  "dc:creator": "aptissimum",
  "pubDate": "Fri, 04 Sep 2015 22:03:39 +0000",
  "category": "Non classé",
  "guid": "http://datanice.wordpress.com/?p=4",
  "description": "When I travel, I always want to get the most of the city I&#8217;m visiting. One way is to talk to local people and get advices about which spots you shouldn&#8217;t miss. But I wish I could have the point of view of the past visitors&#8230; Which places did they enjoy the most ?  Where [&#8230;]",
  "content:encoded": "<p>When I travel, I always want to get the most of the city I&#8217;m visiting. One way is to talk to local people and get advices about which spots you shouldn&#8217;t miss. But I wish I could have the point of view of the past visitors&#8230; Which places did they enjoy the most ?  Where is the best spot to watch the sunset ?  The best selfies you can get ? I also want to have a look of some beaches before choosing one or getting an idea about what some areas looks like&#8230; The idea here is to ask Instagram about the nearby popular spots.</p>\n<p><img class=\"shrinkToFit aligncenter\" src=\"https://images.unsplash.com/36/xIsiRLngSRWN02yA2BbK_submission-photo-7.jpg?q=80&fm=jpg&s=3a6dbf2c0735cde117a0e6e2fd11a84b\" alt=\"https://images.unsplash.com/36/xIsiRLngSRWN02yA2BbK_submission-photo-7.jpg?q=80&fm=jpg&s=3a6dbf2c0735cde117a0e6e2fd11a84b\" width=\"951\" height=\"639\" /></p>\n<p><span id=\"more-4\"></span></p>\n<p>After looking into the Instagram API and playing around with it, I came up with the following script.</p>\n<pre><code class=\"python\">\nimport os\nimport json\nfrom collections import Counter\nimport pandas as pd\nfrom instagram.client import InstagramAPI\n\nINSTAGRAM_ACCESS_TOKEN = ''\nINSTAGRAM_CLIENT_ID = ''\nINSTAGRAM_CLIENT_SECRET = ''\n\napi = InstagramAPI(access_token=INSTAGRAM_ACCESS_TOKEN, client_id=INSTAGRAM_CLIENT_ID,client_secret=INSTAGRAM_CLIENT_SECRET)\n\ndef getNbLikes(listMedia):\n    likes =0\n    count =0\n    for media in listMedia:\n        likes = likes + media.like_count\n        count = count + 1\n    if count > 0:\n        return likes/count\n    else:\n        return 0\n\ndef getTags(listMedia):\n    tags = []\n    for media in listMedia:\n        for mediaTag in media.tags:\n            tags.append(mediaTag.name)\n    return Counter(tags)\n\ndef getMedia(locationId):\n    medias =  api.location_recent_media(location_id=locationId)\n    return medias[0]\n\n\nbestLocations = [];\nlatD=48.858844\nlonD=2.294351\n\nfor x in range(-10, 10):\n    for z in range(-10,10):\n        print(x,z)\n        locations = api.location_search(lat=48.858844+x*0.001, lng=2.294351+z*0.001)\n        for location in locations:\n            likes = 0\n            if not any(d['name'] == location.name for d in bestLocations):\n                images = getMedia(location.id)\n                likes = getNbLikes(images)\n                tags = getTags(images)\n                if len(images)>0 :\n                    bestLocations.append(dict(name=location.name,latitude=location.point.latitude,longitude=location.point.longitude,likes=likes,tags=tags,id=location.id,nbrImages=len(images)))\n\nfinalData = pd.DataFrame.from_dict(bestLocations)\nfinalData.to_csv('instadata.csv', sep='\\t', encoding='utf-8')\n\n\n</code>\n</pre>\n<p>We first query for the locations around the coordinates of the location we wish to know more about and then we query for the photos of each location and get the number of likes and the number of pictures for it.</p>\n<p>Note: You need to replace the Access Tokens and Client ID with the values you get from Instagram <a href=\"https://www.instagram.com/developer/clients/manage/\" target=\"_blank\">here</a>.</p>\n<p>After running the previous script for some time, we get a nice dataset that we can analyze with pandas.</p>\n<pre><code>> import pandas as pd\n> df = pd.read_csv(\"instadata.csv\",sep='\\t')\n> df.head(10)</code></pre>\n<p>This is the head of the dataFrame displayed in iPython Notebook.</p>\n<p><a href=\"https://datanice.files.wordpress.com/2015/09/screenshot-from-2015-09-04-222844.png\"><img data-attachment-id=\"10\" data-permalink=\"https://datanice.wordpress.com/2015/09/04/diy-use-instagram-data-to-plan-your-next-vacation/screenshot-from-2015-09-04-222844/#main\" data-orig-file=\"https://datanice.files.wordpress.com/2015/09/screenshot-from-2015-09-04-222844.png\" data-orig-size=\"1147,500\" data-comments-opened=\"1\" data-image-meta=\"{\"aperture\":\"0\",\"credit\":\"\",\"camera\":\"\",\"caption\":\"\",\"created_timestamp\":\"0\",\"copyright\":\"\",\"focal_length\":\"0\",\"iso\":\"0\",\"shutter_speed\":\"0\",\"title\":\"\",\"orientation\":\"0\"}\" data-image-title=\"Screenshot from 2015-09-04 22:28:44\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"https://datanice.files.wordpress.com/2015/09/screenshot-from-2015-09-04-222844.png?w=300\" data-large-file=\"https://datanice.files.wordpress.com/2015/09/screenshot-from-2015-09-04-222844.png?w=525\" class=\"alignnone size-large wp-image-10\" src=\"https://datanice.files.wordpress.com/2015/09/screenshot-from-2015-09-04-222844.png?w=525&#038;h=229\" alt=\"Screenshot from 2015-09-04 22:28:44\" srcset=\"https://datanice.files.wordpress.com/2015/09/screenshot-from-2015-09-04-222844.png?w=525&h=229 525w, https://datanice.files.wordpress.com/2015/09/screenshot-from-2015-09-04-222844.png?w=1050&h=458 1050w, https://datanice.files.wordpress.com/2015/09/screenshot-from-2015-09-04-222844.png?w=150&h=65 150w, https://datanice.files.wordpress.com/2015/09/screenshot-from-2015-09-04-222844.png?w=300&h=131 300w, https://datanice.files.wordpress.com/2015/09/screenshot-from-2015-09-04-222844.png?w=768&h=335 768w, https://datanice.files.wordpress.com/2015/09/screenshot-from-2015-09-04-222844.png?w=1024&h=446 1024w\" sizes=\"(max-width: 525px) 100vw, 525px\"   /></a></p>\n<p>Now let&#8217;s see which spots have the most likes per picture and which ones have the most pictures</p>\n<pre><code>gr = df.groupby('name').sum()</code></pre>\n<p>After dropping the useless columns</p>\n<pre><code>my_plot = gr.head(30).sort(columns='likes',ascending=False).plot(kind='bar',figsize=[15,5])</code></pre>\n<p><a href=\"https://datanice.files.wordpress.com/2015/09/index.png\"><img data-attachment-id=\"11\" data-permalink=\"https://datanice.wordpress.com/2015/09/04/diy-use-instagram-data-to-plan-your-next-vacation/index/#main\" data-orig-file=\"https://datanice.files.wordpress.com/2015/09/index.png\" data-orig-size=\"879,501\" data-comments-opened=\"1\" data-image-meta=\"{\"aperture\":\"0\",\"credit\":\"\",\"camera\":\"\",\"caption\":\"\",\"created_timestamp\":\"0\",\"copyright\":\"\",\"focal_length\":\"0\",\"iso\":\"0\",\"shutter_speed\":\"0\",\"title\":\"\",\"orientation\":\"0\"}\" data-image-title=\"index\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"https://datanice.files.wordpress.com/2015/09/index.png?w=300\" data-large-file=\"https://datanice.files.wordpress.com/2015/09/index.png?w=525\" class=\"alignnone size-large wp-image-11\" src=\"https://datanice.files.wordpress.com/2015/09/index.png?w=525&#038;h=299\" alt=\"index\" srcset=\"https://datanice.files.wordpress.com/2015/09/index.png?w=525&h=299 525w, https://datanice.files.wordpress.com/2015/09/index.png?w=150&h=85 150w, https://datanice.files.wordpress.com/2015/09/index.png?w=300&h=171 300w, https://datanice.files.wordpress.com/2015/09/index.png?w=768&h=438 768w, https://datanice.files.wordpress.com/2015/09/index.png 879w\" sizes=\"(max-width: 525px) 100vw, 525px\"   /></a></p>\n<p>This script could be improved with some text mining on the names, to combine the similar results. (You can see that we have multiple results for the Eiffel tower).</p>\n<p>The next step is to visualize the nearby pictures.<br />\nI put up a little angularJS application where we can select a location and see a list of pictures per location.<br />\nI&#8217;ll put the code online when I have more time.</p>\n<p><a href=\"https://datanice.files.wordpress.com/2015/09/screenshot-from-2015-09-04-235936.png\"><img data-attachment-id=\"12\" data-permalink=\"https://datanice.wordpress.com/2015/09/04/diy-use-instagram-data-to-plan-your-next-vacation/screenshot-from-2015-09-04-235936/#main\" data-orig-file=\"https://datanice.files.wordpress.com/2015/09/screenshot-from-2015-09-04-235936.png\" data-orig-size=\"608,576\" data-comments-opened=\"1\" data-image-meta=\"{\"aperture\":\"0\",\"credit\":\"\",\"camera\":\"\",\"caption\":\"\",\"created_timestamp\":\"0\",\"copyright\":\"\",\"focal_length\":\"0\",\"iso\":\"0\",\"shutter_speed\":\"0\",\"title\":\"\",\"orientation\":\"0\"}\" data-image-title=\"Screenshot from 2015-09-04 23:59:36\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"https://datanice.files.wordpress.com/2015/09/screenshot-from-2015-09-04-235936.png?w=300\" data-large-file=\"https://datanice.files.wordpress.com/2015/09/screenshot-from-2015-09-04-235936.png?w=525\" class=\"alignnone size-full wp-image-12\" src=\"https://datanice.files.wordpress.com/2015/09/screenshot-from-2015-09-04-235936.png?w=525\" alt=\"Screenshot from 2015-09-04 23:59:36\" srcset=\"https://datanice.files.wordpress.com/2015/09/screenshot-from-2015-09-04-235936.png?w=525 525w, https://datanice.files.wordpress.com/2015/09/screenshot-from-2015-09-04-235936.png?w=150 150w, https://datanice.files.wordpress.com/2015/09/screenshot-from-2015-09-04-235936.png?w=300 300w, https://datanice.files.wordpress.com/2015/09/screenshot-from-2015-09-04-235936.png 608w\" sizes=\"(max-width: 525px) 100vw, 525px\"   /></a></p>\n<p>Please let me know in the comments if you have any improvement ideas !</p>\n",
  "wfw:commentRss": "https://datanice.wordpress.com/2015/09/04/diy-use-instagram-data-to-plan-your-next-vacation/feed/",
  "slash:comments": 0,
  "media:content": [
    {
      "media:title": "aptissimum"
    },
    {
      "media:title": "https://images.unsplash.com/36/xIsiRLngSRWN02yA2BbK_submission-photo-7.jpg?q=80&#038;fm=jpg&#038;s=3a6dbf2c0735cde117a0e6e2fd11a84b"
    },
    {
      "media:title": "Screenshot from 2015-09-04 22:28:44"
    },
    {
      "media:title": "index"
    },
    {
      "media:title": "Screenshot from 2015-09-04 23:59:36"
    }
  ]
}