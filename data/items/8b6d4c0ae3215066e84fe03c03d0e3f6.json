{
  "title": "Martingales",
  "link": "",
  "published": "2017-10-20T07:44:00-07:00",
  "updated": "2017-10-20T07:44:00-07:00",
  "author": {
    "name": "Jonathan Landy"
  },
  "id": "tag:efavdb.com,2017-10-20:/martingales",
  "summary": "<p>Here, I give a quick review of the concept of a Martingale. A Martingale is a sequence of random variables satisfying a specific expectation conservation law. If one can identify a Martingale relating to some other sequence of random variables, its use can sometimes make quick work of certain expectation â€¦</p>",
  "content": "<p>Here, I give a quick review of the concept of a Martingale. A Martingale is a sequence of random variables satisfying a specific expectation conservation law. If one can identify a Martingale relating to some other sequence of random variables, its use can sometimes make quick work of certain expectation value&nbsp;evaluations.</p>\n<p>This note is adapted from Chapter 2 of Stochastic Calculus and Financial Applications, by&nbsp;Steele.</p>\n<h3>Definition</h3>\n<p>Often in random processes, one is interested in characterizing a sequence of random variables <span class=\"math\">\\(\\{X_i\\}\\)</span>. The example we will keep in mind is a set of variables <span class=\"math\">\\(X_i \\in \\{-1, 1\\}\\)</span> corresponding to the steps of an unbiased random walk in one-dimension. A Martingale process <span class=\"math\">\\(M_i = f(X_1, X_2, \\ldots X_i)\\)</span> is a derived random variable on top of the <span class=\"math\">\\(X_i\\)</span> variables satisfying the following conservation&nbsp;law\n</p>\n<div class=\"math\">\\begin{align} \\tag{1}\nE(M_i | X_1, \\ldots X_{i-1}) = M_{i-1}.\n\\end{align}</div>\n<p>\nFor example, in the unbiased random walk example, if we take <span class=\"math\">\\(S_n = \\sum_{i=1}^n X_i\\)</span>, then <span class=\"math\">\\(E(S_n) = S_{n-1}\\)</span>, so <span class=\"math\">\\(S_n\\)</span> is a Martingale. If we can develop or identify a Martingale for a given <span class=\"math\">\\(\\{X_i\\}\\)</span> process, it can often help us to quickly evaluate certain expectation values relating to the underlying process. Three useful Martingales&nbsp;follow.</p>\n<ol>\n<li>Again, the sum <span class=\"math\">\\(S_n = \\sum_{i=1}^n X_i\\)</span> is a Martingale, provided <span class=\"math\">\\(E(X_i) = 0\\)</span> for all <span class=\"math\">\\(i\\)</span>.</li>\n<li>The expression <span class=\"math\">\\(S_n^2 - n \\sigma^2\\)</span> is a Martingale, provided <span class=\"math\">\\(E(X_i) = 0\\)</span> and <span class=\"math\">\\(E(X_i^2) = \\sigma^2\\)</span> for all <span class=\"math\">\\(i\\)</span>. Proof: <div class=\"math\">\\begin{align} \\tag{2}\n    E(S_n^2 | X_1, \\ldots X_{n-1}) &amp;= \\sigma^2 + 2 E(X_n) S_{n-1} + S_{n-1}^2 - n \\sigma^2\\\\\n    &amp;= S_{n-1}^2 - (n-1) \\sigma^2.\n    \\end{align}</div>\n</li>\n<li>The product <span class=\"math\">\\(P_n = \\prod_{i=1}^n X_i\\)</span> is a Martingale, provided <span class=\"math\">\\(E(X_i) = 1\\)</span> for all <span class=\"math\">\\(i\\)</span>. One example of interest is\n    <div class=\"math\">\\begin{align} \\tag{3}\n    P_n = \\frac{\\exp \\left ( \\lambda \\sum_{i=1}^n X_i\\right)}{E(\\exp \\left ( \\lambda X \\right))^n}.\n    \\end{align}</div>\n    Here, <span class=\"math\">\\(\\lambda\\)</span> is a free tuning parameter. If we choose a <span class=\"math\">\\(\\lambda\\)</span> such that <span class=\"math\">\\(E(\\exp(\\lambda X)) = 1\\)</span> for our process, we can get a particularly simple&nbsp;form.</li>\n</ol>\n<h3>Stopped&nbsp;processes</h3>\n<p>In some games, we may want to setup rules that say we will stop the game at time <span class=\"math\">\\(\\tau\\)</span> if some condition is met at index <span class=\"math\">\\(\\tau\\)</span>. For example, we may stop a random walk (initialized at zero) if the walker gets to either position <span class=\"math\">\\(A\\)</span> or <span class=\"math\">\\(-B\\)</span> (wins <span class=\"math\">\\(A\\)</span> or loses <span class=\"math\">\\(B\\)</span>). This motivates defining the stopped Martingale&nbsp;as,\n</p>\n<div class=\"math\">\\begin{align}\nM_{n \\wedge \\tau} = \\begin{cases}\nM_n &amp;\\text{if } \\tau \\geq n \\\\\nM_{\\tau} &amp;\\text{else}. \\tag{4}\n\\end{cases}\n\\end{align}</div>\n<p>\nHere, we prove that if <span class=\"math\">\\(M_n\\)</span> is a Martingale, then so is $M_{n \\wedge \\tau} $. This is useful because it will tell us that the stopped Martingale has the same conservation law as the unstopped&nbsp;version.</p>\n<p>First, we note that if <span class=\"math\">\\(A_i \\equiv f_2(X_1, \\ldots X_{i-1})\\)</span> is some function of the observations so far, then the transformed&nbsp;process\n</p>\n<div class=\"math\">\\begin{align} \\tag{5}\n\\tilde{M}_n \\equiv M_0 + \\sum_{i=1}^n A_i (M_i - M_{i-1})\n\\end{align}</div>\n<p>\nis also a Martingale.&nbsp;Proof:\n</p>\n<div class=\"math\">\\begin{align} \\tag{6}\nE(\\tilde{M}_n | X_1, \\ldots X_{n-1}) = A_n \\left ( E(M_n) - M_{n-1} \\right) + \\tilde{M}_{n-1} = \\tilde{M}_{n-1}.\n\\end{align}</div>\n<p>With this result we can prove the stopped Martingale is also a Martingale. We can do that by writing <span class=\"math\">\\(A_i = 1(\\tau \\geq i)\\)</span> &#8212; where <span class=\"math\">\\(1\\)</span> is the indicator function. Plugging this into the above, we get the transformed&nbsp;Martingale,\n</p>\n<div class=\"math\">\\begin{align} \\nonumber \\tag{7}\n\\tilde{M}_n &amp;= M_0 + \\sum_{i=1}^n 1(\\tau \\geq i) (M_i - M_{i-1}) \\\\\n&amp;= \\begin{cases}\nM_n &amp; \\text{if } \\tau \\geq n \\\nM_{\\tau} &amp; \\text{else}.\n\\end{cases}\n\\end{align}</div>\n<p>\nThis is the stopped Martingale &#8212; indeed a Martingale, by the&nbsp;above.</p>\n<h3>Example&nbsp;applications</h3>\n<h3></h3>\n<h4>Problem&nbsp;1</h4>\n<p>Consider an unbiased random walker that takes steps of size <span class=\"math\">\\(1\\)</span>. If we stop the walk as soon as he reaches either <span class=\"math\">\\(A\\)</span> or <span class=\"math\">\\(-B\\)</span>, what is the probability that he is at <span class=\"math\">\\(A\\)</span> when the game&nbsp;stops?</p>\n<p>Solution: Let <span class=\"math\">\\(\\tau\\)</span> be the stopping time and let <span class=\"math\">\\(S_n = \\sum_{i=1}^n X_i\\)</span> be the walker&#8217;s position at time <span class=\"math\">\\(n\\)</span>. We know that <span class=\"math\">\\(S_n\\)</span> is a Martingale. By the above, so then is <span class=\"math\">\\(S_{n \\wedge \\tau}\\)</span>, the stopped process Martingale. By the Martingale&nbsp;property\n</p>\n<div class=\"math\">\\begin{align} \\tag{8}\nE(S_{n \\wedge \\tau}) = E(S_{i \\wedge \\tau})\n\\end{align}</div>\n<p>\nfor all <span class=\"math\">\\(i\\)</span>. In particular, plugging in <span class=\"math\">\\(i = 0\\)</span> gives <span class=\"math\">\\(E(S_{n \\wedge \\tau}) = 0\\)</span>. If we take <span class=\"math\">\\(n \\to \\infty\\)</span>,&nbsp;then\n</p>\n<div class=\"math\">\\begin{align} \\tag{9}\n\\lim_{n \\to \\infty} E(S_{n \\wedge \\tau}) \\to E(S_{\\tau}) = 0.\n\\end{align}</div>\n<p>\nBut we also&nbsp;have\n</p>\n<div class=\"math\">\\begin{align} \\tag{10}\nE(S_{\\tau}) = P(A) * A - (1 - P(A)) B.\n\\end{align}</div>\n<p>\nEquating (9) and (10)&nbsp;gives\n</p>\n<div class=\"math\">\\begin{equation} \\tag{11}\nP(A) = \\frac{B}{A + B}\n\\end{equation}</div>\n<h5>Problem&nbsp;2</h5>\n<p>In the game above, what is the expected stopping time? Solution: Use the stopped version of the Martingale <span class=\"math\">\\(S_n^2 - n \\sigma^2\\)</span>.</p>\n<h5>Problem&nbsp;3</h5>\n<p>In a biased version of the random walk game, what is the probability of stopping at <span class=\"math\">\\(A\\)</span>? Solution: Use the stopped Martingale of form <span class=\"math\">\\(P_n = \\frac{\\exp \\left ( \\lambda \\sum_{i=1}^n X_i\\right)}{E(\\exp \\left ( \\lambda X \\right))^n}\\)</span>, with <span class=\"math\">\\(\\exp[\\lambda] = q/p\\)</span>, where <span class=\"math\">\\(p = 1-q\\)</span> is the probability of step to the&nbsp;right.</p>\n<script type=\"text/javascript\">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {\n    var align = \"center\",\n        indent = \"0em\",\n        linebreak = \"false\";\n\n    if (false) {\n        align = (screen.width < 768) ? \"left\" : align;\n        indent = (screen.width < 768) ? \"0em\" : indent;\n        linebreak = (screen.width < 768) ? 'true' : linebreak;\n    }\n\n    var mathjaxscript = document.createElement('script');\n    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';\n    mathjaxscript.type = 'text/javascript';\n    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';\n\n    var configscript = document.createElement('script');\n    configscript.type = 'text/x-mathjax-config';\n    configscript[(window.opera ? \"innerHTML\" : \"text\")] =\n        \"MathJax.Hub.Config({\" +\n        \"    config: ['MMLorHTML.js'],\" +\n        \"    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } },\" +\n        \"    jax: ['input/TeX','input/MathML','output/HTML-CSS'],\" +\n        \"    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js'],\" +\n        \"    displayAlign: '\"+ align +\"',\" +\n        \"    displayIndent: '\"+ indent +\"',\" +\n        \"    showMathMenu: true,\" +\n        \"    messageStyle: 'normal',\" +\n        \"    tex2jax: { \" +\n        \"        inlineMath: [ ['\\\\\\\\(','\\\\\\\\)'] ], \" +\n        \"        displayMath: [ ['$$','$$'] ],\" +\n        \"        processEscapes: true,\" +\n        \"        preview: 'TeX',\" +\n        \"    }, \" +\n        \"    'HTML-CSS': { \" +\n        \"        availableFonts: ['STIX', 'TeX'],\" +\n        \"        preferredFont: 'STIX',\" +\n        \"        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} },\" +\n        \"        linebreaks: { automatic: \"+ linebreak +\", width: '90% container' },\" +\n        \"    }, \" +\n        \"}); \" +\n        \"if ('default' !== 'default') {\" +\n            \"MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {\" +\n                \"var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;\" +\n                \"VARIANT['normal'].fonts.unshift('MathJax_default');\" +\n                \"VARIANT['bold'].fonts.unshift('MathJax_default-bold');\" +\n                \"VARIANT['italic'].fonts.unshift('MathJax_default-italic');\" +\n                \"VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');\" +\n            \"});\" +\n            \"MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {\" +\n                \"var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;\" +\n                \"VARIANT['normal'].fonts.unshift('MathJax_default');\" +\n                \"VARIANT['bold'].fonts.unshift('MathJax_default-bold');\" +\n                \"VARIANT['italic'].fonts.unshift('MathJax_default-italic');\" +\n                \"VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');\" +\n            \"});\" +\n        \"}\";\n\n    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);\n    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);\n}\n</script>",
  "category": [
    "",
    ""
  ]
}