{
  "title": "Project planning with plotly",
  "link": "https://itsalocke.com/blog/project-planning-with-plotly/",
  "pubDate": "Mon, 26 Nov 2018 00:00:00 +0000",
  "guid": "https://itsalocke.com/blog/project-planning-with-plotly/",
  "description": "<p>Something a little different today for a quick chat about my latest\nproject and why I’m finding the <code>plotly</code> package so helpful!</p>\n\n<p>Are you like me and physically can’t function unless you’ve got a to do\nlist in front of you? Well even if you’re not, imagine my pain while I’m\nwearing my non - Locke Data hat and trying to plan out the final year of\nmy PhD thesis!</p>\n\n<p>I needed something that updated easily, something visual and something\nto keep my supervisors in the know. I’ve previously made gantt charts\nusing LaTeX but found it ridiculously clunky to get working and decided\nthere had to be a better way. And if I could include interactivity then\nall the better, which is how I discovered <code>plotly</code>.</p>\n\n<h2 id=\"plotly\">Plotly</h2>\n\n<p>The plotly package makes interactive, publication quality graphs online.\nIt uses the JavaScript graphing library and is really versatile! You\ncan make graphs, maps, 3D plots and, as I’m about to explain, gantt\ncharts.</p>\n<div class=\"highlight\"><pre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"><code class=\"language-r\" data-lang=\"r\"><span style=\"color:#f92672\">require</span>(plotly)</code></pre></div>\n<h2 id=\"step-by-step-gantt-chart\">Step by Step Gantt Chart</h2>\n\n<p>Install the packages you need for generating the gantt chart</p>\n<div class=\"highlight\"><pre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"><code class=\"language-r\" data-lang=\"r\"><span style=\"color:#f92672\">library</span>(RColorBrewer)\n<span style=\"color:#f92672\">library</span>(readxl)\n<span style=\"color:#f92672\">library</span>(widgetframe)</code></pre></div>\n<p>Setting fonts isn’t necessary as there are defaults, but it’s always\nnice to know how to do it should you want to.</p>\n<div class=\"highlight\"><pre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"><code class=\"language-r\" data-lang=\"r\">f <span style=\"color:#f92672\">&lt;-</span> <span style=\"color:#66d9ef\">list</span>(\n  family <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;Courier New, monospace&#34;</span>,\n  size <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">18</span>,\n  color <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;#7f7f7f&#34;</span>\n)</code></pre></div>\n<p>Set a title for the X axis. Uncomment the Y axis if you’d like to label\nthat too :)</p>\n<div class=\"highlight\"><pre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"><code class=\"language-r\" data-lang=\"r\">x <span style=\"color:#f92672\">&lt;-</span> <span style=\"color:#66d9ef\">list</span>(\n  title <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;Date&#34;</span>,\n  titlefont <span style=\"color:#f92672\">=</span> f\n)\n<span style=\"color:#75715e\"># y &lt;- list(</span>\n<span style=\"color:#75715e\">#   title = &#34;Task Number&#34;,</span>\n<span style=\"color:#75715e\">#   titlefont = f</span>\n<span style=\"color:#75715e\"># ) </span></code></pre></div>\n<h3 id=\"read-in-your-data\">Read in your data</h3>\n\n<p>To make this gantt chart work, you need a column with a date you intend\nto <code>start</code> the task - we’ll make sure this is formatted in a minute. You\nalso need a column with a <code>duration</code> to generate the length of the bar\nfor each task (this is in days in my case!) and if you want to group and colour code your tasks, it’s\nthe <code>Chapter</code> column which does this.</p>\n\n<p>The <code>Task</code> and <code>Progress</code> columns aren’t necessary, but they are good\nfor labelling and keeping yourself accountable, and an easy way to share\nupdates with people who are checking up on your\nprogress!</p>\n<div class=\"highlight\"><pre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"><code class=\"language-r\" data-lang=\"r\">df <span style=\"color:#f92672\">&lt;-</span> read_xlsx(path <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;../../../../Book_thesis/00_Time_Plan/timeplan.xlsx&#34;</span>, sheet <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">1</span>) \n<span style=\"color:#66d9ef\">head</span>(df)</code></pre></div>\n<pre><code>## # A tibble: 6 x 5\n##   Task                       start               Duration Chapter Progress\n##   &lt;chr&gt;                      &lt;dttm&gt;                 &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   \n## 1 Review literature review … 2018-07-03 00:00:00        2 2       Complet…\n## 2 2.1 Energy on a larger sc… 2018-07-05 00:00:00        5 2       Complet…\n## 3 2.1 Energy in a UK context 2018-07-12 00:00:00        7 2       Complet…\n## 4 2.2 Traditional collectio… 2018-07-23 00:00:00        3 2       Complet…\n## 5 2.2 New technologies and … 2018-07-26 00:00:00        3 2       Complet…\n## 6 2.3 Data Bias and Represe… 2018-07-31 00:00:00        3 2       Complet…\n</code></pre>\n\n<p>Make sure your date column is correctly formatted</p>\n<div class=\"highlight\"><pre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"><code class=\"language-r\" data-lang=\"r\">df<span style=\"color:#f92672\">$</span>start <span style=\"color:#f92672\">&lt;-</span> <span style=\"color:#66d9ef\">as.Date</span>(df<span style=\"color:#f92672\">$</span>start, format<span style=\"color:#f92672\">=</span><span style=\"color:#e6db74\">&#34;%Y-%m-%d&#34;</span>) </code></pre></div>\n<p>Next generate a list of colours. This corresponds to my <code>Chapter</code>\ncolumn, so change this accordingly. It creates a list assigning a colour\nto each group of\ntasks</p>\n<div class=\"highlight\"><pre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"><code class=\"language-r\" data-lang=\"r\">cols <span style=\"color:#f92672\">&lt;-</span> brewer.pal(<span style=\"color:#66d9ef\">length</span>(<span style=\"color:#66d9ef\">unique</span>(<span style=\"color:#66d9ef\">factor</span>(df<span style=\"color:#f92672\">$</span>Chapter))), name <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;Set3&#34;</span>) <span style=\"color:#75715e\"># Generate a list of colours that are as long as your group of tasks</span>\n<span style=\"color:#75715e\"># This won&#39;t work if column has blanks</span>\n\ndf<span style=\"color:#f92672\">$</span>color <span style=\"color:#f92672\">&lt;-</span> <span style=\"color:#66d9ef\">factor</span>(df<span style=\"color:#f92672\">$</span>Chapter, labels <span style=\"color:#f92672\">=</span> cols) <span style=\"color:#75715e\"># Attach these colours as factors to each group of tasks</span></code></pre></div>\n<p>The next chunk of code generates a date line updated automatically based\non your computer&rsquo;s system date.</p>\n<div class=\"highlight\"><pre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"><code class=\"language-r\" data-lang=\"r\"><span style=\"color:#75715e\"># annotation</span>\na <span style=\"color:#f92672\">&lt;-</span> <span style=\"color:#66d9ef\">list</span>(text <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;Today&#39;s date&#34;</span>,\n          x <span style=\"color:#f92672\">=</span> <span style=\"color:#66d9ef\">Sys.Date</span>(),\n          y <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">1.02</span>,\n          xref <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#39;x&#39;</span>,\n          yref <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#39;paper&#39;</span>,\n          xanchor <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#39;left&#39;</span>,\n          showarrow <span style=\"color:#f92672\">=</span> <span style=\"color:#66d9ef\">FALSE</span>\n)\n\n<span style=\"color:#75715e\"># use shapes to create a line</span>\nl <span style=\"color:#f92672\">&lt;-</span> <span style=\"color:#66d9ef\">list</span>(type <span style=\"color:#f92672\">=</span> line,\n          x0 <span style=\"color:#f92672\">=</span> <span style=\"color:#66d9ef\">Sys.Date</span>(),\n          x1 <span style=\"color:#f92672\">=</span> <span style=\"color:#66d9ef\">Sys.Date</span>(),\n          y0 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>,\n          y1 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">1</span>,\n          xref <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#39;x&#39;</span>,\n          yref <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#39;paper&#39;</span>,\n          line <span style=\"color:#f92672\">=</span> <span style=\"color:#66d9ef\">list</span>(color <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#39;black&#39;</span>,\n                      width <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0.7</span>)\n)</code></pre></div>\n<p>Build your plot combining all the elements you generated earlier. Change\nthe <code>text</code> section to personalise your chart</p>\n<div class=\"highlight\"><pre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"><code class=\"language-r\" data-lang=\"r\">p <span style=\"color:#f92672\">&lt;-</span> plot_ly()\n<span style=\"color:#66d9ef\">for</span>(i <span style=\"color:#66d9ef\">in</span> <span style=\"color:#ae81ff\">1</span><span style=\"color:#f92672\">:</span>(<span style=\"color:#66d9ef\">nrow</span>(df) <span style=\"color:#f92672\">-</span> <span style=\"color:#ae81ff\">1</span>)){\n  p <span style=\"color:#f92672\">&lt;-</span> add_trace(p,\n                 x <span style=\"color:#f92672\">=</span> <span style=\"color:#66d9ef\">c</span>(df<span style=\"color:#f92672\">$</span>start[i], df<span style=\"color:#f92672\">$</span>start[i] <span style=\"color:#f92672\">+</span> df<span style=\"color:#f92672\">$</span>Duration[i]), \n                 y <span style=\"color:#f92672\">=</span> <span style=\"color:#66d9ef\">c</span>(i, i), \n                 mode <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;lines&#34;</span>,\n                 line <span style=\"color:#f92672\">=</span> <span style=\"color:#66d9ef\">list</span>(color <span style=\"color:#f92672\">=</span> df<span style=\"color:#f92672\">$</span>color[i], width <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">20</span>),\n                 showlegend <span style=\"color:#f92672\">=</span> F,\n                 hoverinfo <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;text&#34;</span>,\n                 text <span style=\"color:#f92672\">=</span> <span style=\"color:#66d9ef\">paste</span>(<span style=\"color:#e6db74\">&#34;Task: &#34;</span>, df<span style=\"color:#f92672\">$</span>Task[i], <span style=\"color:#e6db74\">&#34;&lt;br&gt;&#34;</span>,\n                              <span style=\"color:#e6db74\">&#34;Duration: &#34;</span>, df<span style=\"color:#f92672\">$</span>Duration[i], <span style=\"color:#e6db74\">&#34;days&lt;br&gt;&#34;</span>,\n                              <span style=\"color:#e6db74\">&#34;Chapter: &#34;</span>, df<span style=\"color:#f92672\">$</span>Chapter[i], <span style=\"color:#e6db74\">&#34;&lt;br&gt;&#34;</span>,\n                              <span style=\"color:#e6db74\">&#34;Status: &#34;</span>, df<span style=\"color:#f92672\">$</span>Progress[i]), <span style=\"color:#e6db74\">&#34;&lt;br&gt;&#34;</span>,\n                 evaluate <span style=\"color:#f92672\">=</span> T\n  )\n}</code></pre></div>\n<p>Now simply plot your chart and add axis labels, your title and ‘Today’s\ndate’ - The plotly package will generate an interactive chart that you\ncan zoom, hover and share!</p>\n<div class=\"highlight\"><pre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"><code class=\"language-r\" data-lang=\"r\">p <span style=\"color:#f92672\">%&gt;%</span>\n  layout(xaxis <span style=\"color:#f92672\">=</span> x, \n         <span style=\"color:#75715e\"># yaxis = y,</span>\n         title <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;Thesis Schedule&#34;</span>,\n         annotations <span style=\"color:#f92672\">=</span> a,\n         shapes <span style=\"color:#f92672\">=</span> l)</code></pre></div>\n<iframe id=\"serviceFrameSend\" src=\"../img/p.html\" width=\"1000\" height=\"1000\" frameborder=\"0\"></iframe>\n\n<p>Ta-Dah! Now all I have to do is stick to it…</p>"
}