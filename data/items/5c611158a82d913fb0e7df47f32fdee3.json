{
  "title": "Selected Financial Applications",
  "link": "https://www.mathematica-journal.com/2021/12/16/selected-financial-applications/",
  "comments": "https://www.mathematica-journal.com/2021/12/16/selected-financial-applications/#respond",
  "pubDate": "Thu, 16 Dec 2021 20:31:45 +0000",
  "dc:creator": "Todd Akers",
  "category": "Volume 23",
  "guid": "https://www.mathematica-journal.com/?p=62624",
  "description": "This article shows how to use some of Mathematica’s built-in financial functions and define new functions useful for the practical analysis of real-world financial data. The main topics covered are linear programming and its application in bond portfolio management, conditional value-at-risk minimization, introductory time-series analysis, simulation, bootstrapping, robust equity portfolio optimization and artificial intelligence. 1. [&#8230;]",
  "content:encoded": "<div>\n<p>This article shows how to use some of Mathematica<span class=\"special-character CloseCurlyQuote\">’</span>s built-in financial functions and define new functions useful for the practical analysis of real-world financial data. The main topics covered are linear programming and its application in bond portfolio management, conditional value-at-risk minimization, introductory time-series analysis, simulation, bootstrapping, robust equity portfolio optimization and artificial intelligence.<span id=\"more-62624\"></span></p>\n<h3>1. Introduction</h3>\n<p>Our main objective is to apply the Wolfram Language to solve financial models. We do not explain financial concepts or any mathematical background related to the financial applications introduced in this article. Nor do we introduce Mathematica. Wellin [<a href=\"#Wellin\">1</a>] gives a good introduction to programming in Mathematica. Mathematical background related to the models discussed here can be found in standard textbooks, including the ones cited.</p>\n<p>First, we define three supporting functions used in the rest of this article.</p>\n<h4><img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_1.gif\" alt=\"\" width=\"118\" height=\"14\" /></h4>\n<p>The <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_2.gif\" alt=\"\" width=\"101\" height=\"14\" /> function downloads historical stock returns given its four arguments:</p>\n<p><span class=\"special-character Bullet\">•</span> a list of one or more ticker symbols<br />\n<span class=\"special-character Bullet\">•</span> the start date as a date object<br />\n<span class=\"special-character Bullet\">•</span> the end date as a date object<br />\n<span class=\"special-character Bullet\">•</span> the period as the frequency of data</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_1.gif\" alt=\"\" width=\"580\" height=\"158\" /></p>\n<h4><img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_3.gif\" alt=\"\" width=\"84\" height=\"14\" /></h4>\n<p>The <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_4.gif\" alt=\"\" width=\"72\" height=\"13\" /> function computes 11 basic descriptive statistics given a list or a matrix of returns as its input argument.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_2.gif\" alt=\"\" width=\"580\" height=\"187\" /></p>\n<h4><img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_5.gif\" alt=\"\" width=\"126\" height=\"14\" /></h4>\n<p>The <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_6.gif\" alt=\"\" width=\"108\" height=\"14\" /> function was taken from Stack Exchange Network (<a href=\"https://mathematica.stackexchange.com/questions/194234/plot-of-histogram-similar-to-output-from-risk\" target=\"_blank\">https://mathematica.stackexchange.com/questions/194234/plot-of-histogram-similar-to-output-from-risk</a>) and modified. The function takes a vector of numerical data and returns a histogram with a handle on each side. You can drag these two thin vertical gray lines to vary the percentage of data within two values.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_3.gif\" alt=\"\" width=\"580\" height=\"428\" /></p>\n<h4>Example</h4>\n<p>For example, this downloads monthly historical stock returns for Boeing Company (BA), Apple Inc. (AAPL) and NVIDIA Corporation (NVDA) for the period May 1, 2000, to May 30, 2019, and computes descriptive statistics. We chose returns of the Boeing Company for the histogram. Drag the handles at the far ends of the histogram (the thin vertical lines) to see the percentage of values that lie within two values.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_4.gif\" alt=\"\" width=\"580\" height=\"14\" /></p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_5.gif\" alt=\"\" width=\"461\" height=\"77\" /></p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_1.gif\" alt=\"\" width=\"411\" height=\"534\" /></p>\n<p>The article is organized as follows:</p>\n<p><span class=\"special-character Bullet\">•</span> Section 2 introduces linear programming and applies it to bond portfolio management.</p>\n<p><span class=\"special-character Bullet\">•</span> Section 3 discusses mean-conditional value-at-risk portfolio optimization.</p>\n<p><span class=\"special-character Bullet\">•</span> Section 4 shows how to use built-in functions for introductory financial time-series analysis.</p>\n<p><span class=\"special-character Bullet\">•</span> Section 5 describes how simulation can be used in capital budgeting.</p>\n<p><span class=\"special-character Bullet\">•</span> Section 6 applies bootstrapping to risk management and financial planning.</p>\n<p><span class=\"special-character Bullet\">•</span> Section 7 describes robust equity portfolio optimization.</p>\n<p><span class=\"special-character Bullet\">•</span> Section 8 introduces functions useful for machine learning.</p>\n<p><span class=\"special-character Bullet\">•</span> Finally, the last section concludes the discussion.</p>\n<h3>2. Linear Programming and Applications</h3>\n<p>In this section, we illustrate a few applications of linear programming to financial problems similar to those in Cornu<span class=\"special-character EAcute\">é</span>jols, Pe<span class=\"special-character NTilde\">ñ</span>a and T<span class=\"special-character UDoubleDot\">ü</span>t<span class=\"special-character UDoubleDot\">ü</span>nc<span class=\"special-character UDoubleDot\">ü</span> [<a href=\"#Cornuejols-Pena\">2</a>]. A linear program is an optimization problem whose purpose is to minimize or maximize a linear objective function subject to linear constraints. We first decide the decision variables, objective function and constraints. Then we find the values of the decision variables to optimize the objective function.</p>\n<p>For vectors <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_7.gif\" alt=\"\" width=\"34\" height=\"12\" />, <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_8.gif\" alt=\"\" width=\"37\" height=\"12\" /> and <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_9.gif\" alt=\"\" width=\"36\" height=\"12\" /> and matrices <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_10.gif\" alt=\"\" width=\"50\" height=\"14\" /> and <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_11.gif\" alt=\"\" width=\"48\" height=\"12\" />, we can specify a general linear program in the following form:</p>\n<p><img style=\"vertical-align: middle;\" title=\"minimize_(x) cx (objective function); subject to A x=b (equality constraints); D x>=d (inequality constraints); l<=x<=u (lower and upper bounds)\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Image_1.gif\" alt=\"minimize_(x) cx (objective function); subject to A x=b (equality constraints); D x>=d (inequality constraints); l<=x<=u (lower and upper bounds)\" width=\"225\" height=\"73\" /></p>\n<p>We can convert any <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_12.gif\" alt=\"\" width=\"8\" height=\"12\" /> constraint to <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_13.gif\" alt=\"\" width=\"8\" height=\"12\" /> by adding auxiliary variables.</p>\n<p>The Wolfram Language has built-in functions to solve linear optimization problems with real variables. They include:</p>\n<p><span class=\"special-character Bullet\">•</span> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_14.gif\" alt=\"\" width=\"122\" height=\"14\" /><br />\n<span class=\"special-character Bullet\">•</span> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_15.gif\" alt=\"\" width=\"79\" height=\"13\" /><br />\n<span class=\"special-character Bullet\">•</span> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_16.gif\" alt=\"\" width=\"79\" height=\"13\" /><br />\n<span class=\"special-character Bullet\">•</span> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_17.gif\" alt=\"\" width=\"65\" height=\"13\" /><br />\n<span class=\"special-character Bullet\">•</span> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_18.gif\" alt=\"\" width=\"65\" height=\"13\" /><br />\n<span class=\"special-character Bullet\">•</span> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_19.gif\" alt=\"\" width=\"58\" height=\"13\" /><br />\n<span class=\"special-character Bullet\">•</span> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_20.gif\" alt=\"\" width=\"58\" height=\"13\" /></p>\n<p>For large-scale problems, the most flexible and efficient of these is <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_21.gif\" alt=\"\" width=\"122\" height=\"14\" />. The others are appropriate for solving linear programs written in terms of equations.</p>\n<h4>Example Using <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_22.gif\" alt=\"\" width=\"93\" height=\"14\" /></h4>\n<p>We consider an example very similar to the one presented in [<a href=\"#Cornuejols-Pena\">2</a>]. Assume that we have obligations to pay cash flows in the next eight years as shown in the following table. The first row shows years and the second row shows the amount of cash to be paid each year.</p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_2.gif\" alt=\"\" width=\"423\" height=\"43\" /></p>\n<p>Also assume that we have five government bonds available to invest with the cash flows from the obligations and current prices given as follows.</p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_3.gif\" alt=\"\" width=\"410\" height=\"181\" /></p>\n<p>To make a portfolio that minimizes the overall cost and still meets all the expected future cash payments, we can decide on how to allocate the funds by converting this problem into a linear program and solving it. Assume that <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_23.gif\" alt=\"\" width=\"10\" height=\"12\" /> is the number of bonds <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_24.gif\" alt=\"\" width=\"3\" height=\"12\" /> to purchase.</p>\n<p>We define four variables for convenience.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_6.gif\" alt=\"\" width=\"172\" height=\"149\" /></p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_7.gif\" alt=\"\" width=\"288\" height=\"13\" /></p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_8.gif\" alt=\"\" width=\"161\" height=\"14\" /></p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_4.gif\" alt=\"\" width=\"123\" height=\"14\" /></p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_9.gif\" alt=\"\" width=\"208\" height=\"14\" /></p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_5.gif\" alt=\"\" width=\"281\" height=\"13\" /></p>\n<p>Then the problem can be stated as follows.</p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_6.gif\" alt=\"\" width=\"340\" height=\"177\" /></p>\n<p>This solves the problem.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_10.gif\" alt=\"\" width=\"317\" height=\"107\" /></p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_7.gif\" alt=\"\" width=\"461\" height=\"14\" /></p>\n<h4>Same Example Using <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_25.gif\" alt=\"\" width=\"143\" height=\"14\" /></h4>\n<p>The problem can also be solved using the <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_26.gif\" alt=\"\" width=\"122\" height=\"14\" /> function. One of its most useful forms is <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_27.gif\" alt=\"\" width=\"233\" height=\"14\" />, where:</p>\n<p><span class=\"special-character Bullet\">•</span> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_28.gif\" alt=\"\" width=\"7\" height=\"13\" /> is the vector of coefficients of the objective function.</p>\n<p><span class=\"special-character Bullet\">•</span> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_29.gif\" alt=\"\" width=\"7\" height=\"13\" /> is the matrix of coefficients in the constraints.</p>\n<p><span class=\"special-character Bullet\">•</span> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_30.gif\" alt=\"\" width=\"7\" height=\"13\" /> is a two-column matrix representing the constants on the right side of the constraints and the direction of inequality.</p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_8.gif\" alt=\"\" width=\"43\" height=\"57\" /></p>\n<p><span class=\"special-character Bullet\">•</span> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_31.gif\" alt=\"\" width=\"43\" height=\"13\" /> is a two-column matrix of lower and upper bounds for the decision variables.</p>\n<p>The variables <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_32.gif\" alt=\"\" width=\"7\" height=\"13\" /> and <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_33.gif\" alt=\"\" width=\"7\" height=\"13\" /> were defined before; here they are displayed in matrix form.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_11.gif\" alt=\"\" width=\"101\" height=\"13\" /></p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_9.gif\" alt=\"\" width=\"63\" height=\"78\" /></p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_12.gif\" alt=\"\" width=\"101\" height=\"13\" /></p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_10.gif\" alt=\"\" width=\"190\" height=\"126\" /></p>\n<p>We define <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_34.gif\" alt=\"\" width=\"7\" height=\"13\" /> from <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_35.gif\" alt=\"\" width=\"7\" height=\"14\" /> and <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_36.gif\" alt=\"\" width=\"43\" height=\"13\" />.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_13.gif\" alt=\"\" width=\"207\" height=\"14\" /></p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_11.gif\" alt=\"\" width=\"64\" height=\"126\" /></p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_14.gif\" alt=\"\" width=\"338\" height=\"14\" /></p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_12.gif\" alt=\"\" width=\"43\" height=\"78\" /></p>\n<p>This solves the problem.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_15.gif\" alt=\"\" width=\"325\" height=\"76\" /></p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_13.gif\" alt=\"\" width=\"311\" height=\"13\" /></p>\n<p>Mathematica<span class=\"special-character CloseCurlyQuote\">’</span>s built-in capabilities to solve linear programming problems can be used in a wide variety of financial problems. We refer interested readers to [<a href=\"#Cornuejols-Pena\">2</a>].</p>\n<h3>3. Mean-CVaR Optimization</h3>\n<p>In this section, we solve the mean-CVaR portfolio problem, which was proposed by Rockafellar and Uryasev [<a href=\"#Rockafellar-Uryasev\">3</a>]. CVaR optimization does not depend on any assumption of how returns are distributed, but it works for the normal distribution. We summarize the linear programming formulation of the CVaR problem.</p>\n<p>Following [<a href=\"#Rockafellar-Uryasev\">3</a>], <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_37.gif\" alt=\"\" width=\"20\" height=\"12\" /> is the joint density function of the underlying asset returns <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_38.gif\" alt=\"\" width=\"99\" height=\"12\" />, where <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_39.gif\" alt=\"\" width=\"9\" height=\"12\" /> is the return on asset <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_40.gif\" alt=\"\" width=\"3\" height=\"12\" />; <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_41.gif\" alt=\"\" width=\"36\" height=\"12\" /> is the loss associated with the decision vector <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_42.gif\" alt=\"\" width=\"106\" height=\"12\" />, where <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_43.gif\" alt=\"\" width=\"12\" height=\"12\" /> is the proportion of money invested in asset <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_44.gif\" alt=\"\" width=\"3\" height=\"12\" />; and <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_45.gif\" alt=\"\" width=\"7\" height=\"12\" /> is the <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_46.gif\" alt=\"\" width=\"33\" height=\"12\" />-quantile of the loss distribution.</p>\n<p>Then the CVaR can be defined as:</p>\n<p><img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_47.gif\" alt=\"\" width=\"159\" height=\"26\" />,</p>\n<p>where <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_48.gif\" alt=\"\" width=\"7\" height=\"12\" /> is expectation and <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_49.gif\" alt=\"\" width=\"82\" height=\"29\" /></p>\n<p>For a sample size <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_50.gif\" alt=\"\" width=\"6\" height=\"12\" />, the CVaR is approximately:</p>\n<p><img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_51.gif\" alt=\"\" width=\"187\" height=\"26\" />.</p>\n<p>The problem can be restated as a linear optimization problem by introducing auxiliary variables, one for each observation in the sample:</p>\n<p>Find <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_52.gif\" alt=\"\" width=\"135\" height=\"26\" />,</p>\n<p>subject to <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_53.gif\" alt=\"\" width=\"86\" height=\"12\" /> and <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_54.gif\" alt=\"\" width=\"30\" height=\"12\" /> for <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_55.gif\" alt=\"\" width=\"58\" height=\"12\" />.</p>\n<p>As a linear program, the problem is:</p>\n<p>Find <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_56.gif\" alt=\"\" width=\"135\" height=\"26\" />,</p>\n<p>subject to</p>\n<p><img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_57.gif\" alt=\"\" width=\"86\" height=\"12\" /> and <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_58.gif\" alt=\"\" width=\"30\" height=\"12\" /> for <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_59.gif\" alt=\"\" width=\"58\" height=\"12\" />,</p>\n<p><img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_60.gif\" alt=\"\" width=\"57\" height=\"14\" /> and <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_61.gif\" alt=\"\" width=\"32\" height=\"12\" /> for <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_62.gif\" alt=\"\" width=\"55\" height=\"12\" />,</p>\n<p><img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_63.gif\" alt=\"\" width=\"67\" height=\"12\" />,</p>\n<p>where <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_64.gif\" alt=\"\" width=\"81\" height=\"12\" />, <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_65.gif\" alt=\"\" width=\"49\" height=\"12\" /> and <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_66.gif\" alt=\"\" width=\"13\" height=\"12\" /> is the target optimal portfolio return.</p>\n<p>We define the function <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_67.gif\" alt=\"\" width=\"122\" height=\"14\" /> to estimate the optimal weights that minimize CVaR. It takes three arguments:</p>\n<p><span class=\"special-character Bullet\">•</span> the returns matrix (<img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_68.gif\" alt=\"\" width=\"50\" height=\"13\" />)</p>\n<p><span class=\"special-character Bullet\">•</span> the target portfolio return (<img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_69.gif\" alt=\"\" width=\"122\" height=\"14\" />)</p>\n<p><span class=\"special-character Bullet\">•</span> the confidence level (<img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_70.gif\" alt=\"\" width=\"7\" height=\"13\" />), between 0.9 and 0.99</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_16.gif\" alt=\"\" width=\"580\" height=\"395\" /></p>\n<h4>Example</h4>\n<p>This downloads monthly returns of three stocks over the period May 1, 2000, to May 30, 2019, and computes the CVaR-based optimal weights and associated values given the target portfolio return and confidence level.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_17.gif\" alt=\"\" width=\"580\" height=\"14\" /></p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_18.gif\" alt=\"\" width=\"289\" height=\"14\" /></p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_14.gif\" alt=\"\" width=\"195\" height=\"117\" /></p>\n<p>The function computes optimal weights for a long-only portfolio. It can easily be modified to account for short-selling.</p>\n<h3>4. Introductory Time-Series Analysis and Forecasting</h3>\n<p>Data collected over time is common in finance. Mathematica has many built-in functions to model the stochastic nature of financial time series and to forecast the future value of a series. This section gives examples of functions that are useful for model specification, estimation, diagnostics and forecasting of univariate time-series data.</p>\n<h4>Constructing and Visualizing Time Series</h4>\n<p>The first step in any exploratory analysis is to construct and plot time series. You can use the built-in functions <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_71.gif\" alt=\"\" width=\"72\" height=\"13\" /> and <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_72.gif\" alt=\"\" width=\"86\" height=\"14\" /> to construct financial time series as pairs <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_73.gif\" alt=\"\" width=\"32\" height=\"12\" />. There are two formats for each:</p>\n<p><span class=\"special-character Bullet\">•</span> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_74.gif\" alt=\"\" width=\"169\" height=\"12\" /></p>\n<p><span class=\"special-character Bullet\">•</span> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_75.gif\" alt=\"\" width=\"188\" height=\"12\" /></p>\n<p><span class=\"special-character Bullet\">•</span> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_76.gif\" alt=\"\" width=\"183\" height=\"12\" /></p>\n<p><span class=\"special-character Bullet\">•</span> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_77.gif\" alt=\"\" width=\"202\" height=\"12\" /></p>\n<p>Time-series data can be manipulated using many built-in functions; see the documentation.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_19.gif\" alt=\"\" width=\"88\" height=\"13\" /></p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_15-1.gif\" alt=\"\" width=\"580\" height=\"123\" /></p>\n<p>Once we create a time series, we can use functions like <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_78.gif\" alt=\"\" width=\"86\" height=\"13\" /> or <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_79.gif\" alt=\"\" width=\"86\" height=\"13\" /> to visualize it.</p>\n<p>We illustrate the historical global price of WTI Crude (POILWTIUSDM). First, we download the historical price of WTI crude oil since January, 1990, and then make a plot. Use the API key 207071a5f2e90e7816259d3c32c1ab81 if needed.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_20.gif\" alt=\"\" width=\"555\" height=\"91\" /></p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_16-1.gif\" alt=\"\" width=\"360\" height=\"241\" /></p>\n<h4>Model Fitting and Its Diagnostics</h4>\n<p>The built-in function <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_80.gif\" alt=\"\" width=\"130\" height=\"13\" /> supports both linear and nonlinear time-series models. It fits an automatically selected parametric model to a time series. We can customize the model fit specification by changing its options. The currently supported families of models are:</p>\n<p><span class=\"special-character Bullet\">•</span> autoregressive (AR)</p>\n<p><span class=\"special-character Bullet\">•</span> moving-average (MA)</p>\n<p><span class=\"special-character Bullet\">•</span> autoregressive moving-average (ARMA)</p>\n<p><span class=\"special-character Bullet\">•</span> autoregressive integrated moving-average (ARIMA)</p>\n<p><span class=\"special-character Bullet\">•</span> seasonal autoregressive moving-average (SARMA)</p>\n<p><span class=\"special-character Bullet\">•</span> seasonal integrated autoregressive moving-average (SARIMA)</p>\n<p><span class=\"special-character Bullet\">•</span> autoregressive conditionally heteroscedastic (ARCH)</p>\n<p><span class=\"special-character Bullet\">•</span> generalized autoregressive conditionally heteroscedastic (GARCH)</p>\n<p>You can find descriptions of these models in any time-series books, including Tsay [<a href=\"#Tsay\">4</a>].</p>\n<p>Although <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_81.gif\" alt=\"\" width=\"130\" height=\"13\" /> selects the model automatically, there are many built-in functions for choosing appropriate values for the parameterizations for a given family and checking the appropriateness of the fitted models.</p>\n<p>Next, we are going to show the use of some tools for model specification and checking the adequacy of fitted models.</p>\n<p>Use <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_82.gif\" alt=\"\" width=\"137\" height=\"13\" /> to test whether the data is autocorrelated. (Use <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_83.gif\" alt=\"\" width=\"187\" height=\"13\" /> to estimate the partial correlation function of the data.)</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_21.gif\" alt=\"\" width=\"580\" height=\"30\" /></p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_17.gif\" alt=\"\" width=\"146\" height=\"46\" /></p>\n<p>Use <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_84.gif\" alt=\"\" width=\"86\" height=\"13\" /> to test whether data comes from an autoregressive time-series process with unit root.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_22.gif\" alt=\"\" width=\"580\" height=\"14\" /></p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_18.gif\" alt=\"\" width=\"195\" height=\"78\" /></p>\n<p>A number of other tools are available for model specification:</p>\n<p><span class=\"special-character Bullet\">•</span> Akaike information criterion (AIC)</p>\n<p><span class=\"special-character Bullet\">•</span> Finite sample corrected AIC (AICc)</p>\n<p><span class=\"special-character Bullet\">•</span> Bayesian information criterion (BIC)</p>\n<p><span class=\"special-character Bullet\">•</span> Schwartz<span class=\"special-character Dash\">–</span>Bayes information criterion (SBC)</p>\n<p>To choose the appropriate model for the <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_85.gif\" alt=\"\" width=\"101\" height=\"13\" />, we can do the following. (For information on <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_86.gif\" alt=\"\" width=\"86\" height=\"13\" />, see the Mathematica help system.)</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_23.gif\" alt=\"\" width=\"580\" height=\"29\" /></p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_19.gif\" alt=\"\" width=\"385\" height=\"373\" /></p>\n<p>Once the model has been specified, you can estimate its parameters with <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_87.gif\" alt=\"\" width=\"130\" height=\"13\" /> and you can assess its goodness of fit through analysis of residuals.</p>\n<p>This estimates the parameters of the model for <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_88.gif\" alt=\"\" width=\"101\" height=\"13\" />.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_24.gif\" alt=\"\" width=\"518\" height=\"13\" /></p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_25.gif\" alt=\"\" width=\"237\" height=\"13\" /></p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_20.gif\" alt=\"\" width=\"279\" height=\"34\" /></p>\n<p>Use <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_89.gif\" alt=\"\" width=\"50\" height=\"13\" />, <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_90.gif\" alt=\"\" width=\"50\" height=\"13\" /> or <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_91.gif\" alt=\"\" width=\"86\" height=\"14\" /> of the residuals to assess the whiteness of the model residuals.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_26.gif\" alt=\"\" width=\"400\" height=\"14\" /></p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_21.gif\" alt=\"\" width=\"576\" height=\"135\" /></p>\n<h4>Forecasting</h4>\n<p>A primary objective of building a time-series model is to forecast its future values. Prediction limits are important to assess the potential accuracy of the forecast. We can use <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_92.gif\" alt=\"\" width=\"130\" height=\"13\" /> to forecast unobserved future values. The function takes the methods <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_93.gif\" alt=\"\" width=\"28\" height=\"13\" />, <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_94.gif\" alt=\"\" width=\"86\" height=\"13\" /> and <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_95.gif\" alt=\"\" width=\"57\" height=\"13\" />. We use mean-squared errors to get the precision of our prediction.</p>\n<p>This calculates and plots the forecast for the next 5 months of the series within 95% confidence limits.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_27.gif\" alt=\"\" width=\"580\" height=\"264\" /></p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_22-1.gif\" alt=\"\" width=\"360\" height=\"240\" /></p>\n<h4>ARCH and GARCH Models</h4>\n<p>The autoregressive conditional heteroskedasticity (ARCH) model and the generalized ARCH model (GARCH) are often used to get a volatility forecast of a time series. You can also use the built-in function <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_96.gif\" alt=\"\" width=\"130\" height=\"13\" /> to estimate parameters of these volatility models. Most volatility models are based on using returns that are obtained after subtracting unconditional mean returns. For our illustration, we de-mean our returns data. The parameters of the model are typically estimated with maximum likelihood.</p>\n<p>To estimate a GARCH model for WTI Crude data, we find the de-mean data and estimate the model as follows.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_28.gif\" alt=\"\" width=\"570\" height=\"30\" /></p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_23.gif\" alt=\"\" width=\"279\" height=\"50\" /></p>\n<p>You can use the built-in functions <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_97.gif\" alt=\"\" width=\"65\" height=\"13\" />, <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_98.gif\" alt=\"\" width=\"65\" height=\"13\" />, <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_99.gif\" alt=\"\" width=\"79\" height=\"13\" />, <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_100.gif\" alt=\"\" width=\"94\" height=\"13\" />, <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_101.gif\" alt=\"\" width=\"79\" height=\"13\" /> and <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_102.gif\" alt=\"\" width=\"86\" height=\"13\" /> to simulate time-series data and for risk management. <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_103.gif\" alt=\"\" width=\"115\" height=\"13\" /> is another important function to estimate the parameters of a process given its data and model specification.</p>\n<h3>5. Simulating Data and Financial Application</h3>\n<p>A financial model consisting of fixed relations and variables may not be accurate because most relationships between financial variables are random. Therefore, we must be able to incorporate stochasticity. Monte Carlo simulation is widely used to represent the true features of random modeling. Simulation modeling is a computer-based modeling technique that mimics a real-life situation and helps to incorporate uncertainties in input variables. Such techniques give a distribution of a forecast variable, not just a single value. Therefore, it is very useful when we are uncertain about future outcomes. In this section, we give examples for simulating data using Mathematica and show an application in capital budgeting.</p>\n<p><img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_104.gif\" alt=\"\" width=\"94\" height=\"13\" /> is a powerful function to get data from built-in statistical distributions, including those that are:</p>\n<p><span class=\"special-character Bullet\">•</span> continuous or discrete</p>\n<p><span class=\"special-character Bullet\">•</span> univariate or multivariate</p>\n<p><span class=\"special-character Bullet\">•</span> parametric or derived</p>\n<p><span class=\"special-character Bullet\">•</span> defined by data</p>\n<h4>Example in Project Risk Analysis</h4>\n<p>Consider a situation in which you have to evaluate an investment by forecasting the present value of its future cash flows.</p>\n<p>We define a function <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_105.gif\" alt=\"\" width=\"166\" height=\"14\" /> to compute the present value of future cash flows. Here are its 11 arguments and values for an example. Assume that the revenue and terminal value both follow a triangular distribution and that gross margin follows a uniform distribution.</p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_24.gif\" alt=\"\" width=\"355\" height=\"221\" /></p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_29.gif\" alt=\"\" width=\"580\" height=\"238\" /></p>\n<p>For the given values, we simulate the data 10,000 times. (This takes a minute or so.)</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_30.gif\" alt=\"\" width=\"580\" height=\"46\" /></p>\n<p>We can summarize the data as follows.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_31.gif\" alt=\"\" width=\"580\" height=\"14\" /></p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_25.gif\" alt=\"\" width=\"183\" height=\"203\" /></p>\n<p>Here is a histogram of the distribution of the present value of the cash flows. Drag the handles (thin vertical lines) on either side of the red region to see the percentage of cash flows that falls within the range of data.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_32.gif\" alt=\"\" width=\"283\" height=\"14\" /></p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_26.gif\" alt=\"\" width=\"411\" height=\"314\" /></p>\n<p>This is just one example of simulation. We can define similar functions to compute the value of a firm using different valuation models:</p>\n<p><span class=\"special-character Bullet\">•</span> discounted cash flows</p>\n<p><span class=\"special-character Bullet\">•</span> residual operating income valuation</p>\n<p><span class=\"special-character Bullet\">•</span> abnormal growth in earnings valuation</p>\n<p>There are many other areas of finance where simulation can be used.</p>\n<h3>6. Bootstrapping and Financial Application</h3>\n<p>We can apply the bootstrap approach in several contexts in finance. When the data is limited and the true distribution of the population is unknown, we can generate the sampling distribution of a statistic by generating many new samples from the original data and use the empirical distribution for statistical inference. This is called bootstrapping. Performing a bootstrap analysis in Mathematica is very straightforward using the <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_106.gif\" alt=\"\" width=\"86\" height=\"13\" /> or <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_107.gif\" alt=\"\" width=\"86\" height=\"14\" /> functions with or without replacement.</p>\n<p>Performing bootstrap analysis entails two steps. First, we define a function that computes the statistic of interest. Second, we estimate the statistic of interest by repeatedly sampling observations (usually 10,000 times or more) from the original sample with replacement. Then we can use the distribution of sample statistics to infer an appropriate decision.</p>\n<p>In this section, we illustrate the use of bootstrapping through two examples.</p>\n<h4>Example 1</h4>\n<p>We consider estimating the distribution of an equally weighted portfolio<span class=\"special-character CloseCurlyQuote\">’</span>s conditional value-at-risk (CVaR) using weekly returns of Walmart stock (WMT) and Procter & Gamble (PG) over the period January 1, 1982, to March 30, 2019.</p>\n<h5>Step 1</h5>\n<p>We get the historical weekly returns data.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_33.gif\" alt=\"\" width=\"570\" height=\"14\" /></p>\n<h5>Step 2</h5>\n<p>We define two functions.</p>\n<p>The function <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_108.gif\" alt=\"\" width=\"101\" height=\"13\" /> computes the conditional value-at-risk given the returns data.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_34.gif\" alt=\"\" width=\"580\" height=\"14\" /></p>\n<p>The function <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_109.gif\" alt=\"\" width=\"94\" height=\"14\" /> returns a distribution of conditional value-at-risk measures given the size of the sample.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_35.gif\" alt=\"\" width=\"429\" height=\"62\" /></p>\n<p>We use these functions to get distributions of CVaR with 10,000 observations.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_36.gif\" alt=\"\" width=\"348\" height=\"14\" /></p>\n<p>We summarize the data.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_37.gif\" alt=\"\" width=\"231\" height=\"91\" /></p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_27.gif\" alt=\"\" width=\"411\" height=\"515\" /></p>\n<h4>Example 2</h4>\n<p>The next example focuses on retirement planning using the bootstrapping concept. Assume that we want to calculate the terminal value of the following retirement portfolio. The savings are invested equally in two market indices: the S&P 500 Index and the NASDAQ 100 Index. Assume that future returns would be a random draw from past returns. The initial deposit is $1000. Monthly saving for the next 20 years is $1,500. The number of retirement years is 15. During the 15 years of retirement, $2000 will be withdrawn monthly. Starting at the 10th year, $30,000 will be withdrawn annually for three years.</p>\n<p>Define the function <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_110.gif\" alt=\"\" width=\"230\" height=\"13\" />, which calculates the terminal value of a retirement portfolio. It takes 10 arguments:</p>\n<p><span class=\"special-character Bullet\">•</span> returns of the stocks in which money is equally invested (<img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_111.gif\" alt=\"\" width=\"50\" height=\"13\" />)</p>\n<p><span class=\"special-character Bullet\">•</span> initial portfolio value (<img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_112.gif\" alt=\"\" width=\"86\" height=\"13\" />), which must be positive</p>\n<p><span class=\"special-character Bullet\">•</span> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_113.gif\" alt=\"\" width=\"86\" height=\"13\" /><span class=\"special-character Dash\">–</span>years in service</p>\n<p><span class=\"special-character Bullet\">•</span> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_114.gif\" alt=\"\" width=\"43\" height=\"14\" /><span class=\"special-character Dash\">–</span>periodic saving</p>\n<p><span class=\"special-character Bullet\">•</span> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_115.gif\" alt=\"\" width=\"65\" height=\"14\" /><span class=\"special-character Dash\">–</span>frequency of contribution per year; coded as 12 for monthly data and 1 for annual data</p>\n<p><span class=\"special-character Bullet\">•</span> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_116.gif\" alt=\"\" width=\"108\" height=\"13\" /><span class=\"special-character Dash\">–</span>number of retirement years</p>\n<p><span class=\"special-character Bullet\">•</span> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_117.gif\" alt=\"\" width=\"43\" height=\"13\" /><span class=\"special-character Dash\">–</span>periodic income during retirement years</p>\n<p><span class=\"special-character Bullet\">•</span> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_118.gif\" alt=\"\" width=\"94\" height=\"14\" /><span class=\"special-character Dash\">–</span>big annual withdraw amount during planning period</p>\n<p><span class=\"special-character Bullet\">•</span> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_119.gif\" alt=\"\" width=\"122\" height=\"14\" /><span class=\"special-character Dash\">–</span>big withdrawal starting year; annual and in successive years with no gap</p>\n<p><span class=\"special-character Bullet\">•</span> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_120.gif\" alt=\"\" width=\"137\" height=\"14\" /><span class=\"special-character Dash\">–</span>number of annual big withdrawals</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_38.gif\" alt=\"\" width=\"580\" height=\"222\" /></p>\n<p>Using the values given, this computes the terminal value.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_39.gif\" alt=\"\" width=\"580\" height=\"14\" /></p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_40.gif\" alt=\"\" width=\"580\" height=\"30\" /></p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_28.gif\" alt=\"\" width=\"81\" height=\"15\" /></p>\n<h3>7. Mean-Variance Optimization under Uncertainty</h3>\n<p>Optimization under uncertainty (or robust optimization) is another approach that helps to get solutions that are good for most realizations of data. Many financial problems fit into this framework; for example, the mean-variance portfolio optimization problem. Here uncertainty may arise due to many factors:</p>\n<p><span class=\"special-character Bullet\">•</span> uncertainty in the mean vector</p>\n<p><span class=\"special-character Bullet\">•</span> fluctuations in the covariation matrix</p>\n<p><span class=\"special-character Bullet\">•</span> variability of risk in the market over time</p>\n<p><span class=\"special-character Bullet\">•</span> imprecise model approximation</p>\n<p>Feasibility depends on both the decision variable <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_121.gif\" alt=\"\" width=\"9\" height=\"12\" /> and the uncertain vector <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_122.gif\" alt=\"\" width=\"5\" height=\"12\" />; uncertainty can be introduced in the expected value, the variance or both.</p>\n<p>This section considers a mean-variance problem that allows some degree of variation in returns and covariances.</p>\n<p>The standard form of a mean-variance problem is expressed in terms of the information about the expected returns and the covariance structure of the returns. For given asset returns <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_123.gif\" alt=\"\" width=\"92\" height=\"12\" />, where <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_124.gif\" alt=\"\" width=\"9\" height=\"12\" /> is the return on asset <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_125.gif\" alt=\"\" width=\"3\" height=\"12\" />; and the decision vector <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_126.gif\" alt=\"\" width=\"99\" height=\"12\" />, where <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_127.gif\" alt=\"\" width=\"12\" height=\"12\" /> is the proportion of money invested in asset <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_128.gif\" alt=\"\" width=\"3\" height=\"12\" />; the mean variance problem is written as:</p>\n<p><img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_129.gif\" alt=\"\" width=\"47\" height=\"20\" /> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_130.gif\" alt=\"\" width=\"91\" height=\"23\" /></p>\n<p>subject to <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_131.gif\" alt=\"\" width=\"41\" height=\"12\" />.</p>\n<p>Here <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_132.gif\" alt=\"\" width=\"136\" height=\"73\" />, where <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_133.gif\" alt=\"\" width=\"18\" height=\"15\" /> is the covariance between securities <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_134.gif\" alt=\"\" width=\"3\" height=\"12\" /> and <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_135.gif\" alt=\"\" width=\"5\" height=\"12\" />; <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_136.gif\" alt=\"\" width=\"25\" height=\"12\" /> is the risk coefficient; <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_137.gif\" alt=\"\" width=\"55\" height=\"67\" />, where <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_138.gif\" alt=\"\" width=\"11\" height=\"12\" /> is the average return on security <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_139.gif\" alt=\"\" width=\"3\" height=\"12\" />; and <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_140.gif\" alt=\"\" width=\"6\" height=\"12\" /> is an <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_141.gif\" alt=\"\" width=\"24\" height=\"12\" /> column vector of ones, <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_142.gif\" alt=\"\" width=\"40\" height=\"63\" />.</p>\n<p>It is important to find the portfolio with the maximum Sharpe ratio, which can be obtained by solving the following problem; assume that <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_143.gif\" alt=\"\" width=\"25\" height=\"12\" /> and denote the risk-free rate by <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_144.gif\" alt=\"\" width=\"12\" height=\"12\" />:</p>\n<p><img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_145.gif\" alt=\"\" width=\"49\" height=\"20\" /> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_146.gif\" alt=\"\" width=\"124\" height=\"23\" /></p>\n<p>subject to <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_147.gif\" alt=\"\" width=\"41\" height=\"12\" />.</p>\n<p>The analytical solution to this basic problem for portfolio optimal portfolio weights <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_148.gif\" alt=\"\" width=\"14\" height=\"12\" /> is</p>\n<p><img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_149.gif\" alt=\"\" width=\"98\" height=\"32\" />.</p>\n<p>We define the function <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_150.gif\" alt=\"\" width=\"94\" height=\"14\" /> to compute <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_151.gif\" alt=\"\" width=\"9\" height=\"12\" />. It takes the arguments returns data (<img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_152.gif\" alt=\"\" width=\"50\" height=\"13\" />) and risk-free rate (<img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_153.gif\" alt=\"\" width=\"58\" height=\"13\" />) and returns an optimal weight vector.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_41.gif\" alt=\"\" width=\"424\" height=\"61\" /></p>\n<p>One way to get a robust solution to the mean-variance problem is to sample data in several scenarios to estimate parameters. Assuming that the returns have multivariate normal distribution, we define a function <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_154.gif\" alt=\"\" width=\"173\" height=\"14\" /> to compute tangency portfolios with simulated data. The function takes four arguments:</p>\n<p><span class=\"special-character Bullet\">•</span> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_155.gif\" alt=\"\" width=\"50\" height=\"13\" /><span class=\"special-character Dash\">–</span>returns data</p>\n<p><span class=\"special-character Bullet\">•</span> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_156.gif\" alt=\"\" width=\"58\" height=\"13\" /><span class=\"special-character Dash\">–</span>risk-free rate</p>\n<p><span class=\"special-character Bullet\">•</span> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_157.gif\" alt=\"\" width=\"72\" height=\"14\" /><span class=\"special-character Dash\">–</span>sample size</p>\n<p><span class=\"special-character Bullet\">•</span> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_158.gif\" alt=\"\" width=\"7\" height=\"13\" /><span class=\"special-character Dash\">–</span>number of iterations</p>\n<p>It returns a distribution of optimal Sharpe ratios.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_42.gif\" alt=\"\" width=\"580\" height=\"157\" /></p>\n<p>We apply those two functions to simulated data and get the distribution of portfolio means that maximize the Sharpe ratio.</p>\n<p>We download historical monthly returns as before, compute the distribution of maximum Sharpe ratios and draw a histogram.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_43.gif\" alt=\"\" width=\"580\" height=\"14\" /></p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_44.gif\" alt=\"\" width=\"580\" height=\"14\" /></p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_29.gif\" alt=\"\" width=\"411\" height=\"315\" /></p>\n<p>Another way to get robustness in the parameter estimate is to introduce some kinds of uncertainty; interval uncertainty sets and ellipsoidal uncertainty sets are the most commonly used. Following Kim, Kim and Fabozzi [<a href=\"#Kim-Fabozzi\">5</a>] (using <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_159.gif\" alt=\"\" width=\"9\" height=\"12\" /> and <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_160.gif\" alt=\"\" width=\"11\" height=\"12\" /> instead of their <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_161.gif\" alt=\"\" width=\"7\" height=\"12\" /> and <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_162.gif\" alt=\"\" width=\"7\" height=\"12\" />), the interval uncertainty set for the expected returns can be defined as:</p>\n<p><img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_163.gif\" alt=\"\" width=\"184\" height=\"23\" />,</p>\n<p>where <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_164.gif\" alt=\"\" width=\"91\" height=\"12\" />, the variable <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_165.gif\" alt=\"\" width=\"15\" height=\"17\" /> is an estimate of the expected return and <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_166.gif\" alt=\"\" width=\"10\" height=\"12\" /> is a constant used to control the expected returns of stock <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_167.gif\" alt=\"\" width=\"3\" height=\"12\" />.</p>\n<p>The mean-variance problem with box uncertainty can be written as:</p>\n<p><img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_168.gif\" alt=\"\" width=\"47\" height=\"20\" /> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_169.gif\" alt=\"\" width=\"49\" height=\"20\" /> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_170.gif\" alt=\"\" width=\"91\" height=\"23\" /></p>\n<p>subject to <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_171.gif\" alt=\"\" width=\"41\" height=\"12\" /> and where <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_172.gif\" alt=\"\" width=\"11\" height=\"12\" /> is such that <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_173.gif\" alt=\"\" width=\"70\" height=\"23\" /> for <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_174.gif\" alt=\"\" width=\"68\" height=\"12\" />.</p>\n<p>This objective function can be modified as follows (see [<a href=\"#Kim-Fabozzi\">5</a>] for the derivation and explanation of the notation <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_175.gif\" alt=\"\" width=\"16\" height=\"12\" /> and <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_176.gif\" alt=\"\" width=\"18\" height=\"12\" />):</p>\n<p><img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_177.gif\" alt=\"\" width=\"47\" height=\"20\" /> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_178.gif\" alt=\"\" width=\"85\" height=\"12\" /></p>\n<p>subject to <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_179.gif\" alt=\"\" width=\"52\" height=\"12\" /> and <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_180.gif\" alt=\"\" width=\"26\" height=\"12\" />, where <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_181.gif\" alt=\"\" width=\"8\" height=\"12\" /> is the transformation matrix <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_182.gif\" alt=\"\" width=\"68\" height=\"12\" /> for <img style=\"vertical-align: middle;\" title=\"I_n\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Image_2.gif\" alt=\"I_n\" width=\"11\" height=\"12\" /> a unit matrix of size <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_183.gif\" alt=\"\" width=\"24\" height=\"12\" />; for example, when <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_184.gif\" alt=\"\" width=\"26\" height=\"12\" />, <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_185.gif\" alt=\"\" width=\"102\" height=\"29\" />.</p>\n<p>We define the function <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_186.gif\" alt=\"\" width=\"324\" height=\"14\" /> to find the solution to the mean variance optimization problem with box uncertainty. This function takes three arguments:</p>\n<p><span class=\"special-character Bullet\">•</span> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_187.gif\" alt=\"\" width=\"50\" height=\"13\" /><span class=\"special-character Dash\">–</span>a matrix of stock returns</p>\n<p><span class=\"special-character Bullet\">•</span> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_188.gif\" alt=\"\" width=\"7\" height=\"13\" /><span class=\"special-character Dash\">–</span>the risk coefficient</p>\n<p><span class=\"special-character Bullet\">•</span> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_189.gif\" alt=\"\" width=\"7\" height=\"13\" /><span class=\"special-character Dash\">–</span>the confidence level for the uncertainty set</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_45.gif\" alt=\"\" width=\"580\" height=\"330\" /></p>\n<p>We compute optimal weights for the following portfolio.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_46.gif\" alt=\"\" width=\"580\" height=\"14\" /></p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_47.gif\" alt=\"\" width=\"461\" height=\"14\" /></p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_30.gif\" alt=\"\" width=\"217\" height=\"51\" /></p>\n<p>In [<a href=\"#Kim-Fabozzi\">5</a>], an ellipsoidal uncertainty set on expected returns is defined as:</p>\n<p><img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_190.gif\" alt=\"\" width=\"165\" height=\"23\" />,</p>\n<p>where <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_191.gif\" alt=\"\" width=\"18\" height=\"12\" /> is the covariance matrix of estimation error of expected returns and <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_214.gif\" alt=\"\" width=\"6\" height=\"12\" /> controls the size of the ellipsoid. With this uncertainty set, the mean variance problem can be written as:</p>\n<p><img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_192.gif\" alt=\"\" width=\"47\" height=\"20\" /> <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_193.gif\" alt=\"\" width=\"175\" height=\"25\" />,</p>\n<p>subject to <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_194.gif\" alt=\"\" width=\"41\" height=\"12\" />.</p>\n<p>The covariance matrix of estimation errors can be approximated in several ways using the sample covariance matrix of stock returns. Assuming that the samples of stock returns are independent and identically distributed, [<a href=\"#Kim-Fabozzi\">5</a>] defines <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_195.gif\" alt=\"\" width=\"55\" height=\"12\" />, where <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_196.gif\" alt=\"\" width=\"9\" height=\"12\" /> is the covariance matrix of stock returns and <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_197.gif\" alt=\"\" width=\"6\" height=\"12\" /> is the sample size.</p>\n<p>Define <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_198.gif\" alt=\"\" width=\"382\" height=\"14\" /> to compute an optimal portfolio with an ellipsoidal uncertainty. It takes three arguments:</p>\n<p><span class=\"special-character Bullet\">•</span> returns (<img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_199.gif\" alt=\"\" width=\"50\" height=\"13\" />)</p>\n<p><span class=\"special-character Bullet\">•</span> value of risk coefficient (<img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_200.gif\" alt=\"\" width=\"7\" height=\"13\" />)</p>\n<p><span class=\"special-character Bullet\">•</span> confidence level for the uncertainty set (<img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_201.gif\" alt=\"\" width=\"7\" height=\"13\" />)</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_48.gif\" alt=\"\" width=\"580\" height=\"281\" /></p>\n<p>We compute optimal weights for our usual portfolio subject to an ellipsoidal uncertainty set.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_49.gif\" alt=\"\" width=\"580\" height=\"14\" /></p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_50.gif\" alt=\"\" width=\"519\" height=\"14\" /></p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_31.gif\" alt=\"\" width=\"211\" height=\"51\" /></p>\n<p>We can use the built-in function <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_202.gif\" alt=\"\" width=\"173\" height=\"14\" /> to optimize the portfolio problem, introducing uncertainty in the mean returns or in the covariance.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_51.gif\" alt=\"\" width=\"545\" height=\"109\" /></p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_52.gif\" alt=\"\" width=\"580\" height=\"77\" /></p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_32.gif\" alt=\"\" width=\"331\" height=\"13\" /></p>\n<p>Similarly, we can introduce uncertainty in risk and solve the optimization problem using this same function. See the documentation for an example.</p>\n<h3>8. Artificial Intelligence</h3>\n<p>With increasing computational resources and larger datasets, machine learning or artificial intelligence is a growing field in finance. A recent book by Dixon, Halperin and Bilokon [<a href=\"#Dixon-Halperin\">6</a>] is a good reference on theory and applications.</p>\n<p>Although the Wolfram Language includes a wide range of functions that work on many types of data, including numerical, categorical, time series, textual, image and audio, we focus on the <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_203.gif\" alt=\"\" width=\"50\" height=\"13\" /> function and time-series data only. The <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_204.gif\" alt=\"\" width=\"50\" height=\"13\" /> function uses input data and returns a predictor function that can be used to forecast the value of dependant variables given the values of independent variables. In this section, we show two examples using financial time series.</p>\n<h5>One Predictor for Stock Returns</h5>\n<p>This example uses the Aruoba<span class=\"special-character Dash\">–</span>Diebold<span class=\"special-character Dash\">–</span>Scotti (ADS) business conditions index as one predictor of percentage change in the S&P 500 index. We define the function <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_205.gif\" alt=\"\" width=\"130\" height=\"14\" />. It downloads the ADS index from the Federal Reserve Bank of Philadelphia and the S&P 500 index returns and then merges them for use in the <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_206.gif\" alt=\"\" width=\"50\" height=\"13\" /> function, given the start and end date as arguments.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_53.gif\" alt=\"\" width=\"580\" height=\"254\" /></p>\n<p>Using this function, we download the data for the period January 30, 1970, to September 30, 2019, and generate a prediction function. (This takes several minutes.)</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_54.gif\" alt=\"\" width=\"435\" height=\"30\" /></p>\n<p>Once the prediction function <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_207.gif\" alt=\"\" width=\"43\" height=\"13\" /> is generated, we can use it to predict the future value of the stock index value. For instance, here it predicts percentage change in the S&P 500 index if ADS is 0.9, 2 or -1.2.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_55.gif\" alt=\"\" width=\"155\" height=\"13\" /></p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_33.gif\" alt=\"\" width=\"267\" height=\"13\" /></p>\n<h5>Several Predictors for Stock Returns</h5>\n<p>In this example, we use five monthly macro variables to predict percentage change in the value of the S&P 500 index:</p>\n<p><span class=\"special-character Bullet\">•</span> USSLIND<span class=\"special-character Dash\">–</span>the leading index for the United States</p>\n<p><span class=\"special-character Bullet\">•</span> UMCSENT<span class=\"special-character Dash\">–</span>the University of Michigan consumer sentiment index</p>\n<p><span class=\"special-character Bullet\">•</span> CFNAIMA3<span class=\"special-character Dash\">–</span>the Chicago Fed national activity index: three-month moving average</p>\n<p><span class=\"special-character Bullet\">•</span> MICH<span class=\"special-character Dash\">–</span>the University of Michigan inflation expectation index</p>\n<p><span class=\"special-character Bullet\">•</span> T10Y2YM<span class=\"special-character Dash\">–</span>10-year Treasury constant maturity minus 2-year Treasury constant maturity</p>\n<p>The function <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_208.gif\" alt=\"\" width=\"180\" height=\"14\" /> takes a list of macroeconomic series IDs (<img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_209.gif\" alt=\"\" width=\"101\" height=\"13\" />), start date and end date as input arguments. It returns values for specified macroeconomic variables and S&P 500 index returns in the format suitable for the <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_210.gif\" alt=\"\" width=\"50\" height=\"13\" /> function. The Federal Reserve Bank of St. Louis may require the API key to download its data. The API key can be obtained freely by creating a user account at <a href=\"https://fred.stlouisfed.org\" target=\"_blank\">https://fred.stlouisfed.org</a> (click <span class=\"special-character OpenCurlyDoubleQuote\">“</span>my account<span class=\"special-character CloseCurlyDoubleQuote\">”</span> and follow the instructions). Use the API key 207071a5f2e90e7816259d3c32c1ab81 if needed.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_56.gif\" alt=\"\" width=\"563\" height=\"94\" /></p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_57.gif\" alt=\"\" width=\"580\" height=\"366\" /></p>\n<p>Using this function, we download five macro variables as well as the S&P 500 index returns over the period January 30, 1983, to May 30, 2019.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_58.gif\" alt=\"\" width=\"580\" height=\"30\" /></p>\n<p>We can generate the prediction function using the data and predict the value. <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_211.gif\" alt=\"\" width=\"50\" height=\"13\" /> can take the <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_212.gif\" alt=\"\" width=\"43\" height=\"13\" /> option to specify which regression method to use.</p>\n<p class=\"input\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Input_59.gif\" alt=\"\" width=\"401\" height=\"30\" /></p>\n<p class=\"output\"><img src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Output_34.gif\" alt=\"\" width=\"58\" height=\"13\" /></p>\n<p>We have shown some applications of only the built-in function <img style=\"vertical-align: middle;\" src=\"https://content.wolfram.com/uploads/sites/19/2021/12/Adhikari_Math_213.gif\" alt=\"\" width=\"50\" height=\"13\" />. However, the Wolfram Language comes with many other built-in functions that are useful in classification, discriminant analysis and neural networks. You can use these tools to learn from the data and build models to extract useful information. We encourage you to explore more about machine learning in Mathematica.</p>\n<h3>9. Conclusion</h3>\n<p>As financial data becomes increasingly available, serious data analysis requires knowing software to manipulate large datasets. Aside from demonstrating many built-in functions, we introduced many custom functions especially designed for technical computation of financial data. Mathematica can do much more than what we have shown in this article. The Wolfram Language in general and Mathematica in particular are well-suited to implement sophisticated financial models, including pricing securities, trading strategies, simulation, optimization, risk management and time-series analysis [<a href=\"#Lewis-2000\">7</a>, <a href=\"#Lewis-2016\">8</a>]. Mathematica<span class=\"special-character CloseCurlyQuote\">’</span>s built-in knowledge is also very useful for asset pricing models based on estimating the stochastic discount factor using the generalized method of moments.</p>\n<h3>References</h3>\n<table class=\"ReferenceTable\">\n<tbody>\n<tr>\n<td class=\"Reference\"><a name=\"Wellin\"></a>[1]</td>\n<td>P. Wellin, <em>Essentials of Programming in Mathematica</em>, Cambridge, UK: Cambridge University Press, 2016.</td>\n</tr>\n<tr>\n<td class=\"Reference\"><a name=\"Cornuejols-Pena\"></a>[2]</td>\n<td>G. Cornu<span class=\"special-character EAcute\">é</span>jols, J. Pe<span class=\"special-character NTilde\">ñ</span>a and R. T<span class=\"special-character UDoubleDot\">ü</span>t<span class=\"special-character UDoubleDot\">ü</span>nc<span class=\"special-character UDoubleDot\">ü</span>, <em>Optimization Methods in Finance</em>, 2nd ed., New York: Cambridge University Press, 2018.</td>\n</tr>\n<tr>\n<td class=\"Reference\"><a name=\"Rockafellar-Uryasev\"></a>[3]</td>\n<td>R. T. Rockafellar and S. Uryasev, <span class=\"special-character OpenCurlyDoubleQuote\">“</span>Optimization of Conditional Value-at-Risk<span class=\"special-character CloseCurlyDoubleQuote\">”</span>, <em>The Journal of Risk</em>, <strong>2</strong>(3), 2000 pp. 21<span class=\"special-character Dash\">–</span>41. <a href=\"https://doi.org/10.21314/JOR.2000.038\" target=\"_blank\">https://doi.org/10.21314/JOR.2000.038</a>.</td>\n</tr>\n<tr>\n<td class=\"Reference\"><a name=\"Tsay\"></a>[4]</td>\n<td>R. S. Tsay, <em>An Introduction to Analysis of Financial Data with R</em>, Hoboken, NJ: Wiley, 2013.</td>\n</tr>\n<tr>\n<td class=\"Reference\"><a name=\"Kim-Fabozzi\"></a>[5]</td>\n<td>W. C. Kim, J. H. Kim and F. J. Fabozzi, <em>Robust Equity Portfolio Management</em>, Hoboken, NJ: Wiley, 2016.</td>\n</tr>\n<tr>\n<td class=\"Reference\"><a name=\"Dixon-Halperin\"></a>[6]</td>\n<td>M. Dixon, I. Halperin and P. Bilokon, <em>Machine Learning in Finance from Theory to Practice</em>, Cham, Switzerland: Springer, 2020.</td>\n</tr>\n<tr>\n<td class=\"Reference\"><a name=\"Lewis-2000\"></a>[7]</td>\n<td>A. L. Lewis, <em>Option Valuation under Stochastic Volatility: With Mathematica Code</em>, Newport Beach, CA: Finance Press, 2000.</td>\n</tr>\n<tr>\n<td class=\"Reference\"><a name=\"Lewis-2016\"></a>[8]</td>\n<td>A. L. Lewis, <em>Option Valuation under Stochastic Volatility II: With Mathematica Code</em>, Newport Beach, CA: Finance Press, 2016.</td>\n</tr>\n<tr>\n<td id=\"1099737697\" class=\"DOIReference\" colspan=\"2\"><a name=\"1099737697\"></a>R. Adhikari, <span class=\"special-character OpenCurlyDoubleQuote\">“</span>Selected Financial Applications,<span class=\"special-character CloseCurlyDoubleQuote\">”</span> <em>The Mathematica Journal</em>, 2021. <a href=\"https://doi.org/10.3888/tmj.23-5\">doi.org/10.3888/tmj.23-5</a>.</td>\n</tr>\n</tbody>\n</table>\n<h3 class=\"SectionAboutAuthor\">About the Author</h3>\n<p class=\"TextAboutAuthor\">Ramesh Adhikari is an Associate Professor of Finance at Humboldt State University. Prior to coming to HSU, he taught undergraduate and graduate students at Tribhuvan University and worked at the Central Bank of Nepal. He was also a research fellow at Osaka Sangyo University, Osaka, Japan. He earned a Ph.D. in Financial Economics from the University of New Orleans. He is interested in the areas of computational finance and high-dimensional statistics.</p>\n<p class=\"TextAboutAuthor\"><strong>Ramesh Adhikari</strong><br />\n<em>School of Business, Humboldt State University<br />\n1 Harpst Street<br />\nArcata, CA 95521</em><br />\n<em><a href=\"mailto:ramesh.adhikari@humboldt.edu\">ramesh.adhikari@humboldt.edu</a></em></p>\n</div>\n",
  "wfw:commentRss": "https://www.mathematica-journal.com/2021/12/16/selected-financial-applications/feed/",
  "slash:comments": 0
}