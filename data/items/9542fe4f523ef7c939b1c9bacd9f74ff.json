{
  "title": "My air travel carbon footprint",
  "link": "https://www.r-bloggers.com/2022/11/my-air-travel-carbon-footprint/",
  "dc:creator": "Michael",
  "pubDate": "Wed, 02 Nov 2022 17:28:30 +0000",
  "category": "R bloggers",
  "guid": "http://r.iresmi.net/?p=483",
  "description": "<p>I shouldn’t have…</p>\n<strong>Continue reading</strong>: <a href=\"https://www.r-bloggers.com/2022/11/my-air-travel-carbon-footprint/\">My air travel carbon footprint</a>",
  "content:encoded": "<!-- \n<div style=\"min-height: 30px;\">\n[social4i size=\"small\" align=\"align-left\"]\n</div>\n-->\n\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\n[This article was first published on  <strong><a href=\"http://r.iresmi.net/2022/11/02/my-air-travel-carbon-footprint/\"> r.iresmi.net</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\n<hr>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Flight_shame\" rel=\"nofollow\" target=\"_blank\">I shouldn’t have</a>…</p>\n\n\n\n<pre>library(tidyverse)\nlibrary(sf)\nlibrary(glue)\nlibrary(rnaturalearth)\nlibrary(units)\n\n# grams of carbon dioxide-equivalents per passenger kilometer\n# https://en.wikipedia.org/wiki/Fuel_economy_in_aircraft\nco2_eq <- set_units(88, g/km)\n\n# countries map from Naturalearth\ncountries <- ne_countries(scale = \"small\", returnclass = \"sf\")\n\n# airport code and coordinates to geolocate itineraries\nairport <- read_csv(\"https://raw.githubusercontent.com/jpatokal/openflights/master/data/airports.dat\",\n                    col_names = c(\"airport\",\n                                  \"name\",\n                                  \"city\",\n                                  \"country\",\n                                  \"iata\",\n                                  \"icao\",\n                                  \"latitude\",\n                                  \"longitude\",\n                                  \"altitude\",\n                                  \"timezone\",\n                                  \"dst\",\n                                  \"tz\",\n                                  \"type\",\n                                  \"source\")) %>% \n  # Add Kai Tak, missig from the airport data\n  add_row(iata = \"HKGX\",\n          name = \"Kai Tak\", \n          city = \"Hong Kong\",\n          latitude = 22.328611,\n          longitude = 114.194167)\n\n# itineraries\nflight <- read_delim(\"from-to\nLYS-LHR\nLHR-LYS\nLYS-BOD\nLYS-BOD\nLYS-BOD\nLYS-BOD\nBOD-LYS\nBOD-LYS\nBOD-LYS\nLYS-BOD\nBOD-LYS\nBOD-LGW\nLHR-JNB\nCPT-JNB\nJNB-LHR\nLHR-ORY\nBOD-ORY\nCDG-HKGX\nHKGX-PER\nSYD-HKGX\nHKGX-CDG\nORY-CAY\nCAY-BEL\nBEL-BSB\nBSB-MAO\nMAO-VVI\nVVI-LPB\nLPB-MAO\nMAO-BEL\nBEL-CAY\nCAY-XAU\nXAU-CAY\nCAY-XAU\nXAU-CAY\nCAY-XAU\nXAU-CAY\nCAY-ORY\nNCE-MXP\nMXP-NCE\nCDG-CAY\nCAY-MPY\nMPY-CAY\nCAY-CDG\nCDG-HKG\nHKG-SYD\nSYD-HKG\nHKG-SYD\nTLN-ORY\nCDG-CPH\nCPH-ORY\nORY-TLN\nCDG-YYZ\nYYZ-SFO\nSFO-YYZ\nYYZ-CDG\nORY-TLN\nTLN-ORY\nLYS-AMS\nAMS-SHJ\nSHJ-KTM\nKTM-SHJ\nSHJ-AMS\nAMS-LYS\nCDG-AUH\nAUH-MCT\nMCT-KTM\nKTM-PKR\nPKR-KTM\nKTM-MCT\nMCT-AUH\nAUH-CDG\nGVA-FCO\nFCO-GVA\nCDG-RUN\nRUN-CDG\nGVA-KEF\nKEF-GVA\nCDG-ARN\nARN-KRN\nKRN-ARN\nARN-CDG\nCDG-RUN\nRUN-CDG\", delim = \"-\")\n\n# geolocate\nflight_geo <- flight %>% \n  left_join(airport, by = c(\"from\" = \"iata\")) %>% \n  left_join(airport, by = c(\"to\" = \"iata\"), suffix = c(\"_from\", \"_to\"))\n\n# create lines\nflight_lines <- flight_geo %>% \n  mutate(line = glue(\"LINESTRING ({longitude_from} {latitude_from}, {longitude_to} {latitude_to})\")) %>% \n  st_as_sf(wkt = \"line\", crs = \"EPSG:4326\")\n\n# create great circles and compute costs\nflight_geo_gc <- flight_lines %>% \n  st_segmentize(set_units(100, km)) %>% \n  mutate(distance = set_units(st_length(line), km),\n         co2 = set_units(distance * co2_eq, t))\n\n# totals\ntotal_flight <- flight_geo_gc %>% \n  st_drop_geometry() %>% \n  summarise(total_distance = sum(distance, na.rm = TRUE),\n            total_co2 = sum(co2, na.rm = TRUE))\n\n# map\nggplot() +\n  geom_sf(data = countries, fill = \"lightgrey\", color = \"lightgrey\") +\n  geom_sf(data = flight_geo_gc, color = \"red\") + \n  # geom_sf(data = flight_lines, color = \"blue\") + \n  labs(title = \"My air travel carbon footprint 1993-2020\",\n       subtitle = glue(\"{round(total_flight$total_distance, -2)} km - {round(total_flight$total_co2, 1)} teqCO₂\")) +\n  theme_minimal()\n</pre>\n\n\n\n<figure class=\"wp-block-image size-full\"><img loading=\"lazy\" src=\"https://i1.wp.com/r.iresmi.net/wp-content/uploads/2022/11/air_travel.png?w=450\" alt=\"Flygskam\" class=\"wp-image-484\" srcset_temp=\"https://i1.wp.com/r.iresmi.net/wp-content/uploads/2022/11/air_travel.png?w=450 800w, http://r.iresmi.net/wp-content/uploads/2022/11/air_travel-300x225.png 300w, http://r.iresmi.net/wp-content/uploads/2022/11/air_travel-768x576.png 768w\" sizes=\"(max-width: 800px) 100vw, 800px\" data-recalc-dims=\"1\" /><figcaption>Flygskam</figcaption></figure>\n\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"http://r.iresmi.net/2022/11/02/my-air-travel-carbon-footprint/\"> r.iresmi.net</a></strong>.</div>\n<hr />\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a title=\"The R Project for Statistical Computing\" href=\"https://www.r-project.org/\" rel=\"nofollow\">R</a> news and tutorials about <a title=\"R tutorials\" href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\">learning R</a> and many other topics. <a title=\"Data science jobs\" href=\"https://www.r-users.com/\" rel=\"nofollow\">Click here if you're looking to post or find an R/data-science job</a>.\n\n<hr>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div><strong>Continue reading</strong>: <a href=\"https://www.r-bloggers.com/2022/11/my-air-travel-carbon-footprint/\">My air travel carbon footprint</a>",
  "enclosure": "",
  "post-id": 334205
}