{
  "title": "Contingency tables and cross-tabulations in pandas",
  "link": "",
  "published": "2012-01-14T00:00:00-08:00",
  "updated": "2012-01-14T00:00:00-08:00",
  "author": {
    "name": "Wes McKinney"
  },
  "id": "tag:wesmckinney.com,2012-01-14:/blog/contingency-tables-and-cross-tabulations-in-pandas/",
  "summary": "<p>Someone recently asked me about creating cross-tabulations and contingency tables using <a href=\"http://pandas.sf.net\" title=\"pandas\" target=\"_blank\">pandas</a>. I wrote <a href=\"http://wesmckinney.com/blog/?p=315\" title=\"pivot tables\" target=\"_blank\">a bit about this</a> in October after implementing the <code>pivot_table</code> function for DataFrame. So I thought I would give a few more examples and show R code vs. the equivalent pandas code which will be helpful â€¦</p>",
  "content": "<p>Someone recently asked me about creating cross-tabulations and contingency tables using <a href=\"http://pandas.sf.net\" title=\"pandas\" target=\"_blank\">pandas</a>. I wrote <a href=\"http://wesmckinney.com/blog/?p=315\" title=\"pivot tables\" target=\"_blank\">a bit about this</a> in October after implementing the <code>pivot_table</code> function for DataFrame. So I thought I would give a few more examples and show R code vs. the equivalent pandas code which will be helpful for those already used to the R way of doing things.</p>\n<p>When calling <code>help(xtabs)</code> (or <code>help(table)</code>) in R, you get a number of examples for using <code>table, xtabs,</code> and <code>ftable</code>:</p>\n<div class=\"github\"><pre><span></span><code><span class=\"o\">&gt;</span> <span class=\"nf\">head</span><span class=\"p\">(</span><span class=\"n\">esoph</span><span class=\"p\">)</span>\n  <span class=\"n\">agegp</span>     <span class=\"n\">alcgp</span>    <span class=\"n\">tobgp</span> <span class=\"n\">ncases</span> <span class=\"n\">ncontrols</span>\n<span class=\"m\">1</span> <span class=\"m\">25-34</span> <span class=\"m\">0-39</span><span class=\"n\">g</span><span class=\"o\">/</span><span class=\"n\">day</span> <span class=\"m\">0-9</span><span class=\"n\">g</span><span class=\"o\">/</span><span class=\"n\">day</span>      <span class=\"m\">0</span>        <span class=\"m\">40</span>\n<span class=\"m\">2</span> <span class=\"m\">25-34</span> <span class=\"m\">0-39</span><span class=\"n\">g</span><span class=\"o\">/</span><span class=\"n\">day</span>    <span class=\"m\">10-19</span>      <span class=\"m\">0</span>        <span class=\"m\">10</span>\n<span class=\"m\">3</span> <span class=\"m\">25-34</span> <span class=\"m\">0-39</span><span class=\"n\">g</span><span class=\"o\">/</span><span class=\"n\">day</span>    <span class=\"m\">20-29</span>      <span class=\"m\">0</span>         <span class=\"m\">6</span>\n<span class=\"m\">4</span> <span class=\"m\">25-34</span> <span class=\"m\">0-39</span><span class=\"n\">g</span><span class=\"o\">/</span><span class=\"n\">day</span>      <span class=\"m\">30</span><span class=\"o\">+</span>      <span class=\"m\">0</span>         <span class=\"m\">5</span>\n<span class=\"m\">5</span> <span class=\"m\">25-34</span>     <span class=\"m\">40-79</span> <span class=\"m\">0-9</span><span class=\"n\">g</span><span class=\"o\">/</span><span class=\"n\">day</span>      <span class=\"m\">0</span>        <span class=\"m\">27</span>\n<span class=\"m\">6</span> <span class=\"m\">25-34</span>     <span class=\"m\">40-79</span>    <span class=\"m\">10-19</span>      <span class=\"m\">0</span>         <span class=\"m\">7</span>\n\n<span class=\"o\">&gt;</span> <span class=\"nf\">ftable</span><span class=\"p\">(</span><span class=\"nf\">xtabs</span><span class=\"p\">(</span><span class=\"nf\">cbind</span><span class=\"p\">(</span><span class=\"n\">ncases</span><span class=\"p\">,</span> <span class=\"n\">ncontrols</span><span class=\"p\">)</span> <span class=\"o\">~</span> <span class=\"n\">agegp</span> <span class=\"o\">+</span> <span class=\"n\">tobgp</span><span class=\"p\">,</span> <span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"n\">esoph</span><span class=\"p\">))</span>\n                <span class=\"n\">ncases</span> <span class=\"n\">ncontrols</span>\n<span class=\"n\">agegp</span> <span class=\"n\">tobgp</span>\n<span class=\"m\">25-34</span> <span class=\"m\">0-9</span><span class=\"n\">g</span><span class=\"o\">/</span><span class=\"n\">day</span>       <span class=\"m\">0</span>        <span class=\"m\">70</span>\n      <span class=\"m\">10-19</span>          <span class=\"m\">1</span>        <span class=\"m\">19</span>\n      <span class=\"m\">20-29</span>          <span class=\"m\">0</span>        <span class=\"m\">11</span>\n      <span class=\"m\">30</span><span class=\"o\">+</span>            <span class=\"m\">0</span>        <span class=\"m\">16</span>\n<span class=\"m\">35-44</span> <span class=\"m\">0-9</span><span class=\"n\">g</span><span class=\"o\">/</span><span class=\"n\">day</span>       <span class=\"m\">2</span>       <span class=\"m\">109</span>\n      <span class=\"m\">10-19</span>          <span class=\"m\">4</span>        <span class=\"m\">46</span>\n      <span class=\"m\">20-29</span>          <span class=\"m\">3</span>        <span class=\"m\">27</span>\n      <span class=\"m\">30</span><span class=\"o\">+</span>            <span class=\"m\">0</span>        <span class=\"m\">17</span>\n<span class=\"m\">45-54</span> <span class=\"m\">0-9</span><span class=\"n\">g</span><span class=\"o\">/</span><span class=\"n\">day</span>      <span class=\"m\">14</span>       <span class=\"m\">104</span>\n      <span class=\"m\">10-19</span>         <span class=\"m\">13</span>        <span class=\"m\">57</span>\n      <span class=\"m\">20-29</span>          <span class=\"m\">8</span>        <span class=\"m\">33</span>\n      <span class=\"m\">30</span><span class=\"o\">+</span>           <span class=\"m\">11</span>        <span class=\"m\">19</span>\n<span class=\"m\">55-64</span> <span class=\"m\">0-9</span><span class=\"n\">g</span><span class=\"o\">/</span><span class=\"n\">day</span>      <span class=\"m\">25</span>       <span class=\"m\">117</span>\n      <span class=\"m\">10-19</span>         <span class=\"m\">23</span>        <span class=\"m\">65</span>\n      <span class=\"m\">20-29</span>         <span class=\"m\">12</span>        <span class=\"m\">38</span>\n      <span class=\"m\">30</span><span class=\"o\">+</span>           <span class=\"m\">16</span>        <span class=\"m\">22</span>\n<span class=\"m\">65-74</span> <span class=\"m\">0-9</span><span class=\"n\">g</span><span class=\"o\">/</span><span class=\"n\">day</span>      <span class=\"m\">31</span>        <span class=\"m\">99</span>\n      <span class=\"m\">10-19</span>         <span class=\"m\">12</span>        <span class=\"m\">38</span>\n      <span class=\"m\">20-29</span>         <span class=\"m\">10</span>        <span class=\"m\">20</span>\n      <span class=\"m\">30</span><span class=\"o\">+</span>            <span class=\"m\">2</span>         <span class=\"m\">4</span>\n<span class=\"m\">75</span><span class=\"o\">+</span>   <span class=\"m\">0-9</span><span class=\"n\">g</span><span class=\"o\">/</span><span class=\"n\">day</span>       <span class=\"m\">6</span>        <span class=\"m\">26</span>\n      <span class=\"m\">10-19</span>          <span class=\"m\">5</span>        <span class=\"m\">11</span>\n      <span class=\"m\">20-29</span>          <span class=\"m\">0</span>         <span class=\"m\">3</span>\n      <span class=\"m\">30</span><span class=\"o\">+</span>            <span class=\"m\">2</span>         <span class=\"m\">4</span>\n\n<span class=\"o\">&gt;</span> <span class=\"nf\">ftable</span><span class=\"p\">(</span><span class=\"nf\">xtabs</span><span class=\"p\">(</span><span class=\"nf\">cbind</span><span class=\"p\">(</span><span class=\"n\">ncases</span><span class=\"p\">,</span> <span class=\"n\">ncontrols</span><span class=\"p\">)</span> <span class=\"o\">~</span> <span class=\"n\">agegp</span><span class=\"p\">,</span> <span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"n\">esoph</span><span class=\"p\">))</span>\n       <span class=\"n\">ncases</span> <span class=\"n\">ncontrols</span>\n<span class=\"n\">agegp</span>\n<span class=\"m\">25-34</span>       <span class=\"m\">1</span>       <span class=\"m\">116</span>\n<span class=\"m\">35-44</span>       <span class=\"m\">9</span>       <span class=\"m\">199</span>\n<span class=\"m\">45-54</span>      <span class=\"m\">46</span>       <span class=\"m\">213</span>\n<span class=\"m\">55-64</span>      <span class=\"m\">76</span>       <span class=\"m\">242</span>\n<span class=\"m\">65-74</span>      <span class=\"m\">55</span>       <span class=\"m\">161</span>\n<span class=\"m\">75</span><span class=\"o\">+</span>        <span class=\"m\">13</span>        <span class=\"m\">44</span>\n</code></pre></div>\n\n<p>Here are the same examples using pandas:</p>\n<div class=\"github\"><pre><span></span><code><span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">19</span><span class=\"p\">]:</span> <span class=\"n\">table</span> <span class=\"o\">=</span> <span class=\"n\">esoph</span><span class=\"o\">.</span><span class=\"n\">pivot_table</span><span class=\"p\">([</span><span class=\"s1\">&#39;ncases&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;ncontrols&#39;</span><span class=\"p\">],</span>\n                                    <span class=\"n\">rows</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s1\">&#39;agegp&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;tobgp&#39;</span><span class=\"p\">],</span>\n                                   <span class=\"n\">aggfunc</span><span class=\"o\">=</span><span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">sum</span><span class=\"p\">)</span>\n\n<span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">20</span><span class=\"p\">]:</span> <span class=\"n\">table</span>\n<span class=\"n\">Out</span><span class=\"p\">[</span><span class=\"mi\">20</span><span class=\"p\">]:</span>\n                <span class=\"n\">ncases</span>  <span class=\"n\">ncontrols</span>\n<span class=\"n\">agegp</span> <span class=\"n\">tobgp</span>\n<span class=\"mi\">25</span><span class=\"o\">-</span><span class=\"mi\">34</span> <span class=\"mi\">0</span><span class=\"o\">-</span><span class=\"mi\">9</span><span class=\"n\">g</span><span class=\"o\">/</span><span class=\"n\">day</span>  <span class=\"mf\">0.</span>      <span class=\"mf\">70.</span>\n      <span class=\"mi\">10</span><span class=\"o\">-</span><span class=\"mi\">19</span>     <span class=\"mf\">1.</span>      <span class=\"mf\">19.</span>\n      <span class=\"mi\">20</span><span class=\"o\">-</span><span class=\"mi\">29</span>     <span class=\"mf\">0.</span>      <span class=\"mf\">11.</span>\n      <span class=\"mi\">30</span><span class=\"o\">+</span>       <span class=\"mf\">0.</span>      <span class=\"mf\">16.</span>\n<span class=\"mi\">35</span><span class=\"o\">-</span><span class=\"mi\">44</span> <span class=\"mi\">0</span><span class=\"o\">-</span><span class=\"mi\">9</span><span class=\"n\">g</span><span class=\"o\">/</span><span class=\"n\">day</span>  <span class=\"mf\">2.</span>      <span class=\"mi\">109</span>\n      <span class=\"mi\">10</span><span class=\"o\">-</span><span class=\"mi\">19</span>     <span class=\"mf\">4.</span>      <span class=\"mf\">46.</span>\n      <span class=\"mi\">20</span><span class=\"o\">-</span><span class=\"mi\">29</span>     <span class=\"mf\">3.</span>      <span class=\"mf\">27.</span>\n      <span class=\"mi\">30</span><span class=\"o\">+</span>       <span class=\"mf\">0.</span>      <span class=\"mf\">17.</span>\n<span class=\"mi\">45</span><span class=\"o\">-</span><span class=\"mi\">54</span> <span class=\"mi\">0</span><span class=\"o\">-</span><span class=\"mi\">9</span><span class=\"n\">g</span><span class=\"o\">/</span><span class=\"n\">day</span>  <span class=\"mi\">14</span>      <span class=\"mi\">104</span>\n      <span class=\"mi\">10</span><span class=\"o\">-</span><span class=\"mi\">19</span>     <span class=\"mi\">13</span>      <span class=\"mf\">57.</span>\n      <span class=\"mi\">20</span><span class=\"o\">-</span><span class=\"mi\">29</span>     <span class=\"mf\">8.</span>      <span class=\"mf\">33.</span>\n      <span class=\"mi\">30</span><span class=\"o\">+</span>       <span class=\"mi\">11</span>      <span class=\"mf\">19.</span>\n<span class=\"mi\">55</span><span class=\"o\">-</span><span class=\"mi\">64</span> <span class=\"mi\">0</span><span class=\"o\">-</span><span class=\"mi\">9</span><span class=\"n\">g</span><span class=\"o\">/</span><span class=\"n\">day</span>  <span class=\"mi\">25</span>      <span class=\"mi\">117</span>\n      <span class=\"mi\">10</span><span class=\"o\">-</span><span class=\"mi\">19</span>     <span class=\"mi\">23</span>      <span class=\"mf\">65.</span>\n      <span class=\"mi\">20</span><span class=\"o\">-</span><span class=\"mi\">29</span>     <span class=\"mi\">12</span>      <span class=\"mf\">38.</span>\n      <span class=\"mi\">30</span><span class=\"o\">+</span>       <span class=\"mi\">16</span>      <span class=\"mf\">22.</span>\n<span class=\"mi\">65</span><span class=\"o\">-</span><span class=\"mi\">74</span> <span class=\"mi\">0</span><span class=\"o\">-</span><span class=\"mi\">9</span><span class=\"n\">g</span><span class=\"o\">/</span><span class=\"n\">day</span>  <span class=\"mi\">31</span>      <span class=\"mf\">99.</span>\n      <span class=\"mi\">10</span><span class=\"o\">-</span><span class=\"mi\">19</span>     <span class=\"mi\">12</span>      <span class=\"mf\">38.</span>\n      <span class=\"mi\">20</span><span class=\"o\">-</span><span class=\"mi\">29</span>     <span class=\"mi\">10</span>      <span class=\"mf\">20.</span>\n      <span class=\"mi\">30</span><span class=\"o\">+</span>       <span class=\"mf\">2.</span>      <span class=\"mf\">4.0</span>\n<span class=\"mi\">75</span><span class=\"o\">+</span>   <span class=\"mi\">0</span><span class=\"o\">-</span><span class=\"mi\">9</span><span class=\"n\">g</span><span class=\"o\">/</span><span class=\"n\">day</span>  <span class=\"mf\">6.</span>      <span class=\"mf\">26.</span>\n      <span class=\"mi\">10</span><span class=\"o\">-</span><span class=\"mi\">19</span>     <span class=\"mf\">5.</span>      <span class=\"mf\">11.</span>\n      <span class=\"mi\">20</span><span class=\"o\">-</span><span class=\"mi\">29</span>     <span class=\"mf\">0.</span>      <span class=\"mf\">3.0</span>\n      <span class=\"mi\">30</span><span class=\"o\">+</span>       <span class=\"mf\">2.</span>      <span class=\"mf\">4.0</span>\n\n<span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">22</span><span class=\"p\">]:</span> <span class=\"n\">table2</span> <span class=\"o\">=</span> <span class=\"n\">esoph</span><span class=\"o\">.</span><span class=\"n\">pivot_table</span><span class=\"p\">([</span><span class=\"s1\">&#39;ncases&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;ncontrols&#39;</span><span class=\"p\">],</span>\n                                    <span class=\"n\">rows</span><span class=\"o\">=</span><span class=\"s1\">&#39;agegp&#39;</span><span class=\"p\">,</span> <span class=\"n\">aggfunc</span><span class=\"o\">=</span><span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">sum</span><span class=\"p\">)</span>\n<span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">23</span><span class=\"p\">]:</span> <span class=\"n\">table2</span>\n<span class=\"n\">Out</span><span class=\"p\">[</span><span class=\"mi\">23</span><span class=\"p\">]:</span>\n       <span class=\"n\">ncases</span>  <span class=\"n\">ncontrols</span>\n<span class=\"n\">agegp</span>\n<span class=\"mi\">25</span><span class=\"o\">-</span><span class=\"mi\">34</span>  <span class=\"mf\">1.</span>      <span class=\"mi\">116</span>\n<span class=\"mi\">35</span><span class=\"o\">-</span><span class=\"mi\">44</span>  <span class=\"mf\">9.</span>      <span class=\"mi\">199</span>\n<span class=\"mi\">45</span><span class=\"o\">-</span><span class=\"mi\">54</span>  <span class=\"mi\">46</span>      <span class=\"mi\">213</span>\n<span class=\"mi\">55</span><span class=\"o\">-</span><span class=\"mi\">64</span>  <span class=\"mi\">76</span>      <span class=\"mi\">242</span>\n<span class=\"mi\">65</span><span class=\"o\">-</span><span class=\"mi\">74</span>  <span class=\"mi\">55</span>      <span class=\"mi\">161</span>\n<span class=\"mi\">75</span><span class=\"o\">+</span>    <span class=\"mi\">13</span>      <span class=\"mf\">44.</span>\n</code></pre></div>\n\n<p>One of the really great things about pandas is that the object produced is still a DataFrame (the R object is of a special class)! So we could do anything with it that we do with normal DataFrame objects:</p>\n<div class=\"github\"><pre><span></span><code><span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">26</span><span class=\"p\">]:</span> <span class=\"n\">table</span><span class=\"p\">[</span><span class=\"s1\">&#39;ncases&#39;</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">unstack</span><span class=\"p\">(</span><span class=\"s1\">&#39;agegp&#39;</span><span class=\"p\">)</span>\n<span class=\"n\">Out</span><span class=\"p\">[</span><span class=\"mi\">26</span><span class=\"p\">]:</span>\n<span class=\"n\">agegp</span>     <span class=\"mi\">25</span><span class=\"o\">-</span><span class=\"mi\">34</span>  <span class=\"mi\">35</span><span class=\"o\">-</span><span class=\"mi\">44</span>  <span class=\"mi\">45</span><span class=\"o\">-</span><span class=\"mi\">54</span>  <span class=\"mi\">55</span><span class=\"o\">-</span><span class=\"mi\">64</span>  <span class=\"mi\">65</span><span class=\"o\">-</span><span class=\"mi\">74</span>  <span class=\"mi\">75</span><span class=\"o\">+</span>\n<span class=\"n\">tobgp</span>\n<span class=\"mi\">0</span><span class=\"o\">-</span><span class=\"mi\">9</span><span class=\"n\">g</span><span class=\"o\">/</span><span class=\"n\">day</span>  <span class=\"mi\">0</span>      <span class=\"mi\">2</span>      <span class=\"mi\">14</span>     <span class=\"mi\">25</span>     <span class=\"mi\">31</span>     <span class=\"mi\">6</span>\n<span class=\"mi\">10</span><span class=\"o\">-</span><span class=\"mi\">19</span>     <span class=\"mi\">1</span>      <span class=\"mi\">4</span>      <span class=\"mi\">13</span>     <span class=\"mi\">23</span>     <span class=\"mi\">12</span>     <span class=\"mi\">5</span>\n<span class=\"mi\">20</span><span class=\"o\">-</span><span class=\"mi\">29</span>     <span class=\"mi\">0</span>      <span class=\"mi\">3</span>      <span class=\"mf\">8.</span>     <span class=\"mi\">12</span>     <span class=\"mi\">10</span>     <span class=\"mi\">0</span>\n<span class=\"mi\">30</span><span class=\"o\">+</span>       <span class=\"mi\">0</span>      <span class=\"mi\">0</span>      <span class=\"mi\">11</span>     <span class=\"mi\">16</span>     <span class=\"mf\">2.</span>     <span class=\"mi\">2</span>\n</code></pre></div>\n\n<p>Here is another fun example:</p>\n<div class=\"github\"><pre><span></span><code><span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">31</span><span class=\"p\">]:</span> <span class=\"kn\">import</span> <span class=\"nn\">pandas.rpy.common</span> <span class=\"k\">as</span> <span class=\"nn\">com</span>\n<span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">32</span><span class=\"p\">]:</span> <span class=\"n\">wp</span> <span class=\"o\">=</span> <span class=\"n\">com</span><span class=\"o\">.</span><span class=\"n\">load_data</span><span class=\"p\">(</span><span class=\"s1\">&#39;warpbreaks&#39;</span><span class=\"p\">)</span>\n<span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">33</span><span class=\"p\">]:</span> <span class=\"n\">wp</span><span class=\"p\">[</span><span class=\"s1\">&#39;replicate&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">tile</span><span class=\"p\">(</span><span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">),</span> <span class=\"mi\">6</span><span class=\"p\">)</span>\n\n<span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">34</span><span class=\"p\">]:</span> <span class=\"n\">wp</span><span class=\"o\">.</span><span class=\"n\">pivot_table</span><span class=\"p\">(</span><span class=\"s1\">&#39;breaks&#39;</span><span class=\"p\">,</span> <span class=\"n\">rows</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s1\">&#39;wool&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;tension&#39;</span><span class=\"p\">],</span>\n                        <span class=\"n\">cols</span><span class=\"o\">=</span><span class=\"s1\">&#39;replicate&#39;</span><span class=\"p\">,</span> <span class=\"n\">aggfunc</span><span class=\"o\">=</span><span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">sum</span><span class=\"p\">)</span>\n<span class=\"n\">Out</span><span class=\"p\">[</span><span class=\"mi\">34</span><span class=\"p\">]:</span>\n<span class=\"n\">replicate</span>     <span class=\"mi\">1</span>   <span class=\"mi\">2</span>   <span class=\"mi\">3</span>   <span class=\"mi\">4</span>   <span class=\"mi\">5</span>   <span class=\"mi\">6</span>   <span class=\"mi\">7</span>   <span class=\"mi\">8</span>   <span class=\"mi\">9</span>\n<span class=\"n\">wool</span> <span class=\"n\">tension</span>\n<span class=\"n\">A</span>    <span class=\"n\">H</span>        <span class=\"mi\">36</span>  <span class=\"mi\">21</span>  <span class=\"mi\">24</span>  <span class=\"mi\">18</span>  <span class=\"mi\">10</span>  <span class=\"mi\">43</span>  <span class=\"mi\">28</span>  <span class=\"mi\">15</span>  <span class=\"mi\">26</span>\n     <span class=\"n\">L</span>        <span class=\"mi\">26</span>  <span class=\"mi\">30</span>  <span class=\"mi\">54</span>  <span class=\"mi\">25</span>  <span class=\"mi\">70</span>  <span class=\"mi\">52</span>  <span class=\"mi\">51</span>  <span class=\"mi\">26</span>  <span class=\"mi\">67</span>\n     <span class=\"n\">M</span>        <span class=\"mi\">18</span>  <span class=\"mi\">21</span>  <span class=\"mi\">29</span>  <span class=\"mi\">17</span>  <span class=\"mi\">12</span>  <span class=\"mi\">18</span>  <span class=\"mi\">35</span>  <span class=\"mi\">30</span>  <span class=\"mi\">36</span>\n<span class=\"n\">B</span>    <span class=\"n\">H</span>        <span class=\"mi\">20</span>  <span class=\"mi\">21</span>  <span class=\"mi\">24</span>  <span class=\"mi\">17</span>  <span class=\"mi\">13</span>  <span class=\"mi\">15</span>  <span class=\"mi\">15</span>  <span class=\"mi\">16</span>  <span class=\"mi\">28</span>\n     <span class=\"n\">L</span>        <span class=\"mi\">27</span>  <span class=\"mi\">14</span>  <span class=\"mi\">29</span>  <span class=\"mi\">19</span>  <span class=\"mi\">29</span>  <span class=\"mi\">31</span>  <span class=\"mi\">41</span>  <span class=\"mi\">20</span>  <span class=\"mi\">44</span>\n     <span class=\"n\">M</span>        <span class=\"mi\">42</span>  <span class=\"mi\">26</span>  <span class=\"mi\">19</span>  <span class=\"mi\">16</span>  <span class=\"mi\">39</span>  <span class=\"mi\">28</span>  <span class=\"mi\">21</span>  <span class=\"mi\">39</span>  <span class=\"mi\">29</span>\n</code></pre></div>\n\n<p>Here is the equivalent R code:</p>\n<div class=\"github\"><pre><span></span><code><span class=\"o\">&gt;</span> <span class=\"n\">warpbreaks</span><span class=\"o\">$</span><span class=\"n\">replicate</span> <span class=\"o\">&lt;-</span> <span class=\"nf\">rep</span><span class=\"p\">(</span><span class=\"m\">1</span><span class=\"o\">:</span><span class=\"m\">9</span><span class=\"p\">,</span> <span class=\"n\">len</span> <span class=\"o\">=</span> <span class=\"m\">54</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;</span> <span class=\"nf\">ftable</span><span class=\"p\">(</span><span class=\"nf\">xtabs</span><span class=\"p\">(</span><span class=\"n\">breaks</span> <span class=\"o\">~</span> <span class=\"n\">wool</span> <span class=\"o\">+</span> <span class=\"n\">tension</span> <span class=\"o\">+</span> <span class=\"n\">replicate</span><span class=\"p\">,</span> <span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"n\">warpbreaks</span><span class=\"p\">))</span>\n             <span class=\"n\">replicate</span>  <span class=\"m\">1</span>  <span class=\"m\">2</span>  <span class=\"m\">3</span>  <span class=\"m\">4</span>  <span class=\"m\">5</span>  <span class=\"m\">6</span>  <span class=\"m\">7</span>  <span class=\"m\">8</span>  <span class=\"m\">9</span>\n<span class=\"n\">wool</span> <span class=\"n\">tension</span>\n<span class=\"n\">A</span>    <span class=\"n\">L</span>                 <span class=\"m\">26</span> <span class=\"m\">30</span> <span class=\"m\">54</span> <span class=\"m\">25</span> <span class=\"m\">70</span> <span class=\"m\">52</span> <span class=\"m\">51</span> <span class=\"m\">26</span> <span class=\"m\">67</span>\n     <span class=\"n\">M</span>                 <span class=\"m\">18</span> <span class=\"m\">21</span> <span class=\"m\">29</span> <span class=\"m\">17</span> <span class=\"m\">12</span> <span class=\"m\">18</span> <span class=\"m\">35</span> <span class=\"m\">30</span> <span class=\"m\">36</span>\n     <span class=\"n\">H</span>                 <span class=\"m\">36</span> <span class=\"m\">21</span> <span class=\"m\">24</span> <span class=\"m\">18</span> <span class=\"m\">10</span> <span class=\"m\">43</span> <span class=\"m\">28</span> <span class=\"m\">15</span> <span class=\"m\">26</span>\n<span class=\"n\">B</span>    <span class=\"n\">L</span>                 <span class=\"m\">27</span> <span class=\"m\">14</span> <span class=\"m\">29</span> <span class=\"m\">19</span> <span class=\"m\">29</span> <span class=\"m\">31</span> <span class=\"m\">41</span> <span class=\"m\">20</span> <span class=\"m\">44</span>\n     <span class=\"n\">M</span>                 <span class=\"m\">42</span> <span class=\"m\">26</span> <span class=\"m\">19</span> <span class=\"m\">16</span> <span class=\"m\">39</span> <span class=\"m\">28</span> <span class=\"m\">21</span> <span class=\"m\">39</span> <span class=\"m\">29</span>\n     <span class=\"n\">H</span>                 <span class=\"m\">20</span> <span class=\"m\">21</span> <span class=\"m\">24</span> <span class=\"m\">17</span> <span class=\"m\">13</span> <span class=\"m\">15</span> <span class=\"m\">15</span> <span class=\"m\">16</span> <span class=\"m\">28</span>\n</code></pre></div>\n\n<p>As soon as we <a href=\"http://statsmodels.sourceforge.net/dev/roadmap_todo.html#formula-framework\" title=\"Formula framework\" target=\"_blank\">add a formula framework to statsmodels</a> I could see incorporating that into this kind of function in Python.</p>"
}