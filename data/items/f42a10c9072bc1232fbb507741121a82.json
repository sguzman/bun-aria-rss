{
  "title": "CLIPDraw: Exploring Text-to-Drawing Synthesis",
  "description": "<!--kg-card-begin: html--><figure class=\"kg-card kg-gallery-card\">\n    <div class=\"kg-gallery-container\">\n        <div class=\"kg-gallery-row\">\n            <div class=\"kg-gallery-image\" style=\"flex: 1 1 0%;\">\n                <video class=\"b-lazy b-loaded gridvideo\" type=\"video/mp4\" autoplay muted playsinline loop src=\"https://kvfrans.com/static/clipdraw_cropped.mp4\">\n                </video>\n                <figcaption>\nCLIPDraw synthesizes novel drawings from text. <a href=\"https://colab.research.google.com/github/ kvfrans/clipdraw/blob/main/clipdraw.ipynb\">Play with the codebase yourself.</a>\n                </figcaption>\n            </div>\n        </div>\n    </div>\n</figure><!--kg-card-end: html--><p>AI-assissted art has always been intriguing to me. To me, visual art is a very human thing -- I can’t imagine a way that a computer rediscovers our own cultural concepts without some kind of experience living in</p>",
  "link": "https://kvfrans.com/clipdraw-exploring-text-to-drawing-synthesis/",
  "guid": "60d36b8e17e26d47c77e91e1",
  "category": "research",
  "dc:creator": "Kevin Frans",
  "pubDate": "Mon, 28 Jun 2021 20:07:30 GMT",
  "content:encoded": "<!--kg-card-begin: html--><figure class=\"kg-card kg-gallery-card\">\n    <div class=\"kg-gallery-container\">\n        <div class=\"kg-gallery-row\">\n            <div class=\"kg-gallery-image\" style=\"flex: 1 1 0%;\">\n                <video class=\"b-lazy b-loaded gridvideo\" type=\"video/mp4\" autoplay muted playsinline loop src=\"https://kvfrans.com/static/clipdraw_cropped.mp4\">\n                </video>\n                <figcaption>\nCLIPDraw synthesizes novel drawings from text. <a href=\"https://colab.research.google.com/github/ kvfrans/clipdraw/blob/main/clipdraw.ipynb\">Play with the codebase yourself.</a>\n                </figcaption>\n            </div>\n        </div>\n    </div>\n</figure><!--kg-card-end: html--><p>AI-assissted art has always been intriguing to me. To me, visual art is a very human thing -- I can’t imagine a way that a computer rediscovers our own cultural concepts without some kind of experience living in our world. So when AI methods are able to learn from us, and produce artwork that we as humans might make ourselves, something cool is definitely happening.</p><p>This post presents <em>CLIPDraw</em>, a text-to-drawing synthesis method that I’ve been playing with nonstop for the past few weeks. At its core, CLIPDraw is quite simple, yet it is able to produce drawings that display a whole range of interesting behaviors and connections. So for this article, I want to focus on showing off behaviors of CLIPDraw that I personally found intriguing and wanted to learn more about. For more detailed analysis and technical detail, check out the<a href=\"https://arxiv.org/abs/2106.14843\"> CLIPDraw paper</a>, or play around with <a href=\"https://colab.research.google.com/github/ kvfrans/clipdraw/blob/main/clipdraw.ipynb\">the Colab notebook</a> yourself!</p><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://kvfrans.com/content/images/2021/06/Screen-Shot-2021-06-10-at-8.47.23-PM.png\" class=\"kg-image\" alt srcset=\"https://kvfrans.com/content/images/size/w600/2021/06/Screen-Shot-2021-06-10-at-8.47.23-PM.png 600w, https://kvfrans.com/content/images/size/w1000/2021/06/Screen-Shot-2021-06-10-at-8.47.23-PM.png 1000w, https://kvfrans.com/content/images/2021/06/Screen-Shot-2021-06-10-at-8.47.23-PM.png 1080w\"></figure><h2 id=\"image-synthesis-drawing-synthesis\">Image Synthesis -> Drawing Synthesis</h2><p>The field of text-to-image synthesis has a broad history, and recent methods have shown stunningly realistic image generation through GAN-like methods. Realism, however, is a double-edged sword – there's a lot of overhead in generating photorealistic renderings, when often all we want are simple drawings. With CLIPDraw, I took inspiration from the web game <a href=\"https://skribbl.io/\">Skribbl.io</a>, where players only have a few seconds to draw out a word for other players to guess. What if an AI could play Skribbl.io? What would it draw? Are simple shapes enough to represent increasingly complex concepts?</p><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://kvfrans.com/content/images/2021/06/Screen-Shot-2021-06-18-at-11.05.09-AM.png\" class=\"kg-image\" alt srcset=\"https://kvfrans.com/content/images/size/w600/2021/06/Screen-Shot-2021-06-18-at-11.05.09-AM.png 600w, https://kvfrans.com/content/images/size/w1000/2021/06/Screen-Shot-2021-06-18-at-11.05.09-AM.png 1000w, https://kvfrans.com/content/images/2021/06/Screen-Shot-2021-06-18-at-11.05.09-AM.png 1214w\" sizes=\"(min-width: 1200px) 1200px\"></figure><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://kvfrans.com/content/images/2021/06/Screen-Shot-2021-06-18-at-11.12.52-AM.png\" class=\"kg-image\" alt srcset=\"https://kvfrans.com/content/images/size/w600/2021/06/Screen-Shot-2021-06-18-at-11.12.52-AM.png 600w, https://kvfrans.com/content/images/size/w1000/2021/06/Screen-Shot-2021-06-18-at-11.12.52-AM.png 1000w, https://kvfrans.com/content/images/2021/06/Screen-Shot-2021-06-18-at-11.12.52-AM.png 1212w\" sizes=\"(min-width: 1200px) 1200px\"></figure><h2 id=\"how-does-clipdraw-work\">How does CLIPDraw work?</h2><p>CLIPDraw's knowledge is powered through a pre-trained CLIP model, a recent release which I definitely reccommend <a href=\"https://openai.com/blog/clip/\">reading about.</a> In short, a CLIP model consists of an image encoder and a text encoder, which both map onto the same represenational space. This setup allows us to measure the <em>similarities</em> betweeen images and text. And if we can measure similarities, we can also try to discover images that maximize that similarity, therefore matching a given textual prompt.</p><p>The basic CLIPDraw loop follows this principle of synthesis-through-optimization. First, start with a human-given description prompt and a random set of Bezier curves. Then, gradually adjust those curves through gradient descent so that the drawing best matches the given prompt. There are a few tricks that also help, <a href=\"https://arxiv.org/abs/2106.14843\">as detailed in the paper,</a> but this loop is basically all there is to it.</p><p>Now, let's examine what CLIPDraw comes up with in practice.</p><!--kg-card-begin: html--><hr class=\"gridhr\"><br><!--kg-card-end: html--><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://kvfrans.com/content/images/2021/06/Screen-Shot-2021-06-23-at-10.35.48-AM.png\" class=\"kg-image\" alt srcset=\"https://kvfrans.com/content/images/size/w600/2021/06/Screen-Shot-2021-06-23-at-10.35.48-AM.png 600w, https://kvfrans.com/content/images/size/w1000/2021/06/Screen-Shot-2021-06-23-at-10.35.48-AM.png 1000w, https://kvfrans.com/content/images/size/w1600/2021/06/Screen-Shot-2021-06-23-at-10.35.48-AM.png 1600w, https://kvfrans.com/content/images/2021/06/Screen-Shot-2021-06-23-at-10.35.48-AM.png 1867w\" sizes=\"(min-width: 1200px) 1200px\"></figure><h2 id=\"what-visual-techniques-does-clipdraw-use\">What visual techniques does CLIPDraw use?</h2><p>A reoccuring theme is that CLIPDraw tends to interpret the description prompts in multiple, unexpected ways. A great example for this is \"<em>A painting of a starry night sky</em>\", which shows a painterly-styled sky with a moon and stars, along with an actual painting canvas and painter in the foreground, which then also features black and blue swirls resembling Van Gogh's <em>\"The Starry Night\"</em>.</p><p>CLIPDraw also likes to use abstract symbols, the most prominent being when it writes out the literal word inside the image itself. Sometimes, CLIPDraw will use tangentially related concepts, like the Google Maps screenshot when asked for \"自転車 (<em>Bicycle</em> in Japanese)”. A fun result is the prompt for \"<em>Fast Food\", </em>which shows hamburgers and a McDonald's logo, but also has a bunch of joggers racing in the background.</p><!--kg-card-begin: html--><hr class=\"gridhr\"><br><!--kg-card-end: html--><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://kvfrans.com/content/images/2021/06/Screen-Shot-2021-06-23-at-10.31.19-AM.png\" class=\"kg-image\" alt srcset=\"https://kvfrans.com/content/images/size/w600/2021/06/Screen-Shot-2021-06-23-at-10.31.19-AM.png 600w, https://kvfrans.com/content/images/size/w1000/2021/06/Screen-Shot-2021-06-23-at-10.31.19-AM.png 1000w, https://kvfrans.com/content/images/size/w1600/2021/06/Screen-Shot-2021-06-23-at-10.31.19-AM.png 1600w, https://kvfrans.com/content/images/2021/06/Screen-Shot-2021-06-23-at-10.31.19-AM.png 1855w\" sizes=\"(min-width: 1200px) 1200px\"></figure><h2 id=\"how-does-clipdraw-react-to-different-styles\">How does CLIPDraw react to different styles?</h2><p>An experiment I really enjoyed was to synthesize images of cats, but in different artistic styles. With CLIPDraw, this was as easy as changing the descriptor adjectives of the textual prompt. Surprisingly, CLIPDraw is quite robust at handling different styles, contrary to the initial intent to synthesize scribble-like drawings.</p><p>One interesting feature is that CLIPDraw adjusts not only the textures of drawings, ala <a href=\"https://arxiv.org/abs/1508.06576\">Style Transfer</a> methods, but also the structure of the underlying content. In the cat experiments, asking for <em>\"a drawing\"</em> produces a simplified cartoonish cat, while prompts like <em>\"a 3D wireframe\"</em> produce a cat in perspective, with depth and shadows.</p><!--kg-card-begin: html--><hr class=\"gridhr\"><br><!--kg-card-end: html--><figure class=\"kg-card kg-image-card kg-width-wide kg-card-hascaption\"><img src=\"https://kvfrans.com/content/images/2021/06/Screen-Shot-2021-06-23-at-10.41.16-AM.png\" class=\"kg-image\" alt srcset=\"https://kvfrans.com/content/images/size/w600/2021/06/Screen-Shot-2021-06-23-at-10.41.16-AM.png 600w, https://kvfrans.com/content/images/size/w1000/2021/06/Screen-Shot-2021-06-23-at-10.41.16-AM.png 1000w, https://kvfrans.com/content/images/size/w1600/2021/06/Screen-Shot-2021-06-23-at-10.41.16-AM.png 1600w, https://kvfrans.com/content/images/2021/06/Screen-Shot-2021-06-23-at-10.41.16-AM.png 1767w\" sizes=\"(min-width: 1200px) 1200px\"><figcaption>\"The Eiffel Tower\"</figcaption></figure><h2 id=\"does-stroke-count-affect-the-drawings-that-clipdraw-produces\">Does stroke count affect the drawings that CLIPDraw produces?</h2><p>A key aspect of CLIPDraw is that drawings are represented as a set of Bezier curves rather than a matrix of pixels. This feature gives us a nice parameter to tweak in the number of curves a drawing is comprised of.</p><p>Emperically, drawings with low stroke counts tend to result in a more cartoonish or abstract representation of the prompt, such as the 16-stroke version of <em>\"The Eiffel Tower\"</em> being basically made of a few straight lines. As stroke count is increased, CLIPDraw begins to target more structured shapes, shown as our Eiffel Tower begins gaining 3D perspective, lights, and finally a background.</p><!--kg-card-begin: html--><hr class=\"gridhr\"><br><!--kg-card-end: html--><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://kvfrans.com/content/images/2021/06/Screen-Shot-2021-06-23-at-10.36.16-AM.png\" class=\"kg-image\" alt srcset=\"https://kvfrans.com/content/images/size/w600/2021/06/Screen-Shot-2021-06-23-at-10.36.16-AM.png 600w, https://kvfrans.com/content/images/size/w1000/2021/06/Screen-Shot-2021-06-23-at-10.36.16-AM.png 1000w, https://kvfrans.com/content/images/size/w1600/2021/06/Screen-Shot-2021-06-23-at-10.36.16-AM.png 1600w, https://kvfrans.com/content/images/2021/06/Screen-Shot-2021-06-23-at-10.36.16-AM.png 1739w\" sizes=\"(min-width: 1200px) 1200px\"></figure><h2 id=\"what-happens-if-abstract-words-are-given-as-a-prompt\">What happens if abstract words are given as a prompt?</h2><p>A fun thing to push the limits is to give CLIPDraw abstract descriptions, and see what it does with them. As a human artist, even I would have to stop and think about how to convey these concepts through visuals, so it's interesting to see how the AI will approach things.</p><p>In most cases, CLIPDraw likes to use symbols to showcase concepts that are culturally related to the given phrase, like the fireworks and smiles in <em>\"Happiness\"</em> or the Japanese and English-like letters in <em>\"Translation\"</em>. </p><p>My favorite here is the drawing for <em>\"Self\"</em>, which features a body holding up multiple heads. The drawing can almost be seen as a metaphor for e.g. the idea that a person's self may contain multiple outward personalities, or that a self is actually a sum of many cognitive processes. This piece is defintely the most \"art-like\" example I came across; there's a lot of room for individual interpretation, and it almost feels like CLIP knows something that I don't.</p><!--kg-card-begin: html--><hr class=\"gridhr\"><br><!--kg-card-end: html--><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://kvfrans.com/content/images/2021/06/Screen-Shot-2021-06-23-at-10.40.08-AM.png\" class=\"kg-image\" alt srcset=\"https://kvfrans.com/content/images/size/w600/2021/06/Screen-Shot-2021-06-23-at-10.40.08-AM.png 600w, https://kvfrans.com/content/images/size/w1000/2021/06/Screen-Shot-2021-06-23-at-10.40.08-AM.png 1000w, https://kvfrans.com/content/images/size/w1600/2021/06/Screen-Shot-2021-06-23-at-10.40.08-AM.png 1600w, https://kvfrans.com/content/images/2021/06/Screen-Shot-2021-06-23-at-10.40.08-AM.png 1891w\" sizes=\"(min-width: 1200px) 1200px\"></figure><h2 id=\"can-drawings-be-fine-tuned-via-negative-prompts\">Can drawings be fine-tuned via negative prompts?</h2><p>A final experiment was to see if CLIPDraw behavior could be finely adjusted by introducing additional optimization objectives. In the normal process, drawings are optimized to best match a textual prompt. What if we also tried to optimize unsimilarity with a set of <em>negative prompts</em>?</p><p>In a few situations, this works! By penalizing the prompt for \"Words and text\", the <em>\"Hashtag</em>\" drawing features less prominent words and instead draws a set of selfie-like faces. Negative prompts can also do things like adjust the color of images, or force drawings to contain only a single subject rather than many.</p><p>Practially, the examples above were pretty hard to achieve, and most of the time negative prompts don't change much about the final drawing at all. I think there's still a lot of room for experimentation on how to improve this technique. One thing I'd love to see is a panacea prompt, like \"A messy drawing\", that consistently improves drawing quality if used as a negative objective regardless of context.</p><!--kg-card-begin: html--><hr class=\"gridhr\"><br><!--kg-card-end: html--><h2 id=\"clipdraw-parting-thoughts\">CLIPDraw: Parting Thoughts</h2><p>The CLIPDraw algorithm isn't particularly novel; people have doing synthesis-through-optimization for a while through activation-maximization methods, and recently through CLIP-matching objectives. However, I do believe biasing towards drawings rather than photorealism gives images more freedom of expression, and optimizing Bezier curves is a nice way to do this efficiently. I also personally love this artstyle and I think the drawings are quite similar to what an artist would produce ;). </p><p>That being said, I do think the behaviors showcased here should be pretty generalizable to any CLIP-based optimization method. Already a few extensions come to mind – Can we synthesize videos? 3D models? Can an AI play <a href=\"https://skribbl.io/\">Skribbl</a> or <a href=\"https://www.brokenpicturephone.com/\">Broken Picture Phone</a> with itself? I'm sure you as a reader have a bunch of ideas I haven't even considered. So please, feel free to take this method and go wherever you feel is exciting. And then <a href=\"https://twitter.com/kvfrans\">tell me about it!</a></p><p>You can experiment with <a href=\"https://colab.research.google.com/github/kvfrans/clipdraw/blob/main/clipdraw.ipynb\">the Colab notebook here</a>, and play with CLIPDraw in the browser. Results are generally pretty quick (within a minute) unless you crank up stroke count and iterations. You can also check out <a href=\"https://arxiv.org/abs/2106.14843\">the full paper</a>, which contains a bit of a deeper analysis and details on the technical implementation.</p><!--kg-card-begin: html--><figure class=\"kg-card kg-gallery-card\">\n    <div class=\"kg-gallery-container\">\n        <div class=\"kg-gallery-row\">\n            <div class=\"kg-gallery-image\" style=\"flex: 1 1 0%;\">\n                                Thanks for reading!<br>\n                <video class=\"b-lazy b-loaded gridvideo\" type=\"video/mp4\" style=\"width:10em\" autoplay muted playsinline loop src=\"https://kvfrans.com/static/outputleo.mp4\">\n                </video>\n                <figcaption>\n                    \n\"Leonardo Dicaprio cheers meme template\"\n                </figcaption>\n            </div>\n        </div>\n    </div>\n</figure><!--kg-card-end: html--><!--kg-card-begin: html--><hr class=\"gridhr\">\n<br>\n<div class=\"float-outside\">\n<div class=\"appendix\">\n    <div class=\"float-label\">\n        Appendix\n    </div><!--kg-card-end: html--><p>Thank you to everyone at <a href=\"http://crosslabs.org/\">Cross Labs</a> for assisstance and feedback.</p><!--kg-card-begin: html--><div class=\"float-label\" style=\"clear: both\">\n\tThings To Read\n</div><!--kg-card-end: html--><p><strong><a href=\"https://kvfrans.com/p/2db72cf5-f055-4ab2-990c-23ac65f4a138/arxiv\">\"CLIPDraw: Exploring Text-to-Drawing Synthesis via Language-Image Encoders\"</a>, by Frans et al. </strong>Of course a nice place to start is the paper for CLIPDraw! The paper mostly contains a similar focus on analyzing interesting behaviors, but also includes some comparisons and a Related Work section of good papers to read up on.</p><p><strong><a href=\"https://openai.com/blog/clip/\">\"CLIP: Connecting Text and Images\"</a>, by Radford et al. </strong>This is the blog for the original CLIP release, from OpenAI. CLIP is a language-image dual encoder that maps text and images onto the same feature space. Trained on a huge amount of online data, CLIP ends up being super robust and can solve a bunch of image tasks without any additional training. <a href=\"https://arxiv.org/abs/2103.00020\">(Paper)</a></p><p><strong><a href=\"https://people.csail.mit.edu/tzumao/diffvg/\">\"Differentiable Vector Graphics Rasterization for Editing and Learning\"</a>, by Li et al.</strong> This work is the differentiable vector graphics methods that we use in CLIPDraw to backprop through Bezier curves. It's really impressive and basically works out of the box, so I highly reccommend giving it a read.</p><p><strong><a href=\" https://arxiv.org/abs/2105.00162\">\"Generative Art Using Neural Visual Grammars and Dual Encoders\"</a>, by Fernando et al. </strong>This paper is another CLIP-based generative art method, also using stroke-based images, but with an emphasis on AI creativity. Instead of backprop, they use evolutionary methods to evolve a custom LSTM-based grammar which defines the strokes. Also their figures are cool.</p><p><strong><a href=\"https://twitter.com/images_ai\">\"Images Generated By AI Machines\"</a>, by <a href=\"https://twitter.com/samburtonking\">@samburtonking</a>. </strong>Also check out the <a href=\"https://colab.research.google.com/drive/1NCceX2mbiKOSlAd_o7IU7nA9UskKN5WR?usp=sharing\">Colab</a> <a href=\"https://colab.research.google.com/drive/1go6YwMFe5MX6XM9tv-cnQiSTU50N9EeT?fbclid=IwAR30ZqxIJG0-2wDukRydFA3jU5OpLHrlC_Sg1iRXqmoTkEhaJtHdRi6H7AI#scrollTo=CppIQlPhhwhs\">notebooks</a> by <a href=\"https://twitter.com/advadnoun\">@advadnoun</a> and <a href=\"https://twitter.com/RiversHaveWings\">@RiversHaveWings</a>, respectively. This twitter account basically shows off cool generative art made from CLIP + GAN optimization methods. A lot of interesting pieces have been made and it's well worth looking through.</p><p><strong><a href=\"https://github.com/ajayjain/VectorAscent\">\"VectorAscent: Generate vector graphics from a textual description\"</a> by Ajay Jain. </strong>Here's a project from earlier this year that actually used the same techniques of combining CLIP and diffvg. The key difference is in the image augmentation, which seems to help in ensuring synthesized drawings look more consistent.</p></div></div>"
}