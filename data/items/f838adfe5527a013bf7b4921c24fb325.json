{
  "title": "Shrink Raspberry Pi Images",
  "description": "<p>I often make images of Raspberry Pi sdcards for easy installation and cloning. \nUnfortunately the size of the image will always be that of the size of the card, \nwhich is usually much larger than the amount of actual data.\nThankfully there is a way to shrink an image, though every tutorial i’ve seen\nonline is cumbersome and manual (e.g. using gparted). Instead I \n<a href=\"https://github.com/mtyka/shrinkwrap\">wrote a script</a>\nthat does it automatically and shrinks the image to it’s minimal size.</p>\n\n<p>NOTE: USE AT OWN RISK - THIS IS UNTESTED. ALWAYS BACKUP YOUR IMAGE BEFORE TRYING\nTHIS.</p>\n\n<h2 id=\"clone-the-script\">Clone the script</h2>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>git clone https://github.com/mtyka/shrinkwrap.git\n<span class=\"nb\">cd </span>shrinkwrap\n</code></pre></div></div>\n\n<h2 id=\"copy-the-sd-card-over\">Copy the sd card over</h2>\n\n<p>Find your sdcard device, might be /dev/sdb or /dev/mmcblk0 or other.</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>lsblk\n</code></pre></div></div>\n\n<p>Copy the image locally to an img file</p>\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">sudo dd </span><span class=\"nv\">bs</span><span class=\"o\">=</span>4M <span class=\"k\">if</span><span class=\"o\">=</span>/dev/mmcblk0 <span class=\"nv\">of</span><span class=\"o\">=</span>myimage.img <span class=\"nv\">conv</span><span class=\"o\">=</span>fsync <span class=\"nv\">status</span><span class=\"o\">=</span>progress\n</code></pre></div></div>\n\n<h2 id=\"shrink-the-image\">Shrink the image</h2>\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>./shrinkwrap.sh myimage.img\n</code></pre></div></div>\n\n<h2 id=\"copy-the-image-to-new-sd-card\">Copy the image to new sd card</h2>\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">sudo dd </span><span class=\"nv\">bs</span><span class=\"o\">=</span>4M <span class=\"k\">if</span><span class=\"o\">=</span>myimage.img <span class=\"nv\">of</span><span class=\"o\">=</span>/dev/mmcblk0.img <span class=\"nv\">conv</span><span class=\"o\">=</span>fsync <span class=\"nv\">status</span><span class=\"o\">=</span>progress\n</code></pre></div></div>\n\n<h2 id=\"boot-from-the-card\">Boot from the card</h2>\n\n<p>You can now resize the image back to take the full SD card size by going to:</p>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>sudo raspi-config\n</code></pre></div></div>\n\n<p>And then choose “Expand root partition to fill SD card” option under Advanced \nOptions.</p>",
  "pubDate": "Thu, 25 Jul 2019 00:00:00 +0000",
  "link": "http://mtyka.github.io//raspberrypi/2019/07/25/shrink-raspberrypi-image.html",
  "guid": "http://mtyka.github.io//raspberrypi/2019/07/25/shrink-raspberrypi-image.html",
  "category": "raspberrypi"
}