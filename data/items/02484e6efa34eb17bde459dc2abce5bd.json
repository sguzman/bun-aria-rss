{
  "title": "Mathematics of measles",
  "link": "",
  "published": "2015-02-25T13:37:00-08:00",
  "updated": "2015-02-25T13:37:00-08:00",
  "author": {
    "name": "Jonathan Landy"
  },
  "id": "tag:efavdb.com,2015-02-25:/math-of-measles",
  "summary": "<p>Here, we introduce &#8212; and outline a solution to &#8212; a generalized <span class=\"caps\">SIR</span> model for infectious disease. This is referenced in our <a href=\"http://efavdb.github.io/vaccination-rates\">following post</a> on measles and vaccination rates. Our generalized <span class=\"caps\">SIR</span> model differs from the <a href=\"http://en.wikipedia.org/wiki/Epidemic_model#The_SIR_model\">original <span class=\"caps\">SIR</span> model</a> of Kermack and McKendrick in that we allow for two susceptible sub-populations, one …</p>",
  "content": "<p>Here, we introduce &#8212; and outline a solution to &#8212; a generalized <span class=\"caps\">SIR</span> model for infectious disease. This is referenced in our <a href=\"http://efavdb.github.io/vaccination-rates\">following post</a> on measles and vaccination rates. Our generalized <span class=\"caps\">SIR</span> model differs from the <a href=\"http://en.wikipedia.org/wiki/Epidemic_model#The_SIR_model\">original <span class=\"caps\">SIR</span> model</a> of Kermack and McKendrick in that we allow for two susceptible sub-populations, one vaccinated against disease and one not. We conclude by presenting some python code that integrates the equations numerically. An example solution obtained using this code is given&nbsp;below.</p>\n<iframe width=\"600\" height=\"533\" frameborder=\"0\" scrolling=\"no\" src=\"//plot.ly/~jslandy/58.embed\"></iframe>\n\n<h4><strong>The&nbsp;model</strong></h4>\n<p>The equations describing our generalized <span class=\"caps\">SIR</span> model&nbsp;are\n</p>\n<div class=\"math\">\\begin{eqnarray}\\tag{1} \\label{eq1}\n\\dot{S}_{U} &amp;=&amp; - b_{U} S_{U} I \\\\\n\\tag{2} \\label{eq2}\n\\dot{S}_{U} &amp;=&amp; - b_{U} S_{U} I \\\\\n\\tag{3} \\label{eq3}\n\\dot{R} &amp;=&amp; k I \\\\\n\\tag{4} \\label{eq4}\n1 &amp;=&amp; I + R + S_U + S_V\n\\end{eqnarray}</div>\n<p>Here, <span class=\"math\">\\(S_{U}\\)</span>, <span class=\"math\">\\(S_{V}\\)</span>, <span class=\"math\">\\(I\\)</span>, and <span class=\"math\">\\(R\\)</span> are population fractions corresponding to those unvaccinated and as yet uninfected, vaccinated and as yet uninfected, currently infected and contagious, and once contagious but no longer (recovered, perhaps), respectively. The first two equations above are instances of the <a href=\"http://en.wikipedia.org/wiki/Law_of_mass_action\">law of mass action</a>. They approximate the infection rates as being proportional to the rates of susceptible-infected individual encounters. We refer to <span class=\"math\">\\(b_{U}\\)</span> and <span class=\"math\">\\(b_{V}\\)</span> here as the <em>infection rate parameters</em> of the two subpopulations. The third equation above approximates the dynamics of recovery: The form chosen supposes that an infected individual has a fixed probability of returning to health each day. We will refer to <span class=\"math\">\\(k\\)</span> as the <em>recovery rate parameter</em>. The final equation above simply states that the subpopulation fractions have to always sum to&nbsp;one.</p>\n<h4><strong>Parameter&nbsp;estimation</strong></h4>\n<p>We can estimate the values <span class=\"math\">\\(b_{U}\\)</span> and <span class=\"math\">\\(b_{V}\\)</span> by introducing a close contact number (<span class=\"math\">\\(ccn\\)</span>) variable, which is the average number of close contacts that individual infected, contagious people make per day. As a rough ball park, let us suppose that <span class=\"math\">\\(ccn \\approx 3\\)</span>. According to the <span class=\"caps\">CDC</span>, an un-vaccinated person making close contact with someone with measles has a 90<span class=\"math\">\\(%\\)</span> chance of contracting the illness. On the other hand, those who have been vaccinated a single time have a 95<span class=\"math\">\\(%\\)</span> chance of being immune to the disease. Let&#8217;s estimate that the combined population of individuals who have been vaccinated have a 1<span class=\"math\">\\(%\\)</span> chance of contracting the illness upon close contact. These considerations&nbsp;suggest\n</p>\n<div class=\"math\">\\begin{align}\nb_{U} \\approx 3 \\times 0.9 &amp;= 0.27, \\\\\nb_{V} \\approx 3 \\times 0.01 &amp;= 0.03\n\\end{align}</div>\n<p>\nThe value of <span class=\"math\">\\(k\\)</span> can be simply estimated using the fact that infected individuals are only contagious for about <span class=\"math\">\\(8\\)</span> days, only four of which occur before rash appears. Assuming those who are showing symptoms quickly stop circulating, this suggests about five &#8220;effectively contagious&#8221; days,&nbsp;or\n</p>\n<div class=\"math\">\\begin{align}\nk \\approx 1/5 = 0.2.\n\\end{align}</div>\n<p>\nNote that here and elsewhere, we measure time in units of&nbsp;days.</p>\n<p>It&#8217;s important to note that, although the qualitative properties of the solutions to our model are insensitive to parameter value variations, this is not true for the numerical values that it predicts. We have chosen parameter values that seem reasonable to us. Further, with these choices, many of the model&#8217;s key quantitative values line up with corresponding <span class=\"caps\">CDC</span> estimates. Those interested can experiment to see what sort of flexibility is allowed through modest parameter&nbsp;variation.</p>\n<h4><strong>Solution by&nbsp;quadrature</strong></h4>\n<p>Equations (\\ref{eq1}-\\ref{eq3})&nbsp;give\n</p>\n<div class=\"math\">\\begin{align} \\tag{5} \\label{Svals}\nS_{U} = S_{U0} e^{ - \\frac{b_{U} R}{k}}, \\\\\nS_{V} = S_{V0} e^{- \\frac{b_{V} R}{k}}.\n\\end{align}</div>\n<p>\nCombining with (\\ref{eq4}) and integrating&nbsp;gives\n</p>\n<div class=\"math\">\\begin{align}\n\\frac{\\dot{R}}{k} =I_0 -S_{U0} \\left [ e^{ - \\frac{b_{U} R}{k}}- 1 \\right ] - S_{20} \\left [e^{ - \\frac{b_{V} R}{k}}- 1 \\right ] - R\n\\end{align}</div>\n<p>\nIntegrating&nbsp;again,\n</p>\n<div class=\"math\">\\begin{align} \\tag{6} \\label{solution}\nkt = \\int_{0}^R \\frac{d R^{\\prime}}{I_0 -S_{U0} \\left [ e^{ - \\frac{b_{U} R^{\\prime}}{k}}- 1 \\right ] - S_{V0} \\left [e^{ - \\frac{b_{V} R^{\\prime}}{k}}- 1 \\right ] - R^{\\prime}} .\n\\end{align}</div>\n<p>\nThis implicitly defines <span class=\"math\">\\(R\\)</span> as function of&nbsp;time.</p>\n<h4><strong>Small time&nbsp;behavior</strong></h4>\n<p>At small <span class=\"math\">\\(t\\)</span>, <span class=\"math\">\\(R\\)</span> is also small, so (\\ref{solution}) can be approximated&nbsp;as\n</p>\n<div class=\"math\">\\begin{align}\nk t = \\int_{0}^R \\frac{d R^{\\prime}}{I_0 + \\left [ \\frac{ b_{U} S_{U0}}{k} +\\frac{ b_{V} S_{V0}}{k} - 1 \\right ]R^{\\prime}}.\n\\end{align}</div>\n<p>\nThis form can be integrated analytically. Doing so, and solving for <span class=\"math\">\\(R\\)</span>, we&nbsp;obtain\n</p>\n<div class=\"math\">\\begin{align}\nR = \\frac{k}{b_{U} S_{U0} + b_{V} S_{V0} - k} \\left \\{e^{ (b_{U} S_{U0} + b_{V} S_{V0} - k )t } -1 \\right \\}, \\ \\ \\\nI = I_0 e^{ (b_{U} S_{U0} + b_{V} S_{V0} - k )t}.\n\\end{align}</div>\n<p>\nEarly disease spread is characterized by either exponential growth or decay, governed by the sign of the parameter combination <span class=\"math\">\\(b_{U} S_{U0} + b_{V} S_{V0} - k\\)</span>: a phase&nbsp;transition!</p>\n<h4><strong>Total&nbsp;contractions</strong></h4>\n<p>The total number of people infected in an outbreak can be obtained by evaluating <span class=\"math\">\\(R\\)</span> at long times, where <span class=\"math\">\\(I = 0\\)</span>. In this limit, using (\\ref{eq4}) and (\\ref{Svals}), we&nbsp;have\n</p>\n<div class=\"math\">\\begin{align}\nS_{U0} e^{- \\frac{b_{U} R}{k}}+ S_{V0} e^{ - \\frac{b_{V} R}{k}}+ R = 1.\n\\end{align}</div>\n<p>\nThis equation can be solved numerically to obtain the total contraction count as a function of the model parameters and initial conditions. A plot against <span class=\"math\">\\(S_{U0}\\)</span> of such a solution for our measles-appropriate parameter estimates is given in our <a href=\"http://efavdb.github.io/vaccination-rates\">next post</a>.</p>\n<h4><strong>Numerical integration in&nbsp;python</strong></h4>\n<p>Below, we provide code that can be used to integrate (\\ref{eq1}-\\ref{eq4}). The plot shown in our introduction provides one example solution. It&#8217;s quite interesting to see how the solutions vary with parameter values, and we suggest that those interested try it&nbsp;out.</p>\n<div class=\"highlight\"><pre><span></span><span class=\"c1\">#Solving the SIR model for infectious disease. JSL 2/18/2015</span>\n<span class=\"kn\">import</span> <span class=\"nn\">math</span>\n\n<span class=\"n\">ccn</span> <span class=\"o\">=</span> <span class=\"mi\">3</span> <span class=\"c1\"># &quot;close contact number&quot; = people per day</span>\n<span class=\"c1\">#interacting closely with typical infected person</span>\n\n<span class=\"n\">k</span> <span class=\"o\">=</span> <span class=\"mf\">1.</span><span class=\"o\">/</span><span class=\"mi\">5</span>       <span class=\"c1\"># Rate of &#39;recovery&#39; [1].</span>\n<span class=\"n\">b1</span> <span class=\"o\">=</span> <span class=\"n\">ccn</span><span class=\"o\">*</span><span class=\"mf\">0.9</span>   <span class=\"c1\"># Approximate infection rate un-vaccinated [3].</span>\n<span class=\"n\">b2</span> <span class=\"o\">=</span> <span class=\"n\">ccn</span><span class=\"o\">*</span><span class=\"mf\">0.01</span>  <span class=\"c1\"># Approximate infection rate un-vaccinated [4].</span>\n\n<span class=\"c1\">#Initial conditions (fraction of people in each category)</span>\n<span class=\"n\">I0</span> <span class=\"o\">=</span> <span class=\"mf\">0.001</span>          <span class=\"c1\"># initial population fraction infected.</span>\n<span class=\"n\">S10</span> <span class=\"o\">=</span> <span class=\"mf\">0.2</span>           <span class=\"c1\"># population fraction unvaccinated.</span>\n<span class=\"n\">S20</span> <span class=\"o\">=</span> <span class=\"mi\">1</span> <span class=\"o\">-</span> <span class=\"n\">I0</span> <span class=\"o\">-</span> <span class=\"n\">S10</span>  <span class=\"c1\"># population fraction vacccinated.</span>\n<span class=\"n\">R0</span> <span class=\"o\">=</span> <span class=\"mf\">0.0</span>            <span class=\"c1\"># intial recovered fraction.</span>\n\n<span class=\"n\">dt</span> <span class=\"o\">=</span> <span class=\"mf\">0.01</span>           <span class=\"c1\"># integration time step</span>\n<span class=\"n\">days</span> <span class=\"o\">=</span> <span class=\"mi\">100</span>          <span class=\"c1\"># total days considered</span>\n\n<span class=\"n\">I</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">I0</span> <span class=\"k\">for</span> <span class=\"n\">i</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"nb\">int</span><span class=\"p\">(</span><span class=\"n\">days</span><span class=\"o\">/</span><span class=\"n\">dt</span><span class=\"p\">))]</span>\n<span class=\"n\">S1</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">S10</span> <span class=\"k\">for</span> <span class=\"n\">i</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"nb\">int</span><span class=\"p\">(</span><span class=\"n\">days</span><span class=\"o\">/</span><span class=\"n\">dt</span><span class=\"p\">))]</span>\n<span class=\"n\">S2</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">S20</span> <span class=\"k\">for</span> <span class=\"n\">i</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"nb\">int</span><span class=\"p\">(</span><span class=\"n\">days</span><span class=\"o\">/</span><span class=\"n\">dt</span><span class=\"p\">))]</span>\n<span class=\"n\">R</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">R0</span> <span class=\"k\">for</span> <span class=\"n\">i</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"nb\">int</span><span class=\"p\">(</span><span class=\"n\">days</span><span class=\"o\">/</span><span class=\"n\">dt</span><span class=\"p\">))]</span>\n\n<span class=\"k\">for</span> <span class=\"n\">i</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"nb\">int</span><span class=\"p\">(</span><span class=\"n\">days</span><span class=\"o\">/</span><span class=\"n\">dt</span><span class=\"p\">)):</span>\n    <span class=\"n\">S1</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">S1</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"o\">-</span> <span class=\"n\">b1</span> <span class=\"o\">*</span> <span class=\"n\">S1</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"o\">*</span> <span class=\"n\">I</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"o\">*</span> <span class=\"n\">dt</span>\n    <span class=\"n\">S2</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">S2</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"o\">-</span> <span class=\"n\">b2</span> <span class=\"o\">*</span> <span class=\"n\">S2</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"o\">*</span> <span class=\"n\">I</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"o\">*</span> <span class=\"n\">dt</span>\n    <span class=\"n\">I</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">I</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"o\">+</span> <span class=\"p\">(</span><span class=\"n\">b1</span> <span class=\"o\">*</span> <span class=\"n\">S1</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"o\">*</span> <span class=\"n\">I</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"o\">+</span> \\\n    <span class=\"n\">b2</span> <span class=\"o\">*</span> <span class=\"n\">S2</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"o\">*</span> <span class=\"n\">I</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"o\">-</span> <span class=\"n\">k</span><span class=\"o\">*</span><span class=\"n\">I</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"p\">)</span> <span class=\"o\">*</span> <span class=\"n\">dt</span>\n    <span class=\"n\">R</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">R</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"o\">+</span> <span class=\"n\">k</span> <span class=\"o\">*</span> <span class=\"n\">I</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"o\">*</span> <span class=\"n\">dt</span>\n\n<span class=\"n\">time</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">dt</span> <span class=\"o\">*</span> <span class=\"n\">i</span> <span class=\"k\">for</span> <span class=\"n\">i</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">(</span><span class=\"n\">days</span><span class=\"o\">/</span><span class=\"n\">dt</span><span class=\"p\">))]</span>\n\n<span class=\"o\">%</span><span class=\"n\">pylab</span> <span class=\"n\">inline</span>\n<span class=\"n\">plt</span><span class=\"o\">.</span><span class=\"n\">plot</span><span class=\"p\">(</span><span class=\"n\">time</span><span class=\"p\">,</span> <span class=\"n\">I</span><span class=\"p\">,</span> <span class=\"n\">color</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;red&#39;</span><span class=\"p\">)</span>\n<span class=\"n\">plt</span><span class=\"o\">.</span><span class=\"n\">plot</span><span class=\"p\">(</span><span class=\"n\">time</span><span class=\"p\">,</span> <span class=\"n\">S1</span><span class=\"p\">,</span> <span class=\"n\">color</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;blue&#39;</span><span class=\"p\">)</span>\n<span class=\"n\">plt</span><span class=\"o\">.</span><span class=\"n\">plot</span><span class=\"p\">(</span><span class=\"n\">time</span><span class=\"p\">,</span> <span class=\"n\">S2</span><span class=\"p\">,</span> <span class=\"n\">color</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;green&#39;</span><span class=\"p\">)</span>\n<span class=\"n\">plt</span><span class=\"o\">.</span><span class=\"n\">plot</span><span class=\"p\">(</span><span class=\"n\">time</span><span class=\"p\">,</span> <span class=\"n\">R</span><span class=\"p\">,</span> <span class=\"n\">color</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;black&#39;</span><span class=\"p\">)</span>\n<span class=\"n\">plt</span><span class=\"o\">.</span><span class=\"n\">plot</span><span class=\"p\">(</span>\n    <span class=\"n\">time</span><span class=\"p\">[:</span><span class=\"mi\">1400</span><span class=\"p\">],</span>\n    <span class=\"p\">[</span><span class=\"n\">I0</span><span class=\"o\">*</span> <span class=\"n\">math</span><span class=\"o\">.</span><span class=\"n\">exp</span><span class=\"p\">((</span><span class=\"n\">b1</span> <span class=\"o\">*</span><span class=\"n\">S10</span> <span class=\"o\">+</span> <span class=\"n\">b2</span><span class=\"o\">*</span> <span class=\"n\">S20</span> <span class=\"o\">-</span> <span class=\"n\">k</span><span class=\"p\">)</span><span class=\"o\">*</span><span class=\"n\">t</span><span class=\"p\">)</span> <span class=\"k\">for</span> <span class=\"n\">t</span> <span class=\"ow\">in</span> <span class=\"n\">time</span><span class=\"p\">[:</span><span class=\"mi\">1400</span><span class=\"p\">]],</span>\n    <span class=\"n\">color</span><span class=\"o\">=</span><span class=\"s1\">&#39;purple&#39;</span><span class=\"p\">)</span>\n<span class=\"n\">plt</span><span class=\"o\">.</span><span class=\"n\">axis</span><span class=\"p\">([</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">100</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"o\">**</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">4</span><span class=\"p\">),</span><span class=\"mi\">1</span><span class=\"p\">])</span>\n<span class=\"n\">plt</span><span class=\"o\">.</span><span class=\"n\">yscale</span><span class=\"p\">(</span><span class=\"s1\">&#39;log&#39;</span><span class=\"p\">)</span>\n<span class=\"n\">plt</span><span class=\"o\">.</span><span class=\"n\">xlabel</span><span class=\"p\">(</span><span class=\"s1\">&#39;time [days]&#39;</span><span class=\"p\">)</span>\n<span class=\"n\">plt</span><span class=\"o\">.</span><span class=\"n\">ylabel</span><span class=\"p\">(</span><span class=\"s1\">&#39;population %</span><span class=\"se\">\\&#39;</span><span class=\"s1\">s&#39;</span><span class=\"p\">)</span>\n<span class=\"n\">plt</span><span class=\"o\">.</span><span class=\"n\">show</span><span class=\"p\">()</span>\n\n<span class=\"c1\"># [1] Measles patients are contagious for eight days</span>\n<span class=\"c1\"># four of which are before symptoms appear. [2]</span>\n<span class=\"c1\"># [2] http://www.cdc.gov/measles/about/transmission.html</span>\n<span class=\"c1\"># [3] Assume infected have close contact with five people/day.</span>\n<span class=\"c1\"># 90% of the un-vaccinated get sick in such situations.</span>\n<span class=\"c1\"># [4] Single vaccination gives ~95% immunity rate [5]. Many</span>\n<span class=\"c1\"># have two doses, which drops rate to very low.</span>\n<span class=\"c1\"># [5] http://www.cdc.gov/mmwr/preview/mmwrhtml/00053391.htm</span>\n</pre></div>\n\n\n<script type=\"text/javascript\">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {\n    var align = \"center\",\n        indent = \"0em\",\n        linebreak = \"false\";\n\n    if (false) {\n        align = (screen.width < 768) ? \"left\" : align;\n        indent = (screen.width < 768) ? \"0em\" : indent;\n        linebreak = (screen.width < 768) ? 'true' : linebreak;\n    }\n\n    var mathjaxscript = document.createElement('script');\n    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';\n    mathjaxscript.type = 'text/javascript';\n    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';\n\n    var configscript = document.createElement('script');\n    configscript.type = 'text/x-mathjax-config';\n    configscript[(window.opera ? \"innerHTML\" : \"text\")] =\n        \"MathJax.Hub.Config({\" +\n        \"    config: ['MMLorHTML.js'],\" +\n        \"    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } },\" +\n        \"    jax: ['input/TeX','input/MathML','output/HTML-CSS'],\" +\n        \"    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js'],\" +\n        \"    displayAlign: '\"+ align +\"',\" +\n        \"    displayIndent: '\"+ indent +\"',\" +\n        \"    showMathMenu: true,\" +\n        \"    messageStyle: 'normal',\" +\n        \"    tex2jax: { \" +\n        \"        inlineMath: [ ['\\\\\\\\(','\\\\\\\\)'] ], \" +\n        \"        displayMath: [ ['$$','$$'] ],\" +\n        \"        processEscapes: true,\" +\n        \"        preview: 'TeX',\" +\n        \"    }, \" +\n        \"    'HTML-CSS': { \" +\n        \"        availableFonts: ['STIX', 'TeX'],\" +\n        \"        preferredFont: 'STIX',\" +\n        \"        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} },\" +\n        \"        linebreaks: { automatic: \"+ linebreak +\", width: '90% container' },\" +\n        \"    }, \" +\n        \"}); \" +\n        \"if ('default' !== 'default') {\" +\n            \"MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {\" +\n                \"var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;\" +\n                \"VARIANT['normal'].fonts.unshift('MathJax_default');\" +\n                \"VARIANT['bold'].fonts.unshift('MathJax_default-bold');\" +\n                \"VARIANT['italic'].fonts.unshift('MathJax_default-italic');\" +\n                \"VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');\" +\n            \"});\" +\n            \"MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {\" +\n                \"var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;\" +\n                \"VARIANT['normal'].fonts.unshift('MathJax_default');\" +\n                \"VARIANT['bold'].fonts.unshift('MathJax_default-bold');\" +\n                \"VARIANT['italic'].fonts.unshift('MathJax_default-italic');\" +\n                \"VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');\" +\n            \"});\" +\n        \"}\";\n\n    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);\n    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);\n}\n</script>",
  "category": ""
}