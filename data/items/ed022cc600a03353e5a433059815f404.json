{
  "title": "Learning to Rank Overview",
  "link": "https://wellecks.wordpress.com/2015/01/15/learning-to-rank-overview/",
  "comments": "https://wellecks.wordpress.com/2015/01/15/learning-to-rank-overview/#respond",
  "dc:creator": "wellecks",
  "pubDate": "Thu, 15 Jan 2015 23:18:27 +0000",
  "category": [
    "artificial intelligence",
    "machine learning"
  ],
  "guid": "http://wellecks.wordpress.com/?p=930",
  "description": "How does a search engine rank the results that it returns? How does a question and answering system select a final answer? How does a translation system ultimately choose a translation for some text? In the next few posts, we will gain insight into these questions by exploring a sub-domain of machine learning called Learning to Rank. Each [&#8230;]",
  "content:encoded": "<p style=\"text-align:center;\">How does a search engine rank the results that it returns?</p>\n<p style=\"text-align:center;\">How does a question and answering system select a final answer?</p>\n<p style=\"text-align:center;\">How does a translation system ultimately choose a translation for some text?</p>\n<p>In the next few posts, we will gain insight into these questions by exploring a sub-domain of machine learning called <strong>Learning to Rank</strong>. Each of the three questions has a common last step, where an algorithm takes a list of &#8216;candidates&#8217; and produces a ranked list of results.</p>\n<p>In the translation case, we give a system of string of text to translate, and it produces, say, 20 potential candidate translations. Then a Learning to Rank model steps in, ranks those 20 candidates, and returns the top candidate.</p>\n<p>In the question-answering case, we give a system a query string, and it produces, say, 100 potential answers. Again we use a Learning to Rank model to produce a ranking of the potential answers, and select the top one as the final answer.</p>\n<p>In the search engine case, we type in a search query, and the search engine produces, say, 1000 candidate search results. The order of the final results that you eventually see are produced by a Learning to Rank model that ranks those 1000 candidate results.</p>\n<p>To explore the details, we&#8217;ll first define the problem addressed in the Learning to Rank domain and survey the methods, datasets, and metrics that are used. Then in the next posts, we&#8217;ll look in depth at a state of the art model called LambdaMART, and devise a way of visualizing its training process and the resulting model. Along the way we&#8217;ll also develop wrapper code for running a major learning to rank library called JForests and discuss other problems tackled by the field.</p>\n<h1 style=\"text-align:center;\">Learning to Rank</h1>\n<p>As a first step, we&#8217;ll define the problem. While learning to rank has numerous applications including machine translation, QA, and even spell checking, we&#8217;ll use search engine document ranking as a running example, mainly due to availability of datasets.</p>\n<h2 style=\"text-align:center;\">Problem definition</h2>\n<p>In the context of document retrieval, consider a search engine that accepts a query, and produces a ranking of documents related to the query using a technique such as TF-IDF scoring. Suppose we take the top 100 documents. The goal of learning to rank is to produce a better ranking of these 100 candidate documents for the given query.</p>\n<p>Most research has posed learning to rank as a supervised learning problem, although there has been <a href=\"http://ssli.ee.washington.edu/people/duh/thesis/uwthesis.pdf\">work</a> in semi-supervised ranking. We&#8217;ll only focus on the supervised problem here. Given a list of queries and candidate documents with annotated relevance scores, the learning to rank model learns to predict the relevance of candidate documents for a new query, and derives a ranking from the predictions. Let&#8217;s define that a bit more precisely.</p>\n<h2 style=\"text-align:center;\">More precise problem definition</h2>\n<p>The data consists of queries, documents, and relevance scores. Let <img src=\"https://s0.wp.com/latex.php?latex=Q&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=Q&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=Q&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"Q\" class=\"latex\" /> denote the set of queries, <img src=\"https://s0.wp.com/latex.php?latex=D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"D\" class=\"latex\" /> denote the set of documents, and <img src=\"https://s0.wp.com/latex.php?latex=Y&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=Y&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=Y&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"Y\" class=\"latex\" /> denote the set of relevance scores.</p>\n<p>For each query <img src=\"https://s0.wp.com/latex.php?latex=q_%7Bi%7D+%5Cin+Q&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=q_%7Bi%7D+%5Cin+Q&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=q_%7Bi%7D+%5Cin+Q&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"q_{i} &#92;in Q\" class=\"latex\" /> we have a list of <img src=\"https://s0.wp.com/latex.php?latex=m&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=m&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=m&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"m\" class=\"latex\" /> candidate documents <img src=\"https://s0.wp.com/latex.php?latex=D_%7Bi%7D%3D%7Bd_%7Bi%2C1%7D%2Cd_%7Bi%2C2%7D%2C...%2Cd_%7Bi%2Cm%7D%7D+&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=D_%7Bi%7D%3D%7Bd_%7Bi%2C1%7D%2Cd_%7Bi%2C2%7D%2C...%2Cd_%7Bi%2Cm%7D%7D+&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=D_%7Bi%7D%3D%7Bd_%7Bi%2C1%7D%2Cd_%7Bi%2C2%7D%2C...%2Cd_%7Bi%2Cm%7D%7D+&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"D_{i}={d_{i,1},d_{i,2},...,d_{i,m}} \" class=\"latex\" />. We want to produce a ranking for the documents <img src=\"https://s0.wp.com/latex.php?latex=D_%7Bi%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=D_%7Bi%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=D_%7Bi%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"D_{i}\" class=\"latex\" />, specifically a permutation <img src=\"https://s0.wp.com/latex.php?latex=%5Cpi_%7Bi%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=%5Cpi_%7Bi%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=%5Cpi_%7Bi%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"&#92;pi_{i}\" class=\"latex\" /> of the document indices <img src=\"https://s0.wp.com/latex.php?latex=%5C%7B1%2C2%2C...%2Cm%5C%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=%5C%7B1%2C2%2C...%2Cm%5C%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=%5C%7B1%2C2%2C...%2Cm%5C%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"&#92;{1,2,...,m&#92;}\" class=\"latex\" />. To do so, we want to learn a function <img src=\"https://s0.wp.com/latex.php?latex=f%28q%2CD%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=f%28q%2CD%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=f%28q%2CD%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"f(q,D)\" class=\"latex\" /> that produces an optimal permutation <img src=\"https://s0.wp.com/latex.php?latex=%5Cpi_%7Bi%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=%5Cpi_%7Bi%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=%5Cpi_%7Bi%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"&#92;pi_{i}\" class=\"latex\" />.</p>\n<p>As we&#8217;ll see, this ranking is produced in different ways; for instance, some models derive the rankings by producing a score for each <img src=\"https://s0.wp.com/latex.php?latex=%28q_%7Bi%7D%2Cd_%7Bi%2Cj%7D%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=%28q_%7Bi%7D%2Cd_%7Bi%2Cj%7D%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=%28q_%7Bi%7D%2Cd_%7Bi%2Cj%7D%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"(q_{i},d_{i,j})\" class=\"latex\" /> pair, while others learn to tell whether the rank of <img src=\"https://s0.wp.com/latex.php?latex=%28q_%7Bi%7D%2Cd_%7Bi%2Cj%7D%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=%28q_%7Bi%7D%2Cd_%7Bi%2Cj%7D%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=%28q_%7Bi%7D%2Cd_%7Bi%2Cj%7D%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"(q_{i},d_{i,j})\" class=\"latex\" /> is higher than <img src=\"https://s0.wp.com/latex.php?latex=%28q_%7Bi%7D%2Cd_%7Bi%2Ck%7D%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=%28q_%7Bi%7D%2Cd_%7Bi%2Ck%7D%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=%28q_%7Bi%7D%2Cd_%7Bi%2Ck%7D%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"(q_{i},d_{i,k})\" class=\"latex\" />.</p>\n<h2 style=\"text-align:center;\">Training Set</h2>\n<p>In the standard training set, each document <img src=\"https://s0.wp.com/latex.php?latex=d_%7Bi%2Cj%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=d_%7Bi%2Cj%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=d_%7Bi%2Cj%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"d_{i,j}\" class=\"latex\" /> is assigned a relevance score <img src=\"https://s0.wp.com/latex.php?latex=y_%7Bi%2Cj%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=y_%7Bi%2Cj%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=y_%7Bi%2Cj%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"y_{i,j}\" class=\"latex\" /> that says how relevant the document is to query <img src=\"https://s0.wp.com/latex.php?latex=q_%7Bi%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=q_%7Bi%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=q_%7Bi%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"q_{i}\" class=\"latex\" />. These scores can be assigned by human annotators, or derived implicitly from sources such as click through data.</p>\n<p>We can think of the training set as consisting of 3-tuples <img src=\"https://s0.wp.com/latex.php?latex=%28q_%7Bi%7D%2C+d_%7Bi%2Cj%7D%2C+y_%7Bi%2Cj%7D%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=%28q_%7Bi%7D%2C+d_%7Bi%2Cj%7D%2C+y_%7Bi%2Cj%7D%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=%28q_%7Bi%7D%2C+d_%7Bi%2Cj%7D%2C+y_%7Bi%2Cj%7D%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"(q_{i}, d_{i,j}, y_{i,j})\" class=\"latex\" />; one training example consists of a query, a candidate document, and a measure of how relevant that document is to the query. An example labeling is <img src=\"https://s0.wp.com/latex.php?latex=y_%7Bi%2Cj%7D+%5Cin+%5C%7B1%2C+2%2C+3%2C+4%2C+5%5C%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=y_%7Bi%2Cj%7D+%5Cin+%5C%7B1%2C+2%2C+3%2C+4%2C+5%5C%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=y_%7Bi%2Cj%7D+%5Cin+%5C%7B1%2C+2%2C+3%2C+4%2C+5%5C%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"y_{i,j} &#92;in &#92;{1, 2, 3, 4, 5&#92;}\" class=\"latex\" />, where 1 means &#8220;not relevant&#8221; and 5 means &#8220;very relevant&#8221;.</p>\n<p>For instance, we could have a query <img src=\"https://s0.wp.com/latex.php?latex=q_%7B1%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=q_%7B1%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=q_%7B1%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"q_{1}\" class=\"latex\" /> = &#8220;Leo Tolstoy famous novel&#8221;, with candidate documents <img src=\"https://s0.wp.com/latex.php?latex=D_%7B1%7D%3D%5C%7Bd_%7B1%2C1%7D%3DSteppenwolf%2C+d_%7B1%2C2%7D%3DWar%5C+and%5C+Peace%2C+d_%7B1%2C3%7D%3DThe%5C+Cossacks%5C%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=D_%7B1%7D%3D%5C%7Bd_%7B1%2C1%7D%3DSteppenwolf%2C+d_%7B1%2C2%7D%3DWar%5C+and%5C+Peace%2C+d_%7B1%2C3%7D%3DThe%5C+Cossacks%5C%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=D_%7B1%7D%3D%5C%7Bd_%7B1%2C1%7D%3DSteppenwolf%2C+d_%7B1%2C2%7D%3DWar%5C+and%5C+Peace%2C+d_%7B1%2C3%7D%3DThe%5C+Cossacks%5C%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"D_{1}=&#92;{d_{1,1}=Steppenwolf, d_{1,2}=War&#92; and&#92; Peace, d_{1,3}=The&#92; Cossacks&#92;}\" class=\"latex\" />, and relevance labels <img src=\"https://s0.wp.com/latex.php?latex=y_%7B1%2C1%7D%3D1%2Cy_%7B1%2C2%7D%3D5%2Cy_%7B1%2C3%7D%3D3&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=y_%7B1%2C1%7D%3D1%2Cy_%7B1%2C2%7D%3D5%2Cy_%7B1%2C3%7D%3D3&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=y_%7B1%2C1%7D%3D1%2Cy_%7B1%2C2%7D%3D5%2Cy_%7B1%2C3%7D%3D3&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"y_{1,1}=1,y_{1,2}=5,y_{1,3}=3\" class=\"latex\" />.</p>\n<p>Each pair <img src=\"https://s0.wp.com/latex.php?latex=%28q_%7Bi%7D%2C+d_%7Bi%2C+j%7D%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=%28q_%7Bi%7D%2C+d_%7Bi%2C+j%7D%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=%28q_%7Bi%7D%2C+d_%7Bi%2C+j%7D%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"(q_{i}, d_{i, j})\" class=\"latex\" /> is actually a feature vector <img src=\"https://s0.wp.com/latex.php?latex=%5Cphi%28q_%7Bi%7D%2C+d_%7Bi%2C+j%7D%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=%5Cphi%28q_%7Bi%7D%2C+d_%7Bi%2C+j%7D%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=%5Cphi%28q_%7Bi%7D%2C+d_%7Bi%2C+j%7D%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"&#92;phi(q_{i}, d_{i, j})\" class=\"latex\" />, so the final training set is defined as <img src=\"https://s0.wp.com/latex.php?latex=T%3D%5C%7B%28%5Cphi%28q_%7Bi%7D%2C+d_%7Bi%2C+j%7D%29%2Cy_%7Bi%2Cj%7D%29%5C%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=T%3D%5C%7B%28%5Cphi%28q_%7Bi%7D%2C+d_%7Bi%2C+j%7D%29%2Cy_%7Bi%2Cj%7D%29%5C%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=T%3D%5C%7B%28%5Cphi%28q_%7Bi%7D%2C+d_%7Bi%2C+j%7D%29%2Cy_%7Bi%2Cj%7D%29%5C%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"T=&#92;{(&#92;phi(q_{i}, d_{i, j}),y_{i,j})&#92;}\" class=\"latex\" /> for <img src=\"https://s0.wp.com/latex.php?latex=i%3D1...n%2C%5C+j%3D1...m&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=i%3D1...n%2C%5C+j%3D1...m&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=i%3D1...n%2C%5C+j%3D1...m&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"i=1...n,&#92; j=1...m\" class=\"latex\" />, where <img src=\"https://s0.wp.com/latex.php?latex=n&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=n&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=n&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"n\" class=\"latex\" /> is the number of queries, and <img src=\"https://s0.wp.com/latex.php?latex=m&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=m&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=m&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"m\" class=\"latex\" /> is the number of candidate documents for each query.</p>\n<h2 style=\"text-align:center;\">A concrete training set</h2>\n<p>To make this concrete, here&#8217;s a few training examples taken from the <a href=\"http://research.microsoft.com/en-us/um/beijing/projects/letor/letor3dataset.aspx\">OHSUMED</a> dataset:</p>\n<pre class=\"brush: plain; title: ; notranslate\">\n0 qid:1 1:1.000000 2:1.000000 3:0.833333 4:0.871264 5:0 6:0 7:0 8:0.941842 9:1.000000 10:1.000000 11:1.000000 12:1.000000 13:1.000000 14:1.000000 15:1.000000 16:1.000000 17:1.000000 18:0.719697 19:0.729351 20:0 21:0 22:0 23:0.811565 24:1.000000 25:0.972730 26:1.000000 27:1.000000 28:0.922374 29:0.946654 30:0.938888 31:1.000000 32:1.000000 33:0.711276 34:0.722202 35:0 36:0 37:0 38:0.798002 39:1.000000 40:1.000000 41:1.000000 42:1.000000 43:0.959134 44:0.963919 45:0.971425 #docid = 244338\n2 qid:1 1:0.600000 2:0.600000 3:1.000000 4:1.000000 5:0 6:0 7:0 8:1.000000 9:0.624834 10:0.767301 11:0.816099 12:0.934805 13:0.649685 14:0.680222 15:0.686762 16:0.421053 17:0.680904 18:1.000000 19:1.000000 20:0 21:0 22:0 23:1.000000 24:0.401391 25:0.938966 26:0.949446 27:0.984769 28:0.955266 29:1.000000 30:0.997786 31:0.441860 32:0.687033 33:1.000000 34:1.000000 35:0 36:0 37:0 38:1.000000 39:0.425450 40:0.975968 41:0.928785 42:0.978524 43:0.979553 44:1.000000 45:1.000000 #docid = 143821\n0 qid:1 1:0.400000 2:0.400000 3:0.555555 4:0.563658 5:0 6:0 7:0 8:0.545844 9:0.380576 10:0.427356 11:0.468244 12:0.756579 13:0.366316 14:0.360838 15:0.373909 16:0.210526 17:0.479859 18:0.595237 19:0.608701 20:0 21:0 22:0 23:0.613865 24:0.184562 25:0.791539 26:0.863833 27:0.957024 28:0.896468 29:0.941132 30:0.946305 31:0.232558 32:0.507810 33:0.603068 34:0.616847 35:0 36:0 37:0 38:0.614004 39:0.202374 40:0.812801 41:0.868091 42:0.958879 43:0.926045 44:0.944576 45:0.963753 #docid = 285257\n\n...\n\n0 qid:63 1:0.142857 2:0.162076 3:0.250000 4:0.250000 5:0 6:0 7:0 8:0.167856 9:0.078385 10:0.103707 11:0.132891 12:0.419191 13:0.027399 14:0.027300 15:0.027300 16:0.000000 17:0.000000 18:0.000000 19:0.000000 20:0 21:0 22:0 23:0.000000 24:0.000000 25:0.000000 26:0.000000 27:0.000000 28:0.000000 29:0.000000 30:0.000000 31:0.026316 32:0.063236 33:0.444444 34:0.407079 35:0 36:0 37:0 38:0.189973 39:0.011360 40:0.068814 41:0.066431 42:0.287984 43:0.188175 44:0.000000 45:0.046177 #docid = 173315\n2 qid:63 1:0.000000 2:0.000000 3:0.000000 4:0.000000 5:0 6:0 7:0 8:0.000000 9:0.000000 10:0.000000 11:0.000000 12:0.000000 13:0.000000 14:0.000000 15:0.000000 16:0.000000 17:0.000000 18:0.000000 19:0.000000 20:0 21:0 22:0 23:0.000000 24:0.000000 25:0.000000 26:0.000000 27:0.000000 28:0.000000 29:0.000000 30:0.000000 31:0.000000 32:0.000000 33:0.000000 34:0.000000 35:0 36:0 37:0 38:0.000000 39:0.000000 40:0.000000 41:0.000000 42:0.000000 43:0.000000 44:0.000000 45:0.000000 #docid = 9897\n\n</pre>\n<p>We can see that the relevance scores <img src=\"https://s0.wp.com/latex.php?latex=y_%7Bi%2Cj%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=y_%7Bi%2Cj%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=y_%7Bi%2Cj%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"y_{i,j}\" class=\"latex\" /> (the first number of each line) are between 0 and 2. Looking at the<a title=\"OHSUMED\" href=\"http://ir.ohsu.edu/ohsumed/\"> original OHSUMED text</a>, we see that the first example is <img src=\"https://s0.wp.com/latex.php?latex=%28y_%7B1%2C1%7D%2C%5Cphi%28q_%7B1%7D%2C+d_%7B1%2C+1%7D%29%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=%28y_%7B1%2C1%7D%2C%5Cphi%28q_%7B1%7D%2C+d_%7B1%2C+1%7D%29%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=%28y_%7B1%2C1%7D%2C%5Cphi%28q_%7B1%7D%2C+d_%7B1%2C+1%7D%29%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"(y_{1,1},&#92;phi(q_{1}, d_{1, 1}))\" class=\"latex\" /> with:</p>\n<p style=\"padding-left:30px;\"><img src=\"https://s0.wp.com/latex.php?latex=q_%7B1%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=q_%7B1%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=q_%7B1%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"q_{1}\" class=\"latex\" />: &#8220;Are there adverse effects on lipids when progesterone is given with estrogen replacement therapy&#8221;</p>\n<p style=\"padding-left:30px;\"><img src=\"https://s0.wp.com/latex.php?latex=d_%7B1%2C1%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=d_%7B1%2C1%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=d_%7B1%2C1%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"d_{1,1}\" class=\"latex\" />= #docid 244338 = &#8220;Effects on bone of surgical menopause and estrogen therapy with or without progesterone replacement in cynomolgus monkeys.&#8221;</p>\n<p style=\"padding-left:30px;\"><img src=\"https://s0.wp.com/latex.php?latex=y_%7B1%2C1%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=y_%7B1%2C1%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=y_%7B1%2C1%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"y_{1,1}\" class=\"latex\" /> = <i>0</i> = not relevant</p>\n<p>and the second example is <img src=\"https://s0.wp.com/latex.php?latex=%28y_%7B1%2C2%7D%2C%5Cphi%28q_%7B1%7D%2C+d_%7B1%2C+2%7D%29%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=%28y_%7B1%2C2%7D%2C%5Cphi%28q_%7B1%7D%2C+d_%7B1%2C+2%7D%29%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=%28y_%7B1%2C2%7D%2C%5Cphi%28q_%7B1%7D%2C+d_%7B1%2C+2%7D%29%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"(y_{1,2},&#92;phi(q_{1}, d_{1, 2}))\" class=\"latex\" /> with:</p>\n<p style=\"padding-left:30px;\"><img src=\"https://s0.wp.com/latex.php?latex=d_%7B1%2C2%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=d_%7B1%2C2%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=d_%7B1%2C2%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"d_{1,2}\" class=\"latex\" />= #docid 143821 = &#8220;Cardiovascular benefits of estrogen replacement therapy.&#8221;</p>\n<p style=\"padding-left:30px;\"><img src=\"https://s0.wp.com/latex.php?latex=y_%7B1%2C1%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=y_%7B1%2C1%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=y_%7B1%2C1%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"y_{1,1}\" class=\"latex\" /> = <i>2</i> = very relevant</p>\n<p>The text has been converted into the features described on <a href=\"http://research.microsoft.com/en-us/um/beijing/projects/letor/LETOR3.0/letor.pdf\">pg.11 of this paper</a>. Note that I only showed the document title here and omitted the body text.</p>\n<h2 style=\"text-align:center;\">Test Instance</h2>\n<p>At test time, we receive a query <img src=\"https://s0.wp.com/latex.php?latex=q&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=q&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=q&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"q\" class=\"latex\" /> and a list of <img src=\"https://s0.wp.com/latex.php?latex=m&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=m&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=m&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"m\" class=\"latex\" /> candidate documents <img src=\"https://s0.wp.com/latex.php?latex=D%3D%7Bd_%7B1%7D%2Cd_%7B2%7D%2C...%2Cd_%7Bm%7D%7D+&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=D%3D%7Bd_%7B1%7D%2Cd_%7B2%7D%2C...%2Cd_%7Bm%7D%7D+&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=D%3D%7Bd_%7B1%7D%2Cd_%7B2%7D%2C...%2Cd_%7Bm%7D%7D+&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"D={d_{1},d_{2},...,d_{m}} \" class=\"latex\" />. We evaluate <img src=\"https://s0.wp.com/latex.php?latex=f%28q%2CD%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=f%28q%2CD%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=f%28q%2CD%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"f(q,D)\" class=\"latex\" /> and return a ranking of the documents <img src=\"https://s0.wp.com/latex.php?latex=D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"D\" class=\"latex\" />, specifically a permutation <img src=\"https://s0.wp.com/latex.php?latex=%5Cpi&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=%5Cpi&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=%5Cpi&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"&#92;pi\" class=\"latex\" /> of the document indices <img src=\"https://s0.wp.com/latex.php?latex=%5C%7B1%2C2%2C...%2Cm%5C%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=%5C%7B1%2C2%2C...%2Cm%5C%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=%5C%7B1%2C2%2C...%2Cm%5C%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"&#92;{1,2,...,m&#92;}\" class=\"latex\" />.</p>\n<h1 style=\"text-align:center;\">Learning to Rank Datasets</h1>\n<p>There are several benchmark datasets for Learning to Rank that can be used to evaluate models.</p>\n<p>Microsoft Research released the <a href=\"http://research.microsoft.com/en-us/um/beijing/projects/letor/letor3dataset.aspx\">LETOR 3.0</a> and <a href=\"http://research.microsoft.com/en-us/um/beijing/projects/letor/letor4dataset.aspx\">LETOR 4.0</a> datasets. LETOR 3.0 contains data from a 2002 crawl of .gov web pages and associated queries, as well as medical search queries and medical journal documents from the <a href=\"http://ir.ohsu.edu/ohsumed/ohsumed.html\">OHSUMED</a> dataset. LETOR 4.0 contains queries from the <a href=\"http://ir.cis.udel.edu/million/index.html\">Million Query Track</a> from TREC and document ids from Gov2, another crawl of .gov web pages. Data is represented as raw feature vectors; information about the features used and the datasets is found <a href=\"http://research.microsoft.com/en-us/um/beijing/projects/letor/LETOR3.0/letor.pdf\">here</a>. One thing that I like about the OHSUMED data is that the <a href=\"http://ir.ohsu.edu/ohsumed/\">original text</a> of the queries and documents is available, which can be helpful for interpreting model output or deriving new features. Unfortunately obtaining the original GOV data <a href=\"http://ir.dcs.gla.ac.uk/test_collections/access_to_data.html\">is nontrivial</a>.</p>\n<p>Microsoft Research also released <a title=\"MSLR WEB Datasets\" href=\"http://research.microsoft.com/en-us/projects/mslr/\">a larger scale dataset</a> consisting 30,000 queries, candidate features, and relevance judgements derived from the Bing search engine. The MSLR-WEB30K dataset contains all of the queries, while a smaller MSLR-WEB10K dataset contains a 10,000 query sample of MSLR-WEB30K. Unfortunately, we are unable to retrieve the original query text and URLs to further interpret results, but the dataset is nevertheless very useful for evaluating a model and producing metrics.</p>\n<p>Yahoo sponsored a <a href=\"http://jmlr.csail.mit.edu/proceedings/papers/v14/\">Learning to Rank competition</a> in 2010 and released a dataset consisting of 36,000 queries and 883,000 document IDs. The datasets are available <a href=\"http://webscope.sandbox.yahoo.com/catalog.php?datatype=c\">here</a>, but require a university email to download. Similar to MSLR-WEB, we receive the raw features and relevance scores, and are unable to see the text of the query or URL.</p>\n<h1 style=\"text-align:center;\">Learning to Rank Evaluation Metrics</h1>\n<p>When we run a learning to rank model on a test set to predict rankings, we evaluate the performance using metrics that compare the predicted rankings to the annotated gold-standard labels. Before reviewing the popular learning to rank metrics, let&#8217;s introduce notation.</p>\n<p>We&#8217;ll assume that there are <em>n</em> queries, and that for each query <img src=\"https://s0.wp.com/latex.php?latex=q_%7Bi%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=q_%7Bi%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=q_%7Bi%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"q_{i}\" class=\"latex\" /> we have a list of <em>m</em> candidates <img src=\"https://s0.wp.com/latex.php?latex=D_%7Bi%7D+%3D%5C%7Bd_%7Bi%2C1%7D%2C...d_%7Bi%2Cm%7D%5C%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=D_%7Bi%7D+%3D%5C%7Bd_%7Bi%2C1%7D%2C...d_%7Bi%2Cm%7D%5C%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=D_%7Bi%7D+%3D%5C%7Bd_%7Bi%2C1%7D%2C...d_%7Bi%2Cm%7D%5C%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"D_{i} =&#92;{d_{i,1},...d_{i,m}&#92;}\" class=\"latex\" /> with annotated relevance scores <img src=\"https://s0.wp.com/latex.php?latex=y_%7Bi%2C1%7D%2C...y_%7Bi%2Cm%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=y_%7Bi%2C1%7D%2C...y_%7Bi%2Cm%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=y_%7Bi%2C1%7D%2C...y_%7Bi%2Cm%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"y_{i,1},...y_{i,m}\" class=\"latex\" />. The ranker produces a ranking <img src=\"https://s0.wp.com/latex.php?latex=%5Cpi_i&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=%5Cpi_i&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=%5Cpi_i&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"&#92;pi_i\" class=\"latex\" />, so that <img src=\"https://s0.wp.com/latex.php?latex=%5Cpi_%7Bi%2Cj%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=%5Cpi_%7Bi%2Cj%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=%5Cpi_%7Bi%2Cj%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"&#92;pi_{i,j}\" class=\"latex\" /> represents the predicted ranking of document <img src=\"https://s0.wp.com/latex.php?latex=d_%7Bi%2Cj%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=d_%7Bi%2Cj%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=d_%7Bi%2Cj%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"d_{i,j}\" class=\"latex\" />.</p>\n<p>Intuitively, we would like our ranking to have high relevance scores, with the highest scores receiving the highest rankings. Now we&#8217;ll look at several metrics that capture these intuitions.</p>\n<h2 style=\"text-align:center;\">Normalized Discounted Cumulative Gain (NDCG)</h2>\n<p><a href=\"http://en.wikipedia.org/wiki/Discounted_cumulative_gain\">Normalized Discounted Cumulative Gain</a> (NDCG) is a popular learning to rank metric that relies on Cumulative Gain and Discounted Cumulative Gain.</p>\n<p><strong>Cumulative Gain</strong></p>\n<p>First we&#8217;ll look at Cumulative Gain. Suppose we have:</p>\n<p style=\"padding-left:30px;\"><img src=\"https://s0.wp.com/latex.php?latex=%5Cpi_i+%3D+%5C%7Bd_%7Bi%2C1%7D%2C+d_%7Bi%2C2%7D%2C+d_%7Bi%2C3%7D%2C+d_%7Bi%2C4%7D%5C%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=%5Cpi_i+%3D+%5C%7Bd_%7Bi%2C1%7D%2C+d_%7Bi%2C2%7D%2C+d_%7Bi%2C3%7D%2C+d_%7Bi%2C4%7D%5C%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=%5Cpi_i+%3D+%5C%7Bd_%7Bi%2C1%7D%2C+d_%7Bi%2C2%7D%2C+d_%7Bi%2C3%7D%2C+d_%7Bi%2C4%7D%5C%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"&#92;pi_i = &#92;{d_{i,1}, d_{i,2}, d_{i,3}, d_{i,4}&#92;}\" class=\"latex\" /></p>\n<p style=\"padding-left:30px;\"><img src=\"https://s0.wp.com/latex.php?latex=y_%7Bi%7D%3D+%5C%7B5%2C+2%2C+5%2C+0%5C%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=y_%7Bi%7D%3D+%5C%7B5%2C+2%2C+5%2C+0%5C%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=y_%7Bi%7D%3D+%5C%7B5%2C+2%2C+5%2C+0%5C%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"y_{i}= &#92;{5, 2, 5, 0&#92;}\" class=\"latex\" /></p>\n<p>That is, the top ranked document has a relevance score of 5, the second ranked document has a relevance score of 2, and so on.</p>\n<p>The cumulative gain is simply the sum of the relevance scores:</p>\n<p style=\"padding-left:30px;\"><img src=\"https://s0.wp.com/latex.php?latex=%5Csum_%7Bi%7Dy_%7Bi%7D%3D5%2B2%2B5%2B0%3D12&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=%5Csum_%7Bi%7Dy_%7Bi%7D%3D5%2B2%2B5%2B0%3D12&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=%5Csum_%7Bi%7Dy_%7Bi%7D%3D5%2B2%2B5%2B0%3D12&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"&#92;sum_{i}y_{i}=5+2+5+0=12\" class=\"latex\" />.</p>\n<p style=\"text-align:left;\">Notice that this doesn&#8217;t take ranking order into account; if our ranking was reversed:</p>\n<p style=\"text-align:left;padding-left:30px;\"><img src=\"https://s0.wp.com/latex.php?latex=%5Cpi_i+%3D+%5C%7Bd_%7Bi%2C4%7D%2C+d_%7Bi%2C3%7D%2C+d_%7Bi%2C2%7D%2C+d_%7Bi%2C1%7D%5C%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=%5Cpi_i+%3D+%5C%7Bd_%7Bi%2C4%7D%2C+d_%7Bi%2C3%7D%2C+d_%7Bi%2C2%7D%2C+d_%7Bi%2C1%7D%5C%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=%5Cpi_i+%3D+%5C%7Bd_%7Bi%2C4%7D%2C+d_%7Bi%2C3%7D%2C+d_%7Bi%2C2%7D%2C+d_%7Bi%2C1%7D%5C%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"&#92;pi_i = &#92;{d_{i,4}, d_{i,3}, d_{i,2}, d_{i,1}&#92;}\" class=\"latex\" /></p>\n<p style=\"text-align:left;\">it would receive the same cumulative gain score:</p>\n<p style=\"text-align:left;padding-left:30px;\"><img src=\"https://s0.wp.com/latex.php?latex=%5Csum_%7Bi%7Dy_%7Bi%7D%3D0%2B5%2B2%2B5%3D12&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=%5Csum_%7Bi%7Dy_%7Bi%7D%3D0%2B5%2B2%2B5%3D12&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=%5Csum_%7Bi%7Dy_%7Bi%7D%3D0%2B5%2B2%2B5%3D12&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"&#92;sum_{i}y_{i}=0+5+2+5=12\" class=\"latex\" />.</p>\n<p><strong>Discounted Cumulative Gain</strong></p>\n<p>Discounted Cumulative Gain (DCG) takes order into account by &#8216;rewarding&#8217; high relevance scores that appear in high ranks. A high relevance score appearing at a low rank receives a lower &#8216;reward&#8217;. To compute the metric, we use:</p>\n<p style=\"padding-left:30px;\"><img src=\"https://s0.wp.com/latex.php?latex=DCG_k+%3D+%5Csum_%7Bj%3D1%7D%5E%7Bk%7D+%5Cfrac%7B2%5E%7By_%7Bi%2C%5Cpi_%7Bi%2Cj%7D%7D%7D-1%7D%7Blog%28i%2B1%29%7D%3D31%2B1.9%2B15.5%2B0%3D48.4&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=DCG_k+%3D+%5Csum_%7Bj%3D1%7D%5E%7Bk%7D+%5Cfrac%7B2%5E%7By_%7Bi%2C%5Cpi_%7Bi%2Cj%7D%7D%7D-1%7D%7Blog%28i%2B1%29%7D%3D31%2B1.9%2B15.5%2B0%3D48.4&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=DCG_k+%3D+%5Csum_%7Bj%3D1%7D%5E%7Bk%7D+%5Cfrac%7B2%5E%7By_%7Bi%2C%5Cpi_%7Bi%2Cj%7D%7D%7D-1%7D%7Blog%28i%2B1%29%7D%3D31%2B1.9%2B15.5%2B0%3D48.4&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"DCG_k = &#92;sum_{j=1}^{k} &#92;frac{2^{y_{i,&#92;pi_{i,j}}}-1}{log(i+1)}=31+1.9+15.5+0=48.4\" class=\"latex\" /></p>\n<p>We can see that in position 1, the high relevance score 5 is worth 31, while in position 3 it&#8217;s worth 15.5. The lower relevance score 2 is only worth 1.9 in position 2. With DCG order matters; the score would increase if we swapped the rankings of <img src=\"https://s0.wp.com/latex.php?latex=d_%7Bi%2C2%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=d_%7Bi%2C2%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=d_%7Bi%2C2%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"d_{i,2}\" class=\"latex\" /> and <img src=\"https://s0.wp.com/latex.php?latex=d_%7Bi%2C3%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=d_%7Bi%2C3%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=d_%7Bi%2C3%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"d_{i,3}\" class=\"latex\" />.</p>\n<p><strong>Normalized Discounted Cumulative Gain</strong></p>\n<p><img src=\"https://s0.wp.com/latex.php?latex=NDCG_k&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=NDCG_k&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=NDCG_k&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"NDCG_k\" class=\"latex\" /> is just a normalized version of <img src=\"https://s0.wp.com/latex.php?latex=DCG_k&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=DCG_k&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=DCG_k&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"DCG_k\" class=\"latex\" />. The normalization is done by finding the <img src=\"https://s0.wp.com/latex.php?latex=DCG_k&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=DCG_k&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=DCG_k&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"DCG_k\" class=\"latex\" /> of an &#8216;ideal&#8217; ranking. In our example, the ideal ranking would be:</p>\n<p style=\"padding-left:30px;\"><img src=\"https://s0.wp.com/latex.php?latex=%5Cpi_i+%3D+%5C%7Bd_%7Bi%2C1%7D%2C+d_%7Bi%2C3%7D%2C+d_%7Bi%2C2%7D%2C+d_%7Bi%2C4%7D%5C%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=%5Cpi_i+%3D+%5C%7Bd_%7Bi%2C1%7D%2C+d_%7Bi%2C3%7D%2C+d_%7Bi%2C2%7D%2C+d_%7Bi%2C4%7D%5C%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=%5Cpi_i+%3D+%5C%7Bd_%7Bi%2C1%7D%2C+d_%7Bi%2C3%7D%2C+d_%7Bi%2C2%7D%2C+d_%7Bi%2C4%7D%5C%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"&#92;pi_i = &#92;{d_{i,1}, d_{i,3}, d_{i,2}, d_{i,4}&#92;}\" class=\"latex\" /></p>\n<p>giving:</p>\n<p style=\"padding-left:30px;\"><img src=\"https://s0.wp.com/latex.php?latex=DCG_%7Bk_%7Bideal%7D%7D%3D%5Csum_%7Bj%3D1%7D%5E%7Bk%7D+%5Cfrac%7B2%5E%7By_%7Bi%2C%5Cpi_%7Bi%2Cj%7D%7D%7D-1%7D%7Blog%28i%2B1%29%7D%3D31%2B19.5%2B1.5%2B0%3D52&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=DCG_%7Bk_%7Bideal%7D%7D%3D%5Csum_%7Bj%3D1%7D%5E%7Bk%7D+%5Cfrac%7B2%5E%7By_%7Bi%2C%5Cpi_%7Bi%2Cj%7D%7D%7D-1%7D%7Blog%28i%2B1%29%7D%3D31%2B19.5%2B1.5%2B0%3D52&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=DCG_%7Bk_%7Bideal%7D%7D%3D%5Csum_%7Bj%3D1%7D%5E%7Bk%7D+%5Cfrac%7B2%5E%7By_%7Bi%2C%5Cpi_%7Bi%2Cj%7D%7D%7D-1%7D%7Blog%28i%2B1%29%7D%3D31%2B19.5%2B1.5%2B0%3D52&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"DCG_{k_{ideal}}=&#92;sum_{j=1}^{k} &#92;frac{2^{y_{i,&#92;pi_{i,j}}}-1}{log(i+1)}=31+19.5+1.5+0=52\" class=\"latex\" /></p>\n<p>so:</p>\n<p style=\"padding-left:30px;\"><img src=\"https://s0.wp.com/latex.php?latex=NDCG_k%3D+%5Cfrac%7BDCG_k%7D%7BDCG_%7Bk_%7Bideal%7D%7D%7D%3D%5Cfrac%7B48.4%7D%7B52%7D%3D0.93&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=NDCG_k%3D+%5Cfrac%7BDCG_k%7D%7BDCG_%7Bk_%7Bideal%7D%7D%7D%3D%5Cfrac%7B48.4%7D%7B52%7D%3D0.93&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=NDCG_k%3D+%5Cfrac%7BDCG_k%7D%7BDCG_%7Bk_%7Bideal%7D%7D%7D%3D%5Cfrac%7B48.4%7D%7B52%7D%3D0.93&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"NDCG_k= &#92;frac{DCG_k}{DCG_{k_{ideal}}}=&#92;frac{48.4}{52}=0.93\" class=\"latex\" /></p>\n<p>We can see that if our predicted rankings were ideal, they would receive an <img src=\"https://s0.wp.com/latex.php?latex=NDCG_k&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=NDCG_k&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=NDCG_k&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"NDCG_k\" class=\"latex\" /> score of <img src=\"https://s0.wp.com/latex.php?latex=1&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=1&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=1&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"1\" class=\"latex\" />.</p>\n<h2 style=\"text-align:center;\">Mean Average Precision (MAP)</h2>\n<p style=\"text-align:left;\"><a href=\"http://en.wikipedia.org/wiki/Information_retrieval#Mean_average_precision\">Mean average precision</a> (MAP) is another popular metric for learning to rank, specifically for applications with binary relevance scores, e.g. &#8220;correct&#8221; and &#8220;incorrect&#8221; in question-answering.</p>\n<p style=\"text-align:left;\"><strong> P@k</strong></p>\n<p style=\"text-align:left;\">MAP relies on Precision at k (P@k), which involves counting the number of relevant (or &#8220;correct&#8221;) documents in the first k ranked positions, and dividing by k:</p>\n<p style=\"text-align:left;padding-left:30px;\"><img src=\"https://s0.wp.com/latex.php?latex=P%40k%3D%5Cfrac%7B1%7D%7Bk%7D%5Csum_%7Bi%3D1%7D%5E%7Bk%7DI%28relevance_i%3D%3D1%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=P%40k%3D%5Cfrac%7B1%7D%7Bk%7D%5Csum_%7Bi%3D1%7D%5E%7Bk%7DI%28relevance_i%3D%3D1%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=P%40k%3D%5Cfrac%7B1%7D%7Bk%7D%5Csum_%7Bi%3D1%7D%5E%7Bk%7DI%28relevance_i%3D%3D1%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"P@k=&#92;frac{1}{k}&#92;sum_{i=1}^{k}I(relevance_i==1)\" class=\"latex\" /></p>\n<p> <strong>AP</strong></p>\n<p>Average precision is then defined as:</p>\n<p style=\"padding-left:30px;\"><img src=\"https://s0.wp.com/latex.php?latex=AP+%3D+%5Cfrac%7B%5Csum_%7Bk%3D1%7D%5E%7Bn%7D%28P%40k+%5Ctimes+I%28relevance_k%3D%3D1%29%29%7D%7B%5Csum_%7Bk%3D1%7D%5E%7Bn%7DI%28relevance_k%3D%3D1%29%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=AP+%3D+%5Cfrac%7B%5Csum_%7Bk%3D1%7D%5E%7Bn%7D%28P%40k+%5Ctimes+I%28relevance_k%3D%3D1%29%29%7D%7B%5Csum_%7Bk%3D1%7D%5E%7Bn%7DI%28relevance_k%3D%3D1%29%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=AP+%3D+%5Cfrac%7B%5Csum_%7Bk%3D1%7D%5E%7Bn%7D%28P%40k+%5Ctimes+I%28relevance_k%3D%3D1%29%29%7D%7B%5Csum_%7Bk%3D1%7D%5E%7Bn%7DI%28relevance_k%3D%3D1%29%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"AP = &#92;frac{&#92;sum_{k=1}^{n}(P@k &#92;times I(relevance_k==1))}{&#92;sum_{k=1}^{n}I(relevance_k==1)}\" class=\"latex\" /></p>\n<p style=\"text-align:left;\"><strong>MAP</strong></p>\n<p style=\"text-align:left;\">Notice that <img src=\"https://s0.wp.com/latex.php?latex=AP&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=AP&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=AP&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"AP\" class=\"latex\" /> is computed for a <em>single query</em>.  <img src=\"https://s0.wp.com/latex.php?latex=MAP&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=MAP&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=MAP&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"MAP\" class=\"latex\" /> is the mean <img src=\"https://s0.wp.com/latex.php?latex=AP&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=AP&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=AP&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"AP\" class=\"latex\" /> value over <em>all queries</em>:</p>\n<p style=\"text-align:left;padding-left:30px;\"><img src=\"https://s0.wp.com/latex.php?latex=MAP+%3D+%5Cfrac%7B1%7D%7BnumQueries%7D%5Csum_%7Bq%3D1%7D%5E%7BnumQueries%7DAP_%7Bq%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=MAP+%3D+%5Cfrac%7B1%7D%7BnumQueries%7D%5Csum_%7Bq%3D1%7D%5E%7BnumQueries%7DAP_%7Bq%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=MAP+%3D+%5Cfrac%7B1%7D%7BnumQueries%7D%5Csum_%7Bq%3D1%7D%5E%7BnumQueries%7DAP_%7Bq%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"MAP = &#92;frac{1}{numQueries}&#92;sum_{q=1}^{numQueries}AP_{q}\" class=\"latex\" />.</p>\n<h1 style=\"text-align:center;\">Learning to Rank Models</h1>\n<p>Learning to Rank models can be broadly classified into three groups: scorewise, pairwise, and listwise. We&#8217;ll introduce and provide an example of each group. There are <em>many</em> more learning to rank models than the ones covered here.</p>\n<h2 style=\"text-align:center;\">Pointwise Models</h2>\n<p>Pointwise models, also known as &#8216;scorewise&#8217; models, create rankings by computing a real-valued score for each example <img src=\"https://s0.wp.com/latex.php?latex=%5Cphi%28q_%7Bi%7D%2Cd_%7Bi%2Cj%7D%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=%5Cphi%28q_%7Bi%7D%2Cd_%7Bi%2Cj%7D%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=%5Cphi%28q_%7Bi%7D%2Cd_%7Bi%2Cj%7D%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"&#92;phi(q_{i},d_{i,j})\" class=\"latex\" />, then sort by the score.</p>\n<p>An advantage of pointwise models is that they have an interpretable confidence score for each query-document pair. Possible disadvantages are that there is not a notion of grouping the training instances (e.g. by query), and that the prediction target is exact relevance rather than relative position.</p>\n<p>Logistic regression, <a href=\"http://papers.nips.cc/paper/2023-pranking-with-ranking.pdf\">PRank</a>, and <a href=\"http://papers.nips.cc/paper/3270-mcrank-learning-to-rank-using-multiple-classification-and-gradient-boosting.pdf\">MCRank</a> are examples of pointwise models.</p>\n<h2 style=\"text-align:center;\">Pairwise Models</h2>\n<p>Pairwise models learn to decide which of two documents is ranked higher. The models rely on the observation that in learning to rank problems we ultimately care about the relative <em>position</em> of documents rather than exact <em>distances</em> between document scores.</p>\n<p>Pairwise models first isolate the documents for each query, then form a training set consisting of pairs of documents, and a label for whether the first document has a higher rank than the second document. So each training example is of the form <img src=\"https://s0.wp.com/latex.php?latex=%28%5Cphi%28q_%7Bi%7D%2Cd_%7Bi%2Cj%7D%29%2C%5Cphi%28q_%7Bi%7D%2Cd_%7Bi%2Ck%7D%29%2C%5C%7B%2B1%2C-1%5C%7D%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=%28%5Cphi%28q_%7Bi%7D%2Cd_%7Bi%2Cj%7D%29%2C%5Cphi%28q_%7Bi%7D%2Cd_%7Bi%2Ck%7D%29%2C%5C%7B%2B1%2C-1%5C%7D%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=%28%5Cphi%28q_%7Bi%7D%2Cd_%7Bi%2Cj%7D%29%2C%5Cphi%28q_%7Bi%7D%2Cd_%7Bi%2Ck%7D%29%2C%5C%7B%2B1%2C-1%5C%7D%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"(&#92;phi(q_{i},d_{i,j}),&#92;phi(q_{i},d_{i,k}),&#92;{+1,-1&#92;})\" class=\"latex\" />. Model-wise, we find <img src=\"https://s0.wp.com/latex.php?latex=f&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=f&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=f&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"f\" class=\"latex\" /> such that <img src=\"https://s0.wp.com/latex.php?latex=f%28d_%7Bi%2Cj%7D%29%3Ef%28d_%7Bi%2Ck%7D%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=f%28d_%7Bi%2Cj%7D%29%3Ef%28d_%7Bi%2Ck%7D%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=f%28d_%7Bi%2Cj%7D%29%3Ef%28d_%7Bi%2Ck%7D%29&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"f(d_{i,j})>f(d_{i,k})\" class=\"latex\" /> when <img src=\"https://s0.wp.com/latex.php?latex=y_%7Bi%2Cj%7D%3Ey_%7Bi%2Ck%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002\" srcset=\"https://s0.wp.com/latex.php?latex=y_%7Bi%2Cj%7D%3Ey_%7Bi%2Ck%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002 1x, https://s0.wp.com/latex.php?latex=y_%7Bi%2Cj%7D%3Ey_%7Bi%2Ck%7D&#038;bg=ffffff&#038;fg=404040&#038;s=0&#038;c=20201002&#038;zoom=4.5 4x\" alt=\"y_{i,j}>y_{i,k}\" class=\"latex\" />.</p>\n<p>The problem is transformed into a binary classification problem; we train a binary classifier to minimize the number of incorrectly ordered pairs.</p>\n<p>Several pairwise models exist, each taking different approaches to the problem. Examples include <a href=\"http://research-srv.microsoft.com/pubs/132652/MSR-TR-2010-82.pdf\">RankNet</a>, <a href=\"http://www.cs.cornell.edu/people/tj/svm_light/svm_rank.html#References\">SVMRank</a>, and <a href=\"http://research.microsoft.com/en-us/people/hangli/xu-sigir07.pdf\">AdaRank</a>. Another model called LambdaMART will be the focus of the next post.</p>\n<h2 style=\"text-align:center;\">Listwise Models</h2>\n<p>Listwise models are trained by optimizing a loss function that measures predicted ranks versus actual ranks for a query&#8217;s <em>entire</em> candidate list. A loss function such as MAP or NDCG can be directly optimized by listwise models. Examples include coordinate ascent and LambdaRank.</p>\n<h2 style=\"text-align:center;\">Up Next</h2>\n<p>We&#8217;ve introduced the problem of Learning to Rank, and briefly surveyed its algorithms. In the next post, we&#8217;ll examine the LambdaMART model, and develop a way of visualizing its training process.</p>\n<p><strong>Sources and Further Reading</strong></p>\n<p><a href=\"http://research.microsoft.com/en-us/people/hangli/l2r.pdf\">A Short Introduction to Learning to Rank</a></p>\n<p><a href=\"http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.149.3355&rep=rep1&type=pdf\">Learning to Rank QA Data</a></p>\n<p>&#8220;Tree Ensembles for Learning to Rank&#8221;, Yasser Ganjisaffar 2011 PhD Thesis</p>\n<p><a href=\"http://en.wikipedia.org/wiki/Learning_to_rank\">Learning to Rank Wikipedia</a></p>\n",
  "wfw:commentRss": "https://wellecks.wordpress.com/2015/01/15/learning-to-rank-overview/feed/",
  "slash:comments": 0,
  "media:content": {
    "media:title": "wellecks"
  }
}