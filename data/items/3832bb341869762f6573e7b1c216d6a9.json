{
  "id": "tag:blogger.com,1999:blog-6755709643044947179.post-1289094980951679744",
  "published": "2022-10-26T10:00:00.000-07:00",
  "updated": "2022-10-26T10:19:48.128-07:00",
  "category": [
    "",
    ""
  ],
  "title": "Better Device Compatibility with CameraX",
  "content": "<meta content=\"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjE2mF5Jhl-oyJolZf1_jUnSMqy2_X94iYTfgumYLBRbGKTWLjAMifJ-Xlmou2RDMT6ziNSXY55zLk3N_saucA1o_C5h05jq8lU_g_uZEYaOkFkZHXW5p_gaglm0zBJ43kN82ARrldaL6iSG7ek0dtemnNidz246-yTlSRfndmWlqAC_nDGURpyEc1B/s1600/Android_BetterDeviceCompatibilityCameraX_1024x512.png\" name=\"twitter:image\"></meta>\n<img src=\"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjE2mF5Jhl-oyJolZf1_jUnSMqy2_X94iYTfgumYLBRbGKTWLjAMifJ-Xlmou2RDMT6ziNSXY55zLk3N_saucA1o_C5h05jq8lU_g_uZEYaOkFkZHXW5p_gaglm0zBJ43kN82ARrldaL6iSG7ek0dtemnNidz246-yTlSRfndmWlqAC_nDGURpyEc1B/s1600/Android_BetterDeviceCompatibilityCameraX_1024x512.png\" style=\"display: none;\" />\n\n<p><em>Posted by The Android Team</em>\n  \n  <a href=\"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhOb81CgWhnHBESFgVhbuRtHNJ45HYubrO3lMl0RPljbA8_RHP8AjBu-5PxMRp3nw2dXsCjPIBxxi20Gt655kzbFc_EmKKwNq2GPH_Sgnb5JNeYXIjlT7uZJowS1YQPpbsSKu5QK_EL1ZGplJ8eU3wMJIy8Ok1QUHGkH2V_IrtScX4nWxZVZVB5Q4Fx/s1600/Android_BetterDeviceCompatibilityCameraX_4209x1253.png\"><img border=\"0\" data-original-height=\"800\" data-original-width=\"1058\" height=\"199\" src=\"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhOb81CgWhnHBESFgVhbuRtHNJ45HYubrO3lMl0RPljbA8_RHP8AjBu-5PxMRp3nw2dXsCjPIBxxi20Gt655kzbFc_EmKKwNq2GPH_Sgnb5JNeYXIjlT7uZJowS1YQPpbsSKu5QK_EL1ZGplJ8eU3wMJIy8Ok1QUHGkH2V_IrtScX4nWxZVZVB5Q4Fx/w670-h199/Android_BetterDeviceCompatibilityCameraX_4209x1253.png\" width=\"670\" /></a><a href=\"https://developer.android.com/training/camerax\" target=\"_blank\">CameraX</a> is an Android Jetpack library that makes it easy to incorporate camera functionality directly in your Android app. That’s why we focus heavily on device compatibility out-of-the-box, so you can focus on what makes your app unique.</p>\n<p>\nIn this post, we’ll look at three ways CameraX makes developers’ lives easier when it comes to device compatibility. First, we’ll take a peek into our CameraX Test Lab where we test over 150 physical phones every day. Second, we’ll look at Quirks, the mechanism CameraX uses to automatically handle device inconsistencies. Third, we’ll discuss the ways CameraX makes it easier to develop apps for foldable phones. \n</p><div style=\"text-align: left;\"><br /></div>\n<p>\n </p><h3><strong>CameraX Test Lab</strong></h3>\n<div><table align=\"center\" cellpadding=\"0\" cellspacing=\"0\" class=\"tr-caption-container\" style=\"float: left; margin-right: 1em; text-align: left;\"><tbody><tr><td style=\"text-align: center;\"><center><img alt=\"A single rack in our CameraX Test Lab on the left, and on the right, a moving image of the inside of a test inclusure with rotating phone mount\" border=\"0\" data-original-height=\"1504\" data-original-width=\"720\" height=\"377\" src=\"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi8k_uN5QTNH0mRgqZD8FNpjHxLKXXRq634LXoHnkOf7MV-EKO0xKLL9ViTgCEWY0xZETe7ZpoY3d_240puDJfS0eG-o1FNUuCgK7S-LvO08BpdsekpBDEWQqV-sPdbzMZ4_YWqtegfAyfiwjLqMF7kwGRXIkJV9vkCB3Fl9dInQ57UF8jCusXsmEBE/w327-h377/image1.jpg\" style=\"width: 50%;\" td=\"\" width=\"275\" />&nbsp;<a href=\"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi_A4zyhYaXCV8YJXBrVIP5bYK5lLYdn71kwnfnlfV3901BOjNaFZv7wvahAa0-VaUJgQ3SKj9nOFziGGSR7kASJLi8Cl5Kby1SZE-paTbmvw-gTMcu3_ZZgHikqsaqTfAyVvay5wy-jasKiyLxAvAKuKqt2LnbglzMdqj3D-MQ0o1L3k3VLDAupNCD/s1999/image1.jpg\" style=\"margin-left: 1em; margin-right: 1em;\"><img border=\"0\" data-original-height=\"1999\" data-original-width=\"1500\" height=\"376\" src=\"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjunLVYaOU2au-tR1jdm4LncxVyjjCqwtpG2LHeq0q_5VxgehgMjPvTvCIAaW6TF37S4UOLjHsrSl9qNTXnshv2KE6XBQ8hR9PugZRBGb4oc365O_6G4r9pHilVawCsvkQQ_3e9vXsY25hg7oB9MdW4qQnVBoiaO-8VljH_6uUYKJV9H-nJQaoR8oLV/s1600/camerax_test_lab_rotating_rig.gif\" width=\"282\" /></a><br /></center></td></tr><tr><td class=\"tr-caption\" style=\"text-align: center;\"><i>(Left) A single rack in our CameraX Test Lab. Each test enclosure contains two identical Android phones for testing front and back cameras. (Right) A GIF showing the inside of a test inclosure, with a rotating phone mount (for testing portrait and landscape orientations) and a high-resolution test chart (not pictured).</i><br /><br /></td></tr></tbody></table></div>\n\n<p>\nWe built the <a href=\"https://developer.android.com/training/camerax#consistency\" target=\"_blank\">CameraX Test Lab</a> to ensure CameraX works on the Android devices most people have in their pockets. The Test Lab opened in 2019 with 52 phone models. Today, the Test Lab has 150 phone models. We prioritize devices with the most daily active users over the past 28 days (28DAUs) and devices that leverage a diverse range of systems on a chip (SoCs). The Test Lab currently covers over 750 million 28DAUs. We also test many different Android versions, going back to Android 5.1 (Lollipop).\n</p>\n<p>\nTo generate reliable test results, each phone model has its own test enclosure to control for light and other environmental factors. Each enclosure contains two phones of the same model to simplify testing the front and back cameras. On the opposite side of the test enclosure from the phones, there’s a high-resolution test chart. This chart has many industry-standard tests for camera attributes like color correctness, resolution, sharpness, and dynamic range. The chart also has some specific elements for functional tests like face detection. \n</p>\n<p>\nWhen you adopt CameraX in your app, you get the assurance of this continuous testing across many devices and API levels. Additionally, we’re continuously making improvements to the Test Lab, including adding new phones based on market trends to ensure that the majority of your users are well represented. See our current <a href=\"https://developer.android.com/training/camerax/devices\" target=\"_blank\">test device list</a> for the latest inventory in our Test Lab. \n</p>\n<h3 style=\"text-align: left;\"><strong>Quirks</strong></h3>\n<p>\nGoogle provides a <a href=\"https://source.android.com/docs/compatibility/cts/camera-its-tests\" target=\"_blank\">Camera Image Test Suite</a> so that OEM’s cameras meet a baseline of consistency. Still, when dealing with the wide range of devices that run Android, there can be differences in the end user camera experience. CameraX includes an abstraction layer, called Quirks, to remove these variations in behavior so that CameraX behaves consistently across all devices with no effort from app developers.\n</p>\n<p>\nWe find these quirks based on our own manual testing, the Test Lab’s automatic testing, and bug reports filed in our public <a href=\"https://issuetracker.google.com/issues?q=status:open%20componentid:618491&amp;s=created_time:desc\" target=\"_blank\">CameraX issue tracker</a>. As of today, CameraX has over 30 Quirks that automatically fix behavior inconsistencies for developers. Here are a few examples:\n</p>\n<ul>\n\n<li><strong>OnePixelShiftQuirk: </strong>Some phones shift a column of pixels when converting YUV data to RGB. CameraX automatically corrects for this on those devices.\n\n</li><li><strong>ExtensionDisableQuirk:</strong> For phones that don’t support extensions or have broken behavior with extensions, CameraX disables certain extensions.\n\n</li><li><strong>CameraUseInconsistentTimebaseQuirk: </strong>Some phones do not properly timestamp video and audio. CameraX fixes the timestamps so that the video and audio align properly.\n</li>\n</ul>\n<p>\nThese are just a few examples of how CameraX automatically handles quirky device behavior. We will continue to add more corrections as we find them, so app developers won’t have to deal with these one-offs on their own. If you find inconsistent behavior on a device you’re testing, you can <a href=\"https://issuetracker.google.com/issues/new?component=618491&amp;template=1257717\" target=\"_blank\">file an issue</a> in the CameraX component detailing the behavior and the device it’s happening on.\n</p>\n<h3 style=\"text-align: left;\"><strong>Foldable phones</strong></h3>\n<p>\nFoldables continue to be the <a href=\"https://www.counterpointresearch.com/foldable-smartphone-shipments-2022/\" target=\"_blank\">fastest growing smartphone form factor</a>. Their flexibility in screen size adds complexity to camera development. Here are a few ways that CameraX simplifies the development of camera apps on foldables.\n</p>\n<p>\nCameraX’s <a href=\"https://developer.android.com/training/camerax/preview\" target=\"_blank\">Preview use case</a> handles differences between the aspect ratio of the camera and the aspect ratio of the screen. With traditional phone and tablet form factors, this difference should be small because <a href=\"https://source.android.com/docs/compatibility/13/android-13-cdd#755_camera_orientation\" target=\"_blank\">Section 7.5.5 of the Android Compatibility Definition Document</a> requires that the “long dimension of the camera aligns with the screen’s long dimension.” However, with foldable devices the screen aspect ratio can change, so this relationship might not always hold. With CameraX you can always preserve aspect ratio by filling the PreviewView (which may crop the preview image) or fitting the image into the PreviewView (which may result in letterboxing or pillarboxing). Set <a href=\"https://developer.android.com/reference/androidx/camera/view/PreviewView.ScaleType\" target=\"_blank\">PreviewView.ScaleType</a> to specify which method to use.\n</p>\n<p>\nThe increase in foldable devices also increases the possibility that your app may be used in a multi-window environment. CameraX is set up for <a href=\"https://developer.android.com/guide/topics/large-screens/multi-window-support\" target=\"_blank\">multi-window support</a> out-of-the-box. CameraX handles all aspects of lifecycle management for you, including the multi-window case where other apps can take priority access of singleton resources, such as the microphone or camera. This means no additional effort is required from app developers when using CameraX in a multi-window environment.\n</p>\n<p>\nWe’re always looking for more ways to improve CameraX to make it even easier to use. With respect to foldables, for example, we’re exploring ways to let developers call&nbsp;<span id=\"docs-internal-guid-067a95df-7fff-dba2-6e6b-c1c7abea7321\"><a href=\"https://developer.android.com/reference/kotlin/androidx/camera/core/ImageAnalysis.Builder#settargetresolution\" style=\"text-decoration-line: none;\"><span style=\"font-family: courier;\"><span style=\"background-color: #f0f0f0; color: #1155cc; font-size: 12pt; font-variant-east-asian: normal; font-variant-numeric: normal; text-decoration-line: underline; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;\">setTargetResolution</span><span style=\"background-color: #f0f0f0; color: #1155cc; font-size: 12pt; font-variant-east-asian: normal; font-variant-numeric: normal; text-decoration-line: underline; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;\">()</span></span></a></span>&nbsp;without having to take into account the different configurations a foldable device can be in. Keep an eye on this blog and our <a href=\"https://developer.android.com/jetpack/androidx/releases/camera\" target=\"_blank\">CameraX release notes</a> for updates on new features!\n</p>\n<h3 style=\"text-align: left;\"><strong>Getting started with CameraX</strong></h3>\n<p>\nWe have a number of resources to help you get started with CameraX. The best starting place is our <a href=\"https://developer.android.com/codelabs/camerax-getting-started\" target=\"_blank\">CameraX codelab</a>. If you want to dig a bit deeper with CameraX, check out our <a href=\"https://github.com/android/camera-samples\" target=\"_blank\">camera code samples</a>, ranging from a basic app to more advanced features like camera extensions. For an overview of everything CameraX has to offer, see our <a href=\"https://developer.android.com/training/camerax\" target=\"_blank\">CameraX documentation</a>. If you have any questions, feel free to reach out to us on our <a href=\"https://groups.google.com/a/android.com/g/camerax-developers\" target=\"_blank\">CameraX discussion group</a>.\n</p><p></p>",
  "link": [
    "",
    "",
    ""
  ],
  "author": {
    "name": "Android Developers",
    "uri": "http://www.blogger.com/profile/08588467489110681140",
    "email": "noreply@blogger.com",
    "gd:image": ""
  },
  "media:thumbnail": ""
}