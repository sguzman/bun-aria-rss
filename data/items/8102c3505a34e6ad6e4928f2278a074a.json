{
  "id": "tag:blogger.com,1999:blog-15045980.post-499881011831374904",
  "published": "2018-05-01T12:11:00.001-07:00",
  "updated": "2018-05-01T12:12:21.634-07:00",
  "category": [
    "",
    "",
    ""
  ],
  "title": "Code Health: Understanding Code In Review",
  "content": "<span id=\"docs-internal-guid-bda27e4f-1d0e-8d72-6e8d-b6375376fbc6\"></span><br /><div dir=\"ltr\" style=\"line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;\"><span style=\"font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;\"><span style=\"background-color: white; color: #222222; font-style: italic; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">This is another post in our </span><a href=\"https://testing.googleblog.com/2017/04/code-health-googles-internal-code.html\" style=\"text-decoration: none;\"><span style=\"background-color: white; color: #1155cc; font-style: italic; font-variant: normal; font-weight: 400; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;\">Code Health</span></a><span style=\"background-color: white; color: #222222; font-style: italic; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\"> series. A version of this post originally appeared in Google bathrooms worldwide as a Google </span><a href=\"https://testing.googleblog.com/2007/01/introducing-testing-on-toilet.html\" style=\"text-decoration: none;\"><span style=\"background-color: white; color: #1155cc; font-style: italic; font-variant: normal; font-weight: 400; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;\">Testing on the Toilet</span></a><span style=\"background-color: white; color: #222222; font-style: italic; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\"> episode. You can download a </span><a href=\"https://docs.google.com/document/d/1fhSq_bbzlS4amLlhLbHq7VYz3VySkbfy0uKlTn2rLl4/edit?usp=sharing\" rel=\"nofollow\" style=\"text-decoration: none;\"><span style=\"background-color: white; color: #1155cc; font-style: italic; font-variant: normal; font-weight: 400; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;\">printer-friendly version</span></a><span style=\"background-color: white; color: #222222; font-style: italic; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\"> to display in your office.</span></span></div><div dir=\"ltr\" style=\"line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;\"><span style=\"background-color: white; color: #222222; font-family: &quot;arial&quot;; font-size: 9.5pt; font-style: italic; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre;\"><br /></span></div><div dir=\"ltr\" style=\"line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;\"><span style=\"background-color: white; color: #222222; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\"><span style=\"font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;\">By Max Kanat-Alexander</span></span></div><div dir=\"ltr\" style=\"line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;\"><span style=\"background-color: white; color: #222222; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\"><span style=\"font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;\"><br /></span></span><span style=\"background-color: white; color: #222222; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\"><span style=\"font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;\"><br /></span></span></div><div dir=\"ltr\" style=\"line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;\"><span style=\"background-color: white; color: #222222; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\"><span id=\"docs-internal-guid-a9eb0958-1d10-1166-426e-fc302c9fafb2\"><span style=\"background-color: transparent; color: black; font-family: &quot;times&quot; , &quot;times new roman&quot; , serif; vertical-align: baseline;\">It's easy to assume that a developer who sends you some code for review is smarter than you'll ever be, and that's why you don't understand their code.</span></span></span></div><div dir=\"ltr\" style=\"line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;\"><span style=\"background-color: white; color: #222222; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\"><span style=\"background-color: transparent; color: black; font-size: 13pt; vertical-align: baseline;\"><br /></span></span></div><div dir=\"ltr\" style=\"line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;\"><span style=\"background-color: white; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\"><span id=\"docs-internal-guid-a9eb0958-1d10-2b95-5767-88453750d8e8\" style=\"font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;\"><span style=\"background-color: transparent; color: black; vertical-align: baseline;\">But in reality,</span><span style=\"background-color: transparent; color: #7e0021; font-weight: 700; vertical-align: baseline;\"> </span><span style=\"background-color: transparent; color: purple; font-weight: 700; vertical-align: baseline;\">if code is hard to understand, it's probably too complex</span><span style=\"background-color: transparent; color: black; vertical-align: baseline;\">. If you're familiar with the programming language being used,</span><span style=\"background-color: transparent; color: #7e0021; font-weight: 700; vertical-align: baseline;\"> </span><span style=\"background-color: transparent; color: purple; font-weight: 700; vertical-align: baseline;\">reading healthy code should be almost as easy as reading a book in your native language</span><span style=\"background-color: transparent; color: black; vertical-align: baseline;\">.</span></span></span></div><div dir=\"ltr\" style=\"line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;\"><span style=\"background-color: white; color: #222222; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\"><span style=\"background-color: transparent; color: black; font-size: 13pt; vertical-align: baseline;\"><br /></span></span></div><div dir=\"ltr\" style=\"line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;\"><span style=\"background-color: white; color: #222222; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\"><span id=\"docs-internal-guid-a9eb0958-1d10-4444-dc5c-150f5bbac905\"><span style=\"color: black; font-family: &quot;times&quot; , &quot;times new roman&quot; , serif; vertical-align: baseline;\">Pretend a developer sends you this block of Python to be reviewed:</span></span></span></div><div style=\"overflow-x: auto;\"><table class=\"my-bordered-table\" style=\"width: 613px;\"><tbody><tr><td style=\"background-color: #f4cccc; vertical-align: top; width: 607px;\"><pre style=\"background-color: #f4cccc; border: 0px; color: black; margin: 0px; padding-bottom: 0px; padding-left: 0px; padding-top: 0px;\"><span style=\"font-family: &quot;consolas&quot; , &quot;courier new&quot; , &quot;courier&quot; , monospace;\">def IsOkay(n):<br />  f = False<br />  for i in range(2, n):<br />    if n % i == 0:<br />      f = True<br />  return not f<br /></span></pre></td></tr></tbody></table></div><br /><span id=\"docs-internal-guid-a9eb0958-1d12-e8f0-0e06-849983bd10d9\" style=\"font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;\"><span style=\"background-color: white; color: purple; font-weight: 700; vertical-align: baseline; white-space: pre-wrap;\">Don't spend more than a few seconds trying to understand it</span><span style=\"background-color: white; vertical-align: baseline; white-space: pre-wrap;\">. Simply add a code review comment saying,</span><span style=\"background-color: white; color: maroon; font-weight: 700; vertical-align: baseline; white-space: pre-wrap;\"> </span><span style=\"background-color: white; vertical-align: baseline; white-space: pre-wrap;\">\"It's hard for me to understand this piece of code,\" or be more specific, and say,</span><span style=\"background-color: white; color: #7e0021; font-weight: 700; vertical-align: baseline; white-space: pre-wrap;\"> </span><span style=\"background-color: white; vertical-align: baseline; white-space: pre-wrap;\">\"Please use more descriptive names here.\"</span></span><br /><span style=\"background-color: white; font-size: 13pt; font-variant-east-asian: normal; font-variant-numeric: normal; vertical-align: baseline; white-space: pre-wrap;\"><br /></span><span id=\"docs-internal-guid-a9eb0958-1d13-04a9-5d6d-ed2044db832e\" style=\"font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;\"><span style=\"background-color: white; color: purple; font-weight: 700; vertical-align: baseline; white-space: pre-wrap;\">The developer then clarifies the code</span><span style=\"background-color: white; vertical-align: baseline; white-space: pre-wrap;\"> and sends it to you for review again:</span></span><br /><div style=\"overflow-x: auto;\"><table class=\"my-bordered-table\" style=\"width: 613px;\"><tbody><tr><td style=\"background-color: #fff2cc; vertical-align: top; width: 607px;\"><pre style=\"background-color: #fff2cc; border: 0px; color: black; margin: 0px; padding-bottom: 0px; padding-left: 0px; padding-top: 0px;\"><span style=\"font-family: &quot;consolas&quot; , &quot;courier new&quot; , &quot;courier&quot; , monospace;\">def IsPrime(n):<br />  for divisor in range(2, n / 2):<br />    if n % divisor == 0:<br />      return False<br /><br />  return True<br /></span></pre></td></tr></tbody></table></div><br /><span id=\"docs-internal-guid-a9eb0958-1d14-74ac-b4e9-3ae86e827efa\"><span style=\"background-color: white; font-variant-east-asian: normal; font-variant-numeric: normal; vertical-align: baseline; white-space: pre-wrap;\"><span style=\"font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;\">Now we can read it pretty easily, which is a benefit in itself.</span></span></span><br /><span style=\"background-color: white; font-size: 13pt; font-variant-east-asian: normal; font-variant-numeric: normal; vertical-align: baseline; white-space: pre-wrap;\"><br /></span><span id=\"docs-internal-guid-a9eb0958-1d14-8e8f-9ded-0a45de385efe\"><span style=\"font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;\"><span style=\"background-color: white; font-variant-east-asian: normal; font-variant-numeric: normal; vertical-align: baseline; white-space: pre-wrap;\">Often, </span><span style=\"background-color: white; font-variant-east-asian: normal; font-variant-numeric: normal; font-weight: 700; vertical-align: baseline; white-space: pre-wrap;\"><span style=\"color: purple;\">just asking a developer to clarify a piece of code will result in fundamental improvements</span></span><span style=\"background-color: white; font-variant-east-asian: normal; font-variant-numeric: normal; vertical-align: baseline; white-space: pre-wrap;\">. In this case,</span><span style=\"background-color: white; color: maroon; font-weight: 700; vertical-align: baseline; white-space: pre-wrap;\"> </span><span style=\"background-color: white; font-variant-east-asian: normal; font-variant-numeric: normal; vertical-align: baseline; white-space: pre-wrap;\">the developer noticed possible performance improvements since the code was easier to readâ€”the function now returns earlier when the number isn't prime, and the loop only goes to</span><span style=\"background-color: white; font-variant-east-asian: normal; font-variant-numeric: normal; font-weight: 700; vertical-align: baseline; white-space: pre-wrap;\"> </span></span><span style=\"background-color: white; font-family: &quot;courier new&quot;; font-weight: 700; vertical-align: baseline; white-space: pre-wrap;\">n/2</span><span style=\"font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;\"><span style=\"background-color: white; font-variant-east-asian: normal; font-variant-numeric: normal; vertical-align: baseline; white-space: pre-wrap;\"> instead of</span><span style=\"background-color: white; font-variant-east-asian: normal; font-variant-numeric: normal; font-weight: 700; vertical-align: baseline; white-space: pre-wrap;\"> </span></span><span style=\"background-color: white; font-family: &quot;courier new&quot;; font-weight: 700; vertical-align: baseline; white-space: pre-wrap;\">n</span><span style=\"background-color: white; font-variant-east-asian: normal; font-variant-numeric: normal; vertical-align: baseline; white-space: pre-wrap;\">. </span></span><br /><span style=\"background-color: white; font-size: 13pt; font-variant-east-asian: normal; font-variant-numeric: normal; vertical-align: baseline; white-space: pre-wrap;\"><br /></span><span id=\"docs-internal-guid-a9eb0958-1d14-b070-4ff8-2177a8f42d0c\"><span style=\"font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;\"><span style=\"color: purple;\"><span style=\"background-color: white; font-variant-east-asian: normal; font-variant-numeric: normal; font-weight: 700; vertical-align: baseline; white-space: pre-wrap;\">However, now that we can easily understand this code,</span><span style=\"background-color: white; font-variant-east-asian: normal; font-variant-numeric: normal; font-weight: 700; vertical-align: baseline; white-space: pre-wrap;\"> </span><span style=\"background-color: white; font-variant-east-asian: normal; font-variant-numeric: normal; font-weight: 700; vertical-align: baseline; white-space: pre-wrap;\">we can see many problems with it</span></span><span style=\"background-color: white; font-variant-east-asian: normal; font-variant-numeric: normal; vertical-align: baseline; white-space: pre-wrap;\">. For example, it has strange behavior with 0 and 1, and there are other problems, too. But most importantly, it is now apparent that</span><span style=\"background-color: white; color: #980000; font-weight: 700; vertical-align: baseline; white-space: pre-wrap;\"> </span><span style=\"background-color: white; font-variant-east-asian: normal; font-variant-numeric: normal; vertical-align: baseline; white-space: pre-wrap;\">this entire function should be removed and be replaced with a preexisting function for detecting if a number is prime. Clarifying the code helped both the developer and reviewer.</span></span></span><br /><span style=\"background-color: white; font-variant-east-asian: normal; font-variant-numeric: normal; vertical-align: baseline; white-space: pre-wrap;\"><span style=\"font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;\"><br /></span></span><span id=\"docs-internal-guid-a9eb0958-1d14-c904-1c55-5cf152a80551\"><span style=\"font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;\"><span style=\"background-color: white; font-variant-east-asian: normal; font-variant-numeric: normal; vertical-align: baseline; white-space: pre-wrap;\">In summary,</span><span style=\"background-color: white; color: #7e0021; font-weight: 700; vertical-align: baseline; white-space: pre-wrap;\"> </span><span style=\"background-color: white; font-variant-east-asian: normal; font-variant-numeric: normal; font-weight: 700; vertical-align: baseline; white-space: pre-wrap;\"><span style=\"color: purple;\">don't waste time reviewing code that is hard to understand, just ask for it to be clarified</span></span><span style=\"background-color: white; font-variant-east-asian: normal; font-variant-numeric: normal; vertical-align: baseline; white-space: pre-wrap;\">. In fact, such review comments are one of the most useful and important tools a code reviewer has!</span></span></span>",
  "link": [
    "",
    "",
    "",
    "",
    ""
  ],
  "author": {
    "name": "Google Testing Bloggers",
    "uri": "http://www.blogger.com/profile/03153388556673050910",
    "email": "noreply@blogger.com",
    "gd:image": ""
  },
  "thr:total": 1
}