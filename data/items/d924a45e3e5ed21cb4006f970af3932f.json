{
  "title": "Christmas on Sundays",
  "link": "",
  "published": "2017-01-02T00:00:00+00:00",
  "updated": "2017-01-02T00:00:00+00:00",
  "id": "https://wcbeard.github.io/blog/2017/01/02/xmas_dow",
  "content": "<script src=\"//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js\"></script>\n\n<link href=\"https://fonts.googleapis.com/css?family=Source+Sans+Pro\" rel=\"stylesheet\" type=\"text/css\" />\n\n<script type=\"text/x-mathjax-config\">\n  MathJax.Hub.Config({\n    tex2jax: {inlineMath: [[\"$\",\"$\"],[\"\\\\(\",\"\\\\)\"]]}\n  });\n</script>\n\n<!-- <script type=\"text/javascript\" src=\"/MathJax/MathJax.js?config=TeX-AMS_HTML-full\"></script> -->\n<script type=\"text/javascript\" src=\"https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML-full\"> </script>\n\n<style type=\"text/css\">\n  .input_hidden {\n    display: none;\n    //  margin-top: 5px;\n  }\n  .container {\n    /*width:140%; //!important;*/\n    width: none; //!important;\n    border: none !important;\n  }\n  div.prompt {\n    display: none;\n  }\n  .CodeMirror{\n    /*font-family: \"Consolas\", sans-serif;*/\n    font-size:18px;\n    line-height: 30px;\n  }\n  pre, kbd, samp {\n    /*font-family: 'Source Sans Pro', Helvetica, Arial, sans-serif;*/\n    /*line-height: 30px;*/\n    font-size:18px;\n  }\n  pre.code {\n    font-family: Consolas, monospace;\n    font-size: 12px;\n  }*/\n  /*p {\n    font-size:20px;\n    font-family: 'Source Sans Pro', Helvetica, Arial, sans-serif;\n    line-height: 30px;\n    text-align: left;\n  }*/\n  div.cell{\n    max-width:100%;\n    margin-left:auto;\n    margin-right:auto;\n  }\n  div.text_cell_render{\n    max-width:100%;\n    margin-left:auto;\n    margin-right:auto;\n  }\n  h2,h3,h4{\n    text-align: left;\n  }\n  </style>\n\n<script>\n  $(document).ready(function(){\n    $(\".output_wrapper\").click(function(){\n      $(this).prev('.input_hidden').slideToggle();\n    });\n  })\n  </script>\n\n<div class=\"cell border-box-sizing text_cell rendered\">\n<div class=\"prompt input_prompt\">\n</div>\n<div class=\"inner_cell\">\n<div class=\"text_cell_render border-box-sizing rendered_html\">\n<p>After this year's Christmas being on a Sunday\nrendered my normal holiday schedule completely disrupted (ok, perhaps negligibly inconvenienced would be more fitting), I wondered what the regularity or patterns of Sunday Christmases there might be. This is what I look for in this mini-post.</p>\n\n</div>\n</div>\n</div>\n<div class=\"cell border-box-sizing code_cell rendered\">\n<div class=\"input\">\n<div class=\"prompt input_prompt\">In&nbsp;[1]:</div>\n<div class=\"inner_cell\">\n    <div class=\"input_area\">\n<div class=\" highlight hl-ipython3\"><pre><span class=\"kn\">import</span> <span class=\"nn\">calendar</span> <span class=\"k\">as</span> <span class=\"nn\">cal</span>\n<span class=\"kn\">import</span> <span class=\"nn\">datetime</span> <span class=\"k\">as</span> <span class=\"nn\">dt</span>\n<span class=\"kn\">from</span> <span class=\"nn\">pandas</span> <span class=\"k\">import</span> <span class=\"n\">pandas</span> <span class=\"k\">as</span> <span class=\"n\">pd</span><span class=\"p\">,</span> <span class=\"n\">DataFrame</span>\n<span class=\"n\">pd</span><span class=\"o\">.</span><span class=\"n\">options</span><span class=\"o\">.</span><span class=\"n\">display</span><span class=\"o\">.</span><span class=\"n\">notebook_repr_html</span> <span class=\"o\">=</span> <span class=\"k\">False</span>\n</pre></div>\n\n</div>\n</div>\n</div>\n\n</div>\n<div class=\"cell border-box-sizing text_cell rendered\">\n<div class=\"prompt input_prompt\">\n</div>\n<div class=\"inner_cell\">\n<div class=\"text_cell_render border-box-sizing rendered_html\">\n<p>The following few lines give the date and day of week of all the Christmases in the 21st century:</p>\n\n</div>\n</div>\n</div>\n<div class=\"cell border-box-sizing code_cell rendered\">\n<div class=\"input\">\n<div class=\"prompt input_prompt\">In&nbsp;[2]:</div>\n<div class=\"inner_cell\">\n    <div class=\"input_area\">\n<div class=\" highlight hl-ipython3\"><pre><span class=\"n\">christmas</span> <span class=\"o\">=</span> <span class=\"k\">lambda</span> <span class=\"n\">year</span><span class=\"p\">:</span> <span class=\"n\">dt</span><span class=\"o\">.</span><span class=\"n\">date</span><span class=\"p\">(</span><span class=\"n\">year</span><span class=\"p\">,</span> <span class=\"mi\">12</span><span class=\"p\">,</span> <span class=\"mi\">25</span><span class=\"p\">)</span>\n\n<span class=\"n\">ydf</span> <span class=\"o\">=</span> <span class=\"n\">DataFrame</span><span class=\"p\">({</span><span class=\"s\">&#39;Yr&#39;</span><span class=\"p\">:</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"mi\">2000</span><span class=\"p\">,</span> <span class=\"mi\">2100</span><span class=\"p\">)})</span>\n<span class=\"n\">ydf</span><span class=\"p\">[</span><span class=\"s\">&#39;Xmas&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">pd</span><span class=\"o\">.</span><span class=\"n\">to_datetime</span><span class=\"p\">(</span><span class=\"n\">ydf</span><span class=\"o\">.</span><span class=\"n\">Yr</span><span class=\"o\">.</span><span class=\"n\">map</span><span class=\"p\">(</span><span class=\"n\">christmas</span><span class=\"p\">))</span>\n<span class=\"n\">ydf</span><span class=\"p\">[</span><span class=\"s\">&#39;Xmas_dow&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">ydf</span><span class=\"o\">.</span><span class=\"n\">Xmas</span><span class=\"o\">.</span><span class=\"n\">dt</span><span class=\"o\">.</span><span class=\"n\">strftime</span><span class=\"p\">(</span><span class=\"s\">&#39;%a&#39;</span><span class=\"p\">)</span>\n<span class=\"n\">ydf</span><span class=\"p\">[:</span><span class=\"mi\">10</span><span class=\"p\">]</span>\n</pre></div>\n\n</div>\n</div>\n</div>\n\n<div class=\"output_wrapper\">\n<div class=\"output\">\n\n\n<div class=\"output_area\"><div class=\"prompt output_prompt\">Out[2]:</div>\n\n\n<div class=\"output_text output_subarea output_execute_result\">\n<pre>     Yr       Xmas Xmas_dow\n0  2000 2000-12-25      Mon\n1  2001 2001-12-25      Tue\n2  2002 2002-12-25      Wed\n3  2003 2003-12-25      Thu\n4  2004 2004-12-25      Sat\n5  2005 2005-12-25      Sun\n6  2006 2006-12-25      Mon\n7  2007 2007-12-25      Tue\n8  2008 2008-12-25      Thu\n9  2009 2009-12-25      Fri</pre>\n</div>\n\n</div>\n\n</div>\n</div>\n\n</div>\n<div class=\"cell border-box-sizing text_cell rendered\">\n<div class=\"prompt input_prompt\">\n</div>\n<div class=\"inner_cell\">\n<div class=\"text_cell_render border-box-sizing rendered_html\">\n<p>A simple rule of thumb we can see is that the day of week that Christmas falls on increases by one every year, except for leap years where it increases by 2 days.</p>\n<p>The following block encodes something like Sunday epochs (<code>Sun_epoch</code>), where the count is only incremented on the years with a Christmas on a Sunday.</p>\n\n</div>\n</div>\n</div>\n<div class=\"cell border-box-sizing code_cell rendered\">\n<div class=\"input\">\n<div class=\"prompt input_prompt\">In&nbsp;[3]:</div>\n<div class=\"inner_cell\">\n    <div class=\"input_area\">\n<div class=\" highlight hl-ipython3\"><pre><span class=\"n\">ydf</span><span class=\"p\">[</span><span class=\"s\">&#39;Sunday&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">ydf</span><span class=\"o\">.</span><span class=\"n\">Xmas_dow</span> <span class=\"o\">==</span> <span class=\"s\">&#39;Sun&#39;</span>\n<span class=\"n\">ydf</span><span class=\"p\">[</span><span class=\"s\">&#39;Sun_epoch&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">ydf</span><span class=\"o\">.</span><span class=\"n\">Sunday</span><span class=\"o\">.</span><span class=\"n\">cumsum</span><span class=\"p\">()</span>\n<span class=\"n\">ydf</span><span class=\"p\">[:</span><span class=\"mi\">7</span><span class=\"p\">]</span>\n</pre></div>\n\n</div>\n</div>\n</div>\n\n<div class=\"output_wrapper\">\n<div class=\"output\">\n\n\n<div class=\"output_area\"><div class=\"prompt output_prompt\">Out[3]:</div>\n\n\n<div class=\"output_text output_subarea output_execute_result\">\n<pre>     Yr       Xmas Xmas_dow Sunday  Sun_epoch\n0  2000 2000-12-25      Mon  False          0\n1  2001 2001-12-25      Tue  False          0\n2  2002 2002-12-25      Wed  False          0\n3  2003 2003-12-25      Thu  False          0\n4  2004 2004-12-25      Sat  False          0\n5  2005 2005-12-25      Sun   True          1\n6  2006 2006-12-25      Mon  False          1</pre>\n</div>\n\n</div>\n\n</div>\n</div>\n\n</div>\n<div class=\"cell border-box-sizing text_cell rendered\">\n<div class=\"prompt input_prompt\">\n</div>\n<div class=\"inner_cell\">\n<div class=\"text_cell_render border-box-sizing rendered_html\">\n<p>This enables a quick summary of the intervals, showing a pattern where we'll typically have to wait 5 or 6 years for a Sunday, but occasionally have to wait up to 11 years:</p>\n\n</div>\n</div>\n</div>\n<div class=\"cell border-box-sizing code_cell rendered\">\n<div class=\"input\">\n<div class=\"prompt input_prompt\">In&nbsp;[4]:</div>\n<div class=\"inner_cell\">\n    <div class=\"input_area\">\n<div class=\" highlight hl-ipython3\"><pre><span class=\"n\">ydf</span><span class=\"o\">.</span><span class=\"n\">query</span><span class=\"p\">(</span><span class=\"s\">&#39;Sun_epoch &gt; 0&#39;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">groupby</span><span class=\"p\">(</span><span class=\"s\">&#39;Sun_epoch&#39;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">Yr</span><span class=\"o\">.</span><span class=\"n\">agg</span><span class=\"p\">([</span><span class=\"s\">&#39;size&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;min&#39;</span><span class=\"p\">])</span>\n</pre></div>\n\n</div>\n</div>\n</div>\n\n<div class=\"output_wrapper\">\n<div class=\"output\">\n\n\n<div class=\"output_area\"><div class=\"prompt output_prompt\">Out[4]:</div>\n\n\n<div class=\"output_text output_subarea output_execute_result\">\n<pre>           size   min\nSun_epoch            \n1             6  2005\n2             5  2011\n3             6  2016\n4            11  2022\n5             6  2033\n6             5  2039\n7             6  2044\n8            11  2050\n9             6  2061\n10            5  2067\n11            6  2072\n12           11  2078\n13            6  2089\n14            5  2095</pre>\n</div>\n\n</div>\n\n</div>\n</div>\n\n</div>\n<div class=\"cell border-box-sizing text_cell rendered\">\n<div class=\"prompt input_prompt\">\n</div>\n<div class=\"inner_cell\">\n<div class=\"text_cell_render border-box-sizing rendered_html\">\n<p>It looks like 2016 began an epoch of Sunday-free Christmases that will last for 6 years, after which we'll have a dry spot of 11 years without the inconvenient Sunday Christmas.</p>\n<p>A last thing I'm curious about is the regularity of Christmas occurring on a weekend, which is almost as undesirable for me:</p>\n\n</div>\n</div>\n</div>\n<div class=\"cell border-box-sizing code_cell rendered\">\n<div class=\"input\">\n<div class=\"prompt input_prompt\">In&nbsp;[5]:</div>\n<div class=\"inner_cell\">\n    <div class=\"input_area\">\n<div class=\" highlight hl-ipython3\"><pre><span class=\"n\">ydf</span><span class=\"p\">[</span><span class=\"s\">&#39;Weekend&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">ydf</span><span class=\"o\">.</span><span class=\"n\">Xmas_dow</span><span class=\"o\">.</span><span class=\"n\">isin</span><span class=\"p\">([</span><span class=\"s\">&#39;Sat&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;Sun&#39;</span><span class=\"p\">])</span>\n<span class=\"n\">ydf</span><span class=\"p\">[</span><span class=\"s\">&#39;Wkd_epoch&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">ydf</span><span class=\"o\">.</span><span class=\"n\">Weekend</span><span class=\"o\">.</span><span class=\"n\">cumsum</span><span class=\"p\">()</span>\n<span class=\"n\">ydf</span><span class=\"o\">.</span><span class=\"n\">query</span><span class=\"p\">(</span><span class=\"s\">&#39;Wkd_epoch &gt; 0&#39;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">groupby</span><span class=\"p\">(</span><span class=\"s\">&#39;Wkd_epoch&#39;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">Yr</span><span class=\"o\">.</span><span class=\"n\">agg</span><span class=\"p\">([</span><span class=\"s\">&#39;size&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;min&#39;</span><span class=\"p\">])</span>\n</pre></div>\n\n</div>\n</div>\n</div>\n\n<div class=\"output_wrapper\">\n<div class=\"output\">\n\n\n<div class=\"output_area\"><div class=\"prompt output_prompt\">Out[5]:</div>\n\n\n<div class=\"output_text output_subarea output_execute_result\">\n<pre>           size   min\nWkd_epoch            \n1             1  2004\n2             5  2005\n3             1  2010\n4             5  2011\n5             5  2016\n6             1  2021\n7             5  2022\n8             5  2027\n9             1  2032\n10            5  2033\n11            1  2038\n12            5  2039\n13            5  2044\n14            1  2049\n15            5  2050\n16            5  2055\n17            1  2060\n18            5  2061\n19            1  2066\n20            5  2067\n21            5  2072\n22            1  2077\n23            5  2078\n24            5  2083\n25            1  2088\n26            5  2089\n27            1  2094\n28            5  2095</pre>\n</div>\n\n</div>\n\n</div>\n</div>\n\n</div>\n<div class=\"cell border-box-sizing text_cell rendered\">\n<div class=\"prompt input_prompt\">\n</div>\n<div class=\"inner_cell\">\n<div class=\"text_cell_render border-box-sizing rendered_html\">\n<p>As expected, these occur much more frequently, and without the periodic 11-year respite.</p>\n\n</div>\n</div>\n</div>",
  "author": {
    "name": ""
  },
  "category": "",
  "summary": "After this year's Christmas being on a Sunday rendered my normal holiday schedule completely disrupted (ok, perhaps negligibly inconvenienced would be more fitting), I wondered what the regularity or patterns of Sunday Christmases there might be. This is what I look for in this mini-post. In&nbsp;[1]: import calendar as cal import datetime as dt from pandas import pandas as pd, DataFrame pd.options.display.notebook_repr_html = False The following few lines give the date and day of week of all the Christmases in the 21st century: In&nbsp;[2]: christmas = lambda year: dt.date(year, 12, 25) ydf = DataFrame({&#39;Yr&#39;: range(2000, 2100)}) ydf[&#39;Xmas&#39;] = pd.to_datetime(ydf.Yr.map(christmas)) ydf[&#39;Xmas_dow&#39;] = ydf.Xmas.dt.strftime(&#39;%a&#39;) ydf[:10] Out[2]: Yr Xmas Xmas_dow 0 2000 2000-12-25 Mon 1 2001 2001-12-25 Tue 2 2002 2002-12-25 Wed 3 2003 2003-12-25 Thu 4 2004 2004-12-25 Sat 5 2005 2005-12-25 Sun 6 2006 2006-12-25 Mon 7 2007 2007-12-25 Tue 8 2008 2008-12-25 Thu 9 2009 2009-12-25 Fri A simple rule of thumb we can see is that the day of week that Christmas falls on increases by one every year, except for leap years where it increases by 2 days. The following block encodes something like Sunday epochs (Sun_epoch), where the count is only incremented on the years with a Christmas on a Sunday. In&nbsp;[3]: ydf[&#39;Sunday&#39;] = ydf.Xmas_dow == &#39;Sun&#39; ydf[&#39;Sun_epoch&#39;] = ydf.Sunday.cumsum() ydf[:7] Out[3]: Yr Xmas Xmas_dow Sunday Sun_epoch 0 2000 2000-12-25 Mon False 0 1 2001 2001-12-25 Tue False 0 2 2002 2002-12-25 Wed False 0 3 2003 2003-12-25 Thu False 0 4 2004 2004-12-25 Sat False 0 5 2005 2005-12-25 Sun True 1 6 2006 2006-12-25 Mon False 1 This enables a quick summary of the intervals, showing a pattern where we'll typically have to wait 5 or 6 years for a Sunday, but occasionally have to wait up to 11 years: In&nbsp;[4]: ydf.query(&#39;Sun_epoch &gt; 0&#39;).groupby(&#39;Sun_epoch&#39;).Yr.agg([&#39;size&#39;, &#39;min&#39;]) Out[4]: size min Sun_epoch 1 6 2005 2 5 2011 3 6 2016 4 11 2022 5 6 2033 6 5 2039 7 6 2044 8 11 2050 9 6 2061 10 5 2067 11 6 2072 12 11 2078 13 6 2089 14 5 2095 It looks like 2016 began an epoch of Sunday-free Christmases that will last for 6 years, after which we'll have a dry spot of 11 years without the inconvenient Sunday Christmas. A last thing I'm curious about is the regularity of Christmas occurring on a weekend, which is almost as undesirable for me: In&nbsp;[5]: ydf[&#39;Weekend&#39;] = ydf.Xmas_dow.isin([&#39;Sat&#39;, &#39;Sun&#39;]) ydf[&#39;Wkd_epoch&#39;] = ydf.Weekend.cumsum() ydf.query(&#39;Wkd_epoch &gt; 0&#39;).groupby(&#39;Wkd_epoch&#39;).Yr.agg([&#39;size&#39;, &#39;min&#39;]) Out[5]: size min Wkd_epoch 1 1 2004 2 5 2005 3 1 2010 4 5 2011 5 5 2016 6 1 2021 7 5 2022 8 5 2027 9 1 2032 10 5 2033 11 1 2038 12 5 2039 13 5 2044 14 1 2049 15 5 2050 16 5 2055 17 1 2060 18 5 2061 19 1 2066 20 5 2067 21 5 2072 22 1 2077 23 5 2078 24 5 2083 25 1 2088 26 5 2089 27 1 2094 28 5 2095 As expected, these occur much more frequently, and without the periodic 11-year respite."
}