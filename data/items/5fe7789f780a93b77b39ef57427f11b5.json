{
  "title": "Tabular Data I/O in Julia",
  "description": "<p>Importing tabular data into Julia can be done in (at least) three ways: reading a delimited file into an array, reading a delimited file into a DataFrame and accessing databases using ODBC.</p>",
  "pubDate": "Tue, 06 Aug 2013 10:05:38 +0000",
  "link": "http://randyzwitch.com/julia-import-data/",
  "guid": "http://randyzwitch.com/julia-import-data/",
  "content": "<p>Importing tabular data into Julia can be done in (at least) three ways: reading a delimited file into an array, reading a delimited file into a DataFrame and accessing databases using ODBC.</p>\n\n<h3 id=\"reading-a-file-into-an-array-using-readdlm\">Reading a file into an array using readdlm</h3>\n\n<p>The most basic way to read data into Julia is through the use of the <code class=\"language-plaintext highlighter-rouge\">readdlm</code> function, which will create an array:</p>\n\n<figure class=\"highlight\"><pre><code class=\"language-julia\" data-lang=\"julia\"><table class=\"rouge-table\"><tbody><tr><td class=\"gutter gl\"><pre class=\"lineno\">1\n</pre></td><td class=\"code\"><pre><span class=\"n\">readdlm</span><span class=\"x\">(</span><span class=\"n\">source</span><span class=\"x\">,</span> <span class=\"n\">delim</span><span class=\"o\">::</span><span class=\"kt\">Char</span><span class=\"x\">,</span> <span class=\"n\">T</span><span class=\"o\">::</span><span class=\"kt\">Type</span><span class=\"x\">;</span> <span class=\"n\">options</span><span class=\"o\">...</span><span class=\"x\">)</span>\n</pre></td></tr></tbody></table></code></pre></figure>\n\n<p>If you are reading in a fairly normal delimited file, you can get away with just using the first two arguments, <code class=\"language-plaintext highlighter-rouge\">source</code> and <code class=\"language-plaintext highlighter-rouge\">delim</code>:</p>\n\n<figure class=\"highlight\"><pre><code class=\"language-julia\" data-lang=\"julia\"><table class=\"rouge-table\"><tbody><tr><td class=\"gutter gl\"><pre class=\"lineno\">1\n2\n3\n4\n5\n6\n7\n</pre></td><td class=\"code\"><pre><span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"n\">airline_array</span> <span class=\"o\">=</span> <span class=\"n\">readdlm</span><span class=\"x\">(</span><span class=\"s\">\"/Users/randyzwitch/airline/1987.csv\"</span><span class=\"x\">,</span> <span class=\"sc\">','</span><span class=\"x\">);</span>\n\n<span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"n\">size</span><span class=\"x\">(</span><span class=\"n\">airline_array</span><span class=\"x\">)</span>\n<span class=\"x\">(</span><span class=\"mi\">1311827</span><span class=\"x\">,</span><span class=\"mi\">29</span><span class=\"x\">)</span>\n\n<span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"n\">typeof</span><span class=\"x\">(</span><span class=\"n\">airline_array</span><span class=\"x\">)</span>\n<span class=\"kt\">Array</span><span class=\"x\">{</span><span class=\"kt\">Any</span><span class=\"x\">,</span><span class=\"mi\">2</span><span class=\"x\">}</span>\n</pre></td></tr></tbody></table></code></pre></figure>\n\n<p>It’s important to note that by only specifying the first two arguments, you leave it up to Julia to determine the type of array to return. In the code example above, an array of type <code class=\"language-plaintext highlighter-rouge\">Any</code> is returned, as the .csv file I read in was not of homogenous type such as <code class=\"language-plaintext highlighter-rouge\">Int64</code> or <del>ASCII</del><code class=\"language-plaintext highlighter-rouge\">String</code>. If you know for certain which type of array you want, you specify the data type using the <code class=\"language-plaintext highlighter-rouge\">type</code> argument:</p>\n\n<figure class=\"highlight\"><pre><code class=\"language-julia\" data-lang=\"julia\"><table class=\"rouge-table\"><tbody><tr><td class=\"gutter gl\"><pre class=\"lineno\">1\n2\n3\n4\n5\n6\n7\n</pre></td><td class=\"code\"><pre><span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"n\">airline_array</span> <span class=\"o\">=</span> <span class=\"n\">readdlm</span><span class=\"x\">(</span><span class=\"s\">\"/Users/randyzwitch/airline/1987.csv\"</span><span class=\"x\">,</span> <span class=\"sc\">','</span> <span class=\"x\">,</span> <span class=\"kt\">String</span><span class=\"x\">);</span>\n\n<span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"n\">size</span><span class=\"x\">(</span><span class=\"n\">airline_array</span><span class=\"x\">)</span>\n<span class=\"x\">(</span><span class=\"mi\">1311827</span><span class=\"x\">,</span><span class=\"mi\">29</span><span class=\"x\">)</span>\n\n<span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"n\">typeof</span><span class=\"x\">(</span><span class=\"n\">airline_array</span><span class=\"x\">)</span>\n<span class=\"kt\">Array</span><span class=\"x\">{</span><span class=\"kt\">String</span><span class=\"x\">,</span><span class=\"mi\">2</span><span class=\"x\">}</span>\n</pre></td></tr></tbody></table></code></pre></figure>\n\n<p>It’s probably the case that unless you are looking to do linear algebra or other specific mathy type work, you’ll likely find that reading your data into a DataFrame will be more comfortable to work with (especially if you are coming from an R, Python/pandas or even spreadsheet tradition).</p>\n\n<p>To write an array out to a file, you can use the <code class=\"language-plaintext highlighter-rouge\">writedlm</code> function (defaults to comma-separated):</p>\n\n<figure class=\"highlight\"><pre><code class=\"language-julia\" data-lang=\"julia\"><table class=\"rouge-table\"><tbody><tr><td class=\"gutter gl\"><pre class=\"lineno\">1\n</pre></td><td class=\"code\"><pre><span class=\"n\">writedlm</span><span class=\"x\">(</span><span class=\"n\">filename</span><span class=\"x\">,</span> <span class=\"n\">array</span><span class=\"x\">,</span> <span class=\"n\">delim</span><span class=\"o\">::</span><span class=\"kt\">Char</span><span class=\"x\">)</span>\n</pre></td></tr></tbody></table></code></pre></figure>\n\n<h3 id=\"reading-a-file-into-a-dataframe-using-readtable\">Reading a file into a DataFrame using readtable</h3>\n\n<p>As I covered in my prior blog post about Julia, you can also <a title=\"Julia for Beginners\" href=\"http://randyzwitch.com/julia-language-beginners/\" target=\"_blank\">read in delimited files into Julia using the DataFrames package</a>, which returns a DataFrame instead of an array. Besides just being able to read in delimited files, the DataFrames package also supports reading in gzippped files on the fly:</p>\n\n<figure class=\"highlight\"><pre><code class=\"language-julia\" data-lang=\"julia\"><table class=\"rouge-table\"><tbody><tr><td class=\"gutter gl\"><pre class=\"lineno\">1\n2\n3\n4\n5\n6\n7\n8\n9\n</pre></td><td class=\"code\"><pre><span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"k\">using</span> <span class=\"n\">DataFrames</span>\n\n<span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"n\">airline_df</span> <span class=\"o\">=</span> <span class=\"n\">readtable</span><span class=\"x\">(</span><span class=\"s\">\"/Users/randyzwitch/airline/1987.csv.gz\"</span><span class=\"x\">);</span>\n\n<span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"n\">size</span><span class=\"x\">(</span><span class=\"n\">airline_df</span><span class=\"x\">)</span>\n<span class=\"x\">(</span><span class=\"mi\">1311826</span><span class=\"x\">,</span><span class=\"mi\">29</span><span class=\"x\">)</span>\n\n<span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"n\">typeof</span><span class=\"x\">(</span><span class=\"n\">airline_df</span><span class=\"x\">)</span>\n<span class=\"n\">DataFrame</span>  <span class=\"x\">(</span><span class=\"n\">use</span> <span class=\"n\">methods</span><span class=\"x\">(</span><span class=\"n\">DataFrame</span><span class=\"x\">)</span> <span class=\"n\">to</span> <span class=\"n\">see</span> <span class=\"n\">constructors</span><span class=\"x\">)</span>\n</pre></td></tr></tbody></table></code></pre></figure>\n\n<p>From what I understand, in the future you will be able to read files directly from Amazon S3 into a DataFrame (this is already supported in the <a title=\"Julia Amazon S3\" href=\"https://github.com/amitmurthy/AWS.jl\" target=\"_blank\">AWS package</a>), but for now, the DataFrames package works only on local files. Writing a DataFrame to file can be done with the <code class=\"language-plaintext highlighter-rouge\">writetable</code> function:</p>\n\n<figure class=\"highlight\"><pre><code class=\"language-julia\" data-lang=\"julia\"><table class=\"rouge-table\"><tbody><tr><td class=\"gutter gl\"><pre class=\"lineno\">1\n</pre></td><td class=\"code\"><pre><span class=\"n\">writetable</span><span class=\"x\">(</span><span class=\"n\">filename</span><span class=\"o\">::</span><span class=\"kt\">String</span><span class=\"x\">,</span> <span class=\"n\">df</span><span class=\"o\">::</span><span class=\"n\">DataFrame</span><span class=\"x\">)</span>\n</pre></td></tr></tbody></table></code></pre></figure>\n\n<p>By default, the <a title=\"Julia DataFrames\" href=\"http://juliastats.github.io/DataFrames.jl/io.html\" target=\"_blank\"><code class=\"language-plaintext highlighter-rouge\">writetable</code> function</a> will use the delimiter specified by the filename extension and default to printing the column names as a header.</p>\n\n<h3 id=\"accessing-databases-using-odbc\">Accessing Databases using ODBC</h3>\n\n<p>The third major way of importing tabular data into Julia is through the use of ODBC access to various databases such as MySQL and PostgreSQL.</p>\n\n<h4 id=\"using-a-dsn\">Using a DSN</h4>\n\n<p>The <a title=\"Julia ODBC package\" href=\"https://github.com/karbarcca/ODBC.jl\" target=\"_blank\">Julia ODBC package</a> provides functionality to connect to a database using a Data Source Name (DSN). Assuming you store all the credentials in your DSN (server name, username, password, etc.), connecting to a database is as easy as:</p>\n\n<figure class=\"highlight\"><pre><code class=\"language-julia\" data-lang=\"julia\"><table class=\"rouge-table\"><tbody><tr><td class=\"gutter gl\"><pre class=\"lineno\">1\n2\n3\n4\n</pre></td><td class=\"code\"><pre><span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"k\">using</span> <span class=\"n\">ODBC</span>\n\n<span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"n\">ODBC</span><span class=\"o\">.</span><span class=\"n\">connect</span><span class=\"x\">(</span><span class=\"s\">\"MySQL\"</span><span class=\"x\">)</span>\n<span class=\"n\">Connection</span> <span class=\"mi\">1</span> <span class=\"n\">to</span> <span class=\"n\">MySQL</span> <span class=\"n\">successful</span><span class=\"o\">.</span>\n</pre></td></tr></tbody></table></code></pre></figure>\n\n<p>Of course, if you don’t want to store your password in your DSN (especially in the case where there are multiple users for a computer), you can pass the <code class=\"language-plaintext highlighter-rouge\">usr</code> and <code class=\"language-plaintext highlighter-rouge\">pwd</code> arguments to the <code class=\"language-plaintext highlighter-rouge\">ODBC.connect</code> function:</p>\n\n<figure class=\"highlight\"><pre><code class=\"language-julia\" data-lang=\"julia\"><table class=\"rouge-table\"><tbody><tr><td class=\"gutter gl\"><pre class=\"lineno\">1\n</pre></td><td class=\"code\"><pre><span class=\"n\">ODBC</span><span class=\"o\">.</span><span class=\"n\">connect</span><span class=\"x\">(</span><span class=\"n\">dsn</span><span class=\"x\">;</span> <span class=\"n\">usr</span><span class=\"o\">=</span><span class=\"s\">\"\"</span><span class=\"x\">,</span> <span class=\"n\">pwd</span><span class=\"o\">=</span><span class=\"s\">\"\"</span><span class=\"x\">)</span>\n</pre></td></tr></tbody></table></code></pre></figure>\n\n<h4 id=\"using-a-connection-string\">Using a connection string</h4>\n\n<p>Alternatively, you can build your own connection strings within a Julia session using the <code class=\"language-plaintext highlighter-rouge\">advancedconnect</code> function:</p>\n\n<figure class=\"highlight\"><pre><code class=\"language-julia\" data-lang=\"julia\"><table class=\"rouge-table\"><tbody><tr><td class=\"gutter gl\"><pre class=\"lineno\">1\n2\n3\n4\n5\n6\n7\n</pre></td><td class=\"code\"><pre><span class=\"c\">#Amazon Redshift/Postgres connection string</span>\n<span class=\"n\">Julia</span><span class=\"o\">&gt;</span> <span class=\"n\">red</span> <span class=\"o\">=</span> <span class=\"n\">advancedconnect</span><span class=\"x\">(</span><span class=\"s\">\"Driver={psqlODBC};ServerName=reporting.XXXXX.us-east-1.redshift.amazonaws.com;Username=XXXX;Password=XXXX;Database=XXXX;Port=XXXX\"</span><span class=\"x\">);</span>\n<span class=\"n\">Connection</span> <span class=\"mi\">1</span> <span class=\"n\">to</span> <span class=\"n\">Driver</span><span class=\"o\">=</span><span class=\"x\">{</span><span class=\"n\">psqlODBC</span><span class=\"x\">};</span><span class=\"n\">ServerName</span><span class=\"o\">=</span><span class=\"n\">reporting</span><span class=\"o\">.</span><span class=\"n\">XXXXX</span><span class=\"o\">.</span><span class=\"n\">us</span><span class=\"o\">-</span><span class=\"n\">east</span><span class=\"o\">-</span><span class=\"mf\">1.</span><span class=\"n\">redshift</span><span class=\"o\">.</span><span class=\"n\">amazonaws</span><span class=\"o\">.</span><span class=\"n\">com</span><span class=\"x\">;</span><span class=\"n\">Username</span><span class=\"o\">=</span><span class=\"n\">XXXX</span><span class=\"x\">;</span><span class=\"n\">Password</span><span class=\"o\">=</span><span class=\"n\">XXXX</span><span class=\"x\">;</span><span class=\"n\">Database</span><span class=\"o\">=</span><span class=\"n\">XXXX</span><span class=\"x\">;</span><span class=\"n\">Port</span><span class=\"o\">=</span><span class=\"n\">XXXX</span> <span class=\"n\">successful</span><span class=\"o\">.</span>\n\n<span class=\"c\">#MySQL connection string</span>\n<span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"n\">my</span> <span class=\"o\">=</span> <span class=\"n\">advancedconnect</span><span class=\"x\">(</span><span class=\"s\">\"Driver={MySQL};user=root;server=localhost;database=airline;\"</span><span class=\"x\">)</span>\n<span class=\"n\">Connection</span> <span class=\"mi\">1</span> <span class=\"n\">to</span> <span class=\"n\">Driver</span><span class=\"o\">=</span><span class=\"x\">{</span><span class=\"n\">MySQL</span><span class=\"x\">};</span><span class=\"n\">user</span><span class=\"o\">=</span><span class=\"n\">root</span><span class=\"x\">;</span><span class=\"n\">server</span><span class=\"o\">=</span><span class=\"n\">localhost</span><span class=\"x\">;</span><span class=\"n\">database</span><span class=\"o\">=</span><span class=\"n\">airline</span><span class=\"x\">;</span> <span class=\"n\">successful</span><span class=\"o\">.</span>\n</pre></td></tr></tbody></table></code></pre></figure>\n\n<p>Regardless of which way you connect, you can query data using the <code class=\"language-plaintext highlighter-rouge\">query</code> function. If you want your output as a DataFrame, you can assign the result of the function to an object. If you want to save the results to a file, you specify the <code class=\"language-plaintext highlighter-rouge\">file</code> argument:</p>\n\n<figure class=\"highlight\"><pre><code class=\"language-julia\" data-lang=\"julia\"><table class=\"rouge-table\"><tbody><tr><td class=\"gutter gl\"><pre class=\"lineno\">1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n</pre></td><td class=\"code\"><pre><span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"k\">using</span> <span class=\"n\">ODBC</span>\n\n<span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"n\">ODBC</span><span class=\"o\">.</span><span class=\"n\">connect</span><span class=\"x\">(</span><span class=\"s\">\"MySQL\"</span><span class=\"x\">)</span>\n<span class=\"n\">Connection</span> <span class=\"mi\">1</span> <span class=\"n\">to</span> <span class=\"n\">MySQL</span> <span class=\"n\">successful</span><span class=\"o\">.</span>\n\n<span class=\"c\">#Save query results into a DataFrame called 'results'</span>\n<span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"n\">results</span> <span class=\"o\">=</span> <span class=\"n\">query</span><span class=\"x\">(</span><span class=\"s\">\"Select * from a1987;\"</span><span class=\"x\">);</span>\n\n<span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"n\">typeof</span><span class=\"x\">(</span><span class=\"n\">results</span><span class=\"x\">)</span>\n<span class=\"n\">DataFrame</span>  <span class=\"x\">(</span><span class=\"n\">use</span> <span class=\"n\">methods</span><span class=\"x\">(</span><span class=\"n\">DataFrame</span><span class=\"x\">)</span> <span class=\"n\">to</span> <span class=\"n\">see</span> <span class=\"n\">constructors</span><span class=\"x\">)</span>\n\n<span class=\"c\">#Save query results to a file, tab-delimited (default)</span>\n<span class=\"n\">julia</span><span class=\"o\">&gt;</span> <span class=\"n\">query</span><span class=\"x\">(</span><span class=\"s\">\"Select * from a1987;\"</span><span class=\"x\">,</span> <span class=\"n\">file</span><span class=\"o\">=</span><span class=\"s\">\"output.tab\"</span><span class=\"x\">,</span> <span class=\"n\">delim</span> <span class=\"o\">=</span> <span class=\"sc\">'\\t'</span><span class=\"x\">);</span>\n</pre></td></tr></tbody></table></code></pre></figure>\n\n<h3 id=\"summary\">Summary</h3>\n\n<p>Overall, importing data into Julia is no easier/more difficult than any other language. The biggest thing I’ve noticed thus far is that Julia is a bit less efficient than Python/pandas or R in terms of the amount of RAM needed to store data. In my experience, this is really only an issue once you are working with 1GB+ files (of course, depending on the resources available to you on your machine).</p>\n\n<p><em>Edit 3/25/2016: A much more up-to-date method of <a href=\"https://cbrownley.wordpress.com/2015/05/29/reading_writing_csv_with_r_python_julia/\" target=\"_blank\">reading CSV data into Julia</a> can be found at this <a href=\"https://cbrownley.wordpress.com/2015/05/29/reading_writing_csv_with_r_python_julia/\" target=\"_blank\">blog post by Clinton Brownley</a>.</em></p>"
}