{
  "title": "These Are Your Tweets on LDA (Part II)",
  "link": "https://wellecks.wordpress.com/2014/09/06/these-are-your-tweets-on-lda-part-ii/",
  "comments": "https://wellecks.wordpress.com/2014/09/06/these-are-your-tweets-on-lda-part-ii/#respond",
  "dc:creator": "wellecks",
  "pubDate": "Sat, 06 Sep 2014 20:32:05 +0000",
  "category": [
    "artificial intelligence",
    "machine learning",
    "d3.js",
    "Latent Dirichlet Allocation",
    "LDA",
    "Machine learning",
    "topic modeling"
  ],
  "guid": "http://wellecks.wordpress.com/?p=830",
  "description": "In the last post, I gave an overview of Latent Dirichlet Allocation (LDA), and walked through an application of LDA on @BarackObama&#8217;s tweets. The final product was a set of word clouds, one per topic, that showed the weighted words that defined the topic. In this post, we&#8217;ll develop a dynamic visualization that incorporates multiple topics, allowing [&#8230;]",
  "content:encoded": "<p><a href=\"https://wellecks.wordpress.com/2014/09/03/these-are-your-tweets-on-lda-part-i/\">In the last post</a>, I gave an overview of Latent Dirichlet Allocation (LDA), and walked through an application of LDA on @BarackObama&#8217;s tweets. The final product was a set of word clouds, one per topic, that showed the weighted words that defined the topic.</p>\n<p>In this post, we&#8217;ll develop a dynamic visualization that incorporates <em>multiple</em> topics, allowing us to gain of a high level view of the topics and also drill down to see the words that define each topic. Through a simple web interface, we&#8217;ll also be able to view data from different twitter users.</p>\n<p><a title=\"LDA Visualization\" href=\"http://ldaviz.herokuapp.com/\">Click here for an example of the finished product</a>.</p>\n<p>As before, all of the code is <a href=\"https://github.com/wellecks/lda_tweets\">available on GitHub</a>. The visualization-related code is found in the <a href=\"https://github.com/wellecks/lda_tweets/tree/master/viz/static\"><em>viz/static</em></a> directory.</p>\n<p style=\"text-align:center;\"><strong>Harnessing the Data</strong></p>\n<p>In the last post, we downloaded tweets for a user and found 50 topics that occur in the user&#8217;s tweets along with the top 20 words for each topic. We also found the composition of topics across all of the tweets, allowing us to rank the topics by prominence. For our visualization, we&#8217;ll choose to display the 10 highest ranked topics for a given twitter user name.</p>\n<p>We need a visualization that can show multiple groupings of data. Each of the 10 groupings has 20 words, so we&#8217;d also like one that avoids the potential information overload. Finally, we&#8217;d like to incorporate the frequencies that we have for each word.</p>\n<p style=\"text-align:center;\"><b>d3</b></p>\n<p>A good fit for these requirements is <a href=\"http://d3js.org/\">d3.js</a>&#8216;s <a href=\"http://mbostock.github.io/d3/talk/20111116/pack-hierarchy.html\">Zoomable Pack Layout</a>, which gives us a high level view of each grouping as a bubble. Upon clicking a bubble, we can see the data that comprises the bubble, as well as each data point&#8217;s relative weight:</p>\n<p>&nbsp;</p>\n<div data-shortcode=\"caption\" id=\"attachment_834\" style=\"width: 535px\" class=\"wp-caption aligncenter\"><img loading=\"lazy\" aria-describedby=\"caption-attachment-834\" data-attachment-id=\"834\" data-permalink=\"https://wellecks.wordpress.com/2014/09/06/these-are-your-tweets-on-lda-part-ii/screen-shot-2014-09-06-at-2-38-24-pm/#main\" data-orig-file=\"https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-2-38-24-pm.png\" data-orig-size=\"1798,1576\" data-comments-opened=\"1\" data-image-meta=\"{\"aperture\":\"0\",\"credit\":\"\",\"camera\":\"\",\"caption\":\"\",\"created_timestamp\":\"0\",\"copyright\":\"\",\"focal_length\":\"0\",\"iso\":\"0\",\"shutter_speed\":\"0\",\"title\":\"\",\"orientation\":\"0\"}\" data-image-title=\"d3\" data-image-description=\"\" data-image-caption=\"<p>d3 to the rescue</p>\n\" data-medium-file=\"https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-2-38-24-pm.png?w=300\" data-large-file=\"https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-2-38-24-pm.png?w=525\" class=\"size-large wp-image-834\" src=\"https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-2-38-24-pm.png?w=525&#038;h=460\" alt=\"d3 to the rescue\" width=\"525\" height=\"460\" srcset=\"https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-2-38-24-pm.png?w=525&h=460 525w, https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-2-38-24-pm.png?w=1050&h=920 1050w, https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-2-38-24-pm.png?w=150&h=131 150w, https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-2-38-24-pm.png?w=300&h=263 300w, https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-2-38-24-pm.png?w=768&h=673 768w, https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-2-38-24-pm.png?w=1024&h=898 1024w\" sizes=\"(max-width: 525px) 100vw, 525px\" /><p id=\"caption-attachment-834\" class=\"wp-caption-text\">d3 Zoomable Pack Layout</p></div>\n<p>In our case, each top-level bubble is a topic, and each inner bubble is a word, with its relative size determined by the word&#8217;s frequency.</p>\n<p>Since the d3 visualization takes JSON as input, in order to plug in our LDA output data we simply create a <em>toJSON()</em> method in <a href=\"https://github.com/wellecks/lda_tweets/blob/master/src/lda/TopicModel.java\">TopicModel.java</a> that outputs the data associated with the top 10 topics to a JSON file. The &#8216;name&#8217; of each topic is simply the most probably word in the topic.</p>\n<p>Now, when the LDA process (the main() method in TopicModel.java) is run for a twitter user, the code will create a corresponding JSON file in <em>viz/json</em>. The JSON structure:</p>\n<pre>{\n \"name\":\"\",\n \"children\":[\n    {\n     \"name\": {topic_1_name},\n     \"children\":[\n       {\n        \"name\": {topic_1_word_1},\n        \"size\": {topic_1_word_1_freq}\n       },\n       {\n        \"name\": {topic_1_word_2},\n        \"size\": {topic_1_word_2_freq}\n       },\n       {\n        \"name\": {topic_1_word_3},\n        \"size\": {topic_1_word_3_freq}\n       },\n....</pre>\n<p style=\"text-align:center;\"><b>Javascripting</b></p>\n<p style=\"text-align:left;\">Now, we make slight modifications to the javascript code embedded in the given d3 visualization. Our goal is to be able to toggle between results for different twitter users; we&#8217;d like to switch from investigating the <a href=\"https://twitter.com/nytimes\">@nytimes</a> topics to getting a sense of what <a href=\"https://twitter.com/KingJames\">@KingJames</a> tweets about.</p>\n<p style=\"text-align:left;\">To do so, we add a drop-down to index.html, such that each time a user is selected on the drop-down, their corresponding JSON is loaded by the <em>show()</em> function in <a href=\"https://github.com/wellecks/lda_tweets/blob/master/viz/static/js/viz.js\">viz.js</a>. Hence we also change the <em>show()</em> function to reload the visualization each time it is called.</p>\n<p style=\"text-align:center;\"><strong>Making The Visualizations Visible</strong></p>\n<p style=\"text-align:left;\">To run the code locally, navigate to the <em>viz/static</em> directory and start an HTTP server to serve the content, e.g.</p>\n<pre style=\"text-align:left;\">cd {project_root}/viz/static\npython -m SimpleHTTPServer</pre>\n<p style=\"text-align:left;\">then navigate to <a href=\"http://localhost:8000/index.html\">http://localhost:8000/index.html</a> to see the visualization.</p>\n<p style=\"text-align:left;\">By selecting nytimes, we see the following visualization which gives a sense of the topics:</p>\n<p style=\"text-align:left;\"><a href=\"https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-3-25-21-pm.png\"><img loading=\"lazy\" data-attachment-id=\"840\" data-permalink=\"https://wellecks.wordpress.com/2014/09/06/these-are-your-tweets-on-lda-part-ii/screen-shot-2014-09-06-at-3-25-21-pm/#main\" data-orig-file=\"https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-3-25-21-pm.png\" data-orig-size=\"1798,1596\" data-comments-opened=\"1\" data-image-meta=\"{\"aperture\":\"0\",\"credit\":\"\",\"camera\":\"\",\"caption\":\"\",\"created_timestamp\":\"0\",\"copyright\":\"\",\"focal_length\":\"0\",\"iso\":\"0\",\"shutter_speed\":\"0\",\"title\":\"\",\"orientation\":\"0\"}\" data-image-title=\"@nytimes topics\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-3-25-21-pm.png?w=300\" data-large-file=\"https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-3-25-21-pm.png?w=525\" class=\"aligncenter size-large wp-image-840\" src=\"https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-3-25-21-pm.png?w=525&#038;h=466\" alt=\"@nytimes topics\" width=\"525\" height=\"466\" srcset=\"https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-3-25-21-pm.png?w=525&h=466 525w, https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-3-25-21-pm.png?w=1050&h=932 1050w, https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-3-25-21-pm.png?w=150&h=133 150w, https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-3-25-21-pm.png?w=300&h=266 300w, https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-3-25-21-pm.png?w=768&h=682 768w, https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-3-25-21-pm.png?w=1024&h=909 1024w\" sizes=\"(max-width: 525px) 100vw, 525px\" /></a></p>\n<p style=\"text-align:left;\">Upon clicking the &#8216;gaza&#8217; topic, we see the top words that comprise the topic:</p>\n<p style=\"text-align:left;\"><a href=\"https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-3-22-07-pm.png\"><img loading=\"lazy\" data-attachment-id=\"839\" data-permalink=\"https://wellecks.wordpress.com/2014/09/06/these-are-your-tweets-on-lda-part-ii/screen-shot-2014-09-06-at-3-22-07-pm/#main\" data-orig-file=\"https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-3-22-07-pm.png\" data-orig-size=\"1618,1538\" data-comments-opened=\"1\" data-image-meta=\"{\"aperture\":\"0\",\"credit\":\"\",\"camera\":\"\",\"caption\":\"\",\"created_timestamp\":\"0\",\"copyright\":\"\",\"focal_length\":\"0\",\"iso\":\"0\",\"shutter_speed\":\"0\",\"title\":\"\",\"orientation\":\"0\"}\" data-image-title=\"&#8216;gaza&#8217; topic\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-3-22-07-pm.png?w=300\" data-large-file=\"https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-3-22-07-pm.png?w=525\" class=\"aligncenter size-large wp-image-839\" src=\"https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-3-22-07-pm.png?w=525&#038;h=499\" alt=\"'gaza' topic\" width=\"525\" height=\"499\" srcset=\"https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-3-22-07-pm.png?w=525&h=499 525w, https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-3-22-07-pm.png?w=1050&h=998 1050w, https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-3-22-07-pm.png?w=150&h=143 150w, https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-3-22-07-pm.png?w=300&h=285 300w, https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-3-22-07-pm.png?w=768&h=730 768w, https://wellecks.files.wordpress.com/2014/09/screen-shot-2014-09-06-at-3-22-07-pm.png?w=1024&h=973 1024w\" sizes=\"(max-width: 525px) 100vw, 525px\" /></a></p>\n<p style=\"text-align:left;\">I&#8217;ve also used Heroku to put an example of the finished visualization with data from 10 different twitter usernames here:</p>\n<p style=\"text-align:center;\"><a title=\"LDA Visualization\" href=\"http://ldaviz.herokuapp.com/\">http://ldaviz.herokuapp.com/</a></p>\n<p style=\"text-align:left;\">Have fun exploring the various topics!</p>\n",
  "wfw:commentRss": "https://wellecks.wordpress.com/2014/09/06/these-are-your-tweets-on-lda-part-ii/feed/",
  "slash:comments": 0,
  "media:content": [
    {
      "media:title": "wellecks"
    },
    {
      "media:title": "d3 to the rescue"
    },
    {
      "media:title": "@nytimes topics"
    },
    {
      "media:title": "&#039;gaza&#039; topic"
    }
  ]
}