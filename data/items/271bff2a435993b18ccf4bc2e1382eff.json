{
  "title": "Calling RSiteCatalyst From Python",
  "description": "<blockquote class=\"twitter-tweet\" data-lang=\"en\">\n  <p dir=\"ltr\" lang=\"en\">\n    <a href=\"https://twitter.com/randyzwitch\">@randyzwitch</a> Do you know if anyone has gotten RSiteCat running in a Jupyter Notebook that ran RPY2? Tired of using 2 different environments\n  </p>\n\n</blockquote>",
  "pubDate": "Mon, 22 Feb 2016 10:34:44 +0000",
  "link": "http://randyzwitch.com/rsitecatalyst-adobe-analytics-python/",
  "guid": "http://randyzwitch.com/rsitecatalyst-adobe-analytics-python/",
  "content": "<blockquote class=\"twitter-tweet\" data-lang=\"en\">\n  <p dir=\"ltr\" lang=\"en\">\n    <a href=\"https://twitter.com/randyzwitch\">@randyzwitch</a> Do you know if anyone has gotten RSiteCat running in a Jupyter Notebook that ran RPY2? Tired of using 2 different environments\n  </p>\n\n  <p>\n    — Adam Gitzes (@FootballActuary) <a href=\"https://twitter.com/FootballActuary/status/700350988842995712\">February 18, 2016</a>\n  </p>\n</blockquote>\n\n<p>This will be a very short post, because the only “new” information I’m going to provide is the minimal example to answer the question. Yes, it is in fact possible to call RSiteCatalyst from Python and seems to work well. The most important things are 1) making sure you install <a href=\"http://rpy2.readthedocs.org/en/version_2.7.x/\">rpy2</a> and 2) loading <a href=\"http://pandas.pydata.org/\">Pandas</a> (since so much of RSiteCatalyst is API calls returning data frames). It doesn’t hurt to already have experience using <a href=\"http://randyzwitch.com/tags/#rsitecatalyst\">RSiteCatalyst</a> in <a href=\"/tags/#r\">R</a>, since all we’re doing here is using Python to pass code to R.</p>\n\n<h2 id=\"setup-code-rpy2-and-pandas\">Setup Code: rpy2 and Pandas</h2>\n\n<p>To call an R package from Python, the rpy2 package works very well, both from the REPL and Jupyter Notebook. For RSiteCatalyst, here is the set up code:</p>\n\n<figure class=\"highlight\"><pre><code class=\"language-python\" data-lang=\"python\"><table class=\"rouge-table\"><tbody><tr><td class=\"gutter gl\"><pre class=\"lineno\">1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n</pre></td><td class=\"code\"><pre><span class=\"kn\">import</span> <span class=\"nn\">pandas</span> <span class=\"k\">as</span> <span class=\"n\">pd</span>\n\n<span class=\"kn\">import</span> <span class=\"nn\">rpy2.robjects.packages</span> <span class=\"k\">as</span> <span class=\"n\">rpackages</span>\n<span class=\"kn\">from</span> <span class=\"nn\">rpy2.robjects</span> <span class=\"kn\">import</span> <span class=\"n\">pandas2ri</span>\n\n<span class=\"c1\"># Activate ability to translate R objects to pandas data frames\n</span><span class=\"n\">pandas2ri</span><span class=\"p\">.</span><span class=\"n\">activate</span><span class=\"p\">()</span>\n\n<span class=\"c1\"># Load RSiteCatalyst into Python\n</span><span class=\"n\">rsc</span> <span class=\"o\">=</span> <span class=\"n\">rpackages</span><span class=\"p\">.</span><span class=\"n\">importr</span><span class=\"p\">(</span><span class=\"s\">'RSiteCatalyst'</span><span class=\"p\">)</span>\n</pre></td></tr></tbody></table></code></pre></figure>\n\n<p>With this code run, now you can make calls to the RSiteCatalyst R package, just as if you were in R itself.</p>\n\n<h2 id=\"sample-call-getreportsuites\">Sample Call: GetReportSuites</h2>\n\n<p>Just to prove it works, here’s a code snippet using <code class=\"language-plaintext highlighter-rouge\">GetReportSuites()</code>:</p>\n\n<figure class=\"highlight\"><pre><code class=\"language-python\" data-lang=\"python\"><table class=\"rouge-table\"><tbody><tr><td class=\"gutter gl\"><pre class=\"lineno\">1\n2\n3\n</pre></td><td class=\"code\"><pre><span class=\"c1\"># Call GetReportSuites to confim it works\n</span><span class=\"n\">grs</span> <span class=\"o\">=</span> <span class=\"n\">rsc</span><span class=\"p\">.</span><span class=\"n\">GetReportSuites</span><span class=\"p\">()</span>\n<span class=\"n\">pandas2ri</span><span class=\"p\">.</span><span class=\"n\">ri2py_dataframe</span><span class=\"p\">(</span><span class=\"n\">grs</span><span class=\"p\">)</span>\n</pre></td></tr></tbody></table></code></pre></figure>\n\n<p>And in Jupyter Notebook, you would see something similar to:</p>\n\n<p><img src=\"/wp-content/uploads/2016/02/rsitecatalyst-rpy2-1-1024x424.png\" alt=\"rsitecatalyst-rpy2\" /></p>\n\n<h2 id=\"but-why\">But, Why?</h2>\n\n<p>So that’s about it…if you wanted to, you could call RSiteCatalyst from Python without much effort. There aren’t a whole lot of reasons to do so, unless like Adam above, you’d rather just use Python. I suppose if you wanted to use some other Python packages, such as <a href=\"http://flask.pocoo.org/docs/0.10/\">Flask</a> to create a dashboard or <a href=\"http://stanford.edu/~mwaskom/software/seaborn/\">Seaborn</a> for visualization you might want to do this. Until I got this tweet, it never occurred to me to do this, so YMMV.</p>\n\n<p><em>Edit, 2/26/16: Adam Gitzes, who originally asked the question, also provides a different solution using Jupyter Notebook magics at his <a href=\"http://maassmedia.com/r-site-catalyst-python.php\">blog post here</a></em></p>"
}